2025-04-13 17:54:39 - root - INFO - 日志系统初始化完成
2025-04-13 17:54:45 - app.main - INFO - 数据库表创建完成
2025-04-13 18:14:43 - root - INFO - 日志系统初始化完成
2025-04-13 18:14:43 - app.main - INFO - 数据库表创建完成
2025-04-13 18:17:02 - root - INFO - 日志系统初始化完成
2025-04-13 18:17:02 - app.main - INFO - 数据库表创建完成
2025-04-14 11:18:56 - passlib.handlers.bcrypt - WARNING - (trapped) error reading bcrypt version
Traceback (most recent call last):
  File "/Users/wangke/notebook-ai/notebook-backend/venv312/lib/python3.12/site-packages/passlib/handlers/bcrypt.py", line 620, in _load_backend_mixin
    version = _bcrypt.__about__.__version__
              ^^^^^^^^^^^^^^^^^
AttributeError: module 'bcrypt' has no attribute '__about__'
2025-04-14 12:55:06 - root - INFO - 日志系统初始化完成
2025-04-14 12:55:06 - app.main - INFO - 数据库表创建完成
2025-04-14 12:55:59 - root - INFO - 日志系统初始化完成
2025-04-14 12:56:00 - app.main - INFO - 数据库表创建完成
2025-04-14 12:56:14 - root - INFO - 日志系统初始化完成
2025-04-14 12:56:14 - app.main - INFO - 数据库表创建完成
2025-04-14 13:20:44 - root - INFO - 日志系统初始化完成
2025-04-14 13:20:45 - app.main - INFO - 数据库表创建完成
2025-04-14 13:20:48 - root - INFO - 日志系统初始化完成
2025-04-14 13:20:48 - __main__ - INFO - 数据库表创建完成
2025-04-14 13:21:06 - root - INFO - 日志系统初始化完成
2025-04-14 13:21:07 - app.main - INFO - 数据库表创建完成
2025-04-14 13:21:13 - root - INFO - 日志系统初始化完成
2025-04-14 13:21:13 - app.main - INFO - 数据库表创建完成
2025-04-14 13:22:41 - root - INFO - 日志系统初始化完成
2025-04-14 13:22:42 - app.main - INFO - 数据库表创建完成
2025-04-14 13:22:42 - passlib.handlers.bcrypt - WARNING - (trapped) error reading bcrypt version
Traceback (most recent call last):
  File "/Users/wangke/notebook-ai/notebook-backend/venv312/lib/python3.12/site-packages/passlib/handlers/bcrypt.py", line 620, in _load_backend_mixin
    version = _bcrypt.__about__.__version__
              ^^^^^^^^^^^^^^^^^
AttributeError: module 'bcrypt' has no attribute '__about__'
2025-04-14 13:23:45 - root - INFO - 日志系统初始化完成
2025-04-14 13:23:45 - app.main - INFO - 数据库表创建完成
2025-04-14 13:24:16 - root - INFO - 日志系统初始化完成
2025-04-14 13:24:16 - app.main - INFO - 数据库表创建完成
2025-04-14 13:24:17 - root - INFO - 日志系统初始化完成
2025-04-14 13:24:17 - __main__ - INFO - 数据库表创建完成
2025-04-14 13:24:34 - root - INFO - 日志系统初始化完成
2025-04-14 13:24:35 - app.main - INFO - 数据库表创建完成
2025-04-14 13:32:13 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-14 13:32:13 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-14 13:32:13 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-14 13:32:13 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-14 13:32:13 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-14 13:32:14 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-14 13:32:14 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-14 13:32:14 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-14 13:32:14 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-14 13:32:14 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-14 13:32:34 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-14 13:32:34 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-14 13:32:34 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-14 13:32:34 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-14 13:36:26 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-14 13:36:26 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-14 13:37:04 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-14 13:37:04 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-14 13:38:52 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-14 13:38:52 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-14 13:39:22 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-14 13:39:22 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-14 13:39:22 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-14 13:39:22 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-14 13:39:22 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-14 13:39:22 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-14 13:39:22 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-14 13:39:22 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-14 13:39:42 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-14 13:39:42 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-14 13:39:42 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-14 13:39:42 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-14 13:39:58 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-14 13:39:58 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-14 13:39:59 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-14 13:39:59 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-14 13:39:59 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-14 13:39:59 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-14 13:39:59 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-14 13:39:59 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-14 13:40:35 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-14 13:40:35 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-14 13:40:35 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-14 13:40:35 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-14 13:44:01 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-14 13:44:01 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-14 13:44:45 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-14 13:44:45 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-14 13:45:10 - root - INFO - 日志系统初始化完成
2025-04-14 13:45:10 - root - INFO - 日志系统初始化完成
2025-04-14 13:45:11 - app.main - INFO - 数据库表创建完成
2025-04-14 13:45:11 - app.main - INFO - 数据库表创建完成
2025-04-14 13:45:38 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-14 13:45:39 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-14 13:45:39 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-14 13:45:39 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-14 13:45:39 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-14 13:45:39 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-14 13:45:45 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-14 13:45:45 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-14 13:45:50 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-14 13:45:51 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-14 13:45:52 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-14 13:45:52 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-14 13:45:53 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-14 13:45:53 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-14 13:46:02 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-14 13:46:02 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-14 13:46:02 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-14 13:46:02 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-14 13:46:02 - app.routers.agents - INFO - 收到流式查询请求: 用户=wangigor, 会话ID=4
2025-04-14 13:46:02 - app.routers.agents - INFO - 开始处理流式响应: 会话ID=4, 查询=测试测试...
2025-04-14 13:46:02 - app.routers.agents - INFO - 已保存用户消息到会话 4
2025-04-14 13:46:03 - app.routers.agents - INFO - 启动Agent流式响应 for session: 4
2025-04-14 13:46:03 - app.services.vector_store - INFO - 执行相似度搜索: 查询='测试测试...', k=5
2025-04-14 13:46:03 - httpx - INFO - HTTP Request: POST http://wangigor.ddns.net:30063/collections/knowledge_base/points/query "HTTP/1.1 200 OK"
2025-04-14 13:46:03 - app.services.vector_store - INFO - 相似度搜索找到 0 个结果
2025-04-14 13:46:05 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-04-14 13:46:06 - app.routers.agents - INFO - 已保存AI响应到会话 4, 长度: 307
2025-04-14 13:46:06 - app.routers.agents - INFO - 流式响应完成 for session: 4
2025-04-14 13:46:06 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-14 13:46:06 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-14 13:46:23 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-14 13:46:23 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-14 13:46:24 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-14 13:46:24 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-14 13:46:24 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-14 13:46:24 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-14 13:46:34 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-14 13:46:35 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-14 13:46:39 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-14 13:46:39 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-14 13:46:57 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-14 13:46:57 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-14 13:46:57 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-14 13:46:57 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-14 13:46:57 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-14 13:46:57 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-14 13:47:20 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-14 13:47:20 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-14 13:47:21 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-14 13:47:21 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-14 13:47:21 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-14 13:47:21 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-14 13:51:11 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-14 13:51:11 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-14 13:51:24 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-14 13:51:24 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-14 13:51:30 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-14 13:51:30 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-14 13:51:31 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-14 13:51:31 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-14 13:51:31 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-14 13:51:31 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-14 13:51:34 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-14 13:51:34 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-14 13:51:34 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-14 13:51:34 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-14 13:51:34 - app.routers.agents - INFO - 收到流式查询请求: 用户=wangigor, 会话ID=4
2025-04-14 13:51:34 - app.routers.agents - INFO - 开始处理流式响应: 会话ID=4, 查询=测试...
2025-04-14 13:51:35 - app.routers.agents - INFO - 已保存用户消息到会话 4
2025-04-14 13:51:35 - app.routers.agents - INFO - 启动Agent流式响应 for session: 4
2025-04-14 13:51:35 - app.services.vector_store - INFO - 执行相似度搜索: 查询='测试...', k=5
2025-04-14 13:51:35 - httpx - INFO - HTTP Request: POST http://wangigor.ddns.net:30063/collections/knowledge_base/points/query "HTTP/1.1 200 OK"
2025-04-14 13:51:35 - app.services.vector_store - INFO - 相似度搜索找到 0 个结果
2025-04-14 13:51:36 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-04-14 13:51:39 - app.routers.agents - INFO - 已保存AI响应到会话 4, 长度: 348
2025-04-14 13:51:39 - app.routers.agents - INFO - 流式响应完成 for session: 4
2025-04-14 13:51:39 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-14 13:51:39 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-14 13:52:03 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-14 13:52:03 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-14 13:52:03 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-14 13:52:03 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-14 13:52:03 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-14 13:52:03 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-14 13:56:16 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-14 13:56:16 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-14 13:56:33 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-14 13:56:33 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-14 13:56:40 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-14 13:56:40 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-14 13:56:40 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-14 13:56:40 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-14 13:56:51 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-14 13:56:51 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-14 13:56:51 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-14 13:56:51 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-14 13:56:51 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-14 13:56:51 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-14 13:56:55 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-14 13:56:55 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-14 13:56:56 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-14 13:56:56 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-14 13:56:56 - app.routers.agents - INFO - 收到流式查询请求: 用户=wangigor, 会话ID=4
2025-04-14 13:56:56 - app.routers.agents - INFO - 开始处理流式响应: 会话ID=4, 查询=测试测试...
2025-04-14 13:56:56 - app.routers.agents - INFO - 已保存用户消息到会话 4
2025-04-14 13:56:56 - app.routers.agents - INFO - 启动Agent流式响应 for session: 4
2025-04-14 13:56:56 - app.services.vector_store - INFO - 执行相似度搜索: 查询='测试测试...', k=5
2025-04-14 13:56:57 - httpx - INFO - HTTP Request: POST http://wangigor.ddns.net:30063/collections/knowledge_base/points/query "HTTP/1.1 200 OK"
2025-04-14 13:56:57 - app.services.vector_store - INFO - 相似度搜索找到 0 个结果
2025-04-14 13:56:58 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-04-14 13:57:00 - app.routers.agents - INFO - 已保存AI响应到会话 4, 长度: 353
2025-04-14 13:57:00 - app.routers.agents - INFO - 流式响应完成 for session: 4
2025-04-14 13:57:00 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-14 13:57:00 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-14 13:57:06 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-14 13:57:06 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-14 13:57:06 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-14 13:57:06 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-14 13:57:06 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-14 13:57:06 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-14 13:59:29 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-14 13:59:29 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-14 14:00:21 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-14 14:00:21 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-14 14:00:28 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-14 14:00:28 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-14 14:00:28 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-14 14:00:28 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-14 14:00:29 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-14 14:00:29 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-14 14:00:33 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-14 14:00:33 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-14 14:00:33 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-14 14:00:33 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-14 14:00:33 - app.routers.agents - INFO - 收到流式查询请求: 用户=wangigor, 会话ID=4
2025-04-14 14:00:33 - app.routers.agents - INFO - 开始处理流式响应: 会话ID=4, 查询=测试...
2025-04-14 14:00:33 - app.routers.agents - INFO - 已保存用户消息到会话 4
2025-04-14 14:00:33 - app.routers.agents - INFO - 启动Agent流式响应 for session: 4
2025-04-14 14:00:33 - app.services.vector_store - INFO - 执行相似度搜索: 查询='测试...', k=5
2025-04-14 14:00:33 - httpx - INFO - HTTP Request: POST http://wangigor.ddns.net:30063/collections/knowledge_base/points/query "HTTP/1.1 200 OK"
2025-04-14 14:00:33 - app.services.vector_store - INFO - 相似度搜索找到 0 个结果
2025-04-14 14:00:35 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-04-14 14:00:37 - app.routers.agents - INFO - 已保存AI响应到会话 4, 长度: 348
2025-04-14 14:00:37 - app.routers.agents - INFO - 流式响应完成 for session: 4
2025-04-14 14:00:37 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-14 14:00:38 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-14 14:00:43 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-14 14:00:44 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-14 14:00:44 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-14 14:00:44 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-14 14:00:44 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-14 14:00:44 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-14 14:02:45 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-14 14:02:45 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-14 14:02:52 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-14 14:02:52 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-14 14:09:04 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-14 14:09:04 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-14 14:09:05 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-14 14:09:05 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-14 14:09:05 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-14 14:09:05 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-14 14:09:08 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-14 14:09:08 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-14 14:09:08 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-14 14:09:09 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-14 14:09:09 - app.routers.agents - INFO - 收到流式查询请求: 用户=wangigor, 会话ID=4
2025-04-14 14:09:09 - app.routers.agents - INFO - 开始处理流式响应: 会话ID=4, 查询=测试...
2025-04-14 14:09:09 - app.routers.agents - INFO - 已保存用户消息到会话 4
2025-04-14 14:09:09 - app.routers.agents - INFO - 启动Agent流式响应 for session: 4
2025-04-14 14:09:09 - app.services.vector_store - INFO - 执行相似度搜索: 查询='测试...', k=5
2025-04-14 14:09:10 - httpx - INFO - HTTP Request: POST http://wangigor.ddns.net:30063/collections/knowledge_base/points/query "HTTP/1.1 200 OK"
2025-04-14 14:09:10 - app.services.vector_store - INFO - 相似度搜索找到 0 个结果
2025-04-14 14:09:11 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-04-14 14:09:15 - app.routers.agents - INFO - 已保存AI响应到会话 4, 长度: 348
2025-04-14 14:09:15 - app.routers.agents - INFO - 流式响应完成 for session: 4
2025-04-14 14:09:15 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-14 14:09:15 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-14 14:09:58 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-14 14:09:58 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-14 14:10:28 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-14 14:10:29 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-14 14:10:32 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-14 14:10:32 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-14 14:10:32 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-14 14:10:32 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-14 14:10:32 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-14 14:10:32 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-14 14:10:36 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-14 14:10:36 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-14 14:10:36 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-14 14:10:37 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-14 14:10:37 - app.routers.agents - INFO - 收到流式查询请求: 用户=wangigor, 会话ID=4
2025-04-14 14:10:37 - app.routers.agents - INFO - 开始处理流式响应: 会话ID=4, 查询=测试...
2025-04-14 14:10:37 - app.routers.agents - INFO - 已保存用户消息到会话 4
2025-04-14 14:10:37 - app.routers.agents - INFO - 启动Agent流式响应 for session: 4
2025-04-14 14:10:37 - app.services.vector_store - INFO - 执行相似度搜索: 查询='测试...', k=5
2025-04-14 14:10:38 - httpx - INFO - HTTP Request: POST http://wangigor.ddns.net:30063/collections/knowledge_base/points/query "HTTP/1.1 200 OK"
2025-04-14 14:10:38 - app.services.vector_store - INFO - 相似度搜索找到 0 个结果
2025-04-14 14:10:39 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-04-14 14:10:42 - app.routers.agents - INFO - 已保存AI响应到会话 4, 长度: 348
2025-04-14 14:10:42 - app.routers.agents - INFO - 流式响应完成 for session: 4
2025-04-14 14:10:42 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-14 14:10:42 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-14 14:10:54 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-14 14:10:54 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-14 14:10:54 - app.routers.agents - INFO - 收到流式查询请求: 用户=wangigor, 会话ID=4
2025-04-14 14:10:54 - app.routers.agents - INFO - 开始处理流式响应: 会话ID=4, 查询=测试...
2025-04-14 14:10:54 - app.routers.agents - INFO - 已保存用户消息到会话 4
2025-04-14 14:10:54 - app.routers.agents - INFO - 启动Agent流式响应 for session: 4
2025-04-14 14:10:54 - app.services.vector_store - INFO - 执行相似度搜索: 查询='测试...', k=5
2025-04-14 14:10:55 - httpx - INFO - HTTP Request: POST http://wangigor.ddns.net:30063/collections/knowledge_base/points/query "HTTP/1.1 200 OK"
2025-04-14 14:10:55 - app.services.vector_store - INFO - 相似度搜索找到 0 个结果
2025-04-14 14:10:56 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-04-14 14:10:59 - app.routers.agents - INFO - 已保存AI响应到会话 4, 长度: 348
2025-04-14 14:10:59 - app.routers.agents - INFO - 流式响应完成 for session: 4
2025-04-14 14:11:34 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-14 14:11:34 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-14 14:11:34 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-14 14:11:34 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-14 14:11:35 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-14 14:11:35 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-14 14:11:45 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-14 14:11:45 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-14 14:11:45 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-14 14:11:45 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-14 14:11:45 - app.routers.agents - INFO - 收到流式查询请求: 用户=wangigor, 会话ID=4
2025-04-14 14:11:45 - app.routers.agents - INFO - 开始处理流式响应: 会话ID=4, 查询=流式输出测试...
2025-04-14 14:11:45 - app.routers.agents - INFO - 已保存用户消息到会话 4
2025-04-14 14:11:46 - app.routers.agents - INFO - 启动Agent流式响应 for session: 4
2025-04-14 14:11:46 - app.services.vector_store - INFO - 执行相似度搜索: 查询='流式输出测试...', k=5
2025-04-14 14:11:46 - httpx - INFO - HTTP Request: POST http://wangigor.ddns.net:30063/collections/knowledge_base/points/query "HTTP/1.1 200 OK"
2025-04-14 14:11:46 - app.services.vector_store - INFO - 相似度搜索找到 0 个结果
2025-04-14 14:11:48 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-04-14 14:11:51 - app.routers.agents - INFO - 已保存AI响应到会话 4, 长度: 369
2025-04-14 14:11:51 - app.routers.agents - INFO - 流式响应完成 for session: 4
2025-04-14 14:11:51 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-14 14:11:51 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-14 14:12:01 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-14 14:12:01 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-14 14:12:01 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-14 14:12:01 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-14 14:12:01 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-14 14:12:01 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-14 14:12:09 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-14 14:12:09 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-14 14:12:09 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-14 14:12:09 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-14 14:12:09 - app.routers.agents - INFO - 收到流式查询请求: 用户=wangigor, 会话ID=4
2025-04-14 14:12:09 - app.routers.agents - INFO - 开始处理流式响应: 会话ID=4, 查询=测试...
2025-04-14 14:12:10 - app.routers.agents - INFO - 已保存用户消息到会话 4
2025-04-14 14:12:10 - app.routers.agents - INFO - 启动Agent流式响应 for session: 4
2025-04-14 14:12:10 - app.services.vector_store - INFO - 执行相似度搜索: 查询='测试...', k=5
2025-04-14 14:12:10 - httpx - INFO - HTTP Request: POST http://wangigor.ddns.net:30063/collections/knowledge_base/points/query "HTTP/1.1 200 OK"
2025-04-14 14:12:10 - app.services.vector_store - INFO - 相似度搜索找到 0 个结果
2025-04-14 14:12:11 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-04-14 14:12:13 - app.routers.agents - INFO - 已保存AI响应到会话 4, 长度: 348
2025-04-14 14:12:13 - app.routers.agents - INFO - 流式响应完成 for session: 4
2025-04-14 14:12:14 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-14 14:12:14 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-14 14:12:17 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-14 14:12:17 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-14 14:12:17 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-14 14:12:17 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-14 14:12:17 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-14 14:12:17 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-14 14:12:30 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-14 14:12:30 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-14 14:12:30 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-14 14:12:31 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-14 14:12:31 - app.routers.agents - INFO - 收到流式查询请求: 用户=wangigor, 会话ID=4
2025-04-14 14:12:31 - app.routers.agents - INFO - 开始处理流式响应: 会话ID=4, 查询=测试...
2025-04-14 14:12:31 - app.routers.agents - INFO - 已保存用户消息到会话 4
2025-04-14 14:12:31 - app.routers.agents - INFO - 启动Agent流式响应 for session: 4
2025-04-14 14:12:31 - app.services.vector_store - INFO - 执行相似度搜索: 查询='测试...', k=5
2025-04-14 14:12:31 - httpx - INFO - HTTP Request: POST http://wangigor.ddns.net:30063/collections/knowledge_base/points/query "HTTP/1.1 200 OK"
2025-04-14 14:12:31 - app.services.vector_store - INFO - 相似度搜索找到 0 个结果
2025-04-14 14:12:32 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-04-14 14:12:35 - app.routers.agents - INFO - 已保存AI响应到会话 4, 长度: 348
2025-04-14 14:12:35 - app.routers.agents - INFO - 流式响应完成 for session: 4
2025-04-14 14:12:35 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-14 14:12:35 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-14 14:16:06 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-14 14:16:06 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-14 14:18:14 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-14 14:18:14 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-14 14:18:58 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-14 14:18:58 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-14 14:23:01 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-14 14:23:01 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-14 14:23:02 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-14 14:23:02 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-14 14:23:03 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-14 14:23:03 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-14 14:23:04 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-14 14:23:04 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-14 14:23:07 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-14 14:23:07 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-14 14:23:22 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-14 14:23:22 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-14 14:23:39 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-14 14:23:39 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-14 14:23:52 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-14 14:23:52 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-14 14:23:59 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-14 14:23:59 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-14 14:23:59 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-14 14:23:59 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-14 14:24:00 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-14 14:24:00 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-14 14:24:07 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-14 14:24:07 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-14 14:24:07 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-14 14:24:08 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-14 14:24:08 - app.routers.agents - INFO - 收到流式查询请求: 用户=wangigor, 会话ID=4
2025-04-14 14:24:08 - app.routers.agents - INFO - 开始处理流式响应: 会话ID=4, 查询=流式输出测试...
2025-04-14 14:24:08 - app.routers.agents - INFO - 已保存用户消息到会话 4
2025-04-14 14:24:08 - app.routers.agents - INFO - 启动Agent流式响应 for session: 4
2025-04-14 14:24:08 - app.services.vector_store - INFO - 执行相似度搜索: 查询='流式输出测试...', k=5
2025-04-14 14:24:08 - httpx - INFO - HTTP Request: POST http://wangigor.ddns.net:30063/collections/knowledge_base/points/query "HTTP/1.1 200 OK"
2025-04-14 14:24:08 - app.services.vector_store - INFO - 相似度搜索找到 0 个结果
2025-04-14 14:24:10 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-04-14 14:24:12 - app.routers.agents - INFO - 已保存AI响应到会话 4, 长度: 369
2025-04-14 14:24:12 - app.routers.agents - INFO - 流式响应完成 for session: 4
2025-04-14 14:24:12 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-14 14:24:12 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-14 14:41:03 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-14 14:41:03 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-14 14:41:04 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-14 14:41:04 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-14 14:41:04 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-14 14:41:04 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-14 15:00:30 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-14 15:00:30 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-14 15:00:31 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-14 15:00:31 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-14 15:00:31 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-14 15:00:31 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-14 15:00:40 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-14 15:00:41 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-14 15:00:41 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-14 15:00:41 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-14 15:00:41 - app.routers.agents - INFO - 收到流式查询请求: 用户=wangigor, 会话ID=4
2025-04-14 15:00:41 - app.routers.agents - INFO - 开始处理流式响应: 会话ID=4, 查询=炉石输出测试...
2025-04-14 15:00:41 - app.routers.agents - INFO - 已保存用户消息到会话 4
2025-04-14 15:00:41 - app.routers.agents - INFO - 启动Agent流式响应 for session: 4
2025-04-14 15:00:41 - app.services.vector_store - INFO - 执行相似度搜索: 查询='炉石输出测试...', k=5
2025-04-14 15:00:41 - httpx - INFO - HTTP Request: POST http://wangigor.ddns.net:30063/collections/knowledge_base/points/query "HTTP/1.1 200 OK"
2025-04-14 15:00:41 - app.services.vector_store - INFO - 相似度搜索找到 0 个结果
2025-04-14 15:00:43 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-04-14 15:00:47 - app.routers.agents - INFO - 已保存AI响应到会话 4, 长度: 367
2025-04-14 15:00:47 - app.routers.agents - INFO - 流式响应完成 for session: 4
2025-04-14 15:00:47 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-14 15:00:47 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-14 15:01:54 - root - INFO - 日志系统初始化完成
2025-04-14 15:01:54 - root - INFO - 日志系统初始化完成
2025-04-14 15:01:55 - app.main - INFO - 数据库表创建完成
2025-04-14 15:01:55 - app.main - INFO - 数据库表创建完成
2025-04-14 15:01:55 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-14 15:01:55 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-14 15:02:23 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-14 15:02:23 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-14 15:02:23 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-14 15:02:23 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-14 15:02:23 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-14 15:02:23 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-14 15:02:28 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-14 15:02:28 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-14 15:02:28 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-14 15:02:28 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-14 15:02:28 - app.routers.agents - INFO - 收到流式查询请求: 用户=wangigor, 会话ID=4
2025-04-14 15:02:28 - app.routers.agents - INFO - 开始处理流式响应: 会话ID=4, 查询=测试...
2025-04-14 15:02:28 - app.routers.agents - INFO - 已保存用户消息到会话 4
2025-04-14 15:02:29 - app.routers.agents - INFO - 启动Agent流式响应 for session: 4
2025-04-14 15:02:29 - app.services.vector_store - INFO - 执行相似度搜索: 查询='测试...', k=5
2025-04-14 15:02:29 - httpx - INFO - HTTP Request: POST http://wangigor.ddns.net:30063/collections/knowledge_base/points/query "HTTP/1.1 200 OK"
2025-04-14 15:02:29 - app.services.vector_store - INFO - 相似度搜索找到 0 个结果
2025-04-14 15:02:30 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-04-14 15:02:32 - app.routers.agents - INFO - 已保存AI响应到会话 4, 长度: 257
2025-04-14 15:02:32 - app.routers.agents - INFO - 流式响应完成 for session: 4
2025-04-14 15:02:32 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-14 15:02:32 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-14 15:09:33 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-14 15:09:33 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-14 15:09:34 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-14 15:09:34 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-14 15:09:34 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-14 15:09:34 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-14 15:09:37 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-14 15:09:37 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-14 15:09:38 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-14 15:09:40 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-14 15:09:40 - app.routers.agents - INFO - 收到流式查询请求: 用户=wangigor, 会话ID=4
2025-04-14 15:09:40 - app.routers.agents - INFO - 开始处理流式响应: 会话ID=4, 查询=测试...
2025-04-14 15:09:40 - app.routers.agents - INFO - 已保存用户消息到会话 4
2025-04-14 15:09:40 - app.routers.agents - INFO - 启动Agent流式响应 for session: 4
2025-04-14 15:09:40 - app.services.vector_store - INFO - 执行相似度搜索: 查询='测试...', k=5
2025-04-14 15:09:42 - httpx - INFO - HTTP Request: POST http://wangigor.ddns.net:30063/collections/knowledge_base/points/query "HTTP/1.1 502 Bad Gateway"
2025-04-14 15:09:42 - app.services.vector_store - ERROR - 相似度搜索出错: Unexpected Response: 502 (Bad Gateway)
Raw response content:
b''
Traceback (most recent call last):
  File "/Users/wangke/notebook-ai/notebook-backend/app/services/vector_store.py", line 213, in similarity_search
    docs = self.vector_store.similarity_search(query, k=k)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/wangke/notebook-ai/notebook-backend/venv312/lib/python3.12/site-packages/langchain_qdrant/qdrant.py", line 468, in similarity_search
    results = self.similarity_search_with_score(
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/wangke/notebook-ai/notebook-backend/venv312/lib/python3.12/site-packages/langchain_qdrant/qdrant.py", line 512, in similarity_search_with_score
    results = self.client.query_points(
              ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/wangke/notebook-ai/notebook-backend/venv312/lib/python3.12/site-packages/qdrant_client/qdrant_client.py", line 558, in query_points
    return self._client.query_points(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/wangke/notebook-ai/notebook-backend/venv312/lib/python3.12/site-packages/qdrant_client/qdrant_remote.py", line 670, in query_points
    query_result = self.http.search_api.query_points(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/wangke/notebook-ai/notebook-backend/venv312/lib/python3.12/site-packages/qdrant_client/http/api/search_api.py", line 783, in query_points
    return self._build_for_query_points(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/wangke/notebook-ai/notebook-backend/venv312/lib/python3.12/site-packages/qdrant_client/http/api/search_api.py", line 181, in _build_for_query_points
    return self.api_client.request(
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/wangke/notebook-ai/notebook-backend/venv312/lib/python3.12/site-packages/qdrant_client/http/api_client.py", line 89, in request
    return self.send(request, type_)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/wangke/notebook-ai/notebook-backend/venv312/lib/python3.12/site-packages/qdrant_client/http/api_client.py", line 112, in send
    raise UnexpectedResponse.for_response(response)
qdrant_client.http.exceptions.UnexpectedResponse: Unexpected Response: 502 (Bad Gateway)
Raw response content:
b''
2025-04-14 15:09:43 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-04-14 15:09:45 - app.routers.agents - INFO - 已保存AI响应到会话 4, 长度: 228
2025-04-14 15:09:45 - app.routers.agents - INFO - 流式响应完成 for session: 4
2025-04-14 15:09:45 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-14 15:09:46 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-14 15:16:36 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-14 15:16:36 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-14 15:16:56 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-14 15:16:56 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-14 15:16:57 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-14 15:16:58 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-14 15:16:59 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-14 15:16:59 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-14 15:17:05 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-14 15:17:06 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-14 15:17:09 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-14 15:17:09 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-14 15:17:10 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-14 15:17:11 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-14 15:17:12 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-14 15:17:12 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-14 15:17:42 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-14 15:17:42 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-14 15:19:24 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-14 15:19:24 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-14 15:19:30 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-14 15:19:30 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-14 15:19:31 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-14 15:19:31 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-14 15:19:33 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-14 15:19:33 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-14 15:19:37 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-14 15:19:37 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-14 15:19:39 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-14 15:19:39 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-14 15:19:44 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-14 15:19:44 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-14 15:19:44 - app.routers.agents - INFO - 收到流式查询请求: 用户=wangigor, 会话ID=5
2025-04-14 15:19:45 - app.routers.agents - INFO - 开始处理流式响应: 会话ID=5, 查询=测试...
2025-04-14 15:19:46 - app.routers.agents - INFO - 已保存用户消息到会话 5
2025-04-14 15:19:47 - app.routers.agents - INFO - 启动Agent流式响应 for session: 5
2025-04-14 15:19:47 - app.services.vector_store - INFO - 执行相似度搜索: 查询='测试...', k=5
2025-04-14 15:19:48 - httpx - INFO - HTTP Request: POST http://wangigor.ddns.net:30063/collections/knowledge_base/points/query "HTTP/1.1 502 Bad Gateway"
2025-04-14 15:19:48 - app.services.vector_store - ERROR - 相似度搜索出错: Unexpected Response: 502 (Bad Gateway)
Raw response content:
b''
Traceback (most recent call last):
  File "/Users/wangke/notebook-ai/notebook-backend/app/services/vector_store.py", line 213, in similarity_search
    docs = self.vector_store.similarity_search(query, k=k)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/wangke/notebook-ai/notebook-backend/venv312/lib/python3.12/site-packages/langchain_qdrant/qdrant.py", line 468, in similarity_search
    results = self.similarity_search_with_score(
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/wangke/notebook-ai/notebook-backend/venv312/lib/python3.12/site-packages/langchain_qdrant/qdrant.py", line 512, in similarity_search_with_score
    results = self.client.query_points(
              ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/wangke/notebook-ai/notebook-backend/venv312/lib/python3.12/site-packages/qdrant_client/qdrant_client.py", line 558, in query_points
    return self._client.query_points(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/wangke/notebook-ai/notebook-backend/venv312/lib/python3.12/site-packages/qdrant_client/qdrant_remote.py", line 670, in query_points
    query_result = self.http.search_api.query_points(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/wangke/notebook-ai/notebook-backend/venv312/lib/python3.12/site-packages/qdrant_client/http/api/search_api.py", line 783, in query_points
    return self._build_for_query_points(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/wangke/notebook-ai/notebook-backend/venv312/lib/python3.12/site-packages/qdrant_client/http/api/search_api.py", line 181, in _build_for_query_points
    return self.api_client.request(
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/wangke/notebook-ai/notebook-backend/venv312/lib/python3.12/site-packages/qdrant_client/http/api_client.py", line 89, in request
    return self.send(request, type_)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/wangke/notebook-ai/notebook-backend/venv312/lib/python3.12/site-packages/qdrant_client/http/api_client.py", line 112, in send
    raise UnexpectedResponse.for_response(response)
qdrant_client.http.exceptions.UnexpectedResponse: Unexpected Response: 502 (Bad Gateway)
Raw response content:
b''
2025-04-14 15:19:50 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-04-14 15:19:53 - app.routers.agents - INFO - 已保存AI响应到会话 5, 长度: 257
2025-04-14 15:19:53 - app.routers.agents - INFO - 流式响应完成 for session: 5
2025-04-14 15:49:16 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-14 15:49:47 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-14 15:49:47 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-14 15:49:47 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-14 15:49:48 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-14 15:49:49 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-14 15:50:06 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-14 15:50:07 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-14 15:50:08 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-14 15:50:08 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-14 15:50:09 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-14 15:50:09 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-14 15:50:34 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-14 15:50:34 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-14 15:50:34 - app.routers.agents - INFO - 收到流式查询请求: 用户=wangigor, 会话ID=5
2025-04-14 15:50:34 - app.routers.agents - INFO - 开始处理流式响应: 会话ID=5, 查询=流式测试...
2025-04-14 15:50:36 - app.routers.agents - INFO - 已保存用户消息到会话 5
2025-04-14 15:50:36 - app.routers.agents - INFO - 启动Agent流式响应 for session: 5
2025-04-14 15:50:36 - app.services.vector_store - INFO - 执行相似度搜索: 查询='流式测试...', k=5
2025-04-14 15:50:36 - httpx - INFO - HTTP Request: POST http://wangigor.ddns.net:30063/collections/knowledge_base/points/query "HTTP/1.1 200 OK"
2025-04-14 15:50:36 - app.services.vector_store - INFO - 相似度搜索找到 0 个结果
2025-04-14 15:50:37 - sqlalchemy.pool.impl.QueuePool - ERROR - Exception during reset or similar
Traceback (most recent call last):
  File "/Users/wangke/notebook-ai/notebook-backend/venv312/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 987, in _finalize_fairy
    fairy._reset(
  File "/Users/wangke/notebook-ai/notebook-backend/venv312/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 1433, in _reset
    pool._dialect.do_rollback(self)
  File "/Users/wangke/notebook-ai/notebook-backend/venv312/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 703, in do_rollback
    dbapi_connection.rollback()
psycopg2.OperationalError: server closed the connection unexpectedly
	This probably means the server terminated abnormally
	before or while processing the request.

2025-04-14 15:50:42 - openai._base_client - INFO - Retrying request to /chat/completions in 0.411614 seconds
2025-04-14 15:50:47 - openai._base_client - INFO - Retrying request to /chat/completions in 0.813262 seconds
2025-04-14 15:50:54 - app.routers.agents - INFO - 已保存AI响应到会话 5, 长度: 93
2025-04-14 15:50:54 - app.routers.agents - INFO - 流式响应完成 for session: 5
2025-04-14 15:51:25 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-14 15:51:26 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-14 15:51:26 - app.routers.agents - INFO - 收到流式查询请求: 用户=wangigor, 会话ID=5
2025-04-14 15:51:26 - app.routers.agents - INFO - 开始处理流式响应: 会话ID=5, 查询=流式测试...
2025-04-14 15:51:28 - app.routers.agents - INFO - 已保存用户消息到会话 5
2025-04-14 15:51:28 - app.routers.agents - INFO - 启动Agent流式响应 for session: 5
2025-04-14 15:51:28 - app.services.vector_store - INFO - 执行相似度搜索: 查询='流式测试...', k=5
2025-04-14 15:51:28 - httpx - INFO - HTTP Request: POST http://wangigor.ddns.net:30063/collections/knowledge_base/points/query "HTTP/1.1 200 OK"
2025-04-14 15:51:28 - app.services.vector_store - INFO - 相似度搜索找到 0 个结果
2025-04-14 15:51:30 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-04-14 15:51:33 - app.routers.agents - INFO - 已保存AI响应到会话 5, 长度: 346
2025-04-14 15:51:33 - app.routers.agents - INFO - 流式响应完成 for session: 5
2025-04-14 19:14:14 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-14 19:14:14 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-14 19:14:14 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-14 19:14:14 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-14 19:14:14 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-14 19:14:14 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-14 19:14:16 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-14 19:14:16 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-14 19:43:06 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-14 19:43:15 - passlib.handlers.bcrypt - WARNING - (trapped) error reading bcrypt version
Traceback (most recent call last):
  File "/Users/wangke/notebook-ai/notebook-backend/venv312/lib/python3.12/site-packages/passlib/handlers/bcrypt.py", line 620, in _load_backend_mixin
    version = _bcrypt.__about__.__version__
              ^^^^^^^^^^^^^^^^^
AttributeError: module 'bcrypt' has no attribute '__about__'
2025-04-14 19:43:15 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-14 19:43:15 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-14 19:43:16 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-14 19:43:16 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-14 19:43:23 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-14 19:43:23 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-14 19:43:23 - app.routers.agents - INFO - 收到流式查询请求: 用户=wangigor, 会话ID=5
2025-04-14 19:43:23 - app.routers.agents - INFO - 开始处理流式响应: 会话ID=5, 查询=流测试...
2025-04-14 19:43:23 - app.routers.agents - INFO - 已保存用户消息到会话 5
2025-04-14 19:43:23 - app.routers.agents - INFO - 启动Agent流式响应 for session: 5
2025-04-14 19:43:23 - app.services.vector_store - INFO - 执行相似度搜索: 查询='流测试...', k=5
2025-04-14 19:43:24 - httpx - INFO - HTTP Request: POST http://wangigor.ddns.net:30063/collections/knowledge_base/points/query "HTTP/1.1 200 OK"
2025-04-14 19:43:24 - app.services.vector_store - INFO - 相似度搜索找到 0 个结果
2025-04-14 19:43:25 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-04-14 19:43:27 - app.routers.agents - INFO - 已保存AI响应到会话 5, 长度: 252
2025-04-14 19:43:27 - app.routers.agents - INFO - 流式响应完成 for session: 5
2025-04-14 19:47:46 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-14 19:47:46 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-14 19:47:46 - app.routers.agents - INFO - 收到流式查询请求: 用户=wangigor, 会话ID=5
2025-04-14 19:47:46 - app.routers.agents - INFO - 开始处理流式响应: 会话ID=5, 查询=测试...
2025-04-14 19:47:46 - app.routers.agents - INFO - 已保存用户消息到会话 5
2025-04-14 19:47:46 - app.routers.agents - INFO - 启动Agent流式响应 for session: 5
2025-04-14 19:47:46 - app.services.vector_store - INFO - 执行相似度搜索: 查询='测试...', k=5
2025-04-14 19:47:46 - httpx - INFO - HTTP Request: POST http://wangigor.ddns.net:30063/collections/knowledge_base/points/query "HTTP/1.1 200 OK"
2025-04-14 19:47:46 - app.services.vector_store - INFO - 相似度搜索找到 0 个结果
2025-04-14 19:47:48 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-04-14 19:47:50 - app.routers.agents - INFO - 已保存AI响应到会话 5, 长度: 257
2025-04-14 19:47:50 - app.routers.agents - INFO - 流式响应完成 for session: 5
2025-04-14 19:48:35 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-14 19:48:35 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-14 19:49:08 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-14 19:49:08 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-14 19:49:08 - app.routers.agents - INFO - 收到流式查询请求: 用户=wangigor, 会话ID=5
2025-04-14 19:49:08 - app.routers.agents - INFO - 开始处理流式响应: 会话ID=5, 查询=测试...
2025-04-14 19:49:08 - app.routers.agents - INFO - 已保存用户消息到会话 5
2025-04-14 19:49:08 - app.routers.agents - INFO - 启动Agent流式响应 for session: 5
2025-04-14 19:49:08 - app.services.vector_store - INFO - 执行相似度搜索: 查询='测试...', k=5
2025-04-14 19:49:08 - httpx - INFO - HTTP Request: POST http://wangigor.ddns.net:30063/collections/knowledge_base/points/query "HTTP/1.1 200 OK"
2025-04-14 19:49:08 - app.services.vector_store - INFO - 相似度搜索找到 0 个结果
2025-04-14 19:49:08 - sqlalchemy.pool.impl.QueuePool - ERROR - Exception during reset or similar
Traceback (most recent call last):
  File "/Users/wangke/notebook-ai/notebook-backend/venv312/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 987, in _finalize_fairy
    fairy._reset(
  File "/Users/wangke/notebook-ai/notebook-backend/venv312/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 1433, in _reset
    pool._dialect.do_rollback(self)
  File "/Users/wangke/notebook-ai/notebook-backend/venv312/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 703, in do_rollback
    dbapi_connection.rollback()
psycopg2.OperationalError: server closed the connection unexpectedly
	This probably means the server terminated abnormally
	before or while processing the request.

2025-04-14 19:49:09 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-04-14 19:49:12 - app.routers.agents - INFO - 已保存AI响应到会话 5, 长度: 251
2025-04-14 19:49:12 - app.routers.agents - INFO - 流式响应完成 for session: 5
2025-04-14 19:59:13 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-14 19:59:13 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-14 19:59:18 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-14 19:59:18 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-14 19:59:18 - app.routers.agents - INFO - 收到流式查询请求: 用户=wangigor, 会话ID=5
2025-04-14 19:59:18 - app.routers.agents - INFO - 开始处理流式响应: 会话ID=5, 查询=测试...
2025-04-14 19:59:18 - app.routers.agents - INFO - 已保存用户消息到会话 5
2025-04-14 19:59:18 - app.routers.agents - INFO - 启动Agent流式响应 for session: 5
2025-04-14 19:59:18 - app.services.vector_store - INFO - 执行相似度搜索: 查询='测试...', k=5
2025-04-14 19:59:18 - httpx - INFO - HTTP Request: POST http://wangigor.ddns.net:30063/collections/knowledge_base/points/query "HTTP/1.1 200 OK"
2025-04-14 19:59:18 - app.services.vector_store - INFO - 相似度搜索找到 0 个结果
2025-04-14 19:59:20 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-04-14 19:59:21 - app.routers.agents - INFO - 已保存AI响应到会话 5, 长度: 251
2025-04-14 19:59:21 - app.routers.agents - INFO - 流式响应完成 for session: 5
2025-04-14 20:00:33 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-14 20:00:33 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-14 20:00:36 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-14 20:00:36 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-14 20:00:36 - app.routers.agents - INFO - 收到流式查询请求: 用户=wangigor, 会话ID=5
2025-04-14 20:00:36 - app.routers.agents - INFO - 开始处理流式响应: 会话ID=5, 查询=测试...
2025-04-14 20:00:36 - app.routers.agents - INFO - 已保存用户消息到会话 5
2025-04-14 20:00:36 - app.routers.agents - INFO - 启动Agent流式响应 for session: 5
2025-04-14 20:00:36 - app.services.vector_store - INFO - 执行相似度搜索: 查询='测试...', k=5
2025-04-14 20:00:37 - httpx - INFO - HTTP Request: POST http://wangigor.ddns.net:30063/collections/knowledge_base/points/query "HTTP/1.1 200 OK"
2025-04-14 20:00:37 - app.services.vector_store - INFO - 相似度搜索找到 0 个结果
2025-04-14 20:00:38 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-04-14 20:00:40 - app.routers.agents - INFO - 已保存AI响应到会话 5, 长度: 251
2025-04-14 20:00:40 - app.routers.agents - INFO - 流式响应完成 for session: 5
2025-04-14 20:07:47 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-14 20:07:47 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-14 20:07:47 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-14 20:07:47 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-14 20:07:47 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-14 20:07:48 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-14 20:07:53 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-14 20:07:53 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-14 20:07:53 - app.routers.agents - INFO - 收到流式查询请求: 用户=wangigor, 会话ID=5
2025-04-14 20:07:53 - app.routers.agents - INFO - 开始处理流式响应: 会话ID=5, 查询=测试...
2025-04-14 20:07:53 - app.routers.agents - INFO - 已保存用户消息到会话 5
2025-04-14 20:07:53 - app.routers.agents - INFO - 启动Agent流式响应 for session: 5
2025-04-14 20:07:53 - app.services.vector_store - INFO - 执行相似度搜索: 查询='测试...', k=5
2025-04-14 20:07:54 - httpx - INFO - HTTP Request: POST http://wangigor.ddns.net:30063/collections/knowledge_base/points/query "HTTP/1.1 200 OK"
2025-04-14 20:07:54 - app.services.vector_store - INFO - 相似度搜索找到 0 个结果
2025-04-14 20:07:55 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-04-14 20:07:58 - app.routers.agents - INFO - 已保存AI响应到会话 5, 长度: 251
2025-04-14 20:07:58 - app.routers.agents - INFO - 流式响应完成 for session: 5
2025-04-14 20:17:06 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-14 20:17:10 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-14 20:17:10 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-14 20:17:10 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-14 20:17:10 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-14 20:17:10 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-14 20:17:14 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-14 20:17:14 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-14 20:17:14 - app.routers.agents - INFO - 收到流式查询请求: 用户=wangigor, 会话ID=5
2025-04-14 20:17:14 - app.routers.agents - INFO - 开始处理流式响应: 会话ID=5, 查询=测试...
2025-04-14 20:17:14 - app.routers.agents - INFO - 已保存用户消息到会话 5
2025-04-14 20:17:14 - app.routers.agents - INFO - 启动Agent流式响应 for session: 5
2025-04-14 20:17:14 - app.services.vector_store - INFO - 执行相似度搜索: 查询='测试...', k=5
2025-04-14 20:17:15 - httpx - INFO - HTTP Request: POST http://wangigor.ddns.net:30063/collections/knowledge_base/points/query "HTTP/1.1 200 OK"
2025-04-14 20:17:15 - app.services.vector_store - INFO - 相似度搜索找到 0 个结果
2025-04-14 20:17:16 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-04-14 20:17:18 - app.routers.agents - INFO - 已保存AI响应到会话 5, 长度: 249
2025-04-14 20:17:18 - app.routers.agents - INFO - 流式响应完成 for session: 5
2025-04-14 20:20:00 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-14 20:20:00 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-14 20:20:03 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-14 20:20:03 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-14 20:20:03 - app.routers.agents - INFO - 收到流式查询请求: 用户=wangigor, 会话ID=5
2025-04-14 20:20:03 - app.routers.agents - INFO - 开始处理流式响应: 会话ID=5, 查询=测试...
2025-04-14 20:20:03 - app.routers.agents - INFO - 已保存用户消息到会话 5
2025-04-14 20:20:03 - app.routers.agents - INFO - 启动Agent流式响应 for session: 5
2025-04-14 20:20:03 - app.services.vector_store - INFO - 执行相似度搜索: 查询='测试...', k=5
2025-04-14 20:20:04 - httpx - INFO - HTTP Request: POST http://wangigor.ddns.net:30063/collections/knowledge_base/points/query "HTTP/1.1 200 OK"
2025-04-14 20:20:04 - app.services.vector_store - INFO - 相似度搜索找到 0 个结果
2025-04-14 20:20:05 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-04-14 20:20:08 - app.routers.agents - INFO - 已保存AI响应到会话 5, 长度: 249
2025-04-14 20:20:08 - app.routers.agents - INFO - 流式响应完成 for session: 5
2025-04-14 20:30:50 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-14 20:30:50 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-14 20:30:50 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-14 20:30:50 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-14 20:30:50 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-14 20:30:51 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-14 20:30:55 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-14 20:30:55 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-14 20:30:55 - app.routers.agents - INFO - 收到流式查询请求: 用户=wangigor, 会话ID=5
2025-04-14 20:30:55 - app.routers.agents - INFO - 开始处理流式响应: 会话ID=5, 查询=测试...
2025-04-14 20:30:55 - app.routers.agents - INFO - 已保存用户消息到会话 5
2025-04-14 20:30:55 - app.routers.agents - INFO - 启动Agent流式响应 for session: 5
2025-04-14 20:30:55 - app.services.vector_store - INFO - 执行相似度搜索: 查询='测试...', k=5
2025-04-14 20:30:56 - httpx - INFO - HTTP Request: POST http://wangigor.ddns.net:30063/collections/knowledge_base/points/query "HTTP/1.1 200 OK"
2025-04-14 20:30:56 - app.services.vector_store - INFO - 相似度搜索找到 0 个结果
2025-04-14 20:30:57 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-04-14 20:30:59 - app.routers.agents - INFO - 已保存AI响应到会话 5, 长度: 167
2025-04-14 20:30:59 - app.routers.agents - INFO - 流式响应完成 for session: 5
2025-04-14 20:34:24 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-14 20:34:24 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-14 20:34:51 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-14 20:34:51 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-14 20:34:51 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-14 20:34:51 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-14 20:34:51 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-14 20:34:51 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-14 20:34:56 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-14 20:34:56 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-14 20:34:56 - app.routers.agents - INFO - 收到流式查询请求: 用户=wangigor, 会话ID=5
2025-04-14 20:34:56 - app.routers.agents - INFO - 开始处理流式响应: 会话ID=5, 查询=测试...
2025-04-14 20:34:56 - app.routers.agents - INFO - 已保存用户消息到会话 5
2025-04-14 20:34:56 - app.routers.agents - INFO - 启动Agent流式响应 for session: 5
2025-04-14 20:34:56 - app.services.vector_store - INFO - 执行相似度搜索: 查询='测试...', k=5
2025-04-14 20:34:56 - httpx - INFO - HTTP Request: POST http://wangigor.ddns.net:30063/collections/knowledge_base/points/query "HTTP/1.1 200 OK"
2025-04-14 20:34:56 - app.services.vector_store - INFO - 相似度搜索找到 0 个结果
2025-04-14 20:34:58 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-04-14 20:34:59 - app.routers.agents - INFO - 已保存AI响应到会话 5, 长度: 167
2025-04-14 20:34:59 - app.routers.agents - INFO - 流式响应完成 for session: 5
2025-04-14 20:35:10 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-14 20:35:10 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-14 20:35:10 - app.routers.agents - INFO - 收到流式查询请求: 用户=wangigor, 会话ID=5
2025-04-14 20:35:10 - app.routers.agents - INFO - 开始处理流式响应: 会话ID=5, 查询=测试...
2025-04-14 20:35:10 - app.routers.agents - INFO - 已保存用户消息到会话 5
2025-04-14 20:35:10 - app.routers.agents - INFO - 启动Agent流式响应 for session: 5
2025-04-14 20:35:10 - app.services.vector_store - INFO - 执行相似度搜索: 查询='测试...', k=5
2025-04-14 20:35:10 - httpx - INFO - HTTP Request: POST http://wangigor.ddns.net:30063/collections/knowledge_base/points/query "HTTP/1.1 200 OK"
2025-04-14 20:35:10 - app.services.vector_store - INFO - 相似度搜索找到 0 个结果
2025-04-14 20:35:12 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-04-14 20:35:13 - app.routers.agents - INFO - 已保存AI响应到会话 5, 长度: 167
2025-04-14 20:35:13 - app.routers.agents - INFO - 流式响应完成 for session: 5
2025-04-14 20:43:01 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-14 20:43:01 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-14 20:43:36 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-14 20:43:36 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-14 20:44:31 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-14 20:44:31 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-14 20:45:25 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-14 20:45:25 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-14 20:45:25 - app.routers.agents - INFO - 收到流式查询请求: 用户=wangigor, 会话ID=5
2025-04-14 20:45:25 - app.routers.agents - INFO - 开始处理流式响应: 会话ID=5, 查询=测试...
2025-04-14 20:45:25 - app.routers.agents - INFO - 已保存用户消息到会话 5
2025-04-14 20:45:26 - app.routers.agents - INFO - 启动Agent流式响应 for session: 5
2025-04-14 20:45:26 - app.services.vector_store - INFO - 执行相似度搜索: 查询='测试...', k=5
2025-04-14 20:45:26 - httpx - INFO - HTTP Request: POST http://wangigor.ddns.net:30063/collections/knowledge_base/points/query "HTTP/1.1 200 OK"
2025-04-14 20:45:26 - app.services.vector_store - INFO - 相似度搜索找到 0 个结果
2025-04-14 20:45:27 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-04-14 20:45:28 - app.routers.agents - INFO - 已保存AI响应到会话 5, 长度: 167
2025-04-14 20:45:28 - app.routers.agents - INFO - 流式响应完成 for session: 5
2025-04-14 20:46:12 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-14 20:46:12 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-14 20:46:12 - app.routers.agents - INFO - 收到流式查询请求: 用户=wangigor, 会话ID=5
2025-04-14 20:46:12 - app.routers.agents - INFO - 开始处理流式响应: 会话ID=5, 查询=流式测试输出。我想要输出更多的内容。起码1000字。...
2025-04-14 20:46:12 - app.routers.agents - INFO - 已保存用户消息到会话 5
2025-04-14 20:46:13 - app.routers.agents - INFO - 启动Agent流式响应 for session: 5
2025-04-14 20:46:13 - app.services.vector_store - INFO - 执行相似度搜索: 查询='流式测试输出。我想要输出更多的内容。起码1000字。...', k=5
2025-04-14 20:46:13 - httpx - INFO - HTTP Request: POST http://wangigor.ddns.net:30063/collections/knowledge_base/points/query "HTTP/1.1 200 OK"
2025-04-14 20:46:13 - app.services.vector_store - INFO - 相似度搜索找到 0 个结果
2025-04-14 20:46:14 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-04-14 20:46:20 - app.routers.agents - INFO - 已保存AI响应到会话 5, 长度: 596
2025-04-14 20:46:20 - app.routers.agents - INFO - 流式响应完成 for session: 5
2025-04-14 20:51:26 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-14 20:51:26 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-14 20:52:25 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-14 20:52:25 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-14 20:52:42 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-14 20:52:43 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-14 20:52:43 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-14 20:52:43 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-14 20:52:43 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-14 20:52:43 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-14 20:52:50 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-14 20:52:50 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-14 20:52:50 - app.routers.agents - INFO - 收到流式查询请求: 用户=wangigor, 会话ID=5
2025-04-14 20:52:50 - app.routers.agents - INFO - 开始处理流式响应: 会话ID=5, 查询=流式测试输出。我想要输出更多的内容。起码1000字。...
2025-04-14 20:52:50 - app.routers.agents - INFO - 已保存用户消息到会话 5
2025-04-14 20:52:50 - app.routers.agents - INFO - 启动Agent流式响应 for session: 5
2025-04-14 20:52:50 - app.services.vector_store - INFO - 执行相似度搜索: 查询='流式测试输出。我想要输出更多的内容。起码1000字。...', k=5
2025-04-14 20:52:51 - httpx - INFO - HTTP Request: POST http://wangigor.ddns.net:30063/collections/knowledge_base/points/query "HTTP/1.1 200 OK"
2025-04-14 20:52:51 - app.services.vector_store - INFO - 相似度搜索找到 0 个结果
2025-04-14 20:52:52 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-04-14 20:53:00 - app.routers.agents - INFO - 已保存AI响应到会话 5, 长度: 596
2025-04-14 20:53:00 - app.routers.agents - INFO - 流式响应完成 for session: 5
2025-04-14 20:57:21 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-14 20:57:21 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-14 20:57:21 - app.routers.agents - INFO - 收到流式查询请求: 用户=wangigor, 会话ID=5
2025-04-14 20:57:21 - app.routers.agents - INFO - 开始处理流式响应: 会话ID=5, 查询=流式输出测试...
2025-04-14 20:57:21 - app.routers.agents - INFO - 已保存用户消息到会话 5
2025-04-14 20:57:21 - app.routers.agents - INFO - 启动Agent流式响应 for session: 5
2025-04-14 20:57:21 - app.services.vector_store - INFO - 执行相似度搜索: 查询='流式输出测试...', k=5
2025-04-14 20:57:22 - httpx - INFO - HTTP Request: POST http://wangigor.ddns.net:30063/collections/knowledge_base/points/query "HTTP/1.1 200 OK"
2025-04-14 20:57:22 - app.services.vector_store - INFO - 相似度搜索找到 0 个结果
2025-04-14 20:57:23 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-04-14 20:57:25 - app.routers.agents - INFO - 已保存AI响应到会话 5, 长度: 258
2025-04-14 20:57:25 - app.routers.agents - INFO - 流式响应完成 for session: 5
2025-04-14 20:57:29 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-14 20:57:29 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-14 20:57:29 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-14 20:57:29 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-14 20:57:30 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-14 20:57:30 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-14 20:57:36 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-14 20:57:36 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-14 20:57:36 - app.routers.agents - INFO - 收到流式查询请求: 用户=wangigor, 会话ID=5
2025-04-14 20:57:36 - app.routers.agents - INFO - 开始处理流式响应: 会话ID=5, 查询=流式测试输出。我想要输出更多的内容。起码1000字。...
2025-04-14 20:57:36 - app.routers.agents - INFO - 已保存用户消息到会话 5
2025-04-14 20:57:36 - app.routers.agents - INFO - 启动Agent流式响应 for session: 5
2025-04-14 20:57:36 - app.services.vector_store - INFO - 执行相似度搜索: 查询='流式测试输出。我想要输出更多的内容。起码1000字。...', k=5
2025-04-14 20:57:36 - httpx - INFO - HTTP Request: POST http://wangigor.ddns.net:30063/collections/knowledge_base/points/query "HTTP/1.1 200 OK"
2025-04-14 20:57:36 - app.services.vector_store - INFO - 相似度搜索找到 0 个结果
2025-04-14 20:57:39 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-04-14 20:57:44 - app.routers.agents - INFO - 已保存AI响应到会话 5, 长度: 534
2025-04-14 20:57:44 - app.routers.agents - INFO - 流式响应完成 for session: 5
2025-04-14 20:59:14 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-14 20:59:14 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-14 20:59:42 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-14 20:59:42 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-14 21:00:19 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-14 21:00:19 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-14 21:00:27 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-14 21:00:27 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-14 21:00:27 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-14 21:00:27 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-14 21:00:28 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-14 21:00:28 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-14 21:00:32 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-14 21:00:32 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-14 21:00:32 - app.routers.agents - INFO - 收到流式查询请求: 用户=wangigor, 会话ID=5
2025-04-14 21:00:32 - app.routers.agents - INFO - 开始处理流式响应: 会话ID=5, 查询=流式测试输出。我想要输出更多的内容。起码1000字。

...
2025-04-14 21:00:32 - app.routers.agents - INFO - 已保存用户消息到会话 5
2025-04-14 21:00:32 - app.routers.agents - INFO - 启动Agent流式响应 for session: 5
2025-04-14 21:00:32 - app.services.vector_store - INFO - 执行相似度搜索: 查询='流式测试输出。我想要输出更多的内容。起码1000字。

...', k=5
2025-04-14 21:00:33 - httpx - INFO - HTTP Request: POST http://wangigor.ddns.net:30063/collections/knowledge_base/points/query "HTTP/1.1 200 OK"
2025-04-14 21:00:33 - app.services.vector_store - INFO - 相似度搜索找到 0 个结果
2025-04-14 21:00:34 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-04-14 21:00:43 - app.routers.agents - INFO - 已保存AI响应到会话 5, 长度: 534
2025-04-14 21:00:43 - app.routers.agents - INFO - 流式响应完成 for session: 5
2025-04-14 21:02:38 - sqlalchemy.pool.impl.QueuePool - ERROR - Exception during reset or similar
Traceback (most recent call last):
  File "/Users/wangke/notebook-ai/notebook-backend/venv312/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 987, in _finalize_fairy
    fairy._reset(
  File "/Users/wangke/notebook-ai/notebook-backend/venv312/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 1433, in _reset
    pool._dialect.do_rollback(self)
  File "/Users/wangke/notebook-ai/notebook-backend/venv312/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 703, in do_rollback
    dbapi_connection.rollback()
psycopg2.OperationalError: server closed the connection unexpectedly
	This probably means the server terminated abnormally
	before or while processing the request.

2025-04-14 21:02:38 - sqlalchemy.pool.impl.QueuePool - ERROR - Exception during reset or similar
Traceback (most recent call last):
  File "/Users/wangke/notebook-ai/notebook-backend/venv312/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 987, in _finalize_fairy
    fairy._reset(
  File "/Users/wangke/notebook-ai/notebook-backend/venv312/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 1433, in _reset
    pool._dialect.do_rollback(self)
  File "/Users/wangke/notebook-ai/notebook-backend/venv312/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 703, in do_rollback
    dbapi_connection.rollback()
psycopg2.OperationalError: server closed the connection unexpectedly
	This probably means the server terminated abnormally
	before or while processing the request.

2025-04-14 21:02:38 - sqlalchemy.pool.impl.QueuePool - ERROR - Exception during reset or similar
Traceback (most recent call last):
  File "/Users/wangke/notebook-ai/notebook-backend/venv312/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 987, in _finalize_fairy
    fairy._reset(
  File "/Users/wangke/notebook-ai/notebook-backend/venv312/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 1433, in _reset
    pool._dialect.do_rollback(self)
  File "/Users/wangke/notebook-ai/notebook-backend/venv312/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 703, in do_rollback
    dbapi_connection.rollback()
psycopg2.OperationalError: server closed the connection unexpectedly
	This probably means the server terminated abnormally
	before or while processing the request.

2025-04-14 21:03:02 - root - INFO - 日志系统初始化完成
2025-04-14 21:03:02 - app.main - ERROR - 数据库表创建失败: (psycopg2.OperationalError) connection to server at "wangigor.ddns.net" (127.0.0.1), port 30001 failed: Connection refused
	Is the server running on that host and accepting TCP/IP connections?

(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-04-14 21:03:35 - root - INFO - 日志系统初始化完成
2025-04-14 21:03:35 - app.main - ERROR - 数据库表创建失败: (psycopg2.OperationalError) connection to server at "wangigor.ddns.net" (127.0.0.1), port 30001 failed: Connection refused
	Is the server running on that host and accepting TCP/IP connections?

(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-04-14 21:04:28 - root - INFO - 日志系统初始化完成
2025-04-14 21:04:28 - app.main - INFO - 数据库表创建完成
2025-04-14 21:04:54 - passlib.handlers.bcrypt - WARNING - (trapped) error reading bcrypt version
Traceback (most recent call last):
  File "/Users/wangke/notebook-ai/notebook-backend/venv312/lib/python3.12/site-packages/passlib/handlers/bcrypt.py", line 620, in _load_backend_mixin
    version = _bcrypt.__about__.__version__
              ^^^^^^^^^^^^^^^^^
AttributeError: module 'bcrypt' has no attribute '__about__'
2025-04-14 21:04:55 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-14 21:04:55 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-14 21:04:55 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-14 21:04:55 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-14 21:05:03 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-14 21:05:03 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-14 21:05:03 - app.routers.agents - INFO - 收到流式查询请求: 用户=wangigor, 会话ID=5
2025-04-14 21:05:03 - app.routers.agents - INFO - 开始处理流式响应: 会话ID=5, 查询=流式测试输出。我想要输出更多的内容。起码1000字。...
2025-04-14 21:05:03 - app.routers.agents - INFO - 已保存用户消息到会话 5
2025-04-14 21:05:03 - app.routers.agents - INFO - 启动Agent流式响应 for session: 5
2025-04-14 21:05:03 - app.services.vector_store - INFO - 执行相似度搜索: 查询='流式测试输出。我想要输出更多的内容。起码1000字。...', k=5
2025-04-14 21:05:04 - httpx - INFO - HTTP Request: POST http://wangigor.ddns.net:30063/collections/knowledge_base/points/query "HTTP/1.1 200 OK"
2025-04-14 21:05:04 - app.services.vector_store - INFO - 相似度搜索找到 0 个结果
2025-04-14 21:05:05 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-04-14 21:05:15 - app.routers.agents - INFO - 已保存AI响应到会话 5, 长度: 659
2025-04-14 21:05:15 - app.routers.agents - INFO - 流式响应完成 for session: 5
2025-04-14 21:06:29 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-14 21:06:29 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-14 21:06:37 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-14 21:06:37 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-14 21:06:37 - app.routers.agents - INFO - 收到流式查询请求: 用户=wangigor, 会话ID=5
2025-04-14 21:06:37 - app.routers.agents - INFO - 开始处理流式响应: 会话ID=5, 查询=流式测试输出。我想要输出更多的内容。起码1000字。

...
2025-04-14 21:06:37 - app.routers.agents - INFO - 已保存用户消息到会话 5
2025-04-14 21:06:37 - app.routers.agents - INFO - 启动Agent流式响应 for session: 5
2025-04-14 21:06:37 - app.services.vector_store - INFO - 执行相似度搜索: 查询='流式测试输出。我想要输出更多的内容。起码1000字。

...', k=5
2025-04-14 21:06:38 - httpx - INFO - HTTP Request: POST http://wangigor.ddns.net:30063/collections/knowledge_base/points/query "HTTP/1.1 200 OK"
2025-04-14 21:06:38 - app.services.vector_store - INFO - 相似度搜索找到 0 个结果
2025-04-14 21:06:43 - openai._base_client - INFO - Retrying request to /chat/completions in 0.426761 seconds
2025-04-14 21:06:44 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-04-14 21:06:49 - app.routers.agents - INFO - 已保存AI响应到会话 5, 长度: 659
2025-04-14 21:06:49 - app.routers.agents - INFO - 流式响应完成 for session: 5
2025-04-14 21:08:50 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-14 21:08:51 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-14 21:08:51 - app.routers.agents - INFO - 收到流式查询请求: 用户=wangigor, 会话ID=5
2025-04-14 21:08:51 - app.routers.agents - INFO - 开始处理流式响应: 会话ID=5, 查询=流式测试输出。我想要输出更多的内容。起码1000字。...
2025-04-14 21:08:51 - app.routers.agents - INFO - 已保存用户消息到会话 5
2025-04-14 21:08:51 - app.routers.agents - INFO - 启动Agent流式响应 for session: 5
2025-04-14 21:08:51 - app.services.vector_store - INFO - 执行相似度搜索: 查询='流式测试输出。我想要输出更多的内容。起码1000字。...', k=5
2025-04-14 21:08:51 - httpx - INFO - HTTP Request: POST http://wangigor.ddns.net:30063/collections/knowledge_base/points/query "HTTP/1.1 200 OK"
2025-04-14 21:08:51 - app.services.vector_store - INFO - 相似度搜索找到 0 个结果
2025-04-14 21:08:53 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-04-14 21:08:57 - app.routers.agents - INFO - 已保存AI响应到会话 5, 长度: 659
2025-04-14 21:08:57 - app.routers.agents - INFO - 流式响应完成 for session: 5
2025-04-14 21:09:21 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-14 21:09:21 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-14 21:09:21 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-14 21:09:21 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-14 21:09:38 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-14 21:09:38 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-14 21:09:44 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-14 21:09:44 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-14 21:09:46 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-14 21:09:46 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-14 21:09:48 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-14 21:09:48 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-14 21:10:04 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-14 21:10:04 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-14 21:10:04 - app.routers.agents - INFO - 收到流式查询请求: 用户=wangigor, 会话ID=6
2025-04-14 21:10:04 - app.routers.agents - INFO - 开始处理流式响应: 会话ID=6, 查询=流式测试输出。我想要输出更多的内容。起码1000字。...
2025-04-14 21:10:04 - app.routers.agents - INFO - 已保存用户消息到会话 6
2025-04-14 21:10:04 - app.routers.agents - INFO - 启动Agent流式响应 for session: 6
2025-04-14 21:10:04 - app.services.vector_store - INFO - 执行相似度搜索: 查询='流式测试输出。我想要输出更多的内容。起码1000字。...', k=5
2025-04-14 21:10:04 - httpx - INFO - HTTP Request: POST http://wangigor.ddns.net:30063/collections/knowledge_base/points/query "HTTP/1.1 200 OK"
2025-04-14 21:10:04 - app.services.vector_store - INFO - 相似度搜索找到 0 个结果
2025-04-14 21:10:06 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-04-14 21:10:11 - app.routers.agents - INFO - 已保存AI响应到会话 6, 长度: 677
2025-04-14 21:10:11 - app.routers.agents - INFO - 流式响应完成 for session: 6
2025-04-14 21:14:03 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-14 21:14:07 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-14 21:14:33 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-14 21:14:33 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-14 21:16:01 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-14 21:16:01 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-14 21:16:05 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-14 21:16:05 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-14 21:16:21 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-14 21:16:21 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-14 21:19:45 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-14 21:19:45 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-14 21:20:09 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-14 21:20:09 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-14 21:20:31 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-14 21:20:31 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-14 21:20:55 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-14 21:20:55 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-14 21:21:51 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-14 21:21:51 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-14 21:21:55 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-14 21:21:55 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-14 21:21:55 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-14 21:21:55 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-14 21:21:56 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-14 21:21:56 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-14 21:22:01 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-14 21:22:01 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-14 21:22:01 - app.routers.agents - INFO - 收到流式查询请求: 用户=wangigor, 会话ID=6
2025-04-14 21:22:01 - app.routers.agents - INFO - 开始处理流式响应: 会话ID=6, 查询=流式测试输出。我想要输出更多的内容。起码1000字。...
2025-04-14 21:22:01 - app.routers.agents - INFO - 已保存用户消息到会话 6
2025-04-14 21:22:01 - app.routers.agents - INFO - 启动Agent流式响应 for session: 6
2025-04-14 21:22:01 - app.services.vector_store - INFO - 执行相似度搜索: 查询='流式测试输出。我想要输出更多的内容。起码1000字。...', k=5
2025-04-14 21:22:02 - httpx - INFO - HTTP Request: POST http://wangigor.ddns.net:30063/collections/knowledge_base/points/query "HTTP/1.1 200 OK"
2025-04-14 21:22:02 - app.services.vector_store - INFO - 相似度搜索找到 0 个结果
2025-04-14 21:22:03 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-04-14 21:22:10 - app.routers.agents - INFO - 已保存AI响应到会话 6, 长度: 677
2025-04-14 21:22:10 - app.routers.agents - INFO - 流式响应完成 for session: 6
2025-04-14 21:32:38 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-14 21:32:39 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-14 21:32:39 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-14 21:32:39 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-14 21:32:40 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-14 21:32:40 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-14 21:32:40 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-14 21:32:40 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-14 21:33:49 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-14 21:33:49 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-14 21:33:51 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-14 21:33:51 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-14 21:33:54 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-14 21:33:54 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-14 21:33:56 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-14 21:33:56 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-15 08:13:16 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-15 08:13:17 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-15 08:13:17 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-15 08:13:18 - app.auth.dependencies - WARNING - 认证请求没有提供令牌
2025-04-15 11:08:55 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-15 11:08:55 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-15 11:08:55 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-15 11:08:55 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-15 11:22:44 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-15 11:23:19 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-15 11:23:19 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-15 11:23:31 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-15 11:23:31 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-15 11:24:02 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-15 11:24:02 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-15 11:24:33 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-15 11:24:33 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-15 11:24:50 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-15 11:24:50 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-15 11:25:32 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-15 11:25:32 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-15 11:25:49 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-15 11:25:49 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-15 11:25:49 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-15 11:25:49 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-15 11:25:50 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-15 11:25:50 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-15 11:29:38 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-15 11:29:38 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-15 11:29:38 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-15 11:29:38 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-15 11:29:38 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-15 11:29:38 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-15 11:29:46 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-15 11:29:46 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-15 11:29:46 - app.routers.agents - INFO - 收到流式查询请求: 用户=wangigor, 会话ID=6
2025-04-15 11:29:46 - app.routers.agents - INFO - 开始处理流式响应: 会话ID=6, 查询=流式测试输出...
2025-04-15 11:29:46 - app.routers.agents - INFO - 已保存用户消息到会话 6
2025-04-15 11:29:46 - app.routers.agents - INFO - 启动Agent流式响应 for session: 6
2025-04-15 11:29:46 - app.services.vector_store - INFO - 执行相似度搜索: 查询='流式测试输出...', k=5
2025-04-15 11:29:46 - httpx - INFO - HTTP Request: POST http://wangigor.ddns.net:30063/collections/knowledge_base/points/query "HTTP/1.1 200 OK"
2025-04-15 11:29:46 - app.services.vector_store - INFO - 相似度搜索找到 0 个结果
2025-04-15 11:29:48 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-04-15 11:29:50 - app.routers.agents - INFO - 已保存AI响应到会话 6, 长度: 333
2025-04-15 11:29:50 - app.routers.agents - INFO - 流式响应完成 for session: 6
2025-04-15 11:30:02 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-15 11:30:02 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-15 11:30:02 - app.routers.agents - INFO - 收到流式查询请求: 用户=wangigor, 会话ID=6
2025-04-15 11:30:02 - app.routers.agents - INFO - 开始处理流式响应: 会话ID=6, 查询=流式测试输出。我想要输出更多的内容。起码3000字。...
2025-04-15 11:30:03 - app.routers.agents - INFO - 已保存用户消息到会话 6
2025-04-15 11:30:03 - app.routers.agents - INFO - 启动Agent流式响应 for session: 6
2025-04-15 11:30:03 - app.services.vector_store - INFO - 执行相似度搜索: 查询='流式测试输出。我想要输出更多的内容。起码3000字。...', k=5
2025-04-15 11:30:03 - httpx - INFO - HTTP Request: POST http://wangigor.ddns.net:30063/collections/knowledge_base/points/query "HTTP/1.1 200 OK"
2025-04-15 11:30:03 - app.services.vector_store - INFO - 相似度搜索找到 0 个结果
2025-04-15 11:30:04 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-04-15 11:30:09 - app.routers.agents - INFO - 已保存AI响应到会话 6, 长度: 685
2025-04-15 11:30:09 - app.routers.agents - INFO - 流式响应完成 for session: 6
2025-04-15 11:41:51 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-15 11:41:51 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-15 11:41:51 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-15 11:41:51 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-15 11:41:52 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-15 11:41:52 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-15 11:41:57 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-15 11:41:57 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-15 11:41:57 - app.routers.agents - INFO - 收到流式查询请求: 用户=wangigor, 会话ID=6
2025-04-15 11:41:57 - app.routers.agents - INFO - 开始处理流式响应: 会话ID=6, 查询=流式测试输出。我想要输出更多的内容。起码3000字。

...
2025-04-15 11:41:57 - app.routers.agents - INFO - 已保存用户消息到会话 6
2025-04-15 11:41:57 - app.routers.agents - INFO - 启动Agent流式响应 for session: 6
2025-04-15 11:41:57 - app.services.vector_store - INFO - 执行相似度搜索: 查询='流式测试输出。我想要输出更多的内容。起码3000字。

...', k=5
2025-04-15 11:41:58 - httpx - INFO - HTTP Request: POST http://wangigor.ddns.net:30063/collections/knowledge_base/points/query "HTTP/1.1 200 OK"
2025-04-15 11:41:58 - app.services.vector_store - INFO - 相似度搜索找到 0 个结果
2025-04-15 11:41:59 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-04-15 11:42:04 - app.routers.agents - INFO - 已保存AI响应到会话 6, 长度: 685
2025-04-15 11:42:04 - app.routers.agents - INFO - 流式响应完成 for session: 6
2025-04-15 11:50:19 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-15 11:50:19 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-15 11:50:38 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-15 11:50:38 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-15 11:50:53 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-15 11:50:53 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-15 11:51:17 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-15 11:51:17 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-15 11:51:18 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-15 11:51:18 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-15 11:53:27 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-15 11:53:27 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-15 11:53:27 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-15 11:53:28 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-15 11:53:28 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-15 11:53:28 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-15 11:53:32 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-15 11:53:32 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-15 11:53:32 - app.routers.agents - INFO - 收到流式查询请求: 用户=wangigor, 会话ID=6
2025-04-15 11:53:32 - app.routers.agents - INFO - 开始处理流式响应: 会话ID=6, 查询=测试...
2025-04-15 11:53:32 - app.routers.agents - INFO - 已保存用户消息到会话 6
2025-04-15 11:53:32 - app.routers.agents - INFO - 启动Agent流式响应 for session: 6
2025-04-15 11:53:32 - app.services.vector_store - INFO - 执行相似度搜索: 查询='测试...', k=5
2025-04-15 11:53:33 - httpx - INFO - HTTP Request: POST http://wangigor.ddns.net:30063/collections/knowledge_base/points/query "HTTP/1.1 200 OK"
2025-04-15 11:53:33 - app.services.vector_store - INFO - 相似度搜索找到 0 个结果
2025-04-15 11:53:34 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-04-15 11:53:37 - app.routers.agents - INFO - 已保存AI响应到会话 6, 长度: 199
2025-04-15 11:53:37 - app.routers.agents - INFO - 流式响应完成 for session: 6
2025-04-15 11:53:46 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-15 11:53:46 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-15 11:53:46 - app.routers.agents - INFO - 收到流式查询请求: 用户=wangigor, 会话ID=6
2025-04-15 11:53:46 - app.routers.agents - INFO - 开始处理流式响应: 会话ID=6, 查询=流式测试输出。我想要输出更多的内容。起码3000字。...
2025-04-15 11:53:47 - app.routers.agents - INFO - 已保存用户消息到会话 6
2025-04-15 11:53:47 - app.routers.agents - INFO - 启动Agent流式响应 for session: 6
2025-04-15 11:53:47 - app.services.vector_store - INFO - 执行相似度搜索: 查询='流式测试输出。我想要输出更多的内容。起码3000字。...', k=5
2025-04-15 11:53:47 - httpx - INFO - HTTP Request: POST http://wangigor.ddns.net:30063/collections/knowledge_base/points/query "HTTP/1.1 200 OK"
2025-04-15 11:53:47 - app.services.vector_store - INFO - 相似度搜索找到 0 个结果
2025-04-15 11:53:51 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-04-15 11:53:55 - app.routers.agents - INFO - 已保存AI响应到会话 6, 长度: 685
2025-04-15 11:53:55 - app.routers.agents - INFO - 流式响应完成 for session: 6
2025-04-15 12:36:01 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-15 12:36:01 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-15 12:36:01 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-15 12:36:01 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-15 12:36:01 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-15 12:36:01 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-15 12:40:35 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-15 12:40:35 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-15 12:41:06 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-15 12:41:06 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-15 12:41:16 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-15 12:41:16 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-15 12:41:48 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-15 12:41:48 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-15 12:43:42 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-15 12:43:42 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-15 12:43:42 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-15 12:43:42 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-15 12:43:42 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-15 12:43:42 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-15 12:43:52 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-15 12:43:52 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-15 12:43:52 - app.routers.agents - INFO - 收到流式查询请求: 用户=wangigor, 会话ID=6
2025-04-15 12:43:52 - app.routers.agents - INFO - 开始处理流式响应: 会话ID=6, 查询=流式测试输出。我想要输出更多的内容。起码3000字。...
2025-04-15 12:43:52 - app.routers.agents - INFO - 已保存用户消息到会话 6
2025-04-15 12:43:52 - app.routers.agents - INFO - 启动Agent流式响应 for session: 6
2025-04-15 12:43:52 - app.services.vector_store - INFO - 执行相似度搜索: 查询='流式测试输出。我想要输出更多的内容。起码3000字。...', k=5
2025-04-15 12:43:53 - httpx - INFO - HTTP Request: POST http://wangigor.ddns.net:30063/collections/knowledge_base/points/query "HTTP/1.1 200 OK"
2025-04-15 12:43:53 - app.services.vector_store - INFO - 相似度搜索找到 0 个结果
2025-04-15 12:43:54 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-04-15 12:43:58 - app.routers.agents - INFO - 已保存AI响应到会话 6, 长度: 685
2025-04-15 12:43:58 - app.routers.agents - INFO - 流式响应完成 for session: 6
2025-04-15 12:44:24 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-15 12:44:24 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-15 12:46:53 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-15 12:46:54 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-15 12:46:54 - app.routers.agents - INFO - 收到流式查询请求: 用户=wangigor, 会话ID=6
2025-04-15 12:46:54 - app.routers.agents - INFO - 开始处理流式响应: 会话ID=6, 查询=流式测试输出。我想要输出更多的内容。起码3000字。...
2025-04-15 12:46:54 - app.routers.agents - INFO - 已保存用户消息到会话 6
2025-04-15 12:46:54 - app.routers.agents - INFO - 启动Agent流式响应 for session: 6
2025-04-15 12:46:54 - app.services.vector_store - INFO - 执行相似度搜索: 查询='流式测试输出。我想要输出更多的内容。起码3000字。...', k=5
2025-04-15 12:46:54 - httpx - INFO - HTTP Request: POST http://wangigor.ddns.net:30063/collections/knowledge_base/points/query "HTTP/1.1 200 OK"
2025-04-15 12:46:54 - app.services.vector_store - INFO - 相似度搜索找到 0 个结果
2025-04-15 12:46:55 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-04-15 12:46:59 - app.routers.agents - INFO - 已保存AI响应到会话 6, 长度: 685
2025-04-15 12:46:59 - app.routers.agents - INFO - 流式响应完成 for session: 6
2025-04-15 13:00:23 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-15 13:00:23 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-15 13:00:23 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-15 13:00:23 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-15 13:00:24 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-15 13:00:24 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-15 13:00:29 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-15 13:00:29 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-15 13:00:29 - app.routers.agents - INFO - 收到流式查询请求: 用户=wangigor, 会话ID=6
2025-04-15 13:00:29 - app.routers.agents - INFO - 开始处理流式响应: 会话ID=6, 查询=流式测试输出。我想要输出更多的内容。起码3000字。

...
2025-04-15 13:00:29 - app.routers.agents - INFO - 已保存用户消息到会话 6
2025-04-15 13:00:29 - app.routers.agents - INFO - 启动Agent流式响应 for session: 6
2025-04-15 13:00:29 - app.services.vector_store - INFO - 执行相似度搜索: 查询='流式测试输出。我想要输出更多的内容。起码3000字。

...', k=5
2025-04-15 13:00:30 - httpx - INFO - HTTP Request: POST http://wangigor.ddns.net:30063/collections/knowledge_base/points/query "HTTP/1.1 200 OK"
2025-04-15 13:00:30 - app.services.vector_store - INFO - 相似度搜索找到 0 个结果
2025-04-15 13:00:31 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-04-15 13:00:35 - app.routers.agents - INFO - 已保存AI响应到会话 6, 长度: 685
2025-04-15 13:00:35 - app.routers.agents - INFO - 流式响应完成 for session: 6
2025-04-15 13:12:53 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-15 13:12:53 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-15 13:13:48 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-15 13:13:48 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-15 13:20:16 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-15 13:20:16 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-15 13:20:17 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-15 13:20:17 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-15 13:20:17 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-15 13:20:17 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-15 13:20:25 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-15 13:20:25 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-15 13:20:25 - app.routers.agents - INFO - 收到流式查询请求: 用户=wangigor, 会话ID=6
2025-04-15 13:20:25 - app.routers.agents - INFO - 开始处理流式响应: 会话ID=6, 查询=流式测试输出。我想要输出更多的内容。起码3000字。

...
2025-04-15 13:20:25 - app.routers.agents - INFO - 已保存用户消息到会话 6
2025-04-15 13:20:25 - app.routers.agents - INFO - 启动Agent流式响应 for session: 6
2025-04-15 13:20:25 - app.services.vector_store - INFO - 执行相似度搜索: 查询='流式测试输出。我想要输出更多的内容。起码3000字。

...', k=5
2025-04-15 13:20:25 - httpx - INFO - HTTP Request: POST http://wangigor.ddns.net:30063/collections/knowledge_base/points/query "HTTP/1.1 200 OK"
2025-04-15 13:20:25 - app.services.vector_store - INFO - 相似度搜索找到 0 个结果
2025-04-15 13:20:27 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-04-15 13:20:32 - app.routers.agents - INFO - 已保存AI响应到会话 6, 长度: 685
2025-04-15 13:20:32 - app.routers.agents - INFO - 流式响应完成 for session: 6
2025-04-15 13:31:26 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-15 13:31:26 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-15 13:31:38 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-15 13:31:38 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-15 13:32:00 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-15 13:32:00 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-15 13:32:17 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-15 13:32:17 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-15 13:32:29 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-15 13:32:29 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-15 13:33:04 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-15 13:33:04 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-15 13:33:35 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-15 13:33:35 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-15 13:42:09 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-15 13:42:47 - root - INFO - 日志系统初始化完成
2025-04-15 13:42:47 - app.main - ERROR - 数据库表创建失败: (psycopg2.OperationalError) could not translate host name "wangigor.ddns.net" to address: nodename nor servname provided, or not known

(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-04-15 13:44:15 - root - INFO - 日志系统初始化完成
2025-04-15 13:44:15 - app.main - ERROR - 数据库表创建失败: (psycopg2.OperationalError) could not translate host name "wangigor.ddns.net" to address: nodename nor servname provided, or not known

(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-04-15 13:44:59 - root - INFO - 日志系统初始化完成
2025-04-15 13:44:59 - app.main - ERROR - 数据库表创建失败: (psycopg2.OperationalError) could not translate host name "wangigor.ddns.net" to address: nodename nor servname provided, or not known

(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-04-15 13:49:04 - root - INFO - 日志系统初始化完成
2025-04-15 13:49:04 - app.main - ERROR - 数据库表创建失败: (psycopg2.OperationalError) could not translate host name "wangigor.ddns.net" to address: nodename nor servname provided, or not known

(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-04-15 13:53:50 - root - INFO - 日志系统初始化完成
2025-04-15 13:53:50 - app.main - ERROR - 数据库表创建失败: (psycopg2.OperationalError) could not translate host name "wangigor.ddns.net" to address: nodename nor servname provided, or not known

(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-04-15 14:07:32 - root - INFO - 日志系统初始化完成
2025-04-15 14:07:33 - app.main - INFO - 数据库表创建完成
2025-04-15 14:07:47 - passlib.handlers.bcrypt - WARNING - (trapped) error reading bcrypt version
Traceback (most recent call last):
  File "/Users/wangke/notebook-ai/notebook-backend/venv312/lib/python3.12/site-packages/passlib/handlers/bcrypt.py", line 620, in _load_backend_mixin
    version = _bcrypt.__about__.__version__
              ^^^^^^^^^^^^^^^^^
AttributeError: module 'bcrypt' has no attribute '__about__'
2025-04-15 14:07:48 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-15 14:07:48 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-15 14:07:48 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-15 14:07:48 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-15 14:07:53 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-15 14:07:53 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-15 14:07:53 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-15 14:07:53 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-15 14:07:53 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-15 14:07:53 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-15 14:07:55 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-15 14:07:55 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-15 14:07:56 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-15 14:07:56 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-15 14:07:57 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-15 14:07:57 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-15 14:08:03 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-15 14:08:03 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-15 14:08:17 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-15 14:08:17 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-15 14:08:17 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-15 14:08:17 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-15 14:08:17 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-15 14:08:17 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-15 14:09:08 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-15 14:09:08 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-15 14:09:08 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-15 14:09:08 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-15 14:09:09 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-15 14:09:09 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-15 14:09:12 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-15 14:09:12 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-15 14:09:12 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-15 14:09:12 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-15 14:09:12 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-15 14:09:12 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-15 14:09:22 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-15 14:09:22 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-15 14:09:23 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-15 14:09:23 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-15 14:09:24 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-15 14:09:24 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-15 14:09:24 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-15 14:09:24 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-15 14:09:47 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-15 14:09:47 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-15 14:09:49 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-15 14:09:49 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-15 14:22:38 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-15 14:22:38 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-15 14:31:17 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-15 14:31:17 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-15 14:31:17 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-15 14:31:17 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-15 14:38:46 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-15 14:38:46 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-15 14:39:03 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-15 14:39:03 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-15 14:39:04 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-15 14:39:04 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-15 14:39:19 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-15 14:39:19 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-15 14:39:20 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-15 14:39:20 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-15 14:39:53 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-15 14:39:53 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-15 14:39:54 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-15 14:39:54 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-15 14:40:09 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-15 14:40:09 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-15 14:40:10 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-15 14:40:10 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-15 14:40:36 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-15 14:40:36 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-15 14:40:37 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-15 14:40:37 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-15 14:40:49 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-15 14:40:49 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-15 14:40:50 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-15 14:40:50 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-15 14:41:07 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-15 14:41:07 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-15 14:41:08 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-15 14:41:08 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-15 14:41:29 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-15 14:41:29 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-15 14:41:50 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-15 14:41:50 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-15 14:42:01 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-15 14:42:01 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-15 14:42:02 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-15 14:42:02 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-15 14:42:35 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-15 14:42:35 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-15 14:42:59 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-15 14:42:59 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-15 14:43:00 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-15 14:43:00 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-15 14:46:11 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-15 14:46:11 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-15 14:46:11 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-15 14:46:11 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-15 14:46:11 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-15 14:46:11 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-15 14:46:11 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-15 14:46:12 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-15 14:46:17 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-15 14:46:17 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-15 14:46:17 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-15 14:46:17 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-15 14:46:21 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-15 14:46:21 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-15 14:46:21 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-15 14:46:21 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-15 14:46:23 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-15 14:46:23 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-15 14:46:23 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-15 14:46:23 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-15 14:46:33 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-15 14:46:33 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-15 14:46:36 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-15 14:46:37 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-15 14:46:37 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-15 14:46:37 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-15 14:46:42 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-15 14:46:42 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-15 14:46:42 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-15 14:46:42 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-15 14:46:42 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-15 14:46:42 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-15 14:46:42 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-15 14:46:42 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-15 14:47:01 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-15 14:47:01 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-15 14:47:01 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-15 14:47:01 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-15 14:47:02 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-15 14:47:02 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-15 14:47:03 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-15 14:47:03 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-15 14:47:03 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-15 14:47:03 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-15 14:47:03 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-15 14:47:03 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-15 14:47:04 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-15 14:47:04 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-15 14:47:04 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-15 14:47:04 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-15 16:16:11 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-15 16:16:11 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-15 16:16:11 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-15 16:16:11 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-15 16:16:11 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-15 16:16:11 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-15 16:16:11 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-15 16:16:11 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-15 16:16:13 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-15 16:16:13 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-15 16:16:13 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-15 16:16:13 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-15 16:16:13 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-15 16:16:13 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-15 16:16:14 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-15 16:16:14 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-15 16:16:14 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-15 16:16:14 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-15 16:16:14 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-15 16:16:14 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-15 16:19:08 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-15 16:19:08 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-15 16:19:08 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-15 16:19:08 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-15 16:21:09 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-15 16:21:09 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-15 16:21:09 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-15 16:21:09 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-15 16:21:55 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-15 16:21:55 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-15 16:21:58 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-15 16:21:58 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-15 16:22:06 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-15 16:22:06 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-15 16:22:06 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-15 16:22:06 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-15 16:22:07 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-15 16:22:07 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-15 16:22:07 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-15 16:22:07 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-15 16:22:13 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-15 16:22:13 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-15 16:22:13 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-15 16:22:13 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-15 16:48:55 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-15 16:48:55 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-15 16:49:15 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-15 16:49:15 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-15 16:51:46 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-15 16:51:46 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-15 16:51:46 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-15 16:51:46 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-15 16:51:47 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-15 16:51:47 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-15 16:51:49 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-15 16:51:49 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-15 16:51:50 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-15 16:51:50 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-15 16:56:06 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-15 16:56:06 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-15 17:17:27 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-15 17:17:27 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-15 17:17:27 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-15 17:17:27 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-15 17:17:28 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-15 17:17:28 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-15 17:17:30 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-15 17:17:30 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-15 17:17:31 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-15 17:17:31 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-15 17:31:01 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-15 17:31:01 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-15 17:31:35 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-15 17:31:35 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-15 17:32:51 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-15 17:32:51 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-15 17:33:12 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-15 17:33:12 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-15 17:33:37 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-15 17:33:38 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-15 17:34:24 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-15 17:34:24 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-15 17:34:48 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-15 17:34:48 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-15 20:58:34 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-15 20:58:34 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-15 20:58:34 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-15 20:58:34 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-15 20:58:34 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-15 20:58:34 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-15 20:58:36 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-15 20:58:36 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-15 20:58:37 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-15 20:58:37 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-15 20:58:38 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-15 20:58:39 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-15 20:58:39 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-15 20:58:39 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-15 21:03:23 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-15 21:03:23 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-15 21:03:23 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-15 21:03:23 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-15 21:03:23 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-15 21:03:23 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-15 21:03:28 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-15 21:03:28 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-15 21:03:28 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-15 21:03:28 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-15 21:03:29 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-15 21:03:29 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-15 21:03:35 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-15 21:03:35 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-15 21:03:35 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-15 21:03:35 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-15 21:03:36 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-15 21:03:36 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-15 21:05:00 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-15 21:05:00 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-15 21:05:01 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-15 21:05:01 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-15 21:05:01 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-15 21:05:01 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-15 21:05:02 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-15 21:05:02 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-15 21:05:03 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-15 21:05:03 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-15 21:05:04 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-15 21:05:04 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-15 21:05:08 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-15 21:05:08 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-15 21:05:27 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-15 21:05:27 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-15 21:05:27 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-15 21:05:28 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-15 21:05:27 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-15 21:05:27 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-16 09:20:41 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-16 09:20:58 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-16 09:20:58 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-16 09:21:32 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-16 09:21:32 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-16 09:21:51 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-16 09:21:51 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-16 09:22:30 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-16 09:22:30 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-16 09:22:30 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-16 09:22:30 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-16 09:22:31 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-16 09:22:31 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-16 09:22:48 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-16 09:22:48 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-16 09:22:50 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-16 09:22:50 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-16 09:22:50 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-16 09:22:50 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-16 09:22:51 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-16 09:22:51 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-16 09:32:52 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-16 09:32:52 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-16 09:33:14 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-16 09:33:14 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-16 09:33:14 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-16 09:33:14 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-16 09:33:15 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-16 09:33:15 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-16 09:33:25 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-16 09:33:25 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-16 09:33:25 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-16 09:33:25 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-16 09:33:26 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-16 09:33:26 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-16 09:33:40 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-16 09:33:40 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-16 09:34:18 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-16 09:34:18 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-16 09:34:35 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-16 09:34:35 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-16 09:35:01 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-16 09:35:01 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-16 10:05:47 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-16 10:05:47 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-16 10:05:48 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-16 10:05:48 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-16 10:05:48 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-16 10:05:48 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-16 10:05:51 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-16 10:05:51 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-16 10:05:52 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-16 10:05:52 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-16 10:06:04 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-16 10:06:04 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-16 10:06:05 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-16 10:06:05 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-16 10:06:05 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-16 10:06:05 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-16 10:07:18 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-16 10:07:18 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-16 10:07:18 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-16 10:07:18 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-16 10:07:18 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-16 10:07:18 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-16 10:07:22 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-16 10:07:22 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-16 10:16:25 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-16 10:16:25 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-16 10:16:25 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-16 10:16:25 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-16 10:16:25 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-16 10:16:25 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-16 10:16:45 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-16 10:16:45 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-16 10:16:45 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-16 10:16:45 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-16 10:16:45 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-16 10:16:45 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-16 10:18:13 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-16 10:18:13 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-16 10:18:14 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-16 10:18:14 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-16 10:18:14 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-16 10:18:14 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-16 10:18:25 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-16 10:18:25 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-16 10:18:25 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-16 10:18:25 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-16 10:18:27 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-16 10:18:27 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-16 10:18:28 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-16 10:18:28 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-16 10:18:30 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-16 10:18:30 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-16 10:18:33 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-16 10:18:33 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-16 10:18:33 - app.routers.agents - INFO - 收到流式查询请求: 用户=wangigor, 会话ID=7
2025-04-16 10:18:33 - app.routers.agents - INFO - 开始处理流式响应: 会话ID=7, 查询=测试...
2025-04-16 10:18:33 - app.routers.agents - INFO - 已保存用户消息到会话 7
2025-04-16 10:18:33 - app.routers.agents - INFO - 启动Agent流式响应 for session: 7
2025-04-16 10:18:33 - app.services.vector_store - INFO - 执行相似度搜索: 查询='测试...', k=5
2025-04-16 10:18:33 - httpx - INFO - HTTP Request: POST http://wangigor.ddns.net:30063/collections/knowledge_base/points/query "HTTP/1.1 200 OK"
2025-04-16 10:18:33 - app.services.vector_store - INFO - 相似度搜索找到 0 个结果
2025-04-16 10:18:36 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-04-16 10:18:38 - app.routers.agents - INFO - 已保存AI响应到会话 7, 长度: 293
2025-04-16 10:18:38 - app.routers.agents - INFO - 流式响应完成 for session: 7
2025-04-16 10:18:49 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-16 10:18:49 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-16 18:47:44 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-16 18:47:44 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-16 18:48:11 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-16 18:48:11 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-16 18:48:26 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-16 18:48:26 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-16 18:53:40 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-16 18:53:58 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-16 18:53:58 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-16 18:54:05 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-16 18:54:05 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-16 18:54:24 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-16 18:54:24 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-16 18:54:38 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-16 18:54:38 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-16 18:54:56 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-16 18:54:56 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-16 20:05:55 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-16 20:07:38 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-16 20:07:38 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-16 20:08:33 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-16 20:08:33 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-16 20:08:33 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-16 20:08:33 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-16 20:08:34 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-16 20:08:34 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-16 20:08:36 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-16 20:08:36 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-16 20:08:37 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-16 20:08:38 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-16 20:08:41 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-16 20:08:41 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-16 20:08:41 - app.routers.agents - INFO - 收到流式查询请求: 用户=wangigor, 会话ID=7
2025-04-16 20:08:41 - app.routers.agents - INFO - 开始处理流式响应: 会话ID=7, 查询=测试...
2025-04-16 20:08:42 - app.routers.agents - INFO - 已保存用户消息到会话 7
2025-04-16 20:08:42 - app.routers.agents - INFO - 启动Agent流式响应 for session: 7
2025-04-16 20:08:42 - app.services.vector_store - INFO - 执行相似度搜索: 查询='测试...', k=5
2025-04-16 20:08:42 - httpx - INFO - HTTP Request: POST http://wangigor.ddns.net:30063/collections/knowledge_base/points/query "HTTP/1.1 200 OK"
2025-04-16 20:08:42 - app.services.vector_store - INFO - 相似度搜索找到 0 个结果
2025-04-16 20:08:47 - openai._base_client - INFO - Retrying request to /chat/completions in 0.443393 seconds
2025-04-16 20:08:53 - openai._base_client - INFO - Retrying request to /chat/completions in 0.818392 seconds
2025-04-16 20:08:55 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-04-16 20:08:58 - app.routers.agents - INFO - 已保存AI响应到会话 7, 长度: 285
2025-04-16 20:08:58 - app.routers.agents - INFO - 流式响应完成 for session: 7
2025-04-16 20:12:01 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-16 20:12:01 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-16 20:12:20 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-16 20:12:20 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-16 20:12:44 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-16 20:12:44 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-16 20:13:04 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-16 20:13:04 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-16 20:13:31 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-16 20:13:31 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-16 20:13:31 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-16 20:13:31 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-16 20:13:32 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-16 20:13:32 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-16 20:13:37 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-16 20:13:37 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-16 20:13:37 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-16 20:13:37 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-16 20:13:38 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-16 20:13:38 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-16 20:13:42 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-16 20:13:42 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-16 20:13:42 - app.routers.agents - INFO - 收到流式查询请求: 用户=wangigor, 会话ID=7
2025-04-16 20:13:42 - app.routers.agents - INFO - 开始处理流式响应: 会话ID=7, 查询=测试...
2025-04-16 20:13:42 - app.routers.agents - INFO - 已保存用户消息到会话 7
2025-04-16 20:13:42 - app.routers.agents - INFO - 启动Agent流式响应 for session: 7
2025-04-16 20:13:42 - app.services.vector_store - INFO - 执行相似度搜索: 查询='测试...', k=5
2025-04-16 20:13:43 - httpx - INFO - HTTP Request: POST http://wangigor.ddns.net:30063/collections/knowledge_base/points/query "HTTP/1.1 200 OK"
2025-04-16 20:13:43 - app.services.vector_store - INFO - 相似度搜索找到 0 个结果
2025-04-16 20:13:45 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-04-16 20:13:47 - app.routers.agents - INFO - 已保存AI响应到会话 7, 长度: 285
2025-04-16 20:13:47 - app.routers.agents - INFO - 流式响应完成 for session: 7
2025-04-16 20:17:24 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-16 20:17:24 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-16 20:17:26 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-16 20:17:26 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-16 20:18:11 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-16 20:18:11 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-16 20:18:11 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-16 20:18:11 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-16 20:18:13 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-16 20:18:13 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-16 20:18:13 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-16 20:18:13 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-16 20:18:14 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-16 20:18:14 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-16 20:18:31 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-16 20:18:31 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-16 20:18:44 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-16 20:18:44 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-16 20:18:45 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-16 20:18:45 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-16 20:18:45 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-16 20:18:45 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-16 20:19:12 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-16 20:19:12 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-16 20:19:13 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-16 20:19:13 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-16 20:19:13 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-16 20:19:13 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-16 20:20:18 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-16 20:20:18 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-16 20:20:19 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-16 20:20:19 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-16 20:20:19 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-16 20:20:19 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-16 20:20:32 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-16 20:20:32 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-16 20:20:32 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-16 20:20:32 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-16 20:20:32 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-16 20:20:32 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-16 20:20:47 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-16 20:20:47 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-16 20:20:47 - app.routers.agents - INFO - 收到流式查询请求: 用户=wangigor, 会话ID=7
2025-04-16 20:20:47 - app.routers.agents - INFO - 开始处理流式响应: 会话ID=7, 查询=测试...
2025-04-16 20:20:47 - app.routers.agents - INFO - 已保存用户消息到会话 7
2025-04-16 20:20:47 - app.routers.agents - INFO - 启动Agent流式响应 for session: 7
2025-04-16 20:20:47 - app.services.vector_store - INFO - 执行相似度搜索: 查询='测试...', k=5
2025-04-16 20:20:48 - httpx - INFO - HTTP Request: POST http://wangigor.ddns.net:30063/collections/knowledge_base/points/query "HTTP/1.1 200 OK"
2025-04-16 20:20:48 - app.services.vector_store - INFO - 相似度搜索找到 0 个结果
2025-04-16 20:20:49 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-04-16 20:20:51 - app.routers.agents - INFO - 已保存AI响应到会话 7, 长度: 285
2025-04-16 20:20:51 - app.routers.agents - INFO - 流式响应完成 for session: 7
2025-04-16 20:26:43 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-16 20:26:44 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-16 20:26:44 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-16 20:26:44 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-16 20:26:44 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-16 20:26:44 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-16 20:26:58 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-16 20:26:58 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-16 20:26:58 - app.routers.agents - INFO - 收到流式查询请求: 用户=wangigor, 会话ID=7
2025-04-16 20:26:58 - app.routers.agents - INFO - 开始处理流式响应: 会话ID=7, 查询=测试...
2025-04-16 20:26:58 - app.routers.agents - INFO - 已保存用户消息到会话 7
2025-04-16 20:26:58 - app.routers.agents - INFO - 启动Agent流式响应 for session: 7
2025-04-16 20:26:58 - app.services.vector_store - INFO - 执行相似度搜索: 查询='测试...', k=5
2025-04-16 20:26:58 - httpx - INFO - HTTP Request: POST http://wangigor.ddns.net:30063/collections/knowledge_base/points/query "HTTP/1.1 200 OK"
2025-04-16 20:26:58 - app.services.vector_store - INFO - 相似度搜索找到 0 个结果
2025-04-16 20:26:59 - openai._base_client - INFO - Retrying request to /chat/completions in 0.499581 seconds
2025-04-16 20:27:04 - openai._base_client - INFO - Retrying request to /chat/completions in 0.909814 seconds
2025-04-16 20:27:10 - app.routers.agents - INFO - 已保存AI响应到会话 7, 长度: 93
2025-04-16 20:27:10 - app.routers.agents - INFO - 流式响应完成 for session: 7
2025-04-16 20:27:25 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-16 20:27:25 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-16 20:27:25 - app.routers.agents - INFO - 收到流式查询请求: 用户=wangigor, 会话ID=7
2025-04-16 20:27:25 - app.routers.agents - INFO - 开始处理流式响应: 会话ID=7, 查询=测试...
2025-04-16 20:27:25 - app.routers.agents - INFO - 已保存用户消息到会话 7
2025-04-16 20:27:25 - app.routers.agents - INFO - 启动Agent流式响应 for session: 7
2025-04-16 20:27:25 - app.services.vector_store - INFO - 执行相似度搜索: 查询='测试...', k=5
2025-04-16 20:27:26 - httpx - INFO - HTTP Request: POST http://wangigor.ddns.net:30063/collections/knowledge_base/points/query "HTTP/1.1 200 OK"
2025-04-16 20:27:26 - app.services.vector_store - INFO - 相似度搜索找到 0 个结果
2025-04-16 20:27:26 - openai._base_client - INFO - Retrying request to /chat/completions in 0.377103 seconds
2025-04-16 20:27:26 - openai._base_client - INFO - Retrying request to /chat/completions in 0.952538 seconds
2025-04-16 20:27:28 - app.routers.agents - INFO - 已保存AI响应到会话 7, 长度: 93
2025-04-16 20:27:28 - app.routers.agents - INFO - 流式响应完成 for session: 7
2025-04-16 20:28:16 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-16 20:28:16 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-16 20:28:16 - app.routers.agents - INFO - 收到流式查询请求: 用户=wangigor, 会话ID=7
2025-04-16 20:28:16 - app.routers.agents - INFO - 开始处理流式响应: 会话ID=7, 查询=111...
2025-04-16 20:28:17 - app.routers.agents - INFO - 已保存用户消息到会话 7
2025-04-16 20:28:17 - app.routers.agents - INFO - 启动Agent流式响应 for session: 7
2025-04-16 20:28:17 - app.services.vector_store - INFO - 执行相似度搜索: 查询='111...', k=5
2025-04-16 20:28:17 - httpx - INFO - HTTP Request: POST http://wangigor.ddns.net:30063/collections/knowledge_base/points/query "HTTP/1.1 200 OK"
2025-04-16 20:28:17 - app.services.vector_store - INFO - 相似度搜索找到 0 个结果
2025-04-16 20:28:18 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-04-16 20:28:20 - app.routers.agents - INFO - 已保存AI响应到会话 7, 长度: 228
2025-04-16 20:28:20 - app.routers.agents - INFO - 流式响应完成 for session: 7
2025-04-16 20:30:09 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-16 20:30:09 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-16 20:30:09 - app.routers.agents - INFO - 收到流式查询请求: 用户=wangigor, 会话ID=7
2025-04-16 20:30:09 - app.routers.agents - INFO - 开始处理流式响应: 会话ID=7, 查询=测试...
2025-04-16 20:30:10 - app.routers.agents - INFO - 已保存用户消息到会话 7
2025-04-16 20:30:10 - app.routers.agents - INFO - 启动Agent流式响应 for session: 7
2025-04-16 20:30:10 - app.services.vector_store - INFO - 执行相似度搜索: 查询='测试...', k=5
2025-04-16 20:30:10 - httpx - INFO - HTTP Request: POST http://wangigor.ddns.net:30063/collections/knowledge_base/points/query "HTTP/1.1 200 OK"
2025-04-16 20:30:10 - app.services.vector_store - INFO - 相似度搜索找到 0 个结果
2025-04-16 20:30:15 - openai._base_client - INFO - Retrying request to /chat/completions in 0.474457 seconds
2025-04-16 20:30:17 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-04-16 20:30:19 - app.routers.agents - INFO - 已保存AI响应到会话 7, 长度: 285
2025-04-16 20:30:19 - app.routers.agents - INFO - 流式响应完成 for session: 7
2025-04-17 09:26:54 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-17 09:27:10 - sqlalchemy.pool.impl.QueuePool - ERROR - Exception during reset or similar
Traceback (most recent call last):
  File "/Users/wangke/notebook-ai/notebook-backend/venv312/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 987, in _finalize_fairy
    fairy._reset(
  File "/Users/wangke/notebook-ai/notebook-backend/venv312/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 1433, in _reset
    pool._dialect.do_rollback(self)
  File "/Users/wangke/notebook-ai/notebook-backend/venv312/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 703, in do_rollback
    dbapi_connection.rollback()
psycopg2.OperationalError: server closed the connection unexpectedly
	This probably means the server terminated abnormally
	before or while processing the request.

2025-04-17 09:27:10 - sqlalchemy.pool.impl.QueuePool - ERROR - Exception during reset or similar
Traceback (most recent call last):
  File "/Users/wangke/notebook-ai/notebook-backend/venv312/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 987, in _finalize_fairy
    fairy._reset(
  File "/Users/wangke/notebook-ai/notebook-backend/venv312/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 1433, in _reset
    pool._dialect.do_rollback(self)
  File "/Users/wangke/notebook-ai/notebook-backend/venv312/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 703, in do_rollback
    dbapi_connection.rollback()
psycopg2.OperationalError: server closed the connection unexpectedly
	This probably means the server terminated abnormally
	before or while processing the request.

2025-04-17 09:27:10 - sqlalchemy.pool.impl.QueuePool - ERROR - Exception during reset or similar
Traceback (most recent call last):
  File "/Users/wangke/notebook-ai/notebook-backend/venv312/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 987, in _finalize_fairy
    fairy._reset(
  File "/Users/wangke/notebook-ai/notebook-backend/venv312/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 1433, in _reset
    pool._dialect.do_rollback(self)
  File "/Users/wangke/notebook-ai/notebook-backend/venv312/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 703, in do_rollback
    dbapi_connection.rollback()
psycopg2.OperationalError: server closed the connection unexpectedly
	This probably means the server terminated abnormally
	before or while processing the request.

2025-04-17 09:27:10 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-17 09:27:11 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-17 09:27:11 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-17 09:27:11 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-17 09:34:39 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-17 09:34:39 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-17 09:37:37 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-17 09:37:38 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-17 09:37:38 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-17 09:37:38 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-17 09:37:39 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-17 09:37:39 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-17 09:37:48 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-17 09:37:48 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-17 09:37:48 - app.routers.agents - INFO - 收到流式查询请求: 用户=wangigor, 会话ID=7
2025-04-17 09:37:48 - app.routers.agents - INFO - 开始处理流式响应: 会话ID=7, 查询=测试...
2025-04-17 09:37:48 - app.routers.agents - INFO - 已保存用户消息到会话 7
2025-04-17 09:37:49 - app.routers.agents - INFO - 启动Agent流式响应 for session: 7
2025-04-17 09:37:49 - app.services.vector_store - INFO - 执行相似度搜索: 查询='测试...', k=5
2025-04-17 09:37:49 - httpx - INFO - HTTP Request: POST http://wangigor.ddns.net:30063/collections/knowledge_base/points/query "HTTP/1.1 200 OK"
2025-04-17 09:37:49 - app.services.vector_store - INFO - 相似度搜索找到 0 个结果
2025-04-17 09:37:51 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-04-17 09:37:53 - app.routers.agents - INFO - 已保存AI响应到会话 7, 长度: 285
2025-04-17 09:37:53 - app.routers.agents - INFO - 流式响应完成 for session: 7
2025-04-17 09:38:53 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-17 09:38:54 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-17 09:38:54 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-17 09:38:54 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-17 09:38:54 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-17 09:38:54 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-17 09:38:59 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-17 09:38:59 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-17 09:38:59 - app.routers.agents - INFO - 收到流式查询请求: 用户=wangigor, 会话ID=7
2025-04-17 09:38:59 - app.routers.agents - INFO - 开始处理流式响应: 会话ID=7, 查询=测试...
2025-04-17 09:39:00 - app.routers.agents - INFO - 已保存用户消息到会话 7
2025-04-17 09:39:00 - app.routers.agents - INFO - 启动Agent流式响应 for session: 7
2025-04-17 09:39:00 - app.services.vector_store - INFO - 执行相似度搜索: 查询='测试...', k=5
2025-04-17 09:39:00 - httpx - INFO - HTTP Request: POST http://wangigor.ddns.net:30063/collections/knowledge_base/points/query "HTTP/1.1 200 OK"
2025-04-17 09:39:00 - app.services.vector_store - INFO - 相似度搜索找到 0 个结果
2025-04-17 09:39:02 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-04-17 09:39:04 - app.routers.agents - INFO - 已保存AI响应到会话 7, 长度: 285
2025-04-17 09:39:04 - app.routers.agents - INFO - 流式响应完成 for session: 7
2025-04-17 09:39:44 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-17 09:39:44 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-17 09:39:58 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-17 09:39:58 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-17 09:45:34 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-17 09:45:34 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-17 09:45:34 - app.routers.agents - INFO - 收到流式查询请求: 用户=wangigor, 会话ID=7
2025-04-17 09:45:34 - app.routers.agents - INFO - 开始处理流式响应: 会话ID=7, 查询=测试...
2025-04-17 09:45:34 - app.routers.agents - INFO - 已保存用户消息到会话 7
2025-04-17 09:45:34 - app.routers.agents - INFO - 启动Agent流式响应 for session: 7
2025-04-17 09:45:34 - app.services.vector_store - INFO - 执行相似度搜索: 查询='测试...', k=5
2025-04-17 09:45:35 - httpx - INFO - HTTP Request: POST http://wangigor.ddns.net:30063/collections/knowledge_base/points/query "HTTP/1.1 200 OK"
2025-04-17 09:45:35 - app.services.vector_store - INFO - 相似度搜索找到 0 个结果
2025-04-17 09:45:36 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-04-17 09:45:38 - app.routers.agents - INFO - 已保存AI响应到会话 7, 长度: 287
2025-04-17 09:45:38 - app.routers.agents - INFO - 流式响应完成 for session: 7
2025-04-17 09:47:37 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-17 09:47:37 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-17 09:47:37 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-17 09:47:37 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-17 09:47:38 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-17 09:47:38 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-17 10:07:29 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-17 10:07:29 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-17 10:07:47 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-17 10:07:47 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-17 10:09:01 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-17 10:09:01 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-17 10:09:09 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-17 10:09:09 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-17 10:09:09 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-17 10:09:09 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-17 10:09:10 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-17 10:09:10 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-17 10:09:35 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-17 10:09:35 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-17 10:09:35 - app.routers.agents - INFO - 收到流式查询请求: 用户=wangigor, 会话ID=7
2025-04-17 10:09:35 - app.routers.agents - INFO - 开始处理流式响应: 会话ID=7, 查询=流式测试输出。我想要输出更多的内容。起码3000字。

...
2025-04-17 10:09:35 - app.routers.agents - INFO - 已保存用户消息到会话 7
2025-04-17 10:09:35 - app.routers.agents - INFO - 启动Agent流式响应 for session: 7
2025-04-17 10:09:35 - app.services.vector_store - INFO - 执行相似度搜索: 查询='流式测试输出。我想要输出更多的内容。起码3000字。

...', k=5
2025-04-17 10:09:36 - httpx - INFO - HTTP Request: POST http://wangigor.ddns.net:30063/collections/knowledge_base/points/query "HTTP/1.1 200 OK"
2025-04-17 10:09:36 - app.services.vector_store - INFO - 相似度搜索找到 0 个结果
2025-04-17 10:09:37 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-04-17 10:09:42 - app.routers.agents - INFO - 已保存AI响应到会话 7, 长度: 537
2025-04-17 10:09:42 - app.routers.agents - INFO - 流式响应完成 for session: 7
2025-04-17 10:10:12 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-17 10:10:12 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-17 10:10:12 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-17 10:10:12 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-17 10:10:13 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-17 10:10:13 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-17 10:29:51 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-17 10:29:51 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-17 10:30:07 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-17 10:30:07 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-17 10:33:21 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-17 10:33:21 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-17 10:33:22 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-17 10:33:22 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-17 10:33:22 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-17 10:33:22 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-17 10:33:54 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-17 10:33:54 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-17 10:33:54 - app.routers.agents - INFO - 收到流式查询请求: 用户=wangigor, 会话ID=7
2025-04-17 10:33:54 - app.routers.agents - INFO - 开始处理流式响应: 会话ID=7, 查询=测试...
2025-04-17 10:33:54 - app.routers.agents - INFO - 已保存用户消息到会话 7
2025-04-17 10:33:55 - app.routers.agents - INFO - 启动Agent流式响应 for session: 7
2025-04-17 10:33:55 - app.services.vector_store - INFO - 执行相似度搜索: 查询='测试...', k=5
2025-04-17 10:33:55 - httpx - INFO - HTTP Request: POST http://wangigor.ddns.net:30063/collections/knowledge_base/points/query "HTTP/1.1 200 OK"
2025-04-17 10:33:55 - app.services.vector_store - INFO - 相似度搜索找到 0 个结果
2025-04-17 10:33:57 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-04-17 10:33:59 - app.routers.agents - INFO - 已保存AI响应到会话 7, 长度: 287
2025-04-17 10:33:59 - app.routers.agents - INFO - 流式响应完成 for session: 7
2025-04-17 10:36:58 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-17 10:36:58 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-17 10:37:23 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-17 10:37:23 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-17 10:37:34 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-17 10:37:34 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-17 10:38:01 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-17 10:38:01 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-17 10:38:01 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-17 10:38:01 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-17 10:38:02 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-17 10:38:02 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-17 10:43:08 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-17 10:43:08 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-17 10:43:08 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-17 10:43:08 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-17 10:43:09 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-17 10:43:09 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-17 10:43:18 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-17 10:43:18 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-17 10:43:48 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-17 10:43:48 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-17 10:44:01 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-17 10:44:01 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-17 10:44:25 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-17 10:44:25 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-17 10:44:25 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-17 10:44:25 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-17 10:44:26 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-17 10:44:26 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-17 10:44:58 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-17 10:44:58 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-17 10:44:58 - app.routers.agents - INFO - 收到流式查询请求: 用户=wangigor, 会话ID=7
2025-04-17 10:44:58 - app.routers.agents - INFO - 开始处理流式响应: 会话ID=7, 查询=测试测试。给我讲一个500字的小故事...
2025-04-17 10:44:58 - app.routers.agents - INFO - 已保存用户消息到会话 7
2025-04-17 10:44:58 - app.routers.agents - INFO - 启动Agent流式响应 for session: 7
2025-04-17 10:44:58 - app.services.vector_store - INFO - 执行相似度搜索: 查询='测试测试。给我讲一个500字的小故事...', k=5
2025-04-17 10:44:58 - httpx - INFO - HTTP Request: POST http://wangigor.ddns.net:30063/collections/knowledge_base/points/query "HTTP/1.1 200 OK"
2025-04-17 10:44:58 - app.services.vector_store - INFO - 相似度搜索找到 0 个结果
2025-04-17 10:45:00 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-04-17 10:45:05 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-17 10:45:06 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-17 10:45:07 - app.routers.agents - INFO - 已保存AI响应到会话 7, 长度: 534
2025-04-17 10:45:07 - app.routers.agents - INFO - 流式响应完成 for session: 7
2025-04-17 10:45:23 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-17 10:45:23 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-17 10:45:23 - app.routers.agents - INFO - 收到流式查询请求: 用户=wangigor, 会话ID=7
2025-04-17 10:45:23 - app.routers.agents - INFO - 开始处理流式响应: 会话ID=7, 查询=测试测试。给我讲一个500字的小故事
...
2025-04-17 10:45:23 - app.routers.agents - INFO - 已保存用户消息到会话 7
2025-04-17 10:45:23 - app.routers.agents - INFO - 启动Agent流式响应 for session: 7
2025-04-17 10:45:23 - app.services.vector_store - INFO - 执行相似度搜索: 查询='测试测试。给我讲一个500字的小故事
...', k=5
2025-04-17 10:45:23 - httpx - INFO - HTTP Request: POST http://wangigor.ddns.net:30063/collections/knowledge_base/points/query "HTTP/1.1 200 OK"
2025-04-17 10:45:23 - app.services.vector_store - INFO - 相似度搜索找到 0 个结果
2025-04-17 10:45:25 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-04-17 10:45:31 - app.routers.agents - INFO - 已保存AI响应到会话 7, 长度: 534
2025-04-17 10:45:31 - app.routers.agents - INFO - 流式响应完成 for session: 7
2025-04-17 10:45:40 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-17 10:45:40 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-17 10:45:40 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-17 10:45:40 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-17 10:45:41 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-17 10:45:41 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-17 10:47:17 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-17 10:47:17 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-17 10:47:17 - app.routers.agents - INFO - 收到流式查询请求: 用户=wangigor, 会话ID=7
2025-04-17 10:47:17 - app.routers.agents - INFO - 开始处理流式响应: 会话ID=7, 查询=测试测试。给我讲一个500字的小故事
...
2025-04-17 10:47:17 - app.routers.agents - INFO - 已保存用户消息到会话 7
2025-04-17 10:47:17 - app.routers.agents - INFO - 启动Agent流式响应 for session: 7
2025-04-17 10:47:17 - app.services.vector_store - INFO - 执行相似度搜索: 查询='测试测试。给我讲一个500字的小故事
...', k=5
2025-04-17 10:47:17 - httpx - INFO - HTTP Request: POST http://wangigor.ddns.net:30063/collections/knowledge_base/points/query "HTTP/1.1 200 OK"
2025-04-17 10:47:17 - app.services.vector_store - INFO - 相似度搜索找到 0 个结果
2025-04-17 10:47:19 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-04-17 10:47:25 - app.routers.agents - INFO - 已保存AI响应到会话 7, 长度: 556
2025-04-17 10:47:25 - app.routers.agents - INFO - 流式响应完成 for session: 7
2025-04-17 11:29:43 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-17 11:29:43 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-17 11:29:43 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-17 11:29:43 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-17 11:29:44 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-17 11:29:44 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-17 11:32:07 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-17 11:32:07 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-17 11:32:33 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-17 11:32:33 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-17 11:32:52 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-17 11:32:52 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-17 11:33:57 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-17 11:33:57 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-17 11:33:57 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-17 11:33:57 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-17 11:33:57 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-17 11:33:57 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-17 11:34:17 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-17 11:34:17 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-17 11:34:17 - app.routers.agents - INFO - 收到流式查询请求: 用户=wangigor, 会话ID=7
2025-04-17 11:34:17 - app.routers.agents - INFO - 开始处理流式响应: 会话ID=7, 查询=测试测试。给我讲一个500字的小故事...
2025-04-17 11:34:17 - app.routers.agents - INFO - 已保存用户消息到会话 7
2025-04-17 11:34:17 - app.routers.agents - INFO - 启动Agent流式响应 for session: 7
2025-04-17 11:34:17 - app.services.vector_store - INFO - 执行相似度搜索: 查询='测试测试。给我讲一个500字的小故事...', k=5
2025-04-17 11:34:17 - httpx - INFO - HTTP Request: POST http://wangigor.ddns.net:30063/collections/knowledge_base/points/query "HTTP/1.1 200 OK"
2025-04-17 11:34:17 - app.services.vector_store - INFO - 相似度搜索找到 0 个结果
2025-04-17 11:34:19 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-04-17 11:34:25 - app.routers.agents - INFO - 已保存AI响应到会话 7, 长度: 556
2025-04-17 11:34:25 - app.routers.agents - INFO - 流式响应完成 for session: 7
2025-04-17 11:34:50 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-17 11:34:50 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-17 11:34:50 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-17 11:34:51 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-17 11:34:51 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-17 11:34:51 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-17 11:34:59 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-17 11:34:59 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-17 11:34:59 - app.routers.agents - INFO - 收到流式查询请求: 用户=wangigor, 会话ID=7
2025-04-17 11:34:59 - app.routers.agents - INFO - 开始处理流式响应: 会话ID=7, 查询=测试测试。给我讲一个500字的小故事
...
2025-04-17 11:35:00 - app.routers.agents - INFO - 已保存用户消息到会话 7
2025-04-17 11:35:00 - app.routers.agents - INFO - 启动Agent流式响应 for session: 7
2025-04-17 11:35:00 - app.services.vector_store - INFO - 执行相似度搜索: 查询='测试测试。给我讲一个500字的小故事
...', k=5
2025-04-17 11:35:00 - httpx - INFO - HTTP Request: POST http://wangigor.ddns.net:30063/collections/knowledge_base/points/query "HTTP/1.1 200 OK"
2025-04-17 11:35:00 - app.services.vector_store - INFO - 相似度搜索找到 0 个结果
2025-04-17 11:35:02 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-04-17 11:35:07 - app.routers.agents - INFO - 已保存AI响应到会话 7, 长度: 556
2025-04-17 11:35:07 - app.routers.agents - INFO - 流式响应完成 for session: 7
2025-04-17 11:53:10 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-17 11:53:10 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-17 11:53:26 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-17 11:53:26 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-17 12:28:22 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-17 12:28:22 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-17 12:28:22 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-17 12:28:22 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-17 12:28:22 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-17 12:28:22 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-17 12:28:37 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-17 12:28:37 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-17 12:28:37 - app.routers.agents - INFO - 收到流式查询请求: 用户=wangigor, 会话ID=7
2025-04-17 12:28:37 - app.routers.agents - INFO - 开始处理流式响应: 会话ID=7, 查询=测试测试。给我讲一个500字的小故事...
2025-04-17 12:28:37 - app.routers.agents - INFO - 已保存用户消息到会话 7
2025-04-17 12:28:37 - app.routers.agents - INFO - 启动Agent流式响应 for session: 7
2025-04-17 12:28:37 - app.services.vector_store - INFO - 执行相似度搜索: 查询='测试测试。给我讲一个500字的小故事...', k=5
2025-04-17 12:28:38 - httpx - INFO - HTTP Request: POST http://wangigor.ddns.net:30063/collections/knowledge_base/points/query "HTTP/1.1 200 OK"
2025-04-17 12:28:38 - app.services.vector_store - INFO - 相似度搜索找到 0 个结果
2025-04-17 12:28:39 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-04-17 12:28:47 - app.routers.agents - INFO - 已保存AI响应到会话 7, 长度: 556
2025-04-17 12:28:47 - app.routers.agents - INFO - 流式响应完成 for session: 7
2025-04-17 12:31:27 - root - INFO - 日志系统初始化完成
2025-04-17 12:31:28 - app.main - INFO - 数据库表创建完成
2025-04-17 12:31:35 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-17 12:31:35 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-17 12:31:36 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-17 12:31:36 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-17 12:31:36 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-17 12:31:36 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-17 12:31:46 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-17 12:31:46 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-17 12:31:46 - app.routers.agents - INFO - 收到流式查询请求: 用户=wangigor, 会话ID=7
2025-04-17 12:31:47 - app.routers.agents - INFO - 开始处理流式响应: 会话ID=7, 查询=测试测试。给我讲一个500字的小故事
...
2025-04-17 12:31:47 - app.routers.agents - INFO - 已保存用户消息到会话 7
2025-04-17 12:31:47 - app.routers.agents - INFO - 启动Agent流式响应 for session: 7
2025-04-17 12:31:47 - app.services.vector_store - INFO - 执行相似度搜索: 查询='测试测试。给我讲一个500字的小故事
...', k=5
2025-04-17 12:31:47 - httpx - INFO - HTTP Request: POST http://wangigor.ddns.net:30063/collections/knowledge_base/points/query "HTTP/1.1 200 OK"
2025-04-17 12:31:47 - app.services.vector_store - INFO - 相似度搜索找到 0 个结果
2025-04-17 12:31:49 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-04-17 12:31:54 - app.routers.agents - INFO - 已保存结构化AI响应到会话 7, 长度: 471
2025-04-17 12:31:54 - app.routers.agents - INFO - 流式响应完成 for session: 7
2025-04-17 12:32:03 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-17 12:32:04 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-17 12:32:04 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-17 12:32:04 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-17 12:32:04 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-17 12:32:04 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-17 12:32:15 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-17 12:32:15 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-17 12:32:15 - app.routers.agents - INFO - 收到流式查询请求: 用户=wangigor, 会话ID=7
2025-04-17 12:32:15 - app.routers.agents - INFO - 开始处理流式响应: 会话ID=7, 查询=测试测试。给我讲一个500字的小故事...
2025-04-17 12:32:15 - app.routers.agents - INFO - 已保存用户消息到会话 7
2025-04-17 12:32:15 - app.routers.agents - INFO - 启动Agent流式响应 for session: 7
2025-04-17 12:32:15 - app.services.vector_store - INFO - 执行相似度搜索: 查询='测试测试。给我讲一个500字的小故事...', k=5
2025-04-17 12:32:16 - httpx - INFO - HTTP Request: POST http://wangigor.ddns.net:30063/collections/knowledge_base/points/query "HTTP/1.1 200 OK"
2025-04-17 12:32:16 - app.services.vector_store - INFO - 相似度搜索找到 0 个结果
2025-04-17 12:32:17 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-04-17 12:32:24 - app.routers.agents - INFO - 已保存结构化AI响应到会话 7, 长度: 605
2025-04-17 12:32:24 - app.routers.agents - INFO - 流式响应完成 for session: 7
2025-04-17 12:35:34 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-17 12:35:34 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-17 12:35:34 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-17 12:35:34 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-17 12:35:34 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-17 12:35:35 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-17 12:39:29 - root - INFO - 日志系统初始化完成
2025-04-17 12:39:29 - app.main - INFO - 数据库表创建完成
2025-04-17 12:40:18 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-17 12:40:18 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-17 12:40:18 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-17 12:40:18 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-17 12:40:19 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-17 12:40:19 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-17 12:40:24 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-17 12:40:24 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-17 12:40:24 - app.routers.agents - INFO - 收到流式查询请求: 用户=wangigor, 会话ID=7
2025-04-17 12:40:24 - app.routers.agents - INFO - 开始处理流式响应: 会话ID=7, 查询=测试测试。给我讲一个500字的小故事
...
2025-04-17 12:40:24 - app.routers.agents - INFO - 已保存用户消息到会话 7
2025-04-17 12:40:24 - app.routers.agents - INFO - 启动Agent流式响应 for session: 7
2025-04-17 12:40:24 - app.services.vector_store - INFO - 执行相似度搜索: 查询='测试测试。给我讲一个500字的小故事
...', k=5
2025-04-17 12:40:24 - httpx - INFO - HTTP Request: POST http://wangigor.ddns.net:30063/collections/knowledge_base/points/query "HTTP/1.1 200 OK"
2025-04-17 12:40:24 - app.services.vector_store - INFO - 相似度搜索找到 0 个结果
2025-04-17 12:40:26 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-04-17 12:40:32 - app.routers.agents - INFO - 准备保存结构化内容 (长度: 1095), 块数量: 4
2025-04-17 12:40:32 - app.routers.agents - INFO - 已保存结构化AI响应到会话 7, 长度: 1095
2025-04-17 12:40:32 - app.routers.agents - INFO - 流式响应完成 for session: 7
2025-04-17 12:43:23 - root - INFO - 日志系统初始化完成
2025-04-17 12:43:24 - app.main - INFO - 数据库表创建完成
2025-04-17 12:43:27 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-17 12:43:27 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-17 12:43:27 - app.routers.agents - INFO - 收到流式查询请求: 用户=wangigor, 会话ID=7
2025-04-17 12:43:27 - app.routers.agents - INFO - 开始处理流式响应: 会话ID=7, 查询=测试测试。给我讲一个500字的小故事
...
2025-04-17 12:43:27 - app.routers.agents - INFO - 已保存用户消息到会话 7
2025-04-17 12:43:27 - app.routers.agents - INFO - 启动Agent流式响应 for session: 7
2025-04-17 12:43:27 - app.services.vector_store - INFO - 执行相似度搜索: 查询='测试测试。给我讲一个500字的小故事
...', k=5
2025-04-17 12:43:27 - httpx - INFO - HTTP Request: POST http://wangigor.ddns.net:30063/collections/knowledge_base/points/query "HTTP/1.1 200 OK"
2025-04-17 12:43:27 - app.services.vector_store - INFO - 相似度搜索找到 0 个结果
2025-04-17 12:43:29 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-04-17 12:43:36 - app.routers.agents - INFO - 准备保存结构化内容 (长度: 570), 块数量: 4
2025-04-17 12:43:36 - app.routers.agents - INFO - 已保存结构化AI响应到会话 7, 长度: 570
2025-04-17 12:43:36 - app.routers.agents - INFO - 流式响应完成 for session: 7
2025-04-17 12:44:01 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-17 12:44:01 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-17 12:44:01 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-17 12:44:01 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-17 12:44:02 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-17 12:44:02 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-17 12:45:59 - root - INFO - 日志系统初始化完成
2025-04-17 12:45:59 - app.main - INFO - 数据库表创建完成
2025-04-17 12:46:26 - root - INFO - 日志系统初始化完成
2025-04-17 12:46:26 - app.main - INFO - 数据库表创建完成
2025-04-17 12:47:02 - root - INFO - 日志系统初始化完成
2025-04-17 12:47:03 - app.main - INFO - 数据库表创建完成
2025-04-17 12:47:47 - root - INFO - 日志系统初始化完成
2025-04-17 12:47:47 - app.main - INFO - 数据库表创建完成
2025-04-17 12:48:10 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-17 12:48:10 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-17 12:48:10 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-17 12:48:10 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-17 12:48:11 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-17 12:48:11 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-17 12:48:21 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-17 12:48:21 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-17 12:48:21 - app.routers.agents - INFO - 收到流式查询请求: 用户=wangigor, 会话ID=7
2025-04-17 12:48:21 - app.routers.agents - INFO - 开始处理流式响应: 会话ID=7, 查询=测试测试。给我讲一个500字的小故事
...
2025-04-17 12:48:21 - app.routers.agents - INFO - 已保存用户消息到会话 7
2025-04-17 12:48:21 - app.routers.agents - INFO - 启动Agent流式响应 for session: 7
2025-04-17 12:48:21 - app.services.vector_store - INFO - 执行相似度搜索: 查询='测试测试。给我讲一个500字的小故事
...', k=5
2025-04-17 12:48:22 - httpx - INFO - HTTP Request: POST http://wangigor.ddns.net:30063/collections/knowledge_base/points/query "HTTP/1.1 200 OK"
2025-04-17 12:48:22 - app.services.vector_store - INFO - 相似度搜索找到 0 个结果
2025-04-17 12:48:23 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-04-17 12:48:29 - app.routers.agents - INFO - 准备保存结构化内容 (长度: 559), 块数量: 6
2025-04-17 12:48:29 - app.routers.agents - INFO - 已保存结构化AI响应到会话 7, 长度: 559
2025-04-17 12:48:29 - app.routers.agents - INFO - 流式响应完成 for session: 7
2025-04-17 13:03:51 - root - INFO - 日志系统初始化完成
2025-04-17 13:03:51 - app.main - INFO - 数据库表创建完成
2025-04-17 13:04:48 - root - INFO - 日志系统初始化完成
2025-04-17 13:04:49 - app.main - INFO - 数据库表创建完成
2025-04-17 13:05:40 - root - INFO - 日志系统初始化完成
2025-04-17 13:05:41 - app.main - INFO - 数据库表创建完成
2025-04-17 13:08:05 - root - INFO - 日志系统初始化完成
2025-04-17 13:08:06 - app.main - INFO - 数据库表创建完成
2025-04-17 13:08:21 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-17 13:08:21 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-17 13:08:22 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-17 13:08:22 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-17 13:08:22 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-17 13:08:22 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-17 13:09:02 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-17 13:09:02 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-17 13:09:02 - app.routers.agents - INFO - 收到流式查询请求: 用户=wangigor, 会话ID=7
2025-04-17 13:09:02 - app.routers.agents - INFO - 开始处理流式响应: 会话ID=7, 查询=使用python写一个斐波那契数列程序。...
2025-04-17 13:09:02 - app.routers.agents - INFO - 已保存用户消息到会话 7
2025-04-17 13:09:02 - app.utils.content_manager - WARNING - 生成的响应中没有回答块，添加默认回答块
2025-04-17 13:09:02 - app.routers.agents - INFO - 启动Agent流式响应 for session: 7
2025-04-17 13:09:02 - app.services.vector_store - INFO - 执行相似度搜索: 查询='使用python写一个斐波那契数列程序。...', k=5
2025-04-17 13:09:02 - httpx - INFO - HTTP Request: POST http://wangigor.ddns.net:30063/collections/knowledge_base/points/query "HTTP/1.1 200 OK"
2025-04-17 13:09:02 - app.services.vector_store - INFO - 相似度搜索找到 0 个结果
2025-04-17 13:09:06 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-04-17 13:09:10 - app.routers.agents - INFO - 准备保存结构化内容 (长度: 846), 块数量: 17
2025-04-17 13:09:10 - app.routers.agents - INFO - 已保存结构化AI响应到会话 7, 长度: 846
2025-04-17 13:09:10 - app.routers.agents - INFO - 流式响应完成 for session: 7
2025-04-17 13:09:24 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-17 13:09:24 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-17 13:09:24 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-17 13:09:24 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-17 13:09:25 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-17 13:09:25 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-17 13:29:41 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-17 13:29:41 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-17 13:29:57 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-17 13:29:57 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-17 13:30:23 - root - INFO - 日志系统初始化完成
2025-04-17 13:30:24 - app.main - INFO - 数据库表创建完成
2025-04-17 13:30:30 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-17 13:30:30 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-17 13:31:33 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-17 13:31:33 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-17 13:31:33 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-17 13:31:33 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-17 13:31:33 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-17 13:31:33 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-17 13:31:46 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-17 13:31:47 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-17 13:31:47 - app.routers.agents - INFO - 收到流式查询请求: 用户=wangigor, 会话ID=7
2025-04-17 13:31:47 - app.routers.agents - INFO - 开始处理流式响应: 会话ID=7, 查询=测试测试。给我讲一个500字的小故事...
2025-04-17 13:31:47 - app.routers.agents - INFO - 已保存用户消息到会话 7
2025-04-17 13:31:47 - app.utils.content_manager - WARNING - 生成的响应中没有回答块，添加默认回答块
2025-04-17 13:31:47 - app.routers.agents - INFO - 启动Agent流式响应 for session: 7
2025-04-17 13:31:47 - app.services.vector_store - INFO - 执行相似度搜索: 查询='测试测试。给我讲一个500字的小故事...', k=5
2025-04-17 13:31:47 - httpx - INFO - HTTP Request: POST http://wangigor.ddns.net:30063/collections/knowledge_base/points/query "HTTP/1.1 200 OK"
2025-04-17 13:31:47 - app.services.vector_store - INFO - 相似度搜索找到 0 个结果
2025-04-17 13:31:49 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-04-17 13:31:55 - app.routers.agents - INFO - 准备保存结构化内容 (长度: 966), 块数量: 7
2025-04-17 13:31:55 - app.routers.agents - INFO - 已保存结构化AI响应到会话 7, 长度: 966
2025-04-17 13:31:55 - app.routers.agents - INFO - 流式响应完成 for session: 7
2025-04-17 13:41:30 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-17 13:41:31 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-17 13:41:31 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-17 13:41:31 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-17 13:41:31 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-17 13:41:31 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-17 13:43:20 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-17 13:43:20 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-17 13:43:20 - app.routers.agents - INFO - 收到流式查询请求: 用户=wangigor, 会话ID=7
2025-04-17 13:43:20 - app.routers.agents - INFO - 开始处理流式响应: 会话ID=7, 查询=测试测试。流式输出测试，至少输出1000字的回答。...
2025-04-17 13:43:21 - app.routers.agents - INFO - 已保存用户消息到会话 7
2025-04-17 13:43:21 - app.utils.content_manager - WARNING - 生成的响应中没有回答块，添加默认回答块
2025-04-17 13:43:21 - app.routers.agents - INFO - 启动Agent流式响应 for session: 7
2025-04-17 13:43:21 - app.services.vector_store - INFO - 执行相似度搜索: 查询='测试测试。流式输出测试，至少输出1000字的回答。...', k=5
2025-04-17 13:43:21 - httpx - INFO - HTTP Request: POST http://wangigor.ddns.net:30063/collections/knowledge_base/points/query "HTTP/1.1 200 OK"
2025-04-17 13:43:21 - app.services.vector_store - INFO - 相似度搜索找到 0 个结果
2025-04-17 13:43:22 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-04-17 13:43:33 - app.routers.agents - INFO - 准备保存结构化内容 (长度: 2010), 块数量: 7
2025-04-17 13:43:33 - app.routers.agents - INFO - 已保存结构化AI响应到会话 7, 长度: 2010
2025-04-17 13:43:33 - app.routers.agents - INFO - 流式响应完成 for session: 7
2025-04-17 13:52:59 - root - INFO - 日志系统初始化完成
2025-04-17 13:52:59 - app.main - INFO - 数据库表创建完成
2025-04-17 13:52:59 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-17 13:52:59 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-17 13:52:59 - app.routers.agents - INFO - 收到流式查询请求: 用户=wangigor, 会话ID=7
2025-04-17 13:52:59 - app.routers.agents - INFO - 开始处理流式响应: 会话ID=7, 查询=测试测试。流式输出测试，至少输出1000字的回答。
...
2025-04-17 13:53:00 - app.routers.agents - INFO - 已保存用户消息到会话 7
2025-04-17 13:53:00 - app.utils.content_manager - WARNING - 生成的响应中没有回答块，添加默认回答块
2025-04-17 13:53:00 - app.routers.agents - INFO - 启动Agent流式响应 for session: 7
2025-04-17 13:53:00 - app.services.vector_store - INFO - 执行相似度搜索: 查询='测试测试。流式输出测试，至少输出1000字的回答。
...', k=5
2025-04-17 13:53:00 - httpx - INFO - HTTP Request: POST http://wangigor.ddns.net:30063/collections/knowledge_base/points/query "HTTP/1.1 200 OK"
2025-04-17 13:53:00 - app.services.vector_store - INFO - 相似度搜索找到 0 个结果
2025-04-17 13:53:01 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-04-17 13:53:10 - app.routers.agents - INFO - 准备保存结构化内容 (长度: 2266), 块数量: 19
2025-04-17 13:53:10 - app.routers.agents - INFO - 已保存结构化AI响应到会话 7, 长度: 2266
2025-04-17 13:53:10 - app.routers.agents - INFO - 流式响应完成 for session: 7
2025-04-17 13:53:35 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-17 13:53:36 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-17 13:53:36 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-17 13:53:36 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-17 13:53:36 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-17 13:53:36 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-17 13:56:33 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-17 13:56:33 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-17 13:56:44 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-17 13:56:44 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-17 13:57:02 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-17 13:57:02 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-17 13:57:11 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-17 13:57:11 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-17 13:57:29 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-17 13:57:29 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-17 13:57:29 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-17 13:57:30 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-17 13:57:30 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-17 13:57:30 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-17 15:20:05 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-17 15:20:05 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-17 15:20:05 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-17 15:20:05 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-17 15:20:05 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-17 15:20:05 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-17 15:20:14 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-17 15:20:14 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-17 15:20:14 - app.routers.agents - INFO - 收到流式查询请求: 用户=wangigor, 会话ID=7
2025-04-17 15:20:14 - app.routers.agents - INFO - 开始处理流式响应: 会话ID=7, 查询=测试测试。流式输出测试，至少输出1000字的回答。...
2025-04-17 15:20:14 - app.routers.agents - INFO - 已保存用户消息到会话 7
2025-04-17 15:20:14 - app.utils.content_manager - WARNING - 生成的响应中没有回答块，添加默认回答块
2025-04-17 15:20:14 - app.routers.agents - INFO - 启动Agent流式响应 for session: 7
2025-04-17 15:20:14 - app.services.vector_store - INFO - 执行相似度搜索: 查询='测试测试。流式输出测试，至少输出1000字的回答。...', k=5
2025-04-17 15:20:14 - httpx - INFO - HTTP Request: POST http://wangigor.ddns.net:30063/collections/knowledge_base/points/query "HTTP/1.1 200 OK"
2025-04-17 15:20:14 - app.services.vector_store - INFO - 相似度搜索找到 0 个结果
2025-04-17 15:20:15 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-04-17 15:20:27 - app.routers.agents - INFO - 准备保存结构化内容 (长度: 2275), 块数量: 19
2025-04-17 15:20:27 - app.routers.agents - INFO - 已保存结构化AI响应到会话 7, 长度: 2275
2025-04-17 15:20:27 - app.routers.agents - INFO - 流式响应完成 for session: 7
2025-04-17 15:24:30 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-17 15:24:31 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-17 15:24:31 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-17 15:24:31 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-17 15:24:31 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-17 15:24:31 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-17 15:29:04 - root - INFO - 日志系统初始化完成
2025-04-17 15:29:04 - app.main - INFO - 数据库表创建完成
2025-04-17 15:29:24 - root - INFO - 日志系统初始化完成
2025-04-17 15:29:25 - app.main - INFO - 数据库表创建完成
2025-04-17 15:29:47 - root - INFO - 日志系统初始化完成
2025-04-17 15:29:47 - app.main - INFO - 数据库表创建完成
2025-04-17 15:30:04 - root - INFO - 日志系统初始化完成
2025-04-17 15:30:04 - app.main - INFO - 数据库表创建完成
2025-04-17 15:32:18 - root - INFO - 日志系统初始化完成
2025-04-17 15:32:19 - app.main - INFO - 数据库表创建完成
2025-04-17 15:32:25 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-17 15:32:25 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-17 15:32:26 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-17 15:32:26 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-17 15:32:26 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-17 15:32:26 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-17 15:32:34 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-17 15:32:34 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-17 15:32:34 - app.routers.agents - INFO - 收到流式查询请求: 用户=wangigor, 会话ID=7
2025-04-17 15:32:35 - app.routers.agents - INFO - 开始处理流式响应: 会话ID=7, 查询=测试测试。流式输出测试，至少输出1000字的回答。...
2025-04-17 15:32:35 - app.routers.agents - INFO - 已保存用户消息到会话 7
2025-04-17 15:32:35 - app.routers.agents - INFO - 启动Agent流式响应 for session: 7
2025-04-17 15:32:35 - app.services.vector_store - INFO - 执行相似度搜索: 查询='测试测试。流式输出测试，至少输出1000字的回答。...', k=5
2025-04-17 15:32:35 - httpx - INFO - HTTP Request: POST http://wangigor.ddns.net:30063/collections/knowledge_base/points/query "HTTP/1.1 200 OK"
2025-04-17 15:32:35 - app.services.vector_store - INFO - 相似度搜索找到 0 个结果
2025-04-17 15:32:36 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-04-17 15:32:44 - app.routers.agents - INFO - 准备保存结构化内容 (长度: 1769), 块数量: 12
2025-04-17 15:32:44 - app.routers.agents - INFO - 已保存结构化AI响应到会话 7, 长度: 1769
2025-04-17 15:32:44 - app.routers.agents - INFO - 流式响应完成 for session: 7
2025-04-17 15:33:32 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-17 15:33:32 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-17 15:33:33 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-17 15:33:33 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-17 15:33:33 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-17 15:33:33 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-17 15:35:06 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-17 15:35:06 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-17 15:36:41 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-17 15:36:41 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-17 15:36:41 - app.routers.agents - INFO - 收到流式查询请求: 用户=wangigor, 会话ID=7
2025-04-17 15:36:41 - app.routers.agents - INFO - 开始处理流式响应: 会话ID=7, 查询=测试测试...
2025-04-17 15:36:42 - app.routers.agents - INFO - 已保存用户消息到会话 7
2025-04-17 15:36:42 - app.routers.agents - INFO - 启动Agent流式响应 for session: 7
2025-04-17 15:36:42 - app.services.vector_store - INFO - 执行相似度搜索: 查询='测试测试...', k=5
2025-04-17 15:36:42 - httpx - INFO - HTTP Request: POST http://wangigor.ddns.net:30063/collections/knowledge_base/points/query "HTTP/1.1 200 OK"
2025-04-17 15:36:42 - app.services.vector_store - INFO - 相似度搜索找到 0 个结果
2025-04-17 15:36:43 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-04-17 15:36:45 - app.routers.agents - INFO - 准备保存结构化内容 (长度: 446), 块数量: 6
2025-04-17 15:36:45 - app.routers.agents - INFO - 已保存结构化AI响应到会话 7, 长度: 446
2025-04-17 15:36:45 - app.routers.agents - INFO - 流式响应完成 for session: 7
2025-04-17 15:39:33 - root - INFO - 日志系统初始化完成
2025-04-17 15:39:33 - app.main - INFO - 数据库表创建完成
2025-04-17 15:48:06 - root - INFO - 日志系统初始化完成
2025-04-17 15:48:07 - app.main - INFO - 数据库表创建完成
2025-04-17 15:48:22 - root - INFO - 日志系统初始化完成
2025-04-17 15:48:22 - app.main - INFO - 数据库表创建完成
2025-04-17 15:53:14 - root - INFO - 日志系统初始化完成
2025-04-17 15:53:14 - app.main - ERROR - 数据库表创建失败: (psycopg2.OperationalError) connection to server at "wangigor.ddns.net" (127.0.0.1), port 30001 failed: Connection refused
	Is the server running on that host and accepting TCP/IP connections?

(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-04-17 15:53:27 - root - INFO - 日志系统初始化完成
2025-04-17 15:53:27 - app.main - ERROR - 数据库表创建失败: (psycopg2.OperationalError) connection to server at "wangigor.ddns.net" (127.0.0.1), port 30001 failed: Connection refused
	Is the server running on that host and accepting TCP/IP connections?

(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-04-17 15:53:40 - root - INFO - 日志系统初始化完成
2025-04-17 15:53:40 - app.main - ERROR - 数据库表创建失败: (psycopg2.OperationalError) connection to server at "wangigor.ddns.net" (127.0.0.1), port 30001 failed: Connection refused
	Is the server running on that host and accepting TCP/IP connections?

(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-04-17 15:53:55 - root - INFO - 日志系统初始化完成
2025-04-17 15:53:55 - app.main - ERROR - 数据库表创建失败: (psycopg2.OperationalError) connection to server at "wangigor.ddns.net" (127.0.0.1), port 30001 failed: Connection refused
	Is the server running on that host and accepting TCP/IP connections?

(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-04-17 15:54:12 - root - INFO - 日志系统初始化完成
2025-04-17 15:54:12 - app.main - ERROR - 数据库表创建失败: (psycopg2.OperationalError) connection to server at "wangigor.ddns.net" (127.0.0.1), port 30001 failed: Connection refused
	Is the server running on that host and accepting TCP/IP connections?

(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-04-17 15:54:12 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-17 15:54:51 - root - INFO - 日志系统初始化完成
2025-04-17 15:54:51 - app.main - ERROR - 数据库表创建失败: (psycopg2.OperationalError) connection to server at "wangigor.ddns.net" (127.0.0.1), port 30001 failed: Connection refused
	Is the server running on that host and accepting TCP/IP connections?

(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-04-17 16:12:53 - root - INFO - 日志系统初始化完成
2025-04-17 16:12:53 - app.main - INFO - 数据库表创建完成
2025-04-17 16:13:39 - passlib.handlers.bcrypt - WARNING - (trapped) error reading bcrypt version
Traceback (most recent call last):
  File "/Users/wangke/notebook-ai/notebook-backend/venv312/lib/python3.12/site-packages/passlib/handlers/bcrypt.py", line 620, in _load_backend_mixin
    version = _bcrypt.__about__.__version__
              ^^^^^^^^^^^^^^^^^
AttributeError: module 'bcrypt' has no attribute '__about__'
2025-04-17 16:13:39 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-17 16:13:39 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-17 16:13:39 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-17 16:13:39 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-17 16:13:44 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-17 16:13:44 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-17 16:13:44 - app.routers.agents - INFO - 收到流式查询请求: 用户=wangigor, 会话ID=7
2025-04-17 16:13:44 - app.routers.agents - INFO - 开始处理流式响应: 会话ID=7, 查询=测试...
2025-04-17 16:13:44 - app.routers.agents - INFO - 已保存用户消息到会话 7
2025-04-17 16:13:44 - app.routers.agents - INFO - 启动Agent流式响应 for session: 7
2025-04-17 16:13:44 - app.services.vector_store - INFO - 执行相似度搜索: 查询='测试...', k=5
2025-04-17 16:13:44 - httpx - INFO - HTTP Request: POST http://wangigor.ddns.net:30063/collections/knowledge_base/points/query "HTTP/1.1 200 OK"
2025-04-17 16:13:44 - app.services.vector_store - INFO - 相似度搜索找到 0 个结果
2025-04-17 16:13:46 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-04-17 16:13:47 - app.utils.content_manager - WARNING - 生成的响应中没有回答块，添加默认回答块
2025-04-17 16:13:47 - app.routers.agents - INFO - 准备保存结构化内容 (长度: 451), 块数量: 3
2025-04-17 16:13:48 - app.routers.agents - INFO - 已保存结构化AI响应到会话 7, 长度: 451
2025-04-17 16:13:48 - app.routers.agents - INFO - 流式响应完成 for session: 7
2025-04-17 16:14:59 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-17 16:14:59 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-17 16:14:59 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-17 16:14:59 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-17 16:14:59 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-17 16:15:00 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-17 16:15:19 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-17 16:15:19 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-17 16:15:19 - app.routers.agents - INFO - 收到流式查询请求: 用户=wangigor, 会话ID=7
2025-04-17 16:15:19 - app.routers.agents - INFO - 开始处理流式响应: 会话ID=7, 查询=测试...
2025-04-17 16:15:19 - app.routers.agents - INFO - 已保存用户消息到会话 7
2025-04-17 16:15:19 - app.routers.agents - INFO - 启动Agent流式响应 for session: 7
2025-04-17 16:15:19 - app.services.vector_store - INFO - 执行相似度搜索: 查询='测试...', k=5
2025-04-17 16:15:20 - httpx - INFO - HTTP Request: POST http://wangigor.ddns.net:30063/collections/knowledge_base/points/query "HTTP/1.1 200 OK"
2025-04-17 16:15:20 - app.services.vector_store - INFO - 相似度搜索找到 0 个结果
2025-04-17 16:15:21 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-04-17 16:15:23 - app.utils.content_manager - WARNING - 生成的响应中没有回答块，添加默认回答块
2025-04-17 16:15:23 - app.routers.agents - INFO - 准备保存结构化内容 (长度: 434), 块数量: 3
2025-04-17 16:15:23 - app.routers.agents - INFO - 已保存结构化AI响应到会话 7, 长度: 434
2025-04-17 16:15:23 - app.routers.agents - INFO - 流式响应完成 for session: 7
2025-04-17 16:48:50 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-17 16:48:50 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-17 16:48:50 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-17 16:48:50 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-17 16:48:51 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-17 16:48:51 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-17 16:55:40 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-17 16:55:40 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-17 16:55:40 - app.routers.agents - INFO - 收到流式查询请求: 用户=wangigor, 会话ID=7
2025-04-17 16:55:40 - app.routers.agents - INFO - 开始处理流式响应: 会话ID=7, 查询=测试...
2025-04-17 16:55:40 - app.routers.agents - INFO - 已保存用户消息到会话 7
2025-04-17 16:55:40 - app.routers.agents - INFO - 启动Agent流式响应 for session: 7
2025-04-17 16:55:40 - app.services.vector_store - INFO - 执行相似度搜索: 查询='测试...', k=5
2025-04-17 16:55:40 - httpx - INFO - HTTP Request: POST http://wangigor.ddns.net:30063/collections/knowledge_base/points/query "HTTP/1.1 200 OK"
2025-04-17 16:55:40 - app.services.vector_store - INFO - 相似度搜索找到 0 个结果
2025-04-17 16:55:44 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-04-17 16:55:46 - app.utils.content_manager - WARNING - 生成的响应中没有回答块，添加默认回答块
2025-04-17 16:55:46 - app.routers.agents - INFO - 准备保存结构化内容 (长度: 434), 块数量: 3
2025-04-17 16:55:46 - app.routers.agents - INFO - 已保存结构化AI响应到会话 7, 长度: 434
2025-04-17 16:55:46 - app.routers.agents - INFO - 流式响应完成 for session: 7
2025-04-17 17:36:21 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-17 17:36:21 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-17 17:36:21 - app.routers.agents - INFO - 收到流式查询请求: 用户=wangigor, 会话ID=7
2025-04-17 17:36:21 - app.routers.agents - INFO - 开始处理流式响应: 会话ID=7, 查询=给我一段python的实力代码...
2025-04-17 17:36:21 - app.routers.agents - INFO - 已保存用户消息到会话 7
2025-04-17 17:36:21 - app.routers.agents - INFO - 启动Agent流式响应 for session: 7
2025-04-17 17:36:21 - app.services.vector_store - INFO - 执行相似度搜索: 查询='给我一段python的实力代码...', k=5
2025-04-17 17:36:21 - httpx - INFO - HTTP Request: POST http://wangigor.ddns.net:30063/collections/knowledge_base/points/query "HTTP/1.1 200 OK"
2025-04-17 17:36:21 - app.services.vector_store - INFO - 相似度搜索找到 0 个结果
2025-04-17 17:36:23 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-04-17 17:36:25 - app.utils.content_manager - WARNING - 生成的响应中没有回答块，添加默认回答块
2025-04-17 17:36:25 - app.routers.agents - INFO - 准备保存结构化内容 (长度: 519), 块数量: 3
2025-04-17 17:36:25 - app.routers.agents - INFO - 已保存结构化AI响应到会话 7, 长度: 519
2025-04-17 17:36:25 - app.routers.agents - INFO - 流式响应完成 for session: 7
2025-04-17 17:39:03 - root - INFO - 日志系统初始化完成
2025-04-17 17:39:03 - app.main - INFO - 数据库表创建完成
2025-04-17 17:46:17 - root - INFO - 日志系统初始化完成
2025-04-17 17:46:18 - app.main - INFO - 数据库表创建完成
2025-04-17 19:00:36 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-17 19:00:36 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-17 19:00:36 - app.routers.agents - INFO - 收到流式查询请求: 用户=wangigor, 会话ID=7
2025-04-17 19:00:36 - app.routers.agents - INFO - 开始处理流式响应: 会话ID=7, 查询=测试测试...
2025-04-17 19:00:36 - app.routers.agents - INFO - 已保存用户消息到会话 7
2025-04-17 19:00:36 - app.routers.agents - INFO - 启动Agent流式响应 for session: 7
2025-04-17 19:00:36 - app.services.vector_store - INFO - 执行相似度搜索: 查询='测试测试...', k=5
2025-04-17 19:00:37 - httpx - INFO - HTTP Request: POST http://wangigor.ddns.net:30063/collections/knowledge_base/points/query "HTTP/1.1 200 OK"
2025-04-17 19:00:37 - app.services.vector_store - INFO - 相似度搜索找到 0 个结果
2025-04-17 19:00:38 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-04-17 19:00:41 - app.utils.content_manager - WARNING - 生成的响应中没有回答块，添加默认回答块
2025-04-17 19:00:41 - app.routers.agents - INFO - 准备保存结构化内容 (长度: 113), 块数量: 3
2025-04-17 19:00:41 - app.routers.agents - INFO - 已保存结构化AI响应到会话 7, 长度: 113
2025-04-17 19:00:41 - app.routers.agents - INFO - 流式响应完成 for session: 7
2025-04-17 19:00:51 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-17 19:00:51 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-17 19:00:52 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-17 19:00:52 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-17 19:00:52 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-17 19:00:52 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-17 19:01:21 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-17 19:01:21 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-17 19:01:21 - app.routers.agents - INFO - 收到流式查询请求: 用户=wangigor, 会话ID=7
2025-04-17 19:01:21 - app.routers.agents - INFO - 开始处理流式响应: 会话ID=7, 查询=帮我写一个python实现斐波那契额数列的方法...
2025-04-17 19:01:21 - app.routers.agents - INFO - 已保存用户消息到会话 7
2025-04-17 19:01:21 - app.routers.agents - INFO - 启动Agent流式响应 for session: 7
2025-04-17 19:01:21 - app.services.vector_store - INFO - 执行相似度搜索: 查询='帮我写一个python实现斐波那契额数列的方法...', k=5
2025-04-17 19:01:22 - httpx - INFO - HTTP Request: POST http://wangigor.ddns.net:30063/collections/knowledge_base/points/query "HTTP/1.1 200 OK"
2025-04-17 19:01:22 - app.services.vector_store - INFO - 相似度搜索找到 0 个结果
2025-04-17 19:01:23 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-04-17 19:01:27 - app.utils.content_manager - WARNING - 生成的响应中没有回答块，添加默认回答块
2025-04-17 19:01:27 - app.routers.agents - INFO - 准备保存结构化内容 (长度: 113), 块数量: 3
2025-04-17 19:01:28 - app.routers.agents - INFO - 已保存结构化AI响应到会话 7, 长度: 113
2025-04-17 19:01:28 - app.routers.agents - INFO - 流式响应完成 for session: 7
2025-04-17 19:07:38 - root - INFO - 日志系统初始化完成
2025-04-17 19:07:39 - app.main - INFO - 数据库表创建完成
2025-04-17 19:07:41 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-17 19:07:41 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-17 19:07:41 - app.routers.agents - INFO - 收到流式查询请求: 用户=wangigor, 会话ID=7
2025-04-17 19:07:41 - app.routers.agents - INFO - 开始处理流式响应: 会话ID=7, 查询=帮我写一个python实现斐波那契额数列的方法
...
2025-04-17 19:07:42 - app.routers.agents - INFO - 已保存用户消息到会话 7
2025-04-17 19:07:42 - app.routers.agents - INFO - 启动Agent流式响应 for session: 7
2025-04-17 19:07:42 - app.services.vector_store - INFO - 执行相似度搜索: 查询='帮我写一个python实现斐波那契额数列的方法
...', k=5
2025-04-17 19:07:42 - httpx - INFO - HTTP Request: POST http://wangigor.ddns.net:30063/collections/knowledge_base/points/query "HTTP/1.1 200 OK"
2025-04-17 19:07:42 - app.services.vector_store - INFO - 相似度搜索找到 0 个结果
2025-04-17 19:07:44 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-04-17 19:07:47 - app.utils.content_manager - WARNING - 生成的响应中没有回答块，添加默认回答块
2025-04-17 19:07:47 - app.routers.agents - INFO - 准备保存结构化内容 (长度: 113), 块数量: 3
2025-04-17 19:07:47 - app.routers.agents - INFO - 已保存结构化AI响应到会话 7, 长度: 113
2025-04-17 19:07:47 - app.routers.agents - INFO - 流式响应完成 for session: 7
2025-04-17 19:08:52 - root - INFO - 日志系统初始化完成
2025-04-17 19:08:53 - app.main - INFO - 数据库表创建完成
2025-04-17 19:09:15 - root - INFO - 日志系统初始化完成
2025-04-17 19:09:16 - app.main - INFO - 数据库表创建完成
2025-04-17 19:09:19 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-17 19:09:19 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-17 19:09:19 - app.routers.agents - INFO - 收到流式查询请求: 用户=wangigor, 会话ID=7
2025-04-17 19:09:19 - app.routers.agents - INFO - 开始处理流式响应: 会话ID=7, 查询=帮我写一个python实现斐波那契额数列的方法...
2025-04-17 19:09:19 - app.routers.agents - INFO - 已保存用户消息到会话 7
2025-04-17 19:09:19 - app.routers.agents - INFO - 启动Agent流式响应 for session: 7
2025-04-17 19:09:19 - app.services.vector_store - INFO - 执行相似度搜索: 查询='帮我写一个python实现斐波那契额数列的方法...', k=5
2025-04-17 19:09:20 - httpx - INFO - HTTP Request: POST http://wangigor.ddns.net:30063/collections/knowledge_base/points/query "HTTP/1.1 200 OK"
2025-04-17 19:09:20 - app.services.vector_store - INFO - 相似度搜索找到 0 个结果
2025-04-17 19:09:21 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-04-17 19:09:25 - app.utils.content_manager - WARNING - 生成的响应中没有回答块，添加默认回答块
2025-04-17 19:09:25 - app.routers.agents - INFO - 准备保存结构化内容 (长度: 113), 块数量: 3
2025-04-17 19:09:25 - app.routers.agents - INFO - 已保存结构化AI响应到会话 7, 长度: 113
2025-04-17 19:09:25 - app.routers.agents - INFO - 流式响应完成 for session: 7
2025-04-17 19:10:28 - root - INFO - 日志系统初始化完成
2025-04-17 19:10:28 - app.main - INFO - 数据库表创建完成
2025-04-17 19:10:32 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-17 19:10:32 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-17 19:10:32 - app.routers.agents - INFO - 收到流式查询请求: 用户=wangigor, 会话ID=7
2025-04-17 19:10:32 - app.routers.agents - INFO - 开始处理流式响应: 会话ID=7, 查询=帮我写一个python实现斐波那契额数列的方法
...
2025-04-17 19:10:32 - app.routers.agents - INFO - 已保存用户消息到会话 7
2025-04-17 19:10:32 - app.routers.agents - INFO - 启动Agent流式响应 for session: 7
2025-04-17 19:10:32 - app.services.vector_store - INFO - 执行相似度搜索: 查询='帮我写一个python实现斐波那契额数列的方法
...', k=5
2025-04-17 19:10:33 - httpx - INFO - HTTP Request: POST http://wangigor.ddns.net:30063/collections/knowledge_base/points/query "HTTP/1.1 200 OK"
2025-04-17 19:10:33 - app.services.vector_store - INFO - 相似度搜索找到 0 个结果
2025-04-17 19:10:34 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-04-17 19:10:37 - app.utils.content_manager - WARNING - 生成的响应中没有回答块，添加默认回答块
2025-04-17 19:10:37 - app.routers.agents - INFO - 准备保存结构化内容 (长度: 113), 块数量: 3
2025-04-17 19:10:37 - app.routers.agents - INFO - 已保存结构化AI响应到会话 7, 长度: 113
2025-04-17 19:10:37 - app.routers.agents - INFO - 流式响应完成 for session: 7
2025-04-17 19:20:55 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-17 19:20:55 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-17 19:20:56 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-17 19:20:56 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-17 19:20:56 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-17 19:20:56 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-17 19:22:03 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-17 19:22:03 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-17 19:22:03 - app.routers.agents - INFO - 收到流式查询请求: 用户=wangigor, 会话ID=7
2025-04-17 19:22:03 - app.routers.agents - INFO - 开始处理流式响应: 会话ID=7, 查询=帮我写一个python实现斐波那契额数列的方法...
2025-04-17 19:22:03 - app.routers.agents - INFO - 已保存用户消息到会话 7
2025-04-17 19:22:03 - app.routers.agents - INFO - 启动Agent流式响应 for session: 7
2025-04-17 19:22:03 - app.services.vector_store - INFO - 执行相似度搜索: 查询='帮我写一个python实现斐波那契额数列的方法...', k=5
2025-04-17 19:22:03 - httpx - INFO - HTTP Request: POST http://wangigor.ddns.net:30063/collections/knowledge_base/points/query "HTTP/1.1 200 OK"
2025-04-17 19:22:03 - app.services.vector_store - INFO - 相似度搜索找到 0 个结果
2025-04-17 19:22:05 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-04-17 19:22:07 - app.utils.content_manager - WARNING - 生成的响应中没有回答块，添加默认回答块
2025-04-17 19:22:07 - app.routers.agents - INFO - 准备保存结构化内容 (长度: 113), 块数量: 3
2025-04-17 19:22:07 - app.routers.agents - INFO - 已保存结构化AI响应到会话 7, 长度: 113
2025-04-17 19:22:07 - app.routers.agents - INFO - 流式响应完成 for session: 7
2025-04-17 19:31:21 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-17 19:31:21 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-17 19:31:22 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-17 19:31:22 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-17 19:31:22 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-17 19:31:22 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-17 20:50:57 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-17 20:51:15 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-17 20:51:19 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-17 20:51:19 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-17 20:51:19 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-17 20:51:19 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-17 20:51:19 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-17 20:51:44 - sqlalchemy.pool.impl.QueuePool - ERROR - Exception during reset or similar
Traceback (most recent call last):
  File "/Users/wangke/notebook-ai/notebook-backend/venv312/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 987, in _finalize_fairy
    fairy._reset(
  File "/Users/wangke/notebook-ai/notebook-backend/venv312/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 1433, in _reset
    pool._dialect.do_rollback(self)
  File "/Users/wangke/notebook-ai/notebook-backend/venv312/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 703, in do_rollback
    dbapi_connection.rollback()
psycopg2.OperationalError: server closed the connection unexpectedly
	This probably means the server terminated abnormally
	before or while processing the request.

2025-04-17 20:51:44 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-17 20:51:45 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-17 20:51:45 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-17 20:51:45 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-17 20:51:46 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-17 20:51:46 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-17 20:51:52 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-17 20:51:53 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-17 20:51:54 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-17 20:51:54 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-17 20:52:01 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-17 20:52:02 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-17 20:52:03 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-17 20:52:03 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-17 21:30:07 - passlib.handlers.bcrypt - WARNING - (trapped) error reading bcrypt version
Traceback (most recent call last):
  File "/Users/wangke/notebook-ai/notebook-backend/venv312/lib/python3.12/site-packages/passlib/handlers/bcrypt.py", line 620, in _load_backend_mixin
    version = _bcrypt.__about__.__version__
              ^^^^^^^^^^^^^^^^^
AttributeError: module 'bcrypt' has no attribute '__about__'
2025-04-17 21:30:07 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-17 21:30:07 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-17 21:30:08 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-17 21:30:08 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-17 21:30:12 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-17 21:30:12 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-17 21:30:16 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-17 21:30:16 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-17 21:30:17 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-17 21:30:17 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-17 21:30:18 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-17 21:30:18 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-17 21:30:19 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-17 21:30:19 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-17 21:30:19 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-17 21:30:19 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-17 21:30:30 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-17 21:30:30 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-17 21:30:30 - app.routers.agents - INFO - 收到流式查询请求: 用户=wangigor, 会话ID=9
2025-04-17 21:30:30 - app.routers.agents - INFO - 开始处理流式响应: 会话ID=9, 查询=帮我写一个python实现斐波那契额数列的方法...
2025-04-17 21:30:30 - app.routers.agents - INFO - 已保存用户消息到会话 9
2025-04-17 21:30:30 - app.routers.agents - INFO - 启动Agent流式响应 for session: 9
2025-04-17 21:30:30 - app.services.vector_store - INFO - 执行相似度搜索: 查询='帮我写一个python实现斐波那契额数列的方法...', k=5
2025-04-17 21:30:30 - httpx - INFO - HTTP Request: POST http://wangigor.ddns.net:30063/collections/knowledge_base/points/query "HTTP/1.1 200 OK"
2025-04-17 21:30:30 - app.services.vector_store - INFO - 相似度搜索找到 0 个结果
2025-04-17 21:30:32 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-04-17 21:30:36 - app.utils.content_manager - WARNING - 生成的响应中没有回答块，添加默认回答块
2025-04-17 21:30:36 - app.routers.agents - INFO - 准备保存结构化内容 (长度: 113), 块数量: 3
2025-04-17 21:30:36 - app.routers.agents - INFO - 已保存结构化AI响应到会话 9, 长度: 113
2025-04-17 21:30:36 - app.routers.agents - INFO - 流式响应完成 for session: 9
2025-04-17 21:31:28 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-17 21:31:28 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-17 21:31:28 - app.routers.agents - INFO - 收到流式查询请求: 用户=wangigor, 会话ID=9
2025-04-17 21:31:28 - app.routers.agents - INFO - 开始处理流式响应: 会话ID=9, 查询=帮我写一择小笑话。...
2025-04-17 21:31:28 - app.routers.agents - INFO - 已保存用户消息到会话 9
2025-04-17 21:31:28 - app.routers.agents - INFO - 启动Agent流式响应 for session: 9
2025-04-17 21:31:28 - app.services.vector_store - INFO - 执行相似度搜索: 查询='帮我写一择小笑话。...', k=5
2025-04-17 21:31:28 - httpx - INFO - HTTP Request: POST http://wangigor.ddns.net:30063/collections/knowledge_base/points/query "HTTP/1.1 200 OK"
2025-04-17 21:31:28 - app.services.vector_store - INFO - 相似度搜索找到 0 个结果
2025-04-17 21:31:29 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-04-17 21:31:31 - app.utils.content_manager - WARNING - 生成的响应中没有回答块，添加默认回答块
2025-04-17 21:31:31 - app.routers.agents - INFO - 准备保存结构化内容 (长度: 113), 块数量: 3
2025-04-17 21:31:31 - app.routers.agents - INFO - 已保存结构化AI响应到会话 9, 长度: 113
2025-04-17 21:31:31 - app.routers.agents - INFO - 流式响应完成 for session: 9
2025-04-17 21:31:45 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-17 21:31:45 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-17 21:31:45 - app.routers.agents - INFO - 收到流式查询请求: 用户=wangigor, 会话ID=9
2025-04-17 21:31:45 - app.routers.agents - INFO - 开始处理流式响应: 会话ID=9, 查询=不好笑。靠。再来一个。...
2025-04-17 21:31:45 - app.routers.agents - INFO - 已保存用户消息到会话 9
2025-04-17 21:31:45 - app.routers.agents - INFO - 启动Agent流式响应 for session: 9
2025-04-17 21:31:45 - app.services.vector_store - INFO - 执行相似度搜索: 查询='不好笑。靠。再来一个。...', k=5
2025-04-17 21:31:45 - httpx - INFO - HTTP Request: POST http://wangigor.ddns.net:30063/collections/knowledge_base/points/query "HTTP/1.1 200 OK"
2025-04-17 21:31:45 - app.services.vector_store - INFO - 相似度搜索找到 0 个结果
2025-04-17 21:31:47 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-04-17 21:31:49 - app.utils.content_manager - WARNING - 生成的响应中没有回答块，添加默认回答块
2025-04-17 21:31:49 - app.routers.agents - INFO - 准备保存结构化内容 (长度: 113), 块数量: 3
2025-04-17 21:31:49 - app.routers.agents - INFO - 已保存结构化AI响应到会话 9, 长度: 113
2025-04-17 21:31:49 - app.routers.agents - INFO - 流式响应完成 for session: 9
2025-04-17 21:32:06 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-17 21:32:07 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-17 21:32:07 - app.routers.agents - INFO - 收到流式查询请求: 用户=wangigor, 会话ID=9
2025-04-17 21:32:07 - app.routers.agents - INFO - 开始处理流式响应: 会话ID=9, 查询=为什么一定是程序员的笑话呢？？？我是个厨师！...
2025-04-17 21:32:07 - app.routers.agents - INFO - 已保存用户消息到会话 9
2025-04-17 21:32:07 - app.routers.agents - INFO - 启动Agent流式响应 for session: 9
2025-04-17 21:32:07 - app.services.vector_store - INFO - 执行相似度搜索: 查询='为什么一定是程序员的笑话呢？？？我是个厨师！...', k=5
2025-04-17 21:32:07 - httpx - INFO - HTTP Request: POST http://wangigor.ddns.net:30063/collections/knowledge_base/points/query "HTTP/1.1 200 OK"
2025-04-17 21:32:07 - app.services.vector_store - INFO - 相似度搜索找到 0 个结果
2025-04-17 21:32:08 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-04-17 21:32:13 - app.utils.content_manager - WARNING - 生成的响应中没有回答块，添加默认回答块
2025-04-17 21:32:13 - app.routers.agents - INFO - 准备保存结构化内容 (长度: 113), 块数量: 3
2025-04-17 21:32:13 - app.routers.agents - INFO - 已保存结构化AI响应到会话 9, 长度: 113
2025-04-17 21:32:13 - app.routers.agents - INFO - 流式响应完成 for session: 9
2025-04-17 21:32:43 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-17 21:32:44 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-17 21:32:53 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-17 21:32:53 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-17 21:32:53 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-17 21:32:53 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-17 21:32:54 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-17 21:32:54 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-17 21:34:11 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-17 21:34:11 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-17 21:35:28 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-17 21:35:28 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-17 21:35:29 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-17 21:35:29 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-17 21:35:32 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-17 21:35:32 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-17 21:35:34 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-17 21:35:34 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-17 21:39:42 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-17 21:39:42 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-17 21:39:42 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-17 21:39:42 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-17 21:39:43 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-17 21:39:43 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-18 10:47:39 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-18 10:48:17 - root - INFO - 日志系统初始化完成
2025-04-18 10:48:17 - app.main - INFO - 数据库表创建完成
2025-04-18 10:48:25 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-18 10:48:25 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-18 10:48:25 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-18 10:48:25 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-18 10:48:25 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-18 10:48:25 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-18 10:48:29 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-18 10:48:29 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-18 10:48:29 - app.routers.agents - INFO - 收到流式查询请求: 用户=wangigor, 会话ID=9
2025-04-18 10:48:29 - app.routers.agents - INFO - 开始处理流式响应: 会话ID=9, 查询=测试测试...
2025-04-18 10:48:29 - app.routers.agents - INFO - 已保存用户消息到会话 9
2025-04-18 10:48:29 - app.routers.agents - INFO - 启动Agent流式响应 for session: 9
2025-04-18 10:48:29 - app.services.vector_store - INFO - 执行相似度搜索: 查询='测试测试...', k=5
2025-04-18 10:48:30 - httpx - INFO - HTTP Request: POST http://wangigor.ddns.net:30063/collections/knowledge_base/points/query "HTTP/1.1 200 OK"
2025-04-18 10:48:30 - app.services.vector_store - INFO - 相似度搜索找到 0 个结果
2025-04-18 10:48:31 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-04-18 10:48:32 - app.utils.content_manager - WARNING - 生成的响应中没有回答块，添加默认回答块
2025-04-18 10:48:32 - app.routers.agents - INFO - 准备保存结构化内容 (长度: 113), 块数量: 3
2025-04-18 10:48:33 - app.routers.agents - INFO - 已保存结构化AI响应到会话 9, 长度: 113
2025-04-18 10:48:33 - app.routers.agents - INFO - 流式响应完成 for session: 9
2025-04-18 11:08:09 - root - INFO - 日志系统初始化完成
2025-04-18 11:08:09 - app.main - INFO - 数据库表创建完成
2025-04-18 11:13:49 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-18 11:13:49 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-18 11:13:49 - app.routers.agents - INFO - 收到流式查询请求: 用户=wangigor, 会话ID=9
2025-04-18 11:13:49 - app.routers.agents - INFO - 开始处理流式响应: 会话ID=9, 查询=测试...
2025-04-18 11:13:49 - app.routers.agents - INFO - 已保存用户消息到会话 9
2025-04-18 11:13:49 - app.routers.agents - INFO - 启动Agent流式响应 for session: 9
2025-04-18 11:13:49 - app.services.vector_store - INFO - 执行相似度搜索: 查询='测试...', k=5
2025-04-18 11:13:49 - httpx - INFO - HTTP Request: POST http://wangigor.ddns.net:30063/collections/knowledge_base/points/query "HTTP/1.1 200 OK"
2025-04-18 11:13:49 - app.services.vector_store - INFO - 相似度搜索找到 0 个结果
2025-04-18 11:13:51 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-04-18 11:13:53 - app.utils.content_manager - WARNING - 生成的响应中没有回答块，添加默认回答块
2025-04-18 11:13:53 - app.routers.agents - INFO - 内容比较 - 格式化内容长度: 113, 累积内容长度: 288
2025-04-18 11:13:53 - app.routers.agents - INFO - 已保存原始累积内容到会话 9, 长度: 288
2025-04-18 11:13:53 - app.routers.agents - INFO - 流式响应完成 for session: 9
2025-04-18 11:14:09 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-18 11:14:09 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-18 11:14:09 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-18 11:14:09 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-18 11:14:10 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-18 11:14:10 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-18 11:14:43 - root - INFO - 日志系统初始化完成
2025-04-18 11:14:44 - app.main - INFO - 数据库表创建完成
2025-04-18 13:01:24 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-18 13:01:24 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-18 13:01:25 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-18 13:01:25 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-18 13:01:25 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-18 13:01:25 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-18 13:01:43 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-18 13:01:43 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-18 13:21:18 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-18 13:21:18 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-18 13:21:18 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-18 13:21:18 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-18 13:21:18 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-18 13:21:18 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-18 13:32:20 - root - INFO - 日志系统初始化完成
2025-04-18 13:32:21 - app.main - INFO - 数据库表创建完成
2025-04-18 13:32:35 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-18 13:32:35 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-18 13:32:35 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-18 13:32:35 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-18 13:32:35 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-04-18 13:32:35 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-04-18 13:32:36 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-04-18 13:32:36 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-04-18 13:32:36 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-04-18 13:32:36 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-04-18 13:32:36 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-04-18 13:32:36 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-04-18 13:32:36 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-04-18 13:32:36 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-04-18 13:32:36 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-04-18 13:32:36 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-04-18 13:32:36 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-18 13:32:36 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-04-18 13:32:36 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-04-18 13:32:36 - app.services.vector_store - INFO - 集合 knowledge_base 已存在
2025-04-18 13:32:36 - app.services.vector_store - INFO - 集合 knowledge_base 已存在
2025-04-18 13:32:36 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-18 13:32:36 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections/knowledge_base "HTTP/1.1 200 OK"
2025-04-18 13:32:36 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections/knowledge_base "HTTP/1.1 200 OK"
2025-04-18 13:32:36 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-18 13:32:36 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-18 13:32:36 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-18 13:32:36 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-18 13:32:45 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-04-18 13:32:45 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-04-18 13:32:45 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-04-18 13:32:45 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-04-18 13:32:45 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-04-18 13:32:45 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-04-18 13:32:45 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-04-18 13:32:45 - app.services.vector_store - INFO - 集合 knowledge_base 已存在
2025-04-18 13:32:45 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections/knowledge_base "HTTP/1.1 200 OK"
2025-04-18 13:32:45 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-18 13:32:45 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-18 13:38:04 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-18 13:38:04 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-18 13:38:04 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-18 13:38:04 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-18 13:38:04 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-04-18 13:38:04 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-04-18 13:38:04 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-04-18 13:38:04 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-04-18 13:38:04 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-04-18 13:38:04 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-04-18 13:38:04 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-04-18 13:38:04 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-04-18 13:38:04 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-04-18 13:38:04 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-04-18 13:38:04 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-04-18 13:38:04 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-04-18 13:38:04 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-04-18 13:38:04 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-04-18 13:38:04 - app.services.vector_store - INFO - 集合 knowledge_base 已存在
2025-04-18 13:38:04 - app.services.vector_store - INFO - 集合 knowledge_base 已存在
2025-04-18 13:38:04 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections/knowledge_base "HTTP/1.1 200 OK"
2025-04-18 13:38:04 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections/knowledge_base "HTTP/1.1 200 OK"
2025-04-18 13:38:04 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-18 13:38:04 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-18 13:38:04 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-18 13:38:04 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-18 13:38:04 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-18 13:38:04 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-18 13:40:42 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-18 13:40:42 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-18 13:40:42 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-18 13:40:42 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-18 13:40:42 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-04-18 13:40:43 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-04-18 13:40:43 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-04-18 13:40:43 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-04-18 13:40:43 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-04-18 13:40:43 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-04-18 13:40:43 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-04-18 13:40:43 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-04-18 13:40:43 - app.services.vector_store - INFO - 集合 knowledge_base 已存在
2025-04-18 13:40:43 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections/knowledge_base "HTTP/1.1 200 OK"
2025-04-18 13:40:43 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-18 13:40:43 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-04-18 13:40:43 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-04-18 13:40:43 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-18 13:40:43 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-04-18 13:40:43 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-04-18 13:40:43 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-04-18 13:40:43 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-04-18 13:40:43 - app.services.vector_store - INFO - 集合 knowledge_base 已存在
2025-04-18 13:40:43 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections/knowledge_base "HTTP/1.1 200 OK"
2025-04-18 13:40:43 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-18 13:40:43 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-18 13:40:43 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-18 13:40:43 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-18 13:44:05 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-18 13:44:05 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-18 13:44:05 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-18 13:44:05 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-18 13:44:05 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-04-18 13:44:05 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-04-18 13:44:05 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-04-18 13:44:05 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-04-18 13:44:05 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-04-18 13:44:05 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-04-18 13:44:05 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-04-18 13:44:05 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-04-18 13:44:05 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-04-18 13:44:05 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-04-18 13:44:05 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-04-18 13:44:05 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-04-18 13:44:06 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-04-18 13:44:06 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-04-18 13:44:06 - app.services.vector_store - INFO - 集合 knowledge_base 已存在
2025-04-18 13:44:06 - app.services.vector_store - INFO - 集合 knowledge_base 已存在
2025-04-18 13:44:06 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections/knowledge_base "HTTP/1.1 200 OK"
2025-04-18 13:44:06 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections/knowledge_base "HTTP/1.1 200 OK"
2025-04-18 13:44:06 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-18 13:44:06 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-18 13:44:06 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-18 13:44:06 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-18 13:44:06 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-18 13:44:06 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-18 13:52:51 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-18 13:52:51 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-18 13:52:51 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-18 13:52:51 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-18 13:52:51 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-04-18 13:52:51 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-04-18 13:52:51 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-04-18 13:52:51 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-04-18 13:52:51 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-04-18 13:52:51 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-04-18 13:52:51 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-04-18 13:52:51 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-04-18 13:52:51 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-04-18 13:52:51 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-04-18 13:52:51 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-04-18 13:52:51 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-04-18 13:52:51 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-04-18 13:52:51 - app.services.vector_store - INFO - 集合 knowledge_base 已存在
2025-04-18 13:52:51 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-04-18 13:52:51 - app.services.vector_store - INFO - 集合 knowledge_base 已存在
2025-04-18 13:52:51 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections/knowledge_base "HTTP/1.1 200 OK"
2025-04-18 13:52:51 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections/knowledge_base "HTTP/1.1 200 OK"
2025-04-18 13:52:51 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-18 13:52:51 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-18 13:52:52 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-18 13:52:52 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-18 13:52:52 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-18 13:52:52 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-18 13:54:00 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-18 13:54:00 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-18 13:54:00 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-18 13:54:00 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-04-18 13:54:00 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-18 13:54:00 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-04-18 13:54:00 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-04-18 13:54:00 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-04-18 13:54:00 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-04-18 13:54:00 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-04-18 13:54:00 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-04-18 13:54:00 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-04-18 13:54:00 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-04-18 13:54:00 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-04-18 13:54:00 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-04-18 13:54:00 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-04-18 13:54:00 - app.services.vector_store - INFO - 集合 knowledge_base 已存在
2025-04-18 13:54:00 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-04-18 13:54:00 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-04-18 13:54:00 - app.services.vector_store - INFO - 集合 knowledge_base 已存在
2025-04-18 13:54:00 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections/knowledge_base "HTTP/1.1 200 OK"
2025-04-18 13:54:00 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-18 13:54:00 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections/knowledge_base "HTTP/1.1 200 OK"
2025-04-18 13:54:00 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-18 13:54:00 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-18 13:54:01 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-18 13:54:01 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-18 13:54:01 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-18 13:56:47 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-18 13:56:47 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-18 13:56:47 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-18 13:56:47 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-18 13:56:47 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-04-18 13:56:47 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-04-18 13:56:48 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-04-18 13:56:48 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-04-18 13:56:48 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-04-18 13:56:48 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-04-18 13:56:48 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-04-18 13:56:48 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-04-18 13:56:48 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-04-18 13:56:48 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-04-18 13:56:48 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-04-18 13:56:48 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-04-18 13:56:48 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-04-18 13:56:48 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-04-18 13:56:48 - app.services.vector_store - INFO - 集合 knowledge_base 已存在
2025-04-18 13:56:48 - app.services.vector_store - INFO - 集合 knowledge_base 已存在
2025-04-18 13:56:48 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-18 13:56:48 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections/knowledge_base "HTTP/1.1 200 OK"
2025-04-18 13:56:48 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections/knowledge_base "HTTP/1.1 200 OK"
2025-04-18 13:56:48 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-18 13:56:49 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-18 13:56:49 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-18 13:56:49 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-18 13:56:49 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-18 14:01:53 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-18 14:01:54 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-18 14:01:54 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-18 14:01:54 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-18 14:01:54 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-04-18 14:01:54 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-04-18 14:01:54 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-04-18 14:01:54 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-04-18 14:01:54 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-04-18 14:01:54 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-04-18 14:01:54 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-04-18 14:01:54 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-04-18 14:01:54 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-04-18 14:01:54 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-04-18 14:01:54 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-04-18 14:01:54 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-04-18 14:01:54 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-04-18 14:01:54 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-04-18 14:01:54 - app.services.vector_store - INFO - 集合 knowledge_base 已存在
2025-04-18 14:01:54 - app.services.vector_store - INFO - 集合 knowledge_base 已存在
2025-04-18 14:01:54 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections/knowledge_base "HTTP/1.1 200 OK"
2025-04-18 14:01:54 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections/knowledge_base "HTTP/1.1 200 OK"
2025-04-18 14:01:54 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-18 14:01:54 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-18 14:01:54 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-18 14:01:54 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-18 14:01:54 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-18 14:01:54 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-18 14:02:14 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-04-18 14:02:14 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-04-18 14:02:14 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-04-18 14:02:14 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-04-18 14:02:14 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-04-18 14:02:14 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-04-18 14:02:14 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-04-18 14:02:14 - app.services.vector_store - INFO - 集合 knowledge_base 已存在
2025-04-18 14:02:14 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections/knowledge_base "HTTP/1.1 200 OK"
2025-04-18 14:02:14 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-18 14:02:14 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-18 14:04:13 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-04-18 14:04:14 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-04-18 14:04:14 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-04-18 14:04:14 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-04-18 14:04:14 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-04-18 14:04:14 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-04-18 14:04:14 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-04-18 14:04:14 - app.services.vector_store - INFO - 集合 knowledge_base 已存在
2025-04-18 14:04:14 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections/knowledge_base "HTTP/1.1 200 OK"
2025-04-18 14:04:14 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-18 14:04:14 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-18 14:14:04 - root - INFO - 日志系统初始化完成
2025-04-18 14:14:04 - app.main - INFO - 数据库表创建完成
2025-04-18 14:14:53 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-04-18 14:14:53 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-04-18 14:14:53 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-04-18 14:14:53 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-04-18 14:14:53 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-04-18 14:14:53 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-04-18 14:14:53 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-04-18 14:14:53 - app.services.vector_store - INFO - 集合 knowledge_base 已存在
2025-04-18 14:14:53 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections/knowledge_base "HTTP/1.1 200 OK"
2025-04-18 14:14:53 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-18 14:14:54 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-18 14:15:13 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-04-18 14:15:13 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-04-18 14:15:13 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-04-18 14:15:13 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-04-18 14:15:13 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-04-18 14:15:13 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-04-18 14:15:13 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-04-18 14:15:13 - app.services.vector_store - INFO - 集合 knowledge_base 已存在
2025-04-18 14:15:13 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections/knowledge_base "HTTP/1.1 200 OK"
2025-04-18 14:15:14 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-18 14:15:14 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-18 14:17:41 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-04-18 14:17:41 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-04-18 14:17:41 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-04-18 14:17:41 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-04-18 14:17:41 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-04-18 14:17:41 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-04-18 14:17:41 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-04-18 14:17:41 - app.services.vector_store - INFO - 集合 knowledge_base 已存在
2025-04-18 14:17:41 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections/knowledge_base "HTTP/1.1 200 OK"
2025-04-18 14:17:42 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-18 14:17:42 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-18 14:18:11 - root - INFO - 日志系统初始化完成
2025-04-18 14:18:11 - app.main - INFO - 数据库表创建完成
2025-04-18 14:18:39 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-04-18 14:18:39 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-04-18 14:18:39 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-04-18 14:18:39 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-04-18 14:18:39 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-04-18 14:18:39 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-04-18 14:18:39 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-04-18 14:18:39 - app.services.vector_store - INFO - 集合 knowledge_base 已存在
2025-04-18 14:18:39 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections/knowledge_base "HTTP/1.1 200 OK"
2025-04-18 14:18:39 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-18 14:18:39 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-18 14:19:59 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-04-18 14:19:59 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-04-18 14:19:59 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-04-18 14:19:59 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-04-18 14:19:59 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-04-18 14:19:59 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-04-18 14:19:59 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-04-18 14:19:59 - app.services.vector_store - INFO - 集合 knowledge_base 已存在
2025-04-18 14:19:59 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections/knowledge_base "HTTP/1.1 200 OK"
2025-04-18 14:19:59 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-18 14:19:59 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-18 14:20:00 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-04-18 14:20:00 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-04-18 14:20:00 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-04-18 14:20:00 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-04-18 14:20:00 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-04-18 14:20:00 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-04-18 14:20:00 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-04-18 14:20:00 - app.services.vector_store - INFO - 集合 knowledge_base 已存在
2025-04-18 14:20:00 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections/knowledge_base "HTTP/1.1 200 OK"
2025-04-18 14:20:00 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-18 14:20:00 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-18 19:31:58 - root - INFO - 日志系统初始化完成
2025-04-18 19:31:59 - app.main - INFO - 数据库表创建完成
2025-04-18 19:32:52 - passlib.handlers.bcrypt - WARNING - (trapped) error reading bcrypt version
Traceback (most recent call last):
  File "/Users/wangke/notebook-ai/notebook-backend/venv312/lib/python3.12/site-packages/passlib/handlers/bcrypt.py", line 620, in _load_backend_mixin
    version = _bcrypt.__about__.__version__
              ^^^^^^^^^^^^^^^^^
AttributeError: module 'bcrypt' has no attribute '__about__'
2025-04-18 19:32:53 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-18 19:32:53 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-18 19:32:53 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-04-18 19:32:53 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-04-18 19:32:53 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-04-18 19:32:53 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-04-18 19:32:53 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-04-18 19:32:53 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-04-18 19:32:53 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-04-18 19:32:53 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-04-18 19:32:53 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-04-18 19:32:53 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-04-18 19:32:53 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-04-18 19:32:53 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-04-18 19:32:53 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-04-18 19:32:53 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-04-18 19:32:53 - app.services.vector_store - INFO - 集合 knowledge_base 已存在
2025-04-18 19:32:53 - app.services.vector_store - INFO - 集合 knowledge_base 已存在
2025-04-18 19:32:53 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-18 19:32:53 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections/knowledge_base "HTTP/1.1 200 OK"
2025-04-18 19:32:53 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections/knowledge_base "HTTP/1.1 200 OK"
2025-04-18 19:32:53 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-18 19:32:53 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-18 19:32:53 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-18 19:32:53 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-18 19:32:54 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-18 19:33:11 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-04-18 19:33:11 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-04-18 19:33:11 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-04-18 19:33:11 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-04-18 19:33:11 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-04-18 19:33:11 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-04-18 19:33:11 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-04-18 19:33:11 - app.services.vector_store - INFO - 集合 knowledge_base 已存在
2025-04-18 19:33:11 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections/knowledge_base "HTTP/1.1 200 OK"
2025-04-18 19:33:11 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-18 19:33:11 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-18 19:35:03 - root - INFO - 日志系统初始化完成
2025-04-18 19:35:04 - app.main - INFO - 数据库表创建完成
2025-04-18 19:35:37 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-04-18 19:35:37 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-04-18 19:35:37 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-04-18 19:35:37 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-04-18 19:35:37 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-04-18 19:35:37 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-04-18 19:35:37 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-04-18 19:35:37 - app.services.vector_store - INFO - 集合 knowledge_base 已存在
2025-04-18 19:35:37 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections/knowledge_base "HTTP/1.1 200 OK"
2025-04-18 19:35:37 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-18 19:35:37 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-18 19:36:52 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-04-18 19:36:52 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-04-18 19:36:52 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-04-18 19:36:52 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-04-18 19:36:52 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-04-18 19:36:52 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-04-18 19:36:52 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-04-18 19:36:52 - app.services.vector_store - INFO - 集合 knowledge_base 已存在
2025-04-18 19:36:52 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections/knowledge_base "HTTP/1.1 200 OK"
2025-04-18 19:36:53 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-18 19:36:53 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-18 19:37:45 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-04-18 19:37:45 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-04-18 19:37:45 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-04-18 19:37:45 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-04-18 19:37:45 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-04-18 19:37:45 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-04-18 19:37:45 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-04-18 19:37:45 - app.services.vector_store - INFO - 集合 knowledge_base 已存在
2025-04-18 19:37:45 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections/knowledge_base "HTTP/1.1 200 OK"
2025-04-18 19:37:45 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-18 19:37:45 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-18 23:42:14 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-24 08:45:20 - root - INFO - 日志系统初始化完成
2025-04-24 08:45:21 - app.main - INFO - 数据库表创建完成
2025-04-24 08:45:36 - passlib.handlers.bcrypt - WARNING - (trapped) error reading bcrypt version
Traceback (most recent call last):
  File "/Users/wangke/notebook-ai/notebook-backend/venv312/lib/python3.12/site-packages/passlib/handlers/bcrypt.py", line 620, in _load_backend_mixin
    version = _bcrypt.__about__.__version__
              ^^^^^^^^^^^^^^^^^
AttributeError: module 'bcrypt' has no attribute '__about__'
2025-04-24 08:45:37 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-04-24 08:45:37 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-24 08:45:37 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-24 08:45:37 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-04-24 08:45:37 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-04-24 08:45:37 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-04-24 08:45:37 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-04-24 08:45:37 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-04-24 08:45:37 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-04-24 08:45:37 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-04-24 08:45:37 - app.services.vector_store - INFO - 集合 knowledge_base 已存在
2025-04-24 08:45:37 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-04-24 08:45:37 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-04-24 08:45:37 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections/knowledge_base "HTTP/1.1 200 OK"
2025-04-24 08:45:37 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-04-24 08:45:37 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-04-24 08:45:37 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-04-24 08:45:37 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-04-24 08:45:37 - app.services.vector_store - INFO - 集合 knowledge_base 已存在
2025-04-24 08:45:37 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections/knowledge_base "HTTP/1.1 200 OK"
2025-04-24 08:45:37 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-24 08:45:37 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-24 08:45:37 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-24 08:45:37 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-24 08:45:37 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-24 08:45:37 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-24 08:46:24 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-04-24 08:46:24 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-04-24 08:46:24 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-04-24 08:46:24 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-04-24 08:46:24 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-04-24 08:46:24 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-04-24 08:46:24 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-04-24 08:46:24 - app.services.vector_store - INFO - 集合 knowledge_base 已存在
2025-04-24 08:46:24 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections/knowledge_base "HTTP/1.1 200 OK"
2025-04-24 08:46:24 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-24 08:46:24 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-24 12:38:52 - root - INFO - 日志系统初始化完成
2025-04-24 12:38:52 - app.main - INFO - 数据库表创建完成
2025-04-24 12:39:15 - root - INFO - 日志系统初始化完成
2025-04-24 12:39:15 - app.main - INFO - 数据库表创建完成
2025-04-24 12:39:33 - root - INFO - 日志系统初始化完成
2025-04-24 12:39:34 - app.main - INFO - 数据库表创建完成
2025-04-24 12:40:18 - root - INFO - 日志系统初始化完成
2025-04-24 12:40:18 - app.main - INFO - 数据库表创建完成
2025-04-24 12:43:09 - passlib.handlers.bcrypt - WARNING - (trapped) error reading bcrypt version
Traceback (most recent call last):
  File "/Users/wangke/notebook-ai/notebook-backend/venv312/lib/python3.12/site-packages/passlib/handlers/bcrypt.py", line 620, in _load_backend_mixin
    version = _bcrypt.__about__.__version__
              ^^^^^^^^^^^^^^^^^
AttributeError: module 'bcrypt' has no attribute '__about__'
2025-04-24 12:43:10 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-24 12:43:10 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-24 12:43:10 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-04-24 12:43:10 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-04-24 12:43:10 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-04-24 12:43:10 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-04-24 12:43:10 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-04-24 12:43:10 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-04-24 12:43:10 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-04-24 12:43:10 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-04-24 12:43:10 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-04-24 12:43:10 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-04-24 12:43:10 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-04-24 12:43:10 - app.services.vector_store - INFO - 集合 knowledge_base 已存在
2025-04-24 12:43:10 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-04-24 12:43:10 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-04-24 12:43:10 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections/knowledge_base "HTTP/1.1 200 OK"
2025-04-24 12:43:10 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-04-24 12:43:10 - app.services.vector_store - INFO - 集合 knowledge_base 已存在
2025-04-24 12:43:10 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections/knowledge_base "HTTP/1.1 200 OK"
2025-04-24 12:43:10 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-24 12:43:10 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-24 12:43:10 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-24 12:43:10 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-24 12:43:10 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-24 12:43:11 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-24 12:45:46 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-04-24 12:45:46 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-04-24 12:45:46 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-04-24 12:45:46 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-04-24 12:45:46 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-04-24 12:45:46 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-04-24 12:45:46 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-04-24 12:45:46 - app.services.vector_store - INFO - 集合 knowledge_base 已存在
2025-04-24 12:45:46 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections/knowledge_base "HTTP/1.1 200 OK"
2025-04-24 12:45:46 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-24 12:45:47 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-24 12:45:47 - app.routers.documents - INFO - 接收到文件上传请求: AI Native软件产品开发落地指南.pdf, 类型: application/pdf
2025-04-24 12:45:47 - app.routers.documents - INFO - 解析元数据: {"name":"1111"}...
2025-04-24 12:45:47 - app.routers.documents - INFO - 开始处理上传的文件
2025-04-24 12:45:47 - app.services.document_service - INFO - 开始处理文件: AI Native软件产品开发落地指南.pdf, 内容类型: application/pdf
2025-04-24 12:45:47 - app.services.document_service - INFO - 文件大小: 17141714 字节
2025-04-24 12:46:14 - app.services.document_service - INFO - 文件类型识别为: pdf
2025-04-24 12:46:14 - app.services.document_service - INFO - 检测到二进制文件类型: pdf，将进行Base64编码
2025-04-24 12:46:14 - app.services.document_service - INFO - 文件是否包含NUL字符: True
2025-04-24 12:46:14 - app.services.document_service - INFO - Base64编码成功，编码后大小: 22855620 字符
2025-04-24 12:46:14 - app.services.document_service - INFO - 准备创建文档记录
2025-04-24 12:46:21 - app.services.vector_store - INFO - 向向量存储添加 1 条文本...
2025-04-24 12:46:23 - app.services.vector_store - ERROR - 添加文本到向量存储出错: status_code: 400 
 code: InvalidParameter 
 message: Inference error: Range of input length should be [1, 2048]
Traceback (most recent call last):
  File "/Users/wangke/notebook-ai/notebook-backend/app/services/vector_store.py", line 146, in add_texts
    result = self.vector_store.add_texts(texts=texts, metadatas=metadatas)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/wangke/notebook-ai/notebook-backend/venv312/lib/python3.12/site-packages/langchain_qdrant/qdrant.py", line 441, in add_texts
    for batch_ids, points in self._generate_batches(
                             ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/wangke/notebook-ai/notebook-backend/venv312/lib/python3.12/site-packages/langchain_qdrant/qdrant.py", line 951, in _generate_batches
    self._build_vectors(batch_texts),
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/wangke/notebook-ai/notebook-backend/venv312/lib/python3.12/site-packages/langchain_qdrant/qdrant.py", line 992, in _build_vectors
    batch_embeddings = self.embeddings.embed_documents(list(texts))
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/wangke/notebook-ai/notebook-backend/venv312/lib/python3.12/site-packages/langchain_community/embeddings/dashscope.py", line 150, in embed_documents
    embeddings = embed_with_retry(
                 ^^^^^^^^^^^^^^^^^
  File "/Users/wangke/notebook-ai/notebook-backend/venv312/lib/python3.12/site-packages/langchain_community/embeddings/dashscope.py", line 78, in embed_with_retry
    return _embed_with_retry(**kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/wangke/notebook-ai/notebook-backend/venv312/lib/python3.12/site-packages/tenacity/__init__.py", line 338, in wrapped_f
    return copy(f, *args, **kw)
           ^^^^^^^^^^^^^^^^^^^^
  File "/Users/wangke/notebook-ai/notebook-backend/venv312/lib/python3.12/site-packages/tenacity/__init__.py", line 477, in __call__
    do = self.iter(retry_state=retry_state)
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/wangke/notebook-ai/notebook-backend/venv312/lib/python3.12/site-packages/tenacity/__init__.py", line 378, in iter
    result = action(retry_state)
             ^^^^^^^^^^^^^^^^^^^
  File "/Users/wangke/notebook-ai/notebook-backend/venv312/lib/python3.12/site-packages/tenacity/__init__.py", line 400, in <lambda>
    self._add_action_func(lambda rs: rs.outcome.result())
                                     ^^^^^^^^^^^^^^^^^^^
  File "/usr/local/Cellar/python@3.12/3.12.8/Frameworks/Python.framework/Versions/3.12/lib/python3.12/concurrent/futures/_base.py", line 449, in result
    return self.__get_result()
           ^^^^^^^^^^^^^^^^^^^
  File "/usr/local/Cellar/python@3.12/3.12.8/Frameworks/Python.framework/Versions/3.12/lib/python3.12/concurrent/futures/_base.py", line 401, in __get_result
    raise self._exception
  File "/Users/wangke/notebook-ai/notebook-backend/venv312/lib/python3.12/site-packages/tenacity/__init__.py", line 480, in __call__
    result = fn(*args, **kwargs)
             ^^^^^^^^^^^^^^^^^^^
  File "/Users/wangke/notebook-ai/notebook-backend/venv312/lib/python3.12/site-packages/langchain_community/embeddings/dashscope.py", line 65, in _embed_with_retry
    raise ValueError(
ValueError: status_code: 400 
 code: InvalidParameter 
 message: Inference error: Range of input length should be [1, 2048]
2025-04-24 12:46:27 - app.routers.documents - INFO - 文件处理成功，文档ID: doc_d26d7889-187a-4b33-88e2-88232e1a7e28
2025-04-24 12:49:01 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-24 12:49:01 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-24 12:49:01 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-24 12:49:01 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-24 12:49:01 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-04-24 12:49:01 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-04-24 12:49:02 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-04-24 12:49:02 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-04-24 12:49:02 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-04-24 12:49:02 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-04-24 12:49:02 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-04-24 12:49:02 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-04-24 12:49:02 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-04-24 12:49:02 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-04-24 12:49:02 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-04-24 12:49:02 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-04-24 12:49:02 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-24 12:49:02 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-04-24 12:49:02 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-04-24 12:49:02 - app.services.vector_store - INFO - 集合 knowledge_base 已存在
2025-04-24 12:49:02 - app.services.vector_store - INFO - 集合 knowledge_base 已存在
2025-04-24 12:49:02 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-24 12:49:02 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections/knowledge_base "HTTP/1.1 200 OK"
2025-04-24 12:49:02 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections/knowledge_base "HTTP/1.1 200 OK"
2025-04-24 12:49:02 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-24 12:49:02 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-24 12:49:06 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-24 12:49:06 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-24 12:49:11 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-04-24 12:49:11 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-04-24 12:49:11 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-04-24 12:49:11 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-04-24 12:49:11 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-04-24 12:49:11 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-04-24 12:49:11 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-04-24 12:49:11 - app.services.vector_store - INFO - 集合 knowledge_base 已存在
2025-04-24 12:49:11 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections/knowledge_base "HTTP/1.1 200 OK"
2025-04-24 12:49:11 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-24 12:49:11 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-24 12:51:02 - root - INFO - 日志系统初始化完成
2025-04-24 12:51:02 - app.main - INFO - 数据库表创建完成
2025-04-24 12:51:28 - root - INFO - 日志系统初始化完成
2025-04-24 12:51:29 - app.main - INFO - 数据库表创建完成
2025-04-24 12:51:48 - root - INFO - 日志系统初始化完成
2025-04-24 12:51:48 - app.main - INFO - 数据库表创建完成
2025-04-24 12:51:59 - root - INFO - 日志系统初始化完成
2025-04-24 12:52:00 - app.main - INFO - 数据库表创建完成
2025-04-24 12:53:43 - root - INFO - 日志系统初始化完成
2025-04-24 12:53:43 - app.main - INFO - 数据库表创建完成
2025-04-24 14:12:32 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-27 15:35:17 - root - INFO - 日志系统初始化完成
2025-04-27 15:35:17 - app.main - ERROR - 数据库表创建失败: (psycopg2.OperationalError) connection to server at "wangigor.ddns.net" (127.0.0.1), port 30001 failed: Connection refused
	Is the server running on that host and accepting TCP/IP connections?

(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-04-27 15:40:58 - root - INFO - 日志系统初始化完成
2025-04-27 15:40:59 - app.main - INFO - 数据库表创建完成
2025-04-27 15:49:27 - root - INFO - 日志系统初始化完成
2025-04-27 15:49:27 - app.main - INFO - 数据库表创建完成
2025-04-27 15:50:01 - root - INFO - 日志系统初始化完成
2025-04-27 15:50:02 - app.main - INFO - 数据库表创建完成
2025-04-27 15:50:19 - root - INFO - 日志系统初始化完成
2025-04-27 15:50:20 - app.main - INFO - 数据库表创建完成
2025-04-27 15:50:49 - root - INFO - 日志系统初始化完成
2025-04-27 15:50:49 - app.main - INFO - 数据库表创建完成
2025-04-27 15:51:05 - root - INFO - 日志系统初始化完成
2025-04-27 15:51:05 - app.main - INFO - 数据库表创建完成
2025-04-27 15:51:57 - root - INFO - 日志系统初始化完成
2025-04-27 15:51:58 - app.main - INFO - 数据库表创建完成
2025-04-27 15:52:10 - root - INFO - 日志系统初始化完成
2025-04-27 15:52:11 - app.main - INFO - 数据库表创建完成
2025-04-27 15:52:24 - root - INFO - 日志系统初始化完成
2025-04-27 15:52:24 - app.main - INFO - 数据库表创建完成
2025-04-27 15:52:40 - root - INFO - 日志系统初始化完成
2025-04-27 15:52:40 - app.main - INFO - 数据库表创建完成
2025-04-27 15:53:08 - root - INFO - 日志系统初始化完成
2025-04-27 15:53:08 - app.main - INFO - 数据库表创建完成
2025-04-27 15:53:24 - root - INFO - 日志系统初始化完成
2025-04-27 15:53:25 - __main__ - INFO - 数据库表创建完成
2025-04-28 11:34:13 - root - INFO - 日志系统初始化完成
2025-04-28 11:34:14 - app.main - INFO - 数据库表创建完成
2025-04-28 11:34:25 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-28 11:34:25 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-04-28 11:34:25 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-28 11:34:25 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-04-28 11:34:25 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-04-28 11:34:25 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-04-28 11:34:25 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-04-28 11:34:25 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-04-28 11:34:25 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-04-28 11:34:25 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-04-28 11:34:25 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-04-28 11:34:25 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-04-28 11:34:25 - app.services.vector_store - INFO - 集合 knowledge_base 已存在
2025-04-28 11:34:25 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-04-28 11:34:25 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-04-28 11:34:25 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-04-28 11:34:25 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections/knowledge_base "HTTP/1.1 200 OK"
2025-04-28 11:34:25 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-04-28 11:34:25 - app.services.vector_store - INFO - 集合 knowledge_base 已存在
2025-04-28 11:34:25 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections/knowledge_base "HTTP/1.1 200 OK"
2025-04-28 11:34:25 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-28 11:34:25 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-28 11:34:25 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-28 11:34:25 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-28 11:34:25 - app.routers.documents - ERROR - 获取文档列表失败: (psycopg2.errors.UndefinedColumn) column documents.document_id does not exist
LINE 2: FROM (SELECT documents.id AS documents_id, documents.documen...
                                                   ^

[SQL: SELECT count(*) AS count_1 
FROM (SELECT documents.id AS documents_id, documents.document_id AS documents_document_id, documents.name AS documents_name, documents.file_type AS documents_file_type, documents.content AS documents_content, documents.extracted_text AS documents_extracted_text, documents.vector_id AS documents_vector_id, documents.doc_metadata AS documents_doc_metadata, documents.user_id AS documents_user_id, documents.created_at AS documents_created_at, documents.updated_at AS documents_updated_at, documents.deleted AS documents_deleted, documents.bucket_name AS documents_bucket_name, documents.object_key AS documents_object_key 
FROM documents 
WHERE documents.user_id = %(user_id_1)s AND documents.deleted = false) AS anon_1]
[parameters: {'user_id_1': 1}]
(Background on this error at: https://sqlalche.me/e/20/f405)
Traceback (most recent call last):
  File "/Users/wangke/notebook-ai/notebook-backend/venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1965, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/wangke/notebook-ai/notebook-backend/venv/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 921, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.UndefinedColumn: column documents.document_id does not exist
LINE 2: FROM (SELECT documents.id AS documents_id, documents.documen...
                                                   ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/wangke/notebook-ai/notebook-backend/app/routers/documents.py", line 167, in list_documents
    documents, total = document_service.get_documents(current_user.id, skip, limit, search)
  File "/Users/wangke/notebook-ai/notebook-backend/app/services/document_service.py", line 123, in get_documents
    total = query.count()
  File "/Users/wangke/notebook-ai/notebook-backend/venv/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 3127, in count
    self._legacy_from_self(col).enable_eagerloads(False).scalar()
  File "/Users/wangke/notebook-ai/notebook-backend/venv/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2820, in scalar
    ret = self.one()
  File "/Users/wangke/notebook-ai/notebook-backend/venv/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2793, in one
    return self._iter().one()  # type: ignore
  File "/Users/wangke/notebook-ai/notebook-backend/venv/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2842, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/Users/wangke/notebook-ai/notebook-backend/venv/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2262, in execute
    return self._execute_internal(
  File "/Users/wangke/notebook-ai/notebook-backend/venv/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2144, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/Users/wangke/notebook-ai/notebook-backend/venv/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 293, in orm_execute_statement
    result = conn.execute(
  File "/Users/wangke/notebook-ai/notebook-backend/venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1412, in execute
    return meth(
  File "/Users/wangke/notebook-ai/notebook-backend/venv/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 516, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/Users/wangke/notebook-ai/notebook-backend/venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1635, in _execute_clauseelement
    ret = self._execute_context(
  File "/Users/wangke/notebook-ai/notebook-backend/venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1844, in _execute_context
    return self._exec_single_context(
  File "/Users/wangke/notebook-ai/notebook-backend/venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1984, in _exec_single_context
    self._handle_dbapi_exception(
  File "/Users/wangke/notebook-ai/notebook-backend/venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2339, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/wangke/notebook-ai/notebook-backend/venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1965, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/wangke/notebook-ai/notebook-backend/venv/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 921, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedColumn) column documents.document_id does not exist
LINE 2: FROM (SELECT documents.id AS documents_id, documents.documen...
                                                   ^

[SQL: SELECT count(*) AS count_1 
FROM (SELECT documents.id AS documents_id, documents.document_id AS documents_document_id, documents.name AS documents_name, documents.file_type AS documents_file_type, documents.content AS documents_content, documents.extracted_text AS documents_extracted_text, documents.vector_id AS documents_vector_id, documents.doc_metadata AS documents_doc_metadata, documents.user_id AS documents_user_id, documents.created_at AS documents_created_at, documents.updated_at AS documents_updated_at, documents.deleted AS documents_deleted, documents.bucket_name AS documents_bucket_name, documents.object_key AS documents_object_key 
FROM documents 
WHERE documents.user_id = %(user_id_1)s AND documents.deleted = false) AS anon_1]
[parameters: {'user_id_1': 1}]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-04-28 11:34:25 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-28 11:34:25 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-28 11:34:25 - app.routers.documents - ERROR - 获取文档列表失败: (psycopg2.errors.UndefinedColumn) column documents.document_id does not exist
LINE 2: FROM (SELECT documents.id AS documents_id, documents.documen...
                                                   ^

[SQL: SELECT count(*) AS count_1 
FROM (SELECT documents.id AS documents_id, documents.document_id AS documents_document_id, documents.name AS documents_name, documents.file_type AS documents_file_type, documents.content AS documents_content, documents.extracted_text AS documents_extracted_text, documents.vector_id AS documents_vector_id, documents.doc_metadata AS documents_doc_metadata, documents.user_id AS documents_user_id, documents.created_at AS documents_created_at, documents.updated_at AS documents_updated_at, documents.deleted AS documents_deleted, documents.bucket_name AS documents_bucket_name, documents.object_key AS documents_object_key 
FROM documents 
WHERE documents.user_id = %(user_id_1)s AND documents.deleted = false) AS anon_1]
[parameters: {'user_id_1': 1}]
(Background on this error at: https://sqlalche.me/e/20/f405)
Traceback (most recent call last):
  File "/Users/wangke/notebook-ai/notebook-backend/venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1965, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/wangke/notebook-ai/notebook-backend/venv/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 921, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.UndefinedColumn: column documents.document_id does not exist
LINE 2: FROM (SELECT documents.id AS documents_id, documents.documen...
                                                   ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/wangke/notebook-ai/notebook-backend/app/routers/documents.py", line 167, in list_documents
    documents, total = document_service.get_documents(current_user.id, skip, limit, search)
  File "/Users/wangke/notebook-ai/notebook-backend/app/services/document_service.py", line 123, in get_documents
    total = query.count()
  File "/Users/wangke/notebook-ai/notebook-backend/venv/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 3127, in count
    self._legacy_from_self(col).enable_eagerloads(False).scalar()
  File "/Users/wangke/notebook-ai/notebook-backend/venv/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2820, in scalar
    ret = self.one()
  File "/Users/wangke/notebook-ai/notebook-backend/venv/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2793, in one
    return self._iter().one()  # type: ignore
  File "/Users/wangke/notebook-ai/notebook-backend/venv/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2842, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/Users/wangke/notebook-ai/notebook-backend/venv/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2262, in execute
    return self._execute_internal(
  File "/Users/wangke/notebook-ai/notebook-backend/venv/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2144, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/Users/wangke/notebook-ai/notebook-backend/venv/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 293, in orm_execute_statement
    result = conn.execute(
  File "/Users/wangke/notebook-ai/notebook-backend/venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1412, in execute
    return meth(
  File "/Users/wangke/notebook-ai/notebook-backend/venv/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 516, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/Users/wangke/notebook-ai/notebook-backend/venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1635, in _execute_clauseelement
    ret = self._execute_context(
  File "/Users/wangke/notebook-ai/notebook-backend/venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1844, in _execute_context
    return self._exec_single_context(
  File "/Users/wangke/notebook-ai/notebook-backend/venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1984, in _exec_single_context
    self._handle_dbapi_exception(
  File "/Users/wangke/notebook-ai/notebook-backend/venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2339, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/wangke/notebook-ai/notebook-backend/venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1965, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/wangke/notebook-ai/notebook-backend/venv/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 921, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedColumn) column documents.document_id does not exist
LINE 2: FROM (SELECT documents.id AS documents_id, documents.documen...
                                                   ^

[SQL: SELECT count(*) AS count_1 
FROM (SELECT documents.id AS documents_id, documents.document_id AS documents_document_id, documents.name AS documents_name, documents.file_type AS documents_file_type, documents.content AS documents_content, documents.extracted_text AS documents_extracted_text, documents.vector_id AS documents_vector_id, documents.doc_metadata AS documents_doc_metadata, documents.user_id AS documents_user_id, documents.created_at AS documents_created_at, documents.updated_at AS documents_updated_at, documents.deleted AS documents_deleted, documents.bucket_name AS documents_bucket_name, documents.object_key AS documents_object_key 
FROM documents 
WHERE documents.user_id = %(user_id_1)s AND documents.deleted = false) AS anon_1]
[parameters: {'user_id_1': 1}]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-04-28 11:45:25 - root - INFO - 日志系统初始化完成
2025-04-28 11:45:25 - app.main - INFO - 数据库表创建完成
2025-04-28 11:45:59 - root - INFO - 日志系统初始化完成
2025-04-28 11:46:00 - app.main - INFO - 数据库表创建完成
2025-04-28 11:46:32 - root - INFO - 日志系统初始化完成
2025-04-28 11:46:32 - app.main - INFO - 数据库表创建完成
2025-04-28 11:46:46 - root - INFO - 日志系统初始化完成
2025-04-28 11:46:46 - app.main - INFO - 数据库表创建完成
2025-04-28 11:46:54 - root - INFO - 日志系统初始化完成
2025-04-28 11:46:54 - app.main - INFO - 数据库表创建完成
2025-04-28 11:47:04 - root - INFO - 日志系统初始化完成
2025-04-28 11:47:04 - app.main - INFO - 数据库表创建完成
2025-04-28 11:47:37 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-28 11:47:37 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-28 11:47:37 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-28 11:47:37 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-28 11:47:37 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-04-28 11:47:37 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-04-28 11:47:37 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-04-28 11:47:37 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-04-28 11:47:37 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-04-28 11:47:37 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-04-28 11:47:37 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-04-28 11:47:37 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-04-28 11:47:37 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-04-28 11:47:37 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-04-28 11:47:37 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-04-28 11:47:37 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-04-28 11:47:37 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-04-28 11:47:37 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-04-28 11:47:37 - app.services.vector_store - INFO - 集合 knowledge_base 已存在
2025-04-28 11:47:37 - app.services.vector_store - INFO - 集合 knowledge_base 已存在
2025-04-28 11:47:37 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections/knowledge_base "HTTP/1.1 200 OK"
2025-04-28 11:47:37 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections/knowledge_base "HTTP/1.1 200 OK"
2025-04-28 11:47:37 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-28 11:47:37 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-28 11:47:38 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-28 11:47:38 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-28 11:47:38 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-28 11:47:38 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-28 11:47:38 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-04-28 11:47:39 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-04-28 11:47:39 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-04-28 11:47:39 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-04-28 11:47:39 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-04-28 11:47:39 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-04-28 11:47:39 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-04-28 11:47:39 - app.services.vector_store - INFO - 集合 knowledge_base 已存在
2025-04-28 11:47:39 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections/knowledge_base "HTTP/1.1 200 OK"
2025-04-28 11:47:39 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-28 11:47:39 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-28 11:47:52 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-04-28 11:47:52 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-04-28 11:47:52 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-04-28 11:47:52 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-04-28 11:47:52 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-04-28 11:47:52 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-04-28 11:47:52 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-04-28 11:47:52 - app.services.vector_store - INFO - 集合 knowledge_base 已存在
2025-04-28 11:47:52 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections/knowledge_base "HTTP/1.1 200 OK"
2025-04-28 11:47:52 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-28 11:47:52 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-28 11:47:52 - app.routers.documents - INFO - 接收到文件上传请求: 5088c668-cb41-4fb4-855b-46a3aa0aa44e_快速改善代码质量的编程规范.pdf, 类型: application/pdf
2025-04-28 11:47:52 - app.routers.documents - INFO - 解析元数据: {"name":"5088c668-cb41-4fb4-855b-46a3aa0aa44e_快速改善代码质量的编程规范"}...
2025-04-28 11:47:52 - app.routers.documents - INFO - 开始处理上传的文件
2025-04-28 11:47:52 - app.services.document_service - INFO - 开始处理文件: 5088c668-cb41-4fb4-855b-46a3aa0aa44e_快速改善代码质量的编程规范.pdf, 内容类型: application/pdf
2025-04-28 11:47:52 - app.services.document_service - INFO - 文件大小: 2602666 字节
2025-04-28 11:47:52 - app.services.document_service - INFO - 文件类型识别为: pdf
2025-04-28 11:47:52 - app.services.document_service - INFO - 检测到二进制文件类型: pdf，将进行Base64编码
2025-04-28 11:47:52 - app.services.document_service - INFO - 文件是否包含NUL字符: True
2025-04-28 11:47:52 - app.services.document_service - INFO - Base64编码成功，编码后大小: 3470224 字符
2025-04-28 11:47:52 - app.services.document_service - INFO - 准备创建文档记录
2025-04-28 11:47:52 - app.services.document_service - WARNING - 提取的文本超过2048字符，将被截断 (1689017 -> 2048)
2025-04-28 11:47:52 - app.services.vector_store - INFO - 向向量存储添加 1 条文本...
2025-04-28 11:47:53 - httpx - INFO - HTTP Request: PUT http://wangigor.ddns.net:30063/collections/knowledge_base/points?wait=true "HTTP/1.1 200 OK"
2025-04-28 11:47:53 - app.services.vector_store - INFO - 成功添加 1 条文本
2025-04-28 11:47:53 - app.routers.documents - ERROR - 上传文档失败: 'Document' object has no attribute 'document_id'
Traceback (most recent call last):
  File "/Users/wangke/notebook-ai/notebook-backend/app/routers/documents.py", line 80, in upload_document
    logger.info(f"文件处理成功，文档ID: {document.document_id}")
AttributeError: 'Document' object has no attribute 'document_id'
2025-04-28 11:49:06 - root - INFO - 日志系统初始化完成
2025-04-28 11:49:06 - app.main - INFO - 数据库表创建完成
2025-04-28 11:50:34 - root - INFO - 日志系统初始化完成
2025-04-28 11:50:34 - app.main - INFO - 数据库表创建完成
2025-04-28 11:52:38 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-04-28 11:52:38 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-04-28 11:52:38 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-04-28 11:52:39 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-04-28 11:52:39 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-04-28 11:52:39 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-04-28 11:52:39 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-04-28 11:52:39 - app.services.vector_store - INFO - 集合 knowledge_base 已存在
2025-04-28 11:52:39 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections/knowledge_base "HTTP/1.1 200 OK"
2025-04-28 11:52:39 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-28 11:52:39 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-28 11:52:39 - app.routers.documents - ERROR - 处理文档 1 失败: 1 validation error for DocumentPreview
metadata
  Input should be a valid dictionary [type=dict_type, input_value=MetaData(), input_type=MetaData]
    For further information visit https://errors.pydantic.dev/2.11/v/dict_type
2025-04-28 11:52:55 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-28 11:52:55 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-28 11:52:55 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-28 11:52:55 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-28 11:52:55 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-04-28 11:52:55 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-04-28 11:52:55 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-04-28 11:52:55 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-04-28 11:52:55 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-04-28 11:52:55 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-04-28 11:52:55 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-04-28 11:52:55 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-04-28 11:52:55 - app.services.vector_store - INFO - 集合 knowledge_base 已存在
2025-04-28 11:52:55 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections/knowledge_base "HTTP/1.1 200 OK"
2025-04-28 11:52:55 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-04-28 11:52:55 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-04-28 11:52:55 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-28 11:52:55 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-04-28 11:52:55 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-04-28 11:52:55 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-04-28 11:52:55 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-28 11:52:55 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-04-28 11:52:55 - app.services.vector_store - INFO - 集合 knowledge_base 已存在
2025-04-28 11:52:55 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections/knowledge_base "HTTP/1.1 200 OK"
2025-04-28 11:52:56 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-28 11:52:56 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-28 11:52:56 - app.routers.documents - ERROR - 处理文档 1 失败: 1 validation error for DocumentPreview
metadata
  Input should be a valid dictionary [type=dict_type, input_value=MetaData(), input_type=MetaData]
    For further information visit https://errors.pydantic.dev/2.11/v/dict_type
2025-04-28 11:52:56 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-28 11:52:56 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-28 11:52:56 - app.routers.documents - ERROR - 处理文档 1 失败: 1 validation error for DocumentPreview
metadata
  Input should be a valid dictionary [type=dict_type, input_value=MetaData(), input_type=MetaData]
    For further information visit https://errors.pydantic.dev/2.11/v/dict_type
2025-04-28 11:53:25 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-04-28 11:53:25 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-04-28 11:53:25 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-04-28 11:53:25 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-04-28 11:53:25 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-04-28 11:53:25 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-04-28 11:53:26 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-04-28 11:53:26 - app.services.vector_store - INFO - 集合 knowledge_base 已存在
2025-04-28 11:53:26 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections/knowledge_base "HTTP/1.1 200 OK"
2025-04-28 11:53:26 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-28 11:53:26 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-28 11:53:26 - app.routers.documents - ERROR - 处理文档 1 失败: 1 validation error for DocumentPreview
metadata
  Input should be a valid dictionary [type=dict_type, input_value=MetaData(), input_type=MetaData]
    For further information visit https://errors.pydantic.dev/2.11/v/dict_type
2025-04-28 11:53:41 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-04-28 11:53:41 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-04-28 11:53:41 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-04-28 11:53:41 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-04-28 11:53:41 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-04-28 11:53:41 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-04-28 11:53:42 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-04-28 11:53:42 - app.services.vector_store - INFO - 集合 knowledge_base 已存在
2025-04-28 11:53:42 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections/knowledge_base "HTTP/1.1 200 OK"
2025-04-28 11:53:42 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-28 11:53:42 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-28 11:53:42 - app.routers.documents - ERROR - 处理文档 1 失败: 1 validation error for DocumentPreview
metadata
  Input should be a valid dictionary [type=dict_type, input_value=MetaData(), input_type=MetaData]
    For further information visit https://errors.pydantic.dev/2.11/v/dict_type
2025-04-28 11:53:54 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-28 11:53:54 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-28 11:53:55 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-04-28 11:53:55 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-28 11:53:55 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-28 11:53:55 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-04-28 11:53:55 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-04-28 11:53:55 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-04-28 11:53:55 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-04-28 11:53:55 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-04-28 11:53:55 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-04-28 11:53:55 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-04-28 11:53:55 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-04-28 11:53:55 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-04-28 11:53:55 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-04-28 11:53:55 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-04-28 11:53:55 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-04-28 11:53:55 - app.services.vector_store - INFO - 集合 knowledge_base 已存在
2025-04-28 11:53:55 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections/knowledge_base "HTTP/1.1 200 OK"
2025-04-28 11:53:55 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-04-28 11:53:55 - app.services.vector_store - INFO - 集合 knowledge_base 已存在
2025-04-28 11:53:55 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections/knowledge_base "HTTP/1.1 200 OK"
2025-04-28 11:53:55 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-28 11:53:55 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-28 11:53:55 - app.routers.documents - ERROR - 处理文档 1 失败: 1 validation error for DocumentPreview
metadata
  Input should be a valid dictionary [type=dict_type, input_value=MetaData(), input_type=MetaData]
    For further information visit https://errors.pydantic.dev/2.11/v/dict_type
2025-04-28 11:53:55 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-28 11:53:55 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-28 11:53:55 - app.routers.documents - ERROR - 处理文档 1 失败: 1 validation error for DocumentPreview
metadata
  Input should be a valid dictionary [type=dict_type, input_value=MetaData(), input_type=MetaData]
    For further information visit https://errors.pydantic.dev/2.11/v/dict_type
2025-04-28 11:53:55 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-28 11:53:56 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-28 11:54:23 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-28 11:54:23 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-28 12:43:45 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-28 12:43:45 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-04-28 12:43:45 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-28 12:43:45 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-04-28 12:43:45 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-04-28 12:43:45 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-04-28 12:43:45 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-04-28 12:43:45 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-04-28 12:43:45 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-04-28 12:43:45 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-04-28 12:43:45 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-04-28 12:43:45 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-04-28 12:43:45 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-04-28 12:43:45 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-04-28 12:43:45 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-04-28 12:43:45 - app.services.vector_store - INFO - 集合 knowledge_base 已存在
2025-04-28 12:43:45 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-04-28 12:43:45 - app.services.vector_store - INFO - 集合 knowledge_base 已存在
2025-04-28 12:43:45 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections/knowledge_base "HTTP/1.1 200 OK"
2025-04-28 12:43:45 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections/knowledge_base "HTTP/1.1 200 OK"
2025-04-28 12:43:45 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-28 12:43:45 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-28 12:43:45 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-28 12:43:45 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-28 12:43:45 - app.routers.documents - ERROR - 处理文档 1 失败: 1 validation error for DocumentPreview
metadata
  Input should be a valid dictionary [type=dict_type, input_value=MetaData(), input_type=MetaData]
    For further information visit https://errors.pydantic.dev/2.11/v/dict_type
2025-04-28 12:43:45 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-28 12:43:45 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-28 12:43:45 - app.routers.documents - ERROR - 处理文档 1 失败: 1 validation error for DocumentPreview
metadata
  Input should be a valid dictionary [type=dict_type, input_value=MetaData(), input_type=MetaData]
    For further information visit https://errors.pydantic.dev/2.11/v/dict_type
2025-04-28 12:43:50 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-28 12:43:50 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-28 12:43:57 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-28 12:43:57 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-28 12:44:16 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-04-28 12:44:16 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-04-28 12:44:16 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-04-28 12:44:17 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-04-28 12:44:17 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-04-28 12:44:17 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-04-28 12:44:17 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-04-28 12:44:17 - app.services.vector_store - INFO - 集合 knowledge_base 已存在
2025-04-28 12:44:17 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections/knowledge_base "HTTP/1.1 200 OK"
2025-04-28 12:44:17 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-28 12:44:17 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-28 12:44:17 - app.routers.documents - INFO - 接收到文件上传请求: 5088c668-cb41-4fb4-855b-46a3aa0aa44e_快速改善代码质量的编程规范.pdf, 类型: application/pdf
2025-04-28 12:44:17 - app.routers.documents - INFO - 解析元数据: {"name":"5088c668-cb41-4fb4-855b-46a3aa0aa44e_快速改善代码质量的编程规范"}...
2025-04-28 12:44:17 - app.routers.documents - INFO - 开始处理上传的文件
2025-04-28 12:44:17 - app.services.document_service - INFO - 开始处理文件: 5088c668-cb41-4fb4-855b-46a3aa0aa44e_快速改善代码质量的编程规范.pdf, 内容类型: application/pdf
2025-04-28 12:44:17 - app.services.document_service - INFO - 文件大小: 2602666 字节
2025-04-28 12:44:17 - app.services.document_service - INFO - 文件类型识别为: pdf
2025-04-28 12:44:17 - app.services.document_service - INFO - 检测到二进制文件类型: pdf，将进行Base64编码
2025-04-28 12:44:17 - app.services.document_service - INFO - 文件是否包含NUL字符: True
2025-04-28 12:44:17 - app.services.document_service - INFO - Base64编码成功，编码后大小: 3470224 字符
2025-04-28 12:44:17 - app.services.document_service - INFO - 准备创建文档记录
2025-04-28 12:44:17 - app.services.document_service - WARNING - 提取的文本超过2048字符，将被截断 (1689017 -> 2048)
2025-04-28 12:44:17 - app.services.vector_store - INFO - 向向量存储添加 1 条文本...
2025-04-28 12:44:18 - httpx - INFO - HTTP Request: PUT http://wangigor.ddns.net:30063/collections/knowledge_base/points?wait=true "HTTP/1.1 200 OK"
2025-04-28 12:44:18 - app.services.vector_store - INFO - 成功添加 1 条文本
2025-04-28 12:44:18 - app.routers.documents - INFO - 文件处理成功，文档ID: 2
2025-04-28 12:46:42 - root - INFO - 日志系统初始化完成
2025-04-28 12:46:43 - app.main - INFO - 数据库表创建完成
2025-04-28 12:47:01 - root - INFO - 日志系统初始化完成
2025-04-28 12:47:01 - app.main - INFO - 数据库表创建完成
2025-04-28 12:47:16 - root - INFO - 日志系统初始化完成
2025-04-28 12:47:16 - app.main - INFO - 数据库表创建完成
2025-04-28 12:47:30 - root - INFO - 日志系统初始化完成
2025-04-28 12:47:30 - app.main - INFO - 数据库表创建完成
2025-04-28 12:47:47 - root - INFO - 日志系统初始化完成
2025-04-28 12:47:47 - app.main - INFO - 数据库表创建完成
2025-04-28 12:48:02 - root - INFO - 日志系统初始化完成
2025-04-28 12:48:02 - app.main - INFO - 数据库表创建完成
2025-04-28 12:48:25 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-04-28 12:48:25 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-04-28 12:48:25 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-04-28 12:48:25 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-04-28 12:48:25 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-04-28 12:48:25 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-04-28 12:48:25 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-04-28 12:48:25 - app.services.vector_store - INFO - 集合 knowledge_base 已存在
2025-04-28 12:48:25 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections/knowledge_base "HTTP/1.1 200 OK"
2025-04-28 12:48:26 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-28 12:48:26 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-28 12:48:26 - app.routers.documents - INFO - 接收到文件上传请求: 5088c668-cb41-4fb4-855b-46a3aa0aa44e_快速改善代码质量的编程规范.pdf, 类型: application/pdf
2025-04-28 12:48:26 - app.routers.documents - INFO - 解析元数据: {"name":"5088c668-cb41-4fb4-855b-46a3aa0aa44e_快速改善代码质量的编程规范"}...
2025-04-28 12:48:26 - app.routers.documents - INFO - 开始处理上传的文件
2025-04-28 12:48:26 - app.services.document_service - INFO - 开始处理文件: 5088c668-cb41-4fb4-855b-46a3aa0aa44e_快速改善代码质量的编程规范.pdf, 内容类型: application/pdf
2025-04-28 12:48:26 - app.services.document_service - INFO - 文件大小: 2602666 字节
2025-04-28 12:48:26 - app.services.document_service - INFO - 文件类型识别为: pdf
2025-04-28 12:48:26 - app.services.document_service - INFO - 检测到二进制文件类型: pdf，将进行Base64编码
2025-04-28 12:48:26 - app.services.document_service - INFO - 文件是否包含NUL字符: True
2025-04-28 12:48:26 - app.services.document_service - INFO - Base64编码成功，编码后大小: 3470224 字符
2025-04-28 12:48:26 - app.services.document_service - INFO - 准备创建文档记录
2025-04-28 12:48:26 - app.services.document_service - WARNING - 提取的文本超过2048字符，将被截断 (1689017 -> 2048)
2025-04-28 12:48:26 - app.services.vector_store - INFO - 向向量存储添加 1 条文本...
2025-04-28 12:48:26 - httpx - INFO - HTTP Request: PUT http://wangigor.ddns.net:30063/collections/knowledge_base/points?wait=true "HTTP/1.1 200 OK"
2025-04-28 12:48:26 - app.services.vector_store - INFO - 成功添加 1 条文本
2025-04-28 12:48:26 - app.routers.documents - INFO - 文件处理成功，文档ID: 3
2025-04-28 12:48:26 - app.routers.documents - ERROR - 上传文档失败: 1 validation error for DocumentResponse
metadata
  Input should be a valid dictionary [type=dict_type, input_value=MetaData(), input_type=MetaData]
    For further information visit https://errors.pydantic.dev/2.11/v/dict_type
Traceback (most recent call last):
  File "/Users/wangke/notebook-ai/notebook-backend/app/routers/documents.py", line 82, in upload_document
    return DocumentResponse.model_validate(document)
  File "/Users/wangke/notebook-ai/notebook-backend/venv/lib/python3.10/site-packages/pydantic/main.py", line 703, in model_validate
    return cls.__pydantic_validator__.validate_python(
pydantic_core._pydantic_core.ValidationError: 1 validation error for DocumentResponse
metadata
  Input should be a valid dictionary [type=dict_type, input_value=MetaData(), input_type=MetaData]
    For further information visit https://errors.pydantic.dev/2.11/v/dict_type
2025-04-28 12:48:30 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-28 12:48:30 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-28 12:48:30 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-28 12:48:31 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-28 12:48:31 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-04-28 12:48:31 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-04-28 12:48:31 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-04-28 12:48:31 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-04-28 12:48:31 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-04-28 12:48:31 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-04-28 12:48:31 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-04-28 12:48:31 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-04-28 12:48:31 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-04-28 12:48:31 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-04-28 12:48:31 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-04-28 12:48:31 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-04-28 12:48:31 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-04-28 12:48:31 - app.services.vector_store - INFO - 集合 knowledge_base 已存在
2025-04-28 12:48:31 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-04-28 12:48:31 - app.services.vector_store - INFO - 集合 knowledge_base 已存在
2025-04-28 12:48:31 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections/knowledge_base "HTTP/1.1 200 OK"
2025-04-28 12:48:31 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections/knowledge_base "HTTP/1.1 200 OK"
2025-04-28 12:48:31 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-28 12:48:31 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-28 12:48:31 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-28 12:48:31 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-28 12:48:31 - app.routers.documents - ERROR - 处理文档 3 失败: 1 validation error for DocumentPreview
metadata
  Input should be a valid dictionary [type=dict_type, input_value=MetaData(), input_type=MetaData]
    For further information visit https://errors.pydantic.dev/2.11/v/dict_type
2025-04-28 12:48:31 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-28 12:48:31 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-28 12:48:31 - app.routers.documents - ERROR - 处理文档 3 失败: 1 validation error for DocumentPreview
metadata
  Input should be a valid dictionary [type=dict_type, input_value=MetaData(), input_type=MetaData]
    For further information visit https://errors.pydantic.dev/2.11/v/dict_type
2025-04-28 12:48:31 - app.routers.documents - ERROR - 处理文档 2 失败: 1 validation error for DocumentPreview
metadata
  Input should be a valid dictionary [type=dict_type, input_value=MetaData(), input_type=MetaData]
    For further information visit https://errors.pydantic.dev/2.11/v/dict_type
2025-04-28 12:48:31 - app.routers.documents - ERROR - 处理文档 1 失败: 1 validation error for DocumentPreview
metadata
  Input should be a valid dictionary [type=dict_type, input_value=MetaData(), input_type=MetaData]
    For further information visit https://errors.pydantic.dev/2.11/v/dict_type
2025-04-28 12:48:41 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-04-28 12:48:42 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-04-28 12:48:42 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-04-28 12:48:42 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-04-28 12:48:42 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-04-28 12:48:42 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-04-28 12:48:42 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-04-28 12:48:42 - app.services.vector_store - INFO - 集合 knowledge_base 已存在
2025-04-28 12:48:42 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections/knowledge_base "HTTP/1.1 200 OK"
2025-04-28 12:48:42 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-28 12:48:42 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-28 12:48:42 - app.routers.documents - INFO - 接收到文件上传请求: 验证码.pdf, 类型: application/pdf
2025-04-28 12:48:42 - app.routers.documents - INFO - 解析元数据: {"name":"验证码"}...
2025-04-28 12:48:42 - app.routers.documents - INFO - 开始处理上传的文件
2025-04-28 12:48:42 - app.services.document_service - INFO - 开始处理文件: 验证码.pdf, 内容类型: application/pdf
2025-04-28 12:48:42 - app.services.document_service - INFO - 文件大小: 162462 字节
2025-04-28 12:48:42 - app.services.document_service - INFO - 文件类型识别为: pdf
2025-04-28 12:48:42 - app.services.document_service - INFO - 检测到二进制文件类型: pdf，将进行Base64编码
2025-04-28 12:48:42 - app.services.document_service - INFO - 文件是否包含NUL字符: True
2025-04-28 12:48:42 - app.services.document_service - INFO - Base64编码成功，编码后大小: 216616 字符
2025-04-28 12:48:42 - app.services.document_service - INFO - 准备创建文档记录
2025-04-28 12:48:42 - app.services.document_service - WARNING - 提取的文本超过2048字符，将被截断 (120561 -> 2048)
2025-04-28 12:48:42 - app.services.vector_store - INFO - 向向量存储添加 1 条文本...
2025-04-28 12:48:43 - httpx - INFO - HTTP Request: PUT http://wangigor.ddns.net:30063/collections/knowledge_base/points?wait=true "HTTP/1.1 200 OK"
2025-04-28 12:48:43 - app.services.vector_store - INFO - 成功添加 1 条文本
2025-04-28 12:48:43 - app.routers.documents - INFO - 文件处理成功，文档ID: 4
2025-04-28 12:48:43 - app.routers.documents - ERROR - 上传文档失败: 1 validation error for DocumentResponse
metadata
  Input should be a valid dictionary [type=dict_type, input_value=MetaData(), input_type=MetaData]
    For further information visit https://errors.pydantic.dev/2.11/v/dict_type
Traceback (most recent call last):
  File "/Users/wangke/notebook-ai/notebook-backend/app/routers/documents.py", line 82, in upload_document
    return DocumentResponse.model_validate(document)
  File "/Users/wangke/notebook-ai/notebook-backend/venv/lib/python3.10/site-packages/pydantic/main.py", line 703, in model_validate
    return cls.__pydantic_validator__.validate_python(
pydantic_core._pydantic_core.ValidationError: 1 validation error for DocumentResponse
metadata
  Input should be a valid dictionary [type=dict_type, input_value=MetaData(), input_type=MetaData]
    For further information visit https://errors.pydantic.dev/2.11/v/dict_type
2025-04-28 12:59:49 - root - INFO - 日志系统初始化完成
2025-04-28 12:59:50 - app.main - INFO - 数据库表创建完成
2025-04-28 13:00:30 - root - INFO - 日志系统初始化完成
2025-04-28 13:00:31 - app.main - INFO - 数据库表创建完成
2025-04-28 13:00:44 - root - INFO - 日志系统初始化完成
2025-04-28 13:00:44 - app.main - INFO - 数据库表创建完成
2025-04-28 13:00:56 - root - INFO - 日志系统初始化完成
2025-04-28 13:00:56 - app.main - INFO - 数据库表创建完成
2025-04-28 13:01:02 - root - INFO - 日志系统初始化完成
2025-04-28 13:01:02 - app.main - INFO - 数据库表创建完成
2025-04-28 13:03:53 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-28 13:03:53 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-28 13:03:53 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-28 13:03:53 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-28 13:03:53 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-04-28 13:03:53 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-04-28 13:03:53 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-04-28 13:03:53 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-04-28 13:03:53 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-04-28 13:03:53 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-04-28 13:03:53 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-04-28 13:03:53 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-04-28 13:03:53 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-04-28 13:03:53 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-04-28 13:03:53 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-04-28 13:03:53 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-04-28 13:03:53 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-04-28 13:03:53 - app.services.vector_store - INFO - 集合 knowledge_base 已存在
2025-04-28 13:03:53 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-04-28 13:03:53 - app.services.vector_store - INFO - 集合 knowledge_base 已存在
2025-04-28 13:03:53 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections/knowledge_base "HTTP/1.1 200 OK"
2025-04-28 13:03:53 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections/knowledge_base "HTTP/1.1 200 OK"
2025-04-28 13:03:53 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-28 13:03:53 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-28 13:03:54 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-28 13:03:54 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-28 13:03:54 - app.routers.documents - ERROR - 处理文档 4 失败: 1 validation error for DocumentPreview
metadata
  Input should be a valid dictionary [type=dict_type, input_value=MetaData(), input_type=MetaData]
    For further information visit https://errors.pydantic.dev/2.11/v/dict_type
2025-04-28 13:03:54 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-28 13:03:54 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-28 13:03:54 - app.routers.documents - ERROR - 处理文档 4 失败: 1 validation error for DocumentPreview
metadata
  Input should be a valid dictionary [type=dict_type, input_value=MetaData(), input_type=MetaData]
    For further information visit https://errors.pydantic.dev/2.11/v/dict_type
2025-04-28 13:03:54 - app.routers.documents - ERROR - 处理文档 3 失败: 1 validation error for DocumentPreview
metadata
  Input should be a valid dictionary [type=dict_type, input_value=MetaData(), input_type=MetaData]
    For further information visit https://errors.pydantic.dev/2.11/v/dict_type
2025-04-28 13:03:54 - app.routers.documents - ERROR - 处理文档 2 失败: 1 validation error for DocumentPreview
metadata
  Input should be a valid dictionary [type=dict_type, input_value=MetaData(), input_type=MetaData]
    For further information visit https://errors.pydantic.dev/2.11/v/dict_type
2025-04-28 13:03:54 - app.routers.documents - ERROR - 处理文档 1 失败: 1 validation error for DocumentPreview
metadata
  Input should be a valid dictionary [type=dict_type, input_value=MetaData(), input_type=MetaData]
    For further information visit https://errors.pydantic.dev/2.11/v/dict_type
2025-04-28 13:04:04 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-04-28 13:04:04 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-04-28 13:04:04 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-04-28 13:04:04 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-04-28 13:04:04 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-04-28 13:04:04 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-04-28 13:04:04 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-04-28 13:04:04 - app.services.vector_store - INFO - 集合 knowledge_base 已存在
2025-04-28 13:04:04 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections/knowledge_base "HTTP/1.1 200 OK"
2025-04-28 13:04:04 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-28 13:04:04 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-28 13:04:04 - app.routers.documents - INFO - 接收到文件上传请求: 5088c668-cb41-4fb4-855b-46a3aa0aa44e_快速改善代码质量的编程规范.pdf, 类型: application/pdf
2025-04-28 13:04:04 - app.routers.documents - INFO - 解析元数据: {"name":"5088c668-cb41-4fb4-855b-46a3aa0aa44e_快速改善代码质量的编程规范"}...
2025-04-28 13:04:04 - app.routers.documents - INFO - 开始处理上传的文件
2025-04-28 13:04:04 - app.routers.documents - ERROR - 上传文档失败: DocumentService.process_file() got an unexpected keyword argument 'metadata'
Traceback (most recent call last):
  File "/Users/wangke/notebook-ai/notebook-backend/app/routers/documents.py", line 74, in upload_document
    document = await document_service.process_file(
TypeError: DocumentService.process_file() got an unexpected keyword argument 'metadata'
2025-04-28 13:04:49 - root - INFO - 日志系统初始化完成
2025-04-28 13:04:49 - app.main - INFO - 数据库表创建完成
2025-04-28 13:04:51 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-04-28 13:04:51 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-04-28 13:04:51 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-04-28 13:04:51 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-04-28 13:04:51 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-04-28 13:04:51 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-04-28 13:04:51 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-04-28 13:04:51 - app.services.vector_store - INFO - 集合 knowledge_base 已存在
2025-04-28 13:04:51 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections/knowledge_base "HTTP/1.1 200 OK"
2025-04-28 13:04:52 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-28 13:04:52 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-28 13:04:52 - app.routers.documents - INFO - 接收到文件上传请求: 5088c668-cb41-4fb4-855b-46a3aa0aa44e_快速改善代码质量的编程规范.pdf, 类型: application/pdf
2025-04-28 13:04:52 - app.routers.documents - INFO - 解析元数据: {"name":"5088c668-cb41-4fb4-855b-46a3aa0aa44e_快速改善代码质量的编程规范"}...
2025-04-28 13:04:52 - app.routers.documents - INFO - 开始处理上传的文件
2025-04-28 13:04:52 - app.services.document_service - INFO - 开始处理文件: 5088c668-cb41-4fb4-855b-46a3aa0aa44e_快速改善代码质量的编程规范.pdf, 内容类型: application/pdf
2025-04-28 13:04:52 - app.services.document_service - INFO - 文件大小: 2602666 字节
2025-04-28 13:04:52 - app.services.document_service - INFO - 文件类型识别为: pdf
2025-04-28 13:04:52 - app.services.document_service - INFO - 检测到二进制文件类型: pdf，将进行Base64编码
2025-04-28 13:04:52 - app.services.document_service - INFO - 文件是否包含NUL字符: True
2025-04-28 13:04:52 - app.services.document_service - INFO - Base64编码成功，编码后大小: 3470224 字符
2025-04-28 13:04:52 - app.services.document_service - INFO - 准备创建文档记录
2025-04-28 13:04:52 - app.services.document_service - INFO - 创建文档: 5088c668-cb41-4fb4-855b-46a3aa0aa44e_快速改善代码质量的编程规范.pdf, 类型: pdf, 用户ID: 1
2025-04-28 13:04:52 - app.routers.documents - ERROR - 上传文档失败: 'content' is an invalid keyword argument for Document
Traceback (most recent call last):
  File "/Users/wangke/notebook-ai/notebook-backend/app/routers/documents.py", line 74, in upload_document
    document = await document_service.process_file(
  File "/Users/wangke/notebook-ai/notebook-backend/app/services/document_service.py", line 307, in process_file
    return await self.create_document(
  File "/Users/wangke/notebook-ai/notebook-backend/app/services/document_service.py", line 61, in create_document
    document = Document(
  File "<string>", line 4, in __init__
  File "/Users/wangke/notebook-ai/notebook-backend/venv/lib/python3.10/site-packages/sqlalchemy/orm/state.py", line 566, in _initialize_instance
    with util.safe_reraise():
  File "/Users/wangke/notebook-ai/notebook-backend/venv/lib/python3.10/site-packages/sqlalchemy/util/langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/Users/wangke/notebook-ai/notebook-backend/venv/lib/python3.10/site-packages/sqlalchemy/orm/state.py", line 564, in _initialize_instance
    manager.original_init(*mixed[1:], **kwargs)
  File "/Users/wangke/notebook-ai/notebook-backend/venv/lib/python3.10/site-packages/sqlalchemy/orm/decl_base.py", line 2134, in _declarative_constructor
    raise TypeError(
TypeError: 'content' is an invalid keyword argument for Document
2025-04-28 13:14:11 - root - INFO - 日志系统初始化完成
2025-04-28 13:14:11 - app.main - INFO - 数据库表创建完成
2025-04-28 13:14:31 - root - INFO - 日志系统初始化完成
2025-04-28 13:14:31 - app.main - INFO - 数据库表创建完成
2025-04-28 13:14:52 - root - INFO - 日志系统初始化完成
2025-04-28 13:14:53 - app.main - INFO - 数据库表创建完成
2025-04-28 13:15:02 - root - INFO - 日志系统初始化完成
2025-04-28 13:15:02 - app.main - INFO - 数据库表创建完成
2025-04-28 13:15:13 - root - INFO - 日志系统初始化完成
2025-04-28 13:15:14 - app.main - INFO - 数据库表创建完成
2025-04-28 13:15:29 - root - INFO - 日志系统初始化完成
2025-04-28 13:15:30 - app.main - INFO - 数据库表创建完成
2025-04-28 13:15:42 - root - INFO - 日志系统初始化完成
2025-04-28 13:15:42 - app.main - INFO - 数据库表创建完成
2025-04-28 13:15:52 - root - INFO - 日志系统初始化完成
2025-04-28 13:15:52 - app.main - INFO - 数据库表创建完成
2025-04-28 13:16:12 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-04-28 13:16:12 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-04-28 13:16:12 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-04-28 13:16:12 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-04-28 13:16:12 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-04-28 13:16:12 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-04-28 13:16:12 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-04-28 13:16:12 - app.services.vector_store - INFO - 集合 knowledge_base 已存在
2025-04-28 13:16:12 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections/knowledge_base "HTTP/1.1 200 OK"
2025-04-28 13:16:12 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-28 13:16:12 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-28 13:16:12 - app.routers.documents - INFO - 接收到文件上传请求: 5088c668-cb41-4fb4-855b-46a3aa0aa44e_快速改善代码质量的编程规范.pdf, 类型: application/pdf
2025-04-28 13:16:12 - app.routers.documents - INFO - 解析元数据: {"name":"5088c668-cb41-4fb4-855b-46a3aa0aa44e_快速改善代码质量的编程规范"}...
2025-04-28 13:16:12 - app.routers.documents - INFO - 开始处理上传的文件
2025-04-28 13:16:12 - app.services.document_service - INFO - 开始处理文件: 5088c668-cb41-4fb4-855b-46a3aa0aa44e_快速改善代码质量的编程规范.pdf, 内容类型: application/pdf
2025-04-28 13:16:12 - app.services.document_service - INFO - 文件大小: 2602666 字节
2025-04-28 13:16:12 - app.services.document_service - INFO - 文件类型识别为: pdf
2025-04-28 13:16:12 - app.services.document_service - INFO - 检测到二进制文件类型: pdf，将进行Base64编码
2025-04-28 13:16:12 - app.services.document_service - INFO - 文件是否包含NUL字符: True
2025-04-28 13:16:12 - app.services.document_service - INFO - Base64编码成功，编码后大小: 3470224 字符
2025-04-28 13:16:12 - app.services.document_service - INFO - 准备创建文档记录
2025-04-28 13:16:12 - app.services.document_service - INFO - 创建文档: 5088c668-cb41-4fb4-855b-46a3aa0aa44e_快速改善代码质量的编程规范.pdf, 类型: pdf, 用户ID: 1
2025-04-28 13:16:12 - app.routers.documents - ERROR - 上传文档失败: object NoneType can't be used in 'await' expression
Traceback (most recent call last):
  File "/Users/wangke/notebook-ai/notebook-backend/app/services/document_service.py", line 78, in create_document
    await db.commit()
TypeError: object NoneType can't be used in 'await' expression

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/wangke/notebook-ai/notebook-backend/app/routers/documents.py", line 74, in upload_document
    document = await document_service.process_file(
  File "/Users/wangke/notebook-ai/notebook-backend/app/services/document_service.py", line 304, in process_file
    return await self.create_document(
  File "/Users/wangke/notebook-ai/notebook-backend/app/services/document_service.py", line 83, in create_document
    await db.rollback()
TypeError: object NoneType can't be used in 'await' expression
2025-04-28 13:16:52 - root - INFO - 日志系统初始化完成
2025-04-28 13:16:52 - app.main - INFO - 数据库表创建完成
2025-04-28 13:16:52 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-04-28 13:16:53 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-04-28 13:16:53 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-04-28 13:16:53 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-04-28 13:16:53 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-04-28 13:16:53 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-04-28 13:16:53 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-04-28 13:16:53 - app.services.vector_store - INFO - 集合 knowledge_base 已存在
2025-04-28 13:16:53 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections/knowledge_base "HTTP/1.1 200 OK"
2025-04-28 13:16:53 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-28 13:16:53 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-28 13:16:53 - app.routers.documents - INFO - 接收到文件上传请求: 5088c668-cb41-4fb4-855b-46a3aa0aa44e_快速改善代码质量的编程规范.pdf, 类型: application/pdf
2025-04-28 13:16:53 - app.routers.documents - INFO - 解析元数据: {"name":"5088c668-cb41-4fb4-855b-46a3aa0aa44e_快速改善代码质量的编程规范"}...
2025-04-28 13:16:53 - app.routers.documents - INFO - 开始处理上传的文件
2025-04-28 13:16:53 - app.services.document_service - INFO - 开始处理文件: 5088c668-cb41-4fb4-855b-46a3aa0aa44e_快速改善代码质量的编程规范.pdf, 内容类型: application/pdf
2025-04-28 13:16:53 - app.services.document_service - INFO - 文件大小: 2602666 字节
2025-04-28 13:16:53 - app.services.document_service - INFO - 文件类型识别为: pdf
2025-04-28 13:16:53 - app.services.document_service - INFO - 检测到二进制文件类型: pdf，将进行Base64编码
2025-04-28 13:16:53 - app.services.document_service - INFO - 文件是否包含NUL字符: True
2025-04-28 13:16:53 - app.services.document_service - INFO - Base64编码成功，编码后大小: 3470224 字符
2025-04-28 13:16:53 - app.services.document_service - INFO - 准备创建文档记录
2025-04-28 13:16:53 - app.services.document_service - INFO - 创建文档: 5088c668-cb41-4fb4-855b-46a3aa0aa44e_快速改善代码质量的编程规范.pdf, 类型: pdf, 用户ID: 1
2025-04-28 13:16:53 - app.services.document_service - ERROR - 文档创建失败: object NoneType can't be used in 'await' expression
2025-04-28 13:16:53 - app.routers.documents - ERROR - 上传文档失败: object NoneType can't be used in 'await' expression
Traceback (most recent call last):
  File "/Users/wangke/notebook-ai/notebook-backend/app/routers/documents.py", line 74, in upload_document
    document = await document_service.process_file(
  File "/Users/wangke/notebook-ai/notebook-backend/app/services/document_service.py", line 304, in process_file
    return await self.create_document(
  File "/Users/wangke/notebook-ai/notebook-backend/app/services/document_service.py", line 85, in create_document
    raise e
  File "/Users/wangke/notebook-ai/notebook-backend/app/services/document_service.py", line 78, in create_document
    await db.commit()
TypeError: object NoneType can't be used in 'await' expression
2025-04-28 13:19:13 - root - INFO - 日志系统初始化完成
2025-04-28 13:19:13 - app.main - INFO - 数据库表创建完成
2025-04-28 13:19:42 - root - INFO - 日志系统初始化完成
2025-04-28 13:19:42 - app.main - INFO - 数据库表创建完成
2025-04-28 13:20:10 - root - INFO - 日志系统初始化完成
2025-04-28 13:20:11 - app.main - INFO - 数据库表创建完成
2025-04-28 13:20:42 - root - INFO - 日志系统初始化完成
2025-04-28 13:20:43 - app.main - INFO - 数据库表创建完成
2025-04-28 13:21:10 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-04-28 13:21:10 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-04-28 13:21:10 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-04-28 13:21:10 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-04-28 13:21:10 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-04-28 13:21:10 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-04-28 13:21:10 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-04-28 13:21:10 - app.services.vector_store - INFO - 集合 knowledge_base 已存在
2025-04-28 13:21:10 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections/knowledge_base "HTTP/1.1 200 OK"
2025-04-28 13:21:10 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-28 13:21:10 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-28 13:21:10 - app.routers.documents - INFO - 接收到文件上传请求: 5088c668-cb41-4fb4-855b-46a3aa0aa44e_快速改善代码质量的编程规范.pdf, 类型: application/pdf
2025-04-28 13:21:10 - app.routers.documents - INFO - 解析元数据: {"name":"5088c668-cb41-4fb4-855b-46a3aa0aa44e_快速改善代码质量的编程规范"}...
2025-04-28 13:21:10 - app.routers.documents - INFO - 开始处理上传的文件
2025-04-28 13:21:10 - app.services.document_service - INFO - 开始处理文件: 5088c668-cb41-4fb4-855b-46a3aa0aa44e_快速改善代码质量的编程规范.pdf, 内容类型: application/pdf
2025-04-28 13:21:10 - app.services.document_service - INFO - 文件大小: 2602666 字节
2025-04-28 13:21:10 - app.services.document_service - INFO - 文件类型识别为: pdf
2025-04-28 13:21:10 - app.services.document_service - INFO - 检测到二进制文件类型: pdf，将进行Base64编码
2025-04-28 13:21:10 - app.services.document_service - INFO - 文件包含NUL字符，确认为二进制文件
2025-04-28 13:21:10 - app.services.document_service - INFO - Base64编码完成，编码后大小: 3470234 字节
2025-04-28 13:21:10 - app.services.document_service - INFO - 准备创建文档记录
2025-04-28 13:21:10 - app.routers.documents - ERROR - 上传文档失败: 'coroutine' object has no attribute 'id'
Traceback (most recent call last):
  File "/Users/wangke/notebook-ai/notebook-backend/app/routers/documents.py", line 80, in upload_document
    logger.info(f"文件处理成功，文档ID: {document.id}")
AttributeError: 'coroutine' object has no attribute 'id'
2025-04-28 13:27:10 - root - INFO - 日志系统初始化完成
2025-04-28 13:27:11 - app.main - INFO - 数据库表创建完成
2025-04-28 13:27:21 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-04-28 13:27:22 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-04-28 13:27:22 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-04-28 13:27:22 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-04-28 13:27:22 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-04-28 13:27:22 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-04-28 13:27:22 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-04-28 13:27:22 - app.services.vector_store - INFO - 集合 knowledge_base 已存在
2025-04-28 13:27:22 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections/knowledge_base "HTTP/1.1 200 OK"
2025-04-28 13:27:22 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-28 13:27:22 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-28 13:27:22 - app.routers.documents - INFO - 接收到文件上传请求: 5088c668-cb41-4fb4-855b-46a3aa0aa44e_快速改善代码质量的编程规范.pdf, 类型: application/pdf
2025-04-28 13:27:22 - app.routers.documents - INFO - 解析元数据: {"name":"5088c668-cb41-4fb4-855b-46a3aa0aa44e_快速改善代码质量的编程规范"}...
2025-04-28 13:27:22 - app.routers.documents - INFO - 开始处理上传的文件
2025-04-28 13:27:22 - app.services.document_service - INFO - 开始处理文件: 5088c668-cb41-4fb4-855b-46a3aa0aa44e_快速改善代码质量的编程规范.pdf, 内容类型: application/pdf
2025-04-28 13:27:22 - app.services.document_service - INFO - 文件大小: 2602666 字节
2025-04-28 13:27:22 - app.services.document_service - INFO - 文件类型识别为: pdf
2025-04-28 13:27:22 - app.services.document_service - INFO - 检测到二进制文件类型: pdf，将进行Base64编码
2025-04-28 13:27:22 - app.services.document_service - INFO - 文件包含NUL字符，确认为二进制文件
2025-04-28 13:27:22 - app.services.document_service - INFO - Base64编码完成，编码后大小: 3470234 字节
2025-04-28 13:27:22 - app.services.document_service - INFO - 准备创建文档记录
2025-04-28 13:27:22 - app.services.document_service - INFO - 创建文档: 5088c668-cb41-4fb4-855b-46a3aa0aa44e_快速改善代码质量的编程规范.pdf, 类型: pdf, 用户ID: 1
2025-04-28 13:27:22 - app.services.document_service - INFO - 文档创建成功: ID=7
2025-04-28 13:27:22 - app.routers.documents - INFO - 文件处理成功，文档ID: 7
2025-04-28 13:27:22 - app.routers.documents - ERROR - 上传文档失败: 1 validation error for DocumentResponse
metadata
  Input should be a valid dictionary [type=dict_type, input_value=MetaData(), input_type=MetaData]
    For further information visit https://errors.pydantic.dev/2.11/v/dict_type
Traceback (most recent call last):
  File "/Users/wangke/notebook-ai/notebook-backend/app/routers/documents.py", line 82, in upload_document
    return DocumentResponse.model_validate(document)
  File "/Users/wangke/notebook-ai/notebook-backend/venv/lib/python3.10/site-packages/pydantic/main.py", line 703, in model_validate
    return cls.__pydantic_validator__.validate_python(
pydantic_core._pydantic_core.ValidationError: 1 validation error for DocumentResponse
metadata
  Input should be a valid dictionary [type=dict_type, input_value=MetaData(), input_type=MetaData]
    For further information visit https://errors.pydantic.dev/2.11/v/dict_type
2025-04-28 13:45:34 - root - INFO - 日志系统初始化完成
2025-04-28 13:45:34 - app.main - INFO - 数据库表创建完成
2025-04-28 13:45:44 - root - INFO - 日志系统初始化完成
2025-04-28 13:45:45 - app.main - INFO - 数据库表创建完成
2025-04-28 13:46:00 - root - INFO - 日志系统初始化完成
2025-04-28 13:46:01 - app.main - INFO - 数据库表创建完成
2025-04-28 13:46:11 - root - INFO - 日志系统初始化完成
2025-04-28 13:46:12 - app.main - INFO - 数据库表创建完成
2025-04-28 13:46:25 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-04-28 13:46:25 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-04-28 13:46:25 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-04-28 13:46:25 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-04-28 13:46:25 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-04-28 13:46:25 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-04-28 13:46:25 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-04-28 13:46:25 - app.services.vector_store - INFO - 集合 knowledge_base 已存在
2025-04-28 13:46:25 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections/knowledge_base "HTTP/1.1 200 OK"
2025-04-28 13:46:25 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-28 13:46:25 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-28 13:46:25 - app.routers.documents - INFO - 接收到文件上传请求: 5088c668-cb41-4fb4-855b-46a3aa0aa44e_快速改善代码质量的编程规范.pdf, 类型: application/pdf
2025-04-28 13:46:25 - app.routers.documents - INFO - 解析元数据: {"name":"5088c668-cb41-4fb4-855b-46a3aa0aa44e_快速改善代码质量的编程规范"}...
2025-04-28 13:46:25 - app.routers.documents - INFO - 开始处理上传的文件
2025-04-28 13:46:25 - app.services.document_service - INFO - 开始处理文件: 5088c668-cb41-4fb4-855b-46a3aa0aa44e_快速改善代码质量的编程规范.pdf, 内容类型: application/pdf
2025-04-28 13:46:25 - app.services.document_service - INFO - 文件大小: 2602666 字节
2025-04-28 13:46:25 - app.services.document_service - INFO - 文件类型识别为: pdf
2025-04-28 13:46:25 - app.services.document_service - INFO - 检测到二进制文件类型: pdf，将进行Base64编码
2025-04-28 13:46:25 - app.services.document_service - INFO - 文件包含NUL字符，确认为二进制文件
2025-04-28 13:46:25 - app.services.document_service - INFO - Base64编码完成，编码后大小: 3470234 字节
2025-04-28 13:46:25 - app.services.document_service - INFO - 准备创建文档记录
2025-04-28 13:46:25 - app.services.document_service - INFO - 创建文档: 5088c668-cb41-4fb4-855b-46a3aa0aa44e_快速改善代码质量的编程规范.pdf, 类型: pdf, 用户ID: 1
2025-04-28 13:46:26 - app.services.document_service - INFO - 文档创建成功: ID=8
2025-04-28 13:46:26 - app.routers.documents - INFO - 文件处理成功，文档ID: 8
2025-04-28 13:46:26 - app.routers.documents - ERROR - 上传文档失败: 1 validation error for DocumentResponse
metadata
  Input should be a valid dictionary [type=dict_type, input_value=MetaData(), input_type=MetaData]
    For further information visit https://errors.pydantic.dev/2.11/v/dict_type
Traceback (most recent call last):
  File "/Users/wangke/notebook-ai/notebook-backend/app/routers/documents.py", line 82, in upload_document
    return DocumentResponse.model_validate(document)
  File "/Users/wangke/notebook-ai/notebook-backend/app/models/document.py", line 95, in model_validate
    return super().model_validate(obj, *args, **kwargs)
  File "/Users/wangke/notebook-ai/notebook-backend/venv/lib/python3.10/site-packages/pydantic/main.py", line 703, in model_validate
    return cls.__pydantic_validator__.validate_python(
pydantic_core._pydantic_core.ValidationError: 1 validation error for DocumentResponse
metadata
  Input should be a valid dictionary [type=dict_type, input_value=MetaData(), input_type=MetaData]
    For further information visit https://errors.pydantic.dev/2.11/v/dict_type
2025-04-28 13:56:44 - root - INFO - 日志系统初始化完成
2025-04-28 13:56:45 - app.main - INFO - 数据库表创建完成
2025-04-28 13:56:56 - root - INFO - 日志系统初始化完成
2025-04-28 13:56:57 - app.main - INFO - 数据库表创建完成
2025-04-28 13:57:15 - root - INFO - 日志系统初始化完成
2025-04-28 13:57:16 - app.main - INFO - 数据库表创建完成
2025-04-28 14:00:42 - root - INFO - 日志系统初始化完成
2025-04-28 14:00:42 - app.main - INFO - 数据库表创建完成
2025-04-28 14:01:15 - root - INFO - 日志系统初始化完成
2025-04-28 14:01:15 - app.main - INFO - 数据库表创建完成
2025-04-28 14:01:31 - root - INFO - 日志系统初始化完成
2025-04-28 14:01:31 - app.main - INFO - 数据库表创建完成
2025-04-28 14:18:06 - root - INFO - 日志系统初始化完成
2025-04-28 14:18:06 - app.main - INFO - 数据库表创建完成
2025-04-28 14:18:26 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-04-28 14:18:26 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-04-28 14:18:26 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-04-28 14:18:26 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-04-28 14:18:26 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-04-28 14:18:26 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-04-28 14:18:26 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-04-28 14:18:26 - app.services.vector_store - INFO - 集合 knowledge_base 已存在
2025-04-28 14:18:26 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections/knowledge_base "HTTP/1.1 200 OK"
2025-04-28 14:18:26 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-28 14:18:27 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-28 14:18:27 - app.routers.documents - INFO - 接收到文件上传请求: 5088c668-cb41-4fb4-855b-46a3aa0aa44e_快速改善代码质量的编程规范.pdf, 类型: application/pdf
2025-04-28 14:18:27 - app.routers.documents - INFO - 解析元数据: {"name":"5088c668-cb41-4fb4-855b-46a3aa0aa44e_快速改善代码质量的编程规范"}...
2025-04-28 14:18:27 - app.routers.documents - INFO - 开始处理上传的文件
2025-04-28 14:18:27 - app.services.document_service - INFO - 开始处理文件: 5088c668-cb41-4fb4-855b-46a3aa0aa44e_快速改善代码质量的编程规范.pdf, 内容类型: application/pdf
2025-04-28 14:18:27 - app.services.document_service - INFO - 文件大小: 2602666 字节
2025-04-28 14:18:27 - app.services.document_service - INFO - 文件类型识别为: pdf
2025-04-28 14:18:27 - app.services.document_service - INFO - 检测到二进制文件类型: pdf，将进行Base64编码
2025-04-28 14:18:27 - app.services.document_service - INFO - 文件包含NUL字符，确认为二进制文件
2025-04-28 14:18:27 - app.services.document_service - INFO - Base64编码完成，编码后大小: 3470234 字节
2025-04-28 14:18:27 - app.services.document_service - INFO - 准备创建文档记录
2025-04-28 14:18:27 - app.services.document_service - INFO - 创建文档: 5088c668-cb41-4fb4-855b-46a3aa0aa44e_快速改善代码质量的编程规范.pdf, 类型: pdf, 用户ID: 1
2025-04-28 14:18:27 - app.services.document_service - INFO - 文档创建成功: ID=9
2025-04-28 14:18:27 - app.routers.documents - INFO - 文件处理成功，文档ID: 9
2025-04-28 14:18:27 - app.routers.documents - ERROR - 上传文档失败: 1 validation error for DocumentResponse
metadata
  Input should be a valid dictionary [type=dict_type, input_value=MetaData(), input_type=MetaData]
    For further information visit https://errors.pydantic.dev/2.11/v/dict_type
Traceback (most recent call last):
  File "/Users/wangke/notebook-ai/notebook-backend/app/routers/documents.py", line 82, in upload_document
    return DocumentResponse.model_validate(document)
  File "/Users/wangke/notebook-ai/notebook-backend/app/models/document.py", line 95, in model_validate
    return super().model_validate(obj, *args, **kwargs)
  File "/Users/wangke/notebook-ai/notebook-backend/venv/lib/python3.10/site-packages/pydantic/main.py", line 703, in model_validate
    return cls.__pydantic_validator__.validate_python(
pydantic_core._pydantic_core.ValidationError: 1 validation error for DocumentResponse
metadata
  Input should be a valid dictionary [type=dict_type, input_value=MetaData(), input_type=MetaData]
    For further information visit https://errors.pydantic.dev/2.11/v/dict_type
2025-04-28 14:20:33 - root - INFO - 日志系统初始化完成
2025-04-28 14:20:33 - app.main - INFO - 数据库表创建完成
2025-04-28 14:21:26 - root - INFO - 日志系统初始化完成
2025-04-28 14:21:26 - app.main - INFO - 数据库表创建完成
2025-04-28 14:21:33 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-04-28 14:21:34 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-04-28 14:21:34 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-04-28 14:21:34 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-04-28 14:21:34 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-04-28 14:21:34 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-04-28 14:21:34 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-04-28 14:21:34 - app.services.vector_store - INFO - 集合 knowledge_base 已存在
2025-04-28 14:21:34 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections/knowledge_base "HTTP/1.1 200 OK"
2025-04-28 14:21:34 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-28 14:21:34 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-28 14:21:34 - app.routers.documents - INFO - 接收到文件上传请求: 5088c668-cb41-4fb4-855b-46a3aa0aa44e_快速改善代码质量的编程规范.pdf, 类型: application/pdf
2025-04-28 14:21:34 - app.routers.documents - INFO - 解析元数据: {"name":"5088c668-cb41-4fb4-855b-46a3aa0aa44e_快速改善代码质量的编程规范"}...
2025-04-28 14:21:34 - app.routers.documents - INFO - 开始处理上传的文件
2025-04-28 14:21:34 - app.services.document_service - INFO - 开始处理文件: 5088c668-cb41-4fb4-855b-46a3aa0aa44e_快速改善代码质量的编程规范.pdf, 内容类型: application/pdf
2025-04-28 14:21:34 - app.services.document_service - INFO - 文件大小: 2602666 字节
2025-04-28 14:21:34 - app.services.document_service - INFO - 文件类型识别为: pdf
2025-04-28 14:21:34 - app.services.document_service - INFO - 检测到二进制文件类型: pdf，将进行Base64编码
2025-04-28 14:21:34 - app.services.document_service - INFO - 文件包含NUL字符，确认为二进制文件
2025-04-28 14:21:34 - app.services.document_service - INFO - Base64编码完成，编码后大小: 3470234 字节
2025-04-28 14:21:34 - app.services.document_service - INFO - 准备创建文档记录
2025-04-28 14:21:34 - app.services.document_service - INFO - 创建文档: 5088c668-cb41-4fb4-855b-46a3aa0aa44e_快速改善代码质量的编程规范.pdf, 类型: pdf, 用户ID: 1
2025-04-28 14:21:34 - app.services.document_service - INFO - 文档创建成功: ID=10
2025-04-28 14:21:34 - app.routers.documents - INFO - 文件处理成功，文档ID: 10
2025-04-28 14:21:34 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-04-28 14:21:34 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-04-28 14:21:34 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-04-28 14:21:34 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-04-28 14:21:34 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-04-28 14:21:34 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-04-28 14:21:34 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-04-28 14:21:34 - app.services.vector_store - INFO - 集合 knowledge_base 已存在
2025-04-28 14:21:34 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections/knowledge_base "HTTP/1.1 200 OK"
2025-04-28 14:21:35 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-28 14:21:35 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-28 14:21:43 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-04-28 14:21:43 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-04-28 14:21:43 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-04-28 14:21:43 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-04-28 14:21:43 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-04-28 14:21:43 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-04-28 14:21:43 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-04-28 14:21:43 - app.services.vector_store - INFO - 集合 knowledge_base 已存在
2025-04-28 14:21:43 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections/knowledge_base "HTTP/1.1 200 OK"
2025-04-28 14:21:43 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-28 14:21:43 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-28 14:21:47 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-04-28 14:21:47 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-04-28 14:21:47 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-04-28 14:21:47 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-04-28 14:21:47 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-04-28 14:21:47 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-04-28 14:21:47 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-04-28 14:21:47 - app.services.vector_store - INFO - 集合 knowledge_base 已存在
2025-04-28 14:21:47 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections/knowledge_base "HTTP/1.1 200 OK"
2025-04-28 14:21:47 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-28 14:21:47 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-28 14:22:06 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-28 14:22:06 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-28 14:22:07 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-28 14:22:07 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-28 14:22:07 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-04-28 14:22:07 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-04-28 14:22:07 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-04-28 14:22:07 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-04-28 14:22:07 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-04-28 14:22:07 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-04-28 14:22:07 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-04-28 14:22:07 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-04-28 14:22:07 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-04-28 14:22:07 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-04-28 14:22:07 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-04-28 14:22:07 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-04-28 14:22:07 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-04-28 14:22:07 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-04-28 14:22:07 - app.services.vector_store - INFO - 集合 knowledge_base 已存在
2025-04-28 14:22:07 - app.services.vector_store - INFO - 集合 knowledge_base 已存在
2025-04-28 14:22:07 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections/knowledge_base "HTTP/1.1 200 OK"
2025-04-28 14:22:07 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections/knowledge_base "HTTP/1.1 200 OK"
2025-04-28 14:22:07 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-28 14:22:07 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-28 14:22:07 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-28 14:22:07 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-28 14:22:07 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-28 14:22:07 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-28 14:22:09 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-04-28 14:22:09 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-04-28 14:22:09 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-04-28 14:22:09 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-04-28 14:22:09 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-04-28 14:22:09 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-04-28 14:22:09 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-04-28 14:22:09 - app.services.vector_store - INFO - 集合 knowledge_base 已存在
2025-04-28 14:22:09 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections/knowledge_base "HTTP/1.1 200 OK"
2025-04-28 14:22:09 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-28 14:22:09 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-28 14:22:24 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-28 14:22:24 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-28 14:22:24 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-28 14:22:24 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-28 14:22:24 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-04-28 14:22:24 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-04-28 14:22:24 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-04-28 14:22:24 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-04-28 14:22:24 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-04-28 14:22:24 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-04-28 14:22:24 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-04-28 14:22:24 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-04-28 14:22:24 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-04-28 14:22:24 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-04-28 14:22:24 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-04-28 14:22:24 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-04-28 14:22:24 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-04-28 14:22:24 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-04-28 14:22:24 - app.services.vector_store - INFO - 集合 knowledge_base 已存在
2025-04-28 14:22:24 - app.services.vector_store - INFO - 集合 knowledge_base 已存在
2025-04-28 14:22:24 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections/knowledge_base "HTTP/1.1 200 OK"
2025-04-28 14:22:24 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections/knowledge_base "HTTP/1.1 200 OK"
2025-04-28 14:22:24 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-28 14:22:24 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-28 14:22:24 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-28 14:22:25 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-28 14:22:25 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-28 14:22:25 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-28 18:44:09 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-28 18:44:09 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-28 18:44:09 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-28 18:44:09 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-28 18:44:09 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-04-28 18:44:09 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-04-28 18:44:09 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-04-28 18:44:09 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-04-28 18:44:09 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-04-28 18:44:09 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-04-28 18:44:09 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-04-28 18:44:09 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-04-28 18:44:09 - app.services.vector_store - INFO - 集合 knowledge_base 已存在
2025-04-28 18:44:09 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections/knowledge_base "HTTP/1.1 200 OK"
2025-04-28 18:44:09 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-04-28 18:44:09 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-04-28 18:44:09 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-04-28 18:44:09 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-04-28 18:44:09 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-04-28 18:44:10 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-04-28 18:44:10 - app.services.vector_store - INFO - 集合 knowledge_base 已存在
2025-04-28 18:44:10 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-28 18:44:10 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-28 18:44:10 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections/knowledge_base "HTTP/1.1 200 OK"
2025-04-28 18:44:10 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-28 18:44:10 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-28 18:44:10 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-28 18:44:10 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-29 12:31:56 - root - INFO - 日志系统初始化完成
2025-04-29 12:31:56 - app.main - INFO - 数据库表创建完成
2025-04-29 12:45:25 - root - INFO - 日志系统初始化完成
2025-04-29 12:45:25 - app.main - INFO - 数据库表创建完成
2025-04-29 12:45:42 - root - INFO - 日志系统初始化完成
2025-04-29 12:45:42 - app.main - INFO - 数据库表创建完成
2025-04-29 12:46:32 - root - INFO - 日志系统初始化完成
2025-04-29 12:46:33 - app.main - INFO - 数据库表创建完成
2025-04-29 12:46:48 - root - INFO - 日志系统初始化完成
2025-04-29 12:46:48 - app.main - INFO - 数据库表创建完成
2025-04-29 12:47:42 - root - INFO - 日志系统初始化完成
2025-04-29 12:47:43 - app.main - INFO - 数据库表创建完成
2025-04-29 12:48:24 - root - INFO - 日志系统初始化完成
2025-04-29 12:48:24 - app.main - INFO - 数据库表创建完成
2025-04-29 12:55:39 - app.auth.dependencies - WARNING - 令牌解码失败: Signature has expired.
2025-04-29 13:32:05 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-04-29 13:32:05 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-29 13:32:05 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-29 13:32:05 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-04-29 13:32:05 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-04-29 13:32:05 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-04-29 13:32:05 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-04-29 13:32:05 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-04-29 13:32:05 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-04-29 13:32:05 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-04-29 13:32:05 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-04-29 13:32:05 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-04-29 13:32:05 - app.services.vector_store - INFO - 集合 knowledge_base 已存在
2025-04-29 13:32:05 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-04-29 13:32:05 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-04-29 13:32:05 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-04-29 13:32:05 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections/knowledge_base "HTTP/1.1 200 OK"
2025-04-29 13:32:05 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-04-29 13:32:05 - app.services.vector_store - INFO - 集合 knowledge_base 已存在
2025-04-29 13:32:05 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections/knowledge_base "HTTP/1.1 200 OK"
2025-04-29 13:32:05 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-29 13:32:05 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-29 13:32:06 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-29 13:32:06 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-29 13:32:06 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-29 13:32:06 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-29 13:32:20 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-04-29 13:32:20 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-04-29 13:32:20 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-04-29 13:32:20 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-04-29 13:32:20 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-04-29 13:32:20 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-04-29 13:32:20 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-04-29 13:32:20 - app.services.vector_store - INFO - 集合 knowledge_base 已存在
2025-04-29 13:32:20 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections/knowledge_base "HTTP/1.1 200 OK"
2025-04-29 13:32:20 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-29 13:32:20 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-29 13:32:20 - app.routers.documents - INFO - 接收到文件上传请求: 王轲2020年简历 .pdf, 类型: application/pdf
2025-04-29 13:32:20 - app.routers.documents - INFO - 解析元数据: {"name":"王轲2020年简历 "}...
2025-04-29 13:32:20 - app.routers.documents - INFO - 开始处理上传的文件
2025-04-29 13:32:20 - app.services.document_service - INFO - 开始处理文件: 王轲2020年简历 .pdf, 内容类型: application/pdf
2025-04-29 13:32:20 - app.services.document_service - INFO - 文件大小: 198585 字节
2025-04-29 13:32:21 - app.services.document_service - INFO - 文件类型识别为: pdf
2025-04-29 13:32:21 - app.services.document_service - INFO - 检测到二进制文件类型: pdf，将进行Base64编码
2025-04-29 13:32:21 - app.services.document_service - INFO - 文件包含NUL字符，确认为二进制文件
2025-04-29 13:32:21 - app.services.document_service - INFO - Base64编码完成，编码后大小: 264790 字节
2025-04-29 13:32:21 - app.services.document_service - INFO - 准备创建文档记录
2025-04-29 13:32:21 - app.services.document_service - INFO - 创建文档: 王轲2020年简历 .pdf, 类型: pdf, 用户ID: 1
2025-04-29 13:32:21 - app.services.document_service - INFO - 文档创建成功: ID=11
2025-04-29 13:32:21 - app.routers.documents - INFO - 文件处理成功，文档ID: 11
2025-04-29 13:32:21 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-04-29 13:32:21 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-04-29 13:32:21 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-04-29 13:32:21 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-04-29 13:32:21 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-04-29 13:32:21 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-04-29 13:32:21 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-04-29 13:32:21 - app.services.vector_store - INFO - 集合 knowledge_base 已存在
2025-04-29 13:32:21 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections/knowledge_base "HTTP/1.1 200 OK"
2025-04-29 13:32:21 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-29 13:32:21 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-29 13:32:28 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-04-29 13:32:28 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-04-29 13:32:28 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-04-29 13:32:28 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-04-29 13:32:28 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-04-29 13:32:28 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-04-29 13:32:28 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-04-29 13:32:28 - app.services.vector_store - INFO - 集合 knowledge_base 已存在
2025-04-29 13:32:28 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections/knowledge_base "HTTP/1.1 200 OK"
2025-04-29 13:32:28 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-29 13:32:28 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-29 13:33:04 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-29 13:33:04 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-29 13:33:04 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-29 13:33:04 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-29 13:33:04 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-04-29 13:33:04 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-04-29 13:33:04 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-04-29 13:33:04 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-04-29 13:33:04 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-04-29 13:33:04 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-04-29 13:33:04 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-04-29 13:33:04 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-04-29 13:33:04 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-04-29 13:33:04 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-04-29 13:33:04 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-04-29 13:33:04 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-04-29 13:33:04 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-04-29 13:33:04 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-04-29 13:33:04 - app.services.vector_store - INFO - 集合 knowledge_base 已存在
2025-04-29 13:33:04 - app.services.vector_store - INFO - 集合 knowledge_base 已存在
2025-04-29 13:33:04 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-29 13:33:04 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections/knowledge_base "HTTP/1.1 200 OK"
2025-04-29 13:33:04 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-29 13:33:04 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections/knowledge_base "HTTP/1.1 200 OK"
2025-04-29 13:33:04 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-29 13:33:04 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-29 13:33:05 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-29 13:33:05 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-29 13:33:09 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-29 13:33:09 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-29 13:33:09 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-29 13:33:09 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-29 13:33:17 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-29 13:33:17 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-29 13:33:17 - app.routers.agents - INFO - 收到流式查询请求: 用户=wangigor, 会话ID=10
2025-04-29 13:33:17 - app.routers.agents - INFO - 开始处理流式响应: 会话ID=10, 查询=流式输出测试。...
2025-04-29 13:33:18 - app.routers.agents - INFO - 已保存用户消息到会话 10
2025-04-29 13:33:18 - app.routers.agents - INFO - 启动Agent流式响应 for session: 10
2025-04-29 13:33:18 - app.services.vector_store - INFO - 执行相似度搜索: 查询='流式输出测试。...', k=5
2025-04-29 13:33:18 - httpx - INFO - HTTP Request: POST http://wangigor.ddns.net:30063/collections/knowledge_base/points/query "HTTP/1.1 200 OK"
2025-04-29 13:33:18 - app.services.vector_store - INFO - 相似度搜索找到 4 个结果
2025-04-29 13:33:20 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-04-29 13:33:22 - app.utils.content_manager - WARNING - 生成的响应中没有回答块，添加默认回答块
2025-04-29 13:33:22 - app.routers.agents - INFO - 内容比较 - 格式化内容长度: 465, 累积内容长度: 631
2025-04-29 13:33:22 - app.routers.agents - INFO - 已保存原始累积内容到会话 10, 长度: 631
2025-04-29 13:33:22 - app.routers.agents - INFO - 流式响应完成 for session: 10
2025-04-29 13:34:14 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-29 13:34:14 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-29 13:34:14 - app.routers.agents - INFO - 收到流式查询请求: 用户=wangigor, 会话ID=10
2025-04-29 13:34:14 - app.routers.agents - INFO - 开始处理流式响应: 会话ID=10, 查询=我有哪些文档...
2025-04-29 13:34:14 - app.routers.agents - INFO - 已保存用户消息到会话 10
2025-04-29 13:34:14 - app.routers.agents - INFO - 启动Agent流式响应 for session: 10
2025-04-29 13:34:14 - app.services.vector_store - INFO - 执行相似度搜索: 查询='我有哪些文档...', k=5
2025-04-29 13:34:14 - httpx - INFO - HTTP Request: POST http://wangigor.ddns.net:30063/collections/knowledge_base/points/query "HTTP/1.1 200 OK"
2025-04-29 13:34:14 - app.services.vector_store - INFO - 相似度搜索找到 4 个结果
2025-04-29 13:34:16 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-04-29 13:34:23 - app.utils.content_manager - WARNING - 生成的响应中没有回答块，添加默认回答块
2025-04-29 13:34:23 - app.routers.agents - INFO - 内容比较 - 格式化内容长度: 465, 累积内容长度: 1287
2025-04-29 13:34:23 - app.routers.agents - INFO - 已保存原始累积内容到会话 10, 长度: 1287
2025-04-29 13:34:23 - app.routers.agents - INFO - 流式响应完成 for session: 10
2025-04-29 13:34:47 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-29 13:34:47 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-29 13:34:47 - app.routers.agents - INFO - 收到流式查询请求: 用户=wangigor, 会话ID=10
2025-04-29 13:34:47 - app.routers.agents - INFO - 开始处理流式响应: 会话ID=10, 查询=5088c668-cb41-4fb4-855b-46a3aa...
2025-04-29 13:34:48 - app.routers.agents - INFO - 已保存用户消息到会话 10
2025-04-29 13:34:48 - app.routers.agents - INFO - 启动Agent流式响应 for session: 10
2025-04-29 13:34:48 - app.services.vector_store - INFO - 执行相似度搜索: 查询='5088c668-cb41-4fb4-855b-46a3aa...', k=5
2025-04-29 13:34:48 - httpx - INFO - HTTP Request: POST http://wangigor.ddns.net:30063/collections/knowledge_base/points/query "HTTP/1.1 200 OK"
2025-04-29 13:34:48 - app.services.vector_store - INFO - 相似度搜索找到 4 个结果
2025-04-29 13:34:50 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-04-29 13:34:53 - app.utils.content_manager - WARNING - 生成的响应中没有回答块，添加默认回答块
2025-04-29 13:34:53 - app.routers.agents - INFO - 内容比较 - 格式化内容长度: 465, 累积内容长度: 748
2025-04-29 13:34:53 - app.routers.agents - INFO - 已保存原始累积内容到会话 10, 长度: 748
2025-04-29 13:34:53 - app.routers.agents - INFO - 流式响应完成 for session: 10
2025-04-29 13:35:26 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-04-29 13:35:26 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-04-29 13:35:26 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-04-29 13:35:26 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-04-29 13:35:26 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-04-29 13:35:26 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-04-29 13:35:26 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-04-29 13:35:26 - app.services.vector_store - INFO - 集合 knowledge_base 已存在
2025-04-29 13:35:26 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections/knowledge_base "HTTP/1.1 200 OK"
2025-04-29 13:35:26 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-29 13:35:26 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-29 13:35:35 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-29 13:35:35 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-29 13:35:35 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-29 13:35:35 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-29 13:35:35 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-04-29 13:35:35 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-04-29 13:35:36 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-04-29 13:35:36 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-04-29 13:35:36 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-04-29 13:35:36 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-04-29 13:35:36 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-04-29 13:35:36 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-04-29 13:35:36 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-04-29 13:35:36 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-04-29 13:35:36 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-04-29 13:35:36 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-04-29 13:35:36 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-04-29 13:35:36 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-04-29 13:35:36 - app.services.vector_store - INFO - 集合 knowledge_base 已存在
2025-04-29 13:35:36 - app.services.vector_store - INFO - 集合 knowledge_base 已存在
2025-04-29 13:35:36 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-29 13:35:36 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections/knowledge_base "HTTP/1.1 200 OK"
2025-04-29 13:35:36 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections/knowledge_base "HTTP/1.1 200 OK"
2025-04-29 13:35:36 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-29 13:35:36 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-29 13:35:36 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-29 13:35:36 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-29 13:35:36 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-29 13:40:15 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-04-29 13:40:15 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-04-29 13:40:15 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-04-29 13:40:15 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-04-29 13:40:15 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-04-29 13:40:15 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-04-29 13:40:15 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-04-29 13:40:15 - app.services.vector_store - INFO - 集合 knowledge_base 已存在
2025-04-29 13:40:15 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections/knowledge_base "HTTP/1.1 200 OK"
2025-04-29 13:40:21 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-29 13:40:21 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-29 13:40:40 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-29 13:40:40 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-29 13:40:41 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-29 13:40:41 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-29 13:40:41 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-04-29 13:40:41 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-04-29 13:40:41 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-04-29 13:40:41 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-04-29 13:40:41 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-04-29 13:40:41 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-04-29 13:40:41 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-04-29 13:40:41 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-04-29 13:40:41 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-04-29 13:40:41 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-04-29 13:40:41 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-04-29 13:40:41 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-04-29 13:40:41 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-04-29 13:40:41 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-04-29 13:40:41 - app.services.vector_store - INFO - 集合 knowledge_base 已存在
2025-04-29 13:40:41 - app.services.vector_store - INFO - 集合 knowledge_base 已存在
2025-04-29 13:40:41 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections/knowledge_base "HTTP/1.1 200 OK"
2025-04-29 13:40:41 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections/knowledge_base "HTTP/1.1 200 OK"
2025-04-29 13:40:41 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-29 13:40:41 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-29 13:40:41 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-29 13:40:41 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-29 13:40:41 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-29 13:40:41 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-29 13:40:50 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-29 13:40:50 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-29 13:40:50 - app.routers.agents - INFO - 收到流式查询请求: 用户=wangigor, 会话ID=10
2025-04-29 13:40:50 - app.routers.agents - INFO - 开始处理流式响应: 会话ID=10, 查询=王轲有哪些工作技能...
2025-04-29 13:40:50 - app.routers.agents - INFO - 已保存用户消息到会话 10
2025-04-29 13:40:50 - app.routers.agents - INFO - 启动Agent流式响应 for session: 10
2025-04-29 13:40:50 - app.services.vector_store - INFO - 执行相似度搜索: 查询='王轲有哪些工作技能...', k=5
2025-04-29 13:40:50 - httpx - INFO - HTTP Request: POST http://wangigor.ddns.net:30063/collections/knowledge_base/points/query "HTTP/1.1 200 OK"
2025-04-29 13:40:50 - app.services.vector_store - INFO - 相似度搜索找到 4 个结果
2025-04-29 13:40:55 - openai._base_client - INFO - Retrying request to /chat/completions in 0.418185 seconds
2025-04-29 13:41:00 - openai._base_client - INFO - Retrying request to /chat/completions in 0.887650 seconds
2025-04-29 13:41:06 - app.utils.content_manager - WARNING - 生成的响应中没有回答块，添加默认回答块
2025-04-29 13:41:06 - app.routers.agents - INFO - 内容比较 - 格式化内容长度: 493, 累积内容长度: 465
2025-04-29 13:41:06 - app.routers.agents - INFO - 已保存原始累积内容到会话 10, 长度: 465
2025-04-29 13:41:06 - app.routers.agents - INFO - 流式响应完成 for session: 10
2025-04-29 13:41:15 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-29 13:41:15 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-29 13:41:15 - app.routers.agents - INFO - 收到流式查询请求: 用户=wangigor, 会话ID=10
2025-04-29 13:41:15 - app.routers.agents - INFO - 开始处理流式响应: 会话ID=10, 查询=王轲有哪些工作技能
...
2025-04-29 13:41:15 - app.routers.agents - INFO - 已保存用户消息到会话 10
2025-04-29 13:41:15 - app.routers.agents - INFO - 启动Agent流式响应 for session: 10
2025-04-29 13:41:15 - app.services.vector_store - INFO - 执行相似度搜索: 查询='王轲有哪些工作技能
...', k=5
2025-04-29 13:41:16 - httpx - INFO - HTTP Request: POST http://wangigor.ddns.net:30063/collections/knowledge_base/points/query "HTTP/1.1 200 OK"
2025-04-29 13:41:16 - app.services.vector_store - INFO - 相似度搜索找到 4 个结果
2025-04-29 13:41:17 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-04-29 13:41:19 - app.utils.content_manager - WARNING - 生成的响应中没有回答块，添加默认回答块
2025-04-29 13:41:19 - app.routers.agents - INFO - 内容比较 - 格式化内容长度: 465, 累积内容长度: 637
2025-04-29 13:41:19 - app.routers.agents - INFO - 已保存原始累积内容到会话 10, 长度: 637
2025-04-29 13:41:19 - app.routers.agents - INFO - 流式响应完成 for session: 10
2025-04-29 13:44:02 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-04-29 13:44:02 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-04-29 13:44:02 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-04-29 13:44:02 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-04-29 13:44:02 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-04-29 13:44:02 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-04-29 13:44:02 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-04-29 13:44:02 - app.services.vector_store - INFO - 集合 knowledge_base 已存在
2025-04-29 13:44:02 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections/knowledge_base "HTTP/1.1 200 OK"
2025-04-29 13:44:02 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-29 13:44:02 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-29 13:44:02 - app.routers.documents - INFO - 接收到文件上传请求: 附件2：中移在线4A管理平台与应用系统接入手册V1.7(4).docx, 类型: application/vnd.openxmlformats-officedocument.wordprocessingml.document
2025-04-29 13:44:02 - app.routers.documents - INFO - 解析元数据: {"name":"附件2：中移在线4A管理平台与应用系统接入手册V1.7(4)"}...
2025-04-29 13:44:02 - app.routers.documents - INFO - 开始处理上传的文件
2025-04-29 13:44:02 - app.services.document_service - INFO - 开始处理文件: 附件2：中移在线4A管理平台与应用系统接入手册V1.7(4).docx, 内容类型: application/vnd.openxmlformats-officedocument.wordprocessingml.document
2025-04-29 13:44:02 - app.services.document_service - INFO - 文件大小: 6517274 字节
2025-04-29 13:44:03 - app.services.document_service - INFO - 文件类型识别为: docx
2025-04-29 13:44:03 - app.services.document_service - INFO - 检测到二进制文件类型: docx，将进行Base64编码
2025-04-29 13:44:03 - app.services.document_service - INFO - 文件包含NUL字符，确认为二进制文件
2025-04-29 13:44:03 - app.services.document_service - INFO - Base64编码完成，编码后大小: 8689710 字节
2025-04-29 13:44:03 - app.services.document_service - INFO - 准备创建文档记录
2025-04-29 13:44:03 - app.services.document_service - INFO - 创建文档: 附件2：中移在线4A管理平台与应用系统接入手册V1.7(4).docx, 类型: docx, 用户ID: 1
2025-04-29 13:44:03 - app.services.document_service - INFO - 文档创建成功: ID=12
2025-04-29 13:44:03 - app.routers.documents - INFO - 文件处理成功，文档ID: 12
2025-04-29 13:44:03 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-04-29 13:44:03 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-04-29 13:44:03 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-04-29 13:44:03 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-04-29 13:44:03 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-04-29 13:44:03 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-04-29 13:44:03 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-04-29 13:44:03 - app.services.vector_store - INFO - 集合 knowledge_base 已存在
2025-04-29 13:44:03 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections/knowledge_base "HTTP/1.1 200 OK"
2025-04-29 13:44:03 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-29 13:44:03 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-29 23:26:04 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-29 23:26:04 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-29 23:26:04 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-29 23:26:04 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-04-29 23:26:04 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-04-29 23:26:04 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-29 23:26:04 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-04-29 23:26:04 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-04-29 23:26:04 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-04-29 23:26:04 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-04-29 23:26:04 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-04-29 23:26:04 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-04-29 23:26:04 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-04-29 23:26:04 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-04-29 23:26:04 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-04-29 23:26:04 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-04-29 23:26:04 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-04-29 23:26:04 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-04-29 23:26:04 - app.services.vector_store - INFO - 集合 knowledge_base 已存在
2025-04-29 23:26:04 - app.services.vector_store - INFO - 集合 knowledge_base 已存在
2025-04-29 23:26:04 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections/knowledge_base "HTTP/1.1 200 OK"
2025-04-29 23:26:04 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections/knowledge_base "HTTP/1.1 200 OK"
2025-04-29 23:26:05 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-29 23:26:05 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-29 23:26:05 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-29 23:26:05 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-29 23:26:05 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-04-29 23:26:05 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-04-30 09:44:03 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-05 14:46:26 - root - INFO - 日志系统初始化完成
2025-05-05 14:46:27 - app.main - INFO - 数据库表创建完成
2025-05-05 14:47:35 - root - INFO - 日志系统初始化完成
2025-05-05 14:47:36 - app.main - INFO - 数据库表创建完成
2025-05-05 14:48:05 - root - INFO - 日志系统初始化完成
2025-05-05 14:48:06 - app.main - INFO - 数据库表创建完成
2025-05-05 14:48:40 - root - INFO - 日志系统初始化完成
2025-05-05 14:48:41 - app.main - INFO - 数据库表创建完成
2025-05-05 14:49:06 - root - INFO - 日志系统初始化完成
2025-05-05 14:49:06 - app.main - INFO - 数据库表创建完成
2025-05-05 14:49:35 - root - INFO - 日志系统初始化完成
2025-05-05 14:49:36 - app.main - INFO - 数据库表创建完成
2025-05-05 14:49:47 - root - INFO - 日志系统初始化完成
2025-05-05 14:49:47 - app.main - INFO - 数据库表创建完成
2025-05-05 14:50:07 - root - INFO - 日志系统初始化完成
2025-05-05 14:50:08 - app.main - INFO - 数据库表创建完成
2025-05-05 14:50:26 - root - INFO - 日志系统初始化完成
2025-05-05 14:50:27 - app.main - INFO - 数据库表创建完成
2025-05-05 14:50:46 - root - INFO - 日志系统初始化完成
2025-05-05 14:50:46 - app.main - INFO - 数据库表创建完成
2025-05-05 14:54:45 - root - INFO - 日志系统初始化完成
2025-05-05 14:54:46 - app.main - INFO - 数据库表创建完成
2025-05-05 14:55:00 - root - INFO - 日志系统初始化完成
2025-05-05 14:55:01 - app.main - INFO - 数据库表创建完成
2025-05-05 14:55:19 - root - INFO - 日志系统初始化完成
2025-05-05 14:55:20 - app.main - INFO - 数据库表创建完成
2025-05-05 14:55:40 - root - INFO - 日志系统初始化完成
2025-05-05 14:55:41 - app.main - INFO - 数据库表创建完成
2025-05-05 14:55:54 - root - INFO - 日志系统初始化完成
2025-05-05 14:55:57 - app.main - INFO - 数据库表创建完成
2025-05-05 14:56:20 - root - INFO - 日志系统初始化完成
2025-05-05 14:56:21 - app.main - INFO - 数据库表创建完成
2025-05-05 14:56:36 - root - INFO - 日志系统初始化完成
2025-05-05 14:56:36 - app.main - INFO - 数据库表创建完成
2025-05-05 14:56:46 - root - INFO - 日志系统初始化完成
2025-05-05 14:56:47 - app.main - INFO - 数据库表创建完成
2025-05-05 14:57:17 - root - INFO - 日志系统初始化完成
2025-05-05 14:57:24 - app.main - INFO - 数据库表创建完成
2025-05-05 14:57:31 - root - INFO - 日志系统初始化完成
2025-05-05 14:57:33 - app.main - INFO - 数据库表创建完成
2025-05-05 14:57:44 - root - INFO - 日志系统初始化完成
2025-05-05 14:57:45 - app.main - INFO - 数据库表创建完成
2025-05-05 14:58:06 - root - INFO - 日志系统初始化完成
2025-05-05 14:58:07 - app.main - INFO - 数据库表创建完成
2025-05-05 14:58:24 - root - INFO - 日志系统初始化完成
2025-05-05 14:58:24 - app.main - INFO - 数据库表创建完成
2025-05-05 15:00:28 - root - INFO - 日志系统初始化完成
2025-05-05 15:00:29 - app.main - INFO - 数据库表创建完成
2025-05-05 15:00:43 - root - INFO - 日志系统初始化完成
2025-05-05 15:00:44 - app.main - INFO - 数据库表创建完成
2025-05-05 15:00:59 - root - INFO - 日志系统初始化完成
2025-05-05 15:01:01 - app.main - INFO - 数据库表创建完成
2025-05-05 15:01:18 - root - INFO - 日志系统初始化完成
2025-05-05 15:01:19 - app.main - INFO - 数据库表创建完成
2025-05-05 15:01:27 - root - INFO - 日志系统初始化完成
2025-05-05 15:01:28 - app.main - INFO - 数据库表创建完成
2025-05-05 15:01:46 - root - INFO - 日志系统初始化完成
2025-05-05 15:01:48 - app.main - INFO - 数据库表创建完成
2025-05-05 15:01:57 - root - INFO - 日志系统初始化完成
2025-05-05 15:01:59 - app.main - INFO - 数据库表创建完成
2025-05-05 15:02:09 - root - INFO - 日志系统初始化完成
2025-05-05 15:02:10 - app.main - INFO - 数据库表创建完成
2025-05-05 15:02:21 - root - INFO - 日志系统初始化完成
2025-05-05 15:02:22 - app.main - INFO - 数据库表创建完成
2025-05-05 15:02:46 - root - INFO - 日志系统初始化完成
2025-05-05 15:02:47 - app.main - INFO - 数据库表创建完成
2025-05-05 15:04:05 - root - INFO - 日志系统初始化完成
2025-05-05 15:04:08 - app.main - INFO - 数据库表创建完成
2025-05-05 15:05:17 - root - INFO - 日志系统初始化完成
2025-05-05 15:05:18 - app.main - INFO - 数据库表创建完成
2025-05-05 15:05:46 - root - INFO - 日志系统初始化完成
2025-05-05 15:05:47 - app.main - INFO - 数据库表创建完成
2025-05-05 15:06:22 - root - INFO - 日志系统初始化完成
2025-05-05 15:06:25 - app.main - INFO - 数据库表创建完成
2025-05-05 15:06:58 - root - INFO - 日志系统初始化完成
2025-05-05 15:06:59 - app.main - INFO - 数据库表创建完成
2025-05-05 15:09:12 - root - INFO - 日志系统初始化完成
2025-05-05 15:09:13 - app.main - INFO - 数据库表创建完成
2025-05-05 15:09:29 - root - INFO - 日志系统初始化完成
2025-05-05 15:09:30 - app.main - INFO - 数据库表创建完成
2025-05-05 15:15:13 - root - INFO - 日志系统初始化完成
2025-05-05 15:15:14 - app.main - INFO - 数据库表创建完成
2025-05-05 15:15:55 - root - INFO - 日志系统初始化完成
2025-05-05 15:15:56 - app.main - INFO - 数据库表创建完成
2025-05-05 15:16:29 - root - INFO - 日志系统初始化完成
2025-05-05 15:16:29 - app.main - INFO - 数据库表创建完成
2025-05-05 15:16:41 - root - INFO - 日志系统初始化完成
2025-05-05 15:16:42 - app.main - INFO - 数据库表创建完成
2025-05-05 15:17:26 - root - INFO - 日志系统初始化完成
2025-05-05 15:17:27 - app.main - INFO - 数据库表创建完成
2025-05-05 15:17:52 - root - INFO - 日志系统初始化完成
2025-05-05 15:17:57 - app.main - INFO - 数据库表创建完成
2025-05-05 15:18:19 - root - INFO - 日志系统初始化完成
2025-05-05 15:18:19 - app.main - INFO - 数据库表创建完成
2025-05-05 15:18:45 - root - INFO - 日志系统初始化完成
2025-05-05 15:18:46 - app.main - INFO - 数据库表创建完成
2025-05-05 15:39:43 - root - INFO - 日志系统初始化完成
2025-05-05 15:39:44 - app.main - INFO - 数据库表创建完成
2025-05-05 15:55:58 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-05 15:55:58 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-05 15:55:58 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-05 15:55:58 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-05 15:55:59 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-05 15:55:59 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-05 15:55:59 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-05 15:55:59 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-05 15:55:59 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-05 15:55:59 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-05-05 15:55:59 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-05-05 15:55:59 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-05 15:55:59 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-05-05 15:55:59 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-05-05 15:55:59 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-05 15:55:59 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-05 15:55:59 - app.services.vector_store - INFO - 集合 knowledge_base 已存在
2025-05-05 15:55:59 - app.services.vector_store - INFO - 集合 knowledge_base 已存在
2025-05-05 15:55:59 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections/knowledge_base "HTTP/1.1 200 OK"
2025-05-05 15:55:59 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections/knowledge_base "HTTP/1.1 200 OK"
2025-05-05 15:56:00 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-05 15:56:00 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-05 15:56:00 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-05 15:56:00 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-05 15:56:00 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-05 15:56:01 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-05 15:56:03 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-05 15:56:03 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-05 15:56:03 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-05 15:56:04 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-05 15:56:04 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-05-05 15:56:04 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-05-05 15:56:04 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-05 15:56:04 - app.services.vector_store - INFO - 集合 knowledge_base 已存在
2025-05-05 15:56:04 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections/knowledge_base "HTTP/1.1 200 OK"
2025-05-05 15:56:04 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-05 15:56:04 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-05 15:56:29 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-05 15:56:29 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-05 15:56:29 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-05 15:56:29 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-05 15:56:29 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-05-05 15:56:29 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-05-05 15:56:29 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-05 15:56:29 - app.services.vector_store - INFO - 集合 knowledge_base 已存在
2025-05-05 15:56:29 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections/knowledge_base "HTTP/1.1 200 OK"
2025-05-05 15:56:30 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-05 15:56:30 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-05 15:56:30 - app.routers.documents - INFO - 接收到文件上传请求: 5088c668-cb41-4fb4-855b-46a3aa0aa44e_快速改善代码质量的编程规范.pdf, 类型: application/pdf
2025-05-05 15:56:30 - app.routers.documents - INFO - 解析元数据: {"name":"5088c668-cb41-4fb4-855b-46a3aa0aa44e_快速改善代码质量的编程规范"}...
2025-05-05 15:56:30 - app.routers.documents - INFO - 开始处理上传的文件
2025-05-05 15:56:30 - app.services.document_service - INFO - 开始处理文件: 5088c668-cb41-4fb4-855b-46a3aa0aa44e_快速改善代码质量的编程规范.pdf, 内容类型: application/pdf
2025-05-05 15:56:30 - app.services.document_service - INFO - 文件大小: 2602666 字节
2025-05-05 15:56:30 - app.services.document_service - INFO - 文件类型识别为: pdf
2025-05-05 15:56:30 - app.services.document_service - INFO - 检测到二进制文件类型: pdf，将进行Base64编码
2025-05-05 15:56:30 - app.services.document_service - INFO - 文件包含NUL字符，确认为二进制文件
2025-05-05 15:56:30 - app.services.document_service - INFO - Base64编码完成，编码后大小: 3470234 字节
2025-05-05 15:56:30 - app.services.document_service - INFO - 准备创建文档记录
2025-05-05 15:56:30 - app.services.document_service - INFO - 创建文档: 5088c668-cb41-4fb4-855b-46a3aa0aa44e_快速改善代码质量的编程规范.pdf, 类型: pdf, 用户ID: 1
2025-05-05 15:56:30 - app.services.document_service - INFO - 文档创建成功: ID=13
2025-05-05 15:56:30 - app.routers.documents - INFO - 文件处理成功，文档ID: 13
2025-05-05 15:56:30 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-05 15:56:30 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-05 15:56:30 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-05 15:56:30 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-05 15:56:30 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-05 15:56:30 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-05 15:56:30 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-05 15:56:30 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-05 15:56:30 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-05-05 15:56:30 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-05-05 15:56:30 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-05-05 15:56:30 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-05-05 15:56:31 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-05 15:56:31 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-05 15:56:31 - app.services.vector_store - INFO - 集合 knowledge_base 已存在
2025-05-05 15:56:31 - app.services.vector_store - INFO - 集合 knowledge_base 已存在
2025-05-05 15:56:31 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections/knowledge_base "HTTP/1.1 200 OK"
2025-05-05 15:56:31 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections/knowledge_base "HTTP/1.1 200 OK"
2025-05-05 15:56:31 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-05 15:56:31 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-05 15:56:32 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-05 15:56:32 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-05 16:03:19 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-05 16:03:19 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-05 16:03:19 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-05 16:03:19 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-05 16:03:19 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-05 16:03:19 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-05 16:03:20 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-05 16:03:20 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-05 16:03:20 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-05 16:03:20 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-05 16:03:20 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-05 16:03:20 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-05 16:03:20 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-05-05 16:03:20 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-05-05 16:03:20 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-05-05 16:03:20 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-05-05 16:03:20 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-05 16:03:20 - app.services.vector_store - INFO - 集合 knowledge_base 已存在
2025-05-05 16:03:20 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-05 16:03:20 - app.services.vector_store - INFO - 集合 knowledge_base 已存在
2025-05-05 16:03:20 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections/knowledge_base "HTTP/1.1 200 OK"
2025-05-05 16:03:20 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections/knowledge_base "HTTP/1.1 200 OK"
2025-05-05 16:03:21 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-05 16:03:21 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-05 16:03:21 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-05 16:03:21 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-05 16:03:21 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-05 16:03:22 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-05 16:03:23 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-05 16:03:23 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-05 16:03:23 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-05 16:03:23 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-05 16:03:23 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-05-05 16:03:23 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-05-05 16:03:23 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-05 16:03:23 - app.services.vector_store - INFO - 集合 knowledge_base 已存在
2025-05-05 16:03:23 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections/knowledge_base "HTTP/1.1 200 OK"
2025-05-05 16:03:24 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-05 16:03:24 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-05 16:03:51 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-05 16:03:51 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-05 16:04:01 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-05 16:04:01 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-05 16:04:01 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-05 16:04:01 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-05 16:04:01 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-05 16:04:01 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-05 16:04:01 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-05 16:04:01 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-05 16:04:01 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-05 16:04:01 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-05-05 16:04:01 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-05-05 16:04:01 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-05 16:04:01 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-05-05 16:04:01 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-05-05 16:04:01 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-05 16:04:01 - app.services.vector_store - INFO - 集合 knowledge_base 已存在
2025-05-05 16:04:01 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-05 16:04:01 - app.services.vector_store - INFO - 集合 knowledge_base 已存在
2025-05-05 16:04:01 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections/knowledge_base "HTTP/1.1 200 OK"
2025-05-05 16:04:01 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections/knowledge_base "HTTP/1.1 200 OK"
2025-05-05 16:04:02 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-05 16:04:02 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-05 16:04:02 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-05 16:04:02 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-05 16:04:03 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-05 16:04:03 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-05 16:04:06 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-05 16:04:07 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-05 16:04:07 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-05 16:04:07 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-05 16:04:07 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-05-05 16:04:07 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-05-05 16:04:07 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-05 16:04:07 - app.services.vector_store - INFO - 集合 knowledge_base 已存在
2025-05-05 16:04:07 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections/knowledge_base "HTTP/1.1 200 OK"
2025-05-05 16:04:07 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-05 16:04:07 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-05 16:04:26 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-05 16:04:26 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-05 16:04:26 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-05 16:04:26 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-05 16:04:26 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-05-05 16:04:26 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-05-05 16:04:26 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-05 16:04:26 - app.services.vector_store - INFO - 集合 knowledge_base 已存在
2025-05-05 16:04:26 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections/knowledge_base "HTTP/1.1 200 OK"
2025-05-05 16:04:27 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-05 16:04:27 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-05 16:04:27 - app.routers.documents - INFO - 接收到文件上传请求: 验证码.pdf, 类型: application/pdf
2025-05-05 16:04:27 - app.routers.documents - INFO - 解析元数据: {"name":"验证码"}...
2025-05-05 16:04:27 - app.routers.documents - INFO - 开始处理上传的文件
2025-05-05 16:04:27 - app.services.document_service - INFO - 开始处理文件: 验证码.pdf, 内容类型: application/pdf
2025-05-05 16:04:27 - app.services.document_service - INFO - 文件大小: 162462 字节
2025-05-05 16:04:27 - app.services.document_service - INFO - 文件类型识别为: pdf
2025-05-05 16:04:27 - app.services.document_service - INFO - 检测到二进制文件类型: pdf，将进行Base64编码
2025-05-05 16:04:27 - app.services.document_service - INFO - 文件包含NUL字符，确认为二进制文件
2025-05-05 16:04:27 - app.services.document_service - INFO - Base64编码完成，编码后大小: 216626 字节
2025-05-05 16:04:27 - app.services.document_service - INFO - 准备创建文档记录
2025-05-05 16:04:27 - app.services.document_service - INFO - 创建文档: 验证码.pdf, 类型: pdf, 用户ID: 1
2025-05-05 16:04:27 - app.services.document_service - INFO - 文档创建成功: ID=14
2025-05-05 16:04:27 - app.routers.documents - INFO - 文件处理成功，文档ID: 14
2025-05-05 16:04:27 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-05 16:04:27 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-05 16:04:27 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-05 16:04:27 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-05 16:04:27 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-05 16:04:27 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-05 16:04:27 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-05 16:04:27 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-05 16:04:27 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-05-05 16:04:27 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-05-05 16:04:27 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-05-05 16:04:27 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-05-05 16:04:27 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-05 16:04:27 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-05 16:04:27 - app.services.vector_store - INFO - 集合 knowledge_base 已存在
2025-05-05 16:04:27 - app.services.vector_store - INFO - 集合 knowledge_base 已存在
2025-05-05 16:04:27 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections/knowledge_base "HTTP/1.1 200 OK"
2025-05-05 16:04:27 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections/knowledge_base "HTTP/1.1 200 OK"
2025-05-05 16:04:28 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-05 16:04:28 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-05 16:04:28 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-05 16:04:28 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-05 16:04:49 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-05 16:04:49 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-05 16:04:49 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-05 16:04:49 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-05 16:04:49 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-05 16:04:49 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-05 16:04:49 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-05 16:04:49 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-05 16:04:49 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-05 16:04:49 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-05 16:04:50 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-05 16:04:50 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-05 16:04:50 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-05-05 16:04:50 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-05-05 16:04:50 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-05-05 16:04:50 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-05-05 16:04:50 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-05 16:04:50 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-05 16:04:50 - app.services.vector_store - INFO - 集合 knowledge_base 已存在
2025-05-05 16:04:50 - app.services.vector_store - INFO - 集合 knowledge_base 已存在
2025-05-05 16:04:50 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections/knowledge_base "HTTP/1.1 200 OK"
2025-05-05 16:04:50 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections/knowledge_base "HTTP/1.1 200 OK"
2025-05-05 16:04:50 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-05 16:04:50 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-05 16:04:50 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-05 16:04:51 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-05 16:04:51 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-05 16:04:51 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-05 16:04:52 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-05 16:04:52 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-05 16:04:52 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-05 16:04:53 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-05 16:04:53 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-05-05 16:04:53 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-05-05 16:04:53 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-05 16:04:53 - app.services.vector_store - INFO - 集合 knowledge_base 已存在
2025-05-05 16:04:53 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections/knowledge_base "HTTP/1.1 200 OK"
2025-05-05 16:04:53 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-05 16:04:53 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-05 16:11:12 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-05 16:11:12 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-05 16:11:13 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-05 16:11:13 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-05 16:11:13 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-05 16:11:13 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-05 16:11:13 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-05 16:11:13 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-05 16:11:13 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-05 16:11:13 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-05-05 16:11:13 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-05-05 16:11:13 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-05 16:11:13 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-05 16:11:13 - app.services.vector_store - INFO - 集合 knowledge_base 已存在
2025-05-05 16:11:13 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-05-05 16:11:13 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-05-05 16:11:13 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections/knowledge_base "HTTP/1.1 200 OK"
2025-05-05 16:11:13 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-05 16:11:13 - app.services.vector_store - INFO - 集合 knowledge_base 已存在
2025-05-05 16:11:13 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections/knowledge_base "HTTP/1.1 200 OK"
2025-05-05 16:11:14 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-05 16:11:14 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-05 16:11:15 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-05 16:11:15 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-05 16:12:06 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-05 16:12:07 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-05 16:12:07 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-05 16:12:08 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-05 16:12:08 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-05 16:12:08 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-05 16:12:08 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-05-05 16:12:08 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-05-05 16:12:09 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-05 16:12:09 - app.services.vector_store - INFO - 集合 knowledge_base 已存在
2025-05-05 16:12:10 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections/knowledge_base "HTTP/1.1 200 OK"
2025-05-05 16:12:17 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-05 16:12:17 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-05 16:15:02 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-05 16:15:02 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-05 16:15:02 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-05 16:15:02 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-05 16:15:03 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-05 16:15:03 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-05 16:15:03 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-05 16:15:03 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-05 16:15:03 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-05 16:15:03 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-05 16:15:03 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-05-05 16:15:03 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-05-05 16:15:03 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-05-05 16:15:03 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-05-05 16:15:03 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-05 16:15:03 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-05 16:15:03 - app.services.vector_store - INFO - 集合 knowledge_base 已存在
2025-05-05 16:15:03 - app.services.vector_store - INFO - 集合 knowledge_base 已存在
2025-05-05 16:15:03 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections/knowledge_base "HTTP/1.1 200 OK"
2025-05-05 16:15:03 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections/knowledge_base "HTTP/1.1 200 OK"
2025-05-05 16:15:03 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-05 16:15:03 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-05 16:15:03 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-05 16:15:04 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-05 16:21:53 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-05 16:21:53 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-05 16:21:54 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-05 16:21:54 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-05 16:21:54 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-05 16:21:54 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-05 16:21:54 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-05 16:21:54 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-05 16:21:54 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-05 16:21:54 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-05 16:21:54 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-05 16:21:54 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-05 16:21:54 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-05-05 16:21:54 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-05-05 16:21:54 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-05-05 16:21:54 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-05-05 16:21:54 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-05 16:21:54 - app.services.vector_store - INFO - 集合 knowledge_base 已存在
2025-05-05 16:21:54 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-05 16:21:54 - app.services.vector_store - INFO - 集合 knowledge_base 已存在
2025-05-05 16:21:54 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections/knowledge_base "HTTP/1.1 200 OK"
2025-05-05 16:21:54 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections/knowledge_base "HTTP/1.1 200 OK"
2025-05-05 16:21:55 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-05 16:21:55 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-05 16:21:55 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-05 16:21:55 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-05 16:21:55 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-05 16:21:55 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-05 16:21:56 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-05 16:21:56 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-05 16:21:56 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-05 16:21:56 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-05 16:21:56 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-05-05 16:21:56 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-05-05 16:21:56 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-05 16:21:56 - app.services.vector_store - INFO - 集合 knowledge_base 已存在
2025-05-05 16:21:56 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections/knowledge_base "HTTP/1.1 200 OK"
2025-05-05 16:21:57 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-05 16:21:57 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-05 16:26:54 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-05 16:26:54 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-05 16:26:54 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-05 16:26:54 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-05 16:26:54 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-05 16:26:54 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-05 16:26:55 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-05 16:26:55 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-05 16:26:55 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-05 16:26:55 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-05 16:26:55 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-05 16:26:55 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-05 16:26:55 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-05-05 16:26:55 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-05-05 16:26:55 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-05-05 16:26:55 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-05-05 16:26:55 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-05 16:26:55 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-05 16:26:55 - app.services.vector_store - INFO - 集合 knowledge_base 已存在
2025-05-05 16:26:55 - app.services.vector_store - INFO - 集合 knowledge_base 已存在
2025-05-05 16:26:55 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections/knowledge_base "HTTP/1.1 200 OK"
2025-05-05 16:26:55 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections/knowledge_base "HTTP/1.1 200 OK"
2025-05-05 16:26:56 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-05 16:26:56 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-05 16:26:56 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-05 16:26:56 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-05 16:26:56 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-05 16:26:56 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-05 16:26:56 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-05 16:26:57 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-05 16:26:57 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-05 16:26:57 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-05 16:26:57 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-05-05 16:26:57 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-05-05 16:26:57 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-05 16:26:57 - app.services.vector_store - INFO - 集合 knowledge_base 已存在
2025-05-05 16:26:57 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections/knowledge_base "HTTP/1.1 200 OK"
2025-05-05 16:26:58 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-05 16:26:58 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-05 16:27:07 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-05 16:27:07 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-05 16:27:07 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-05 16:27:07 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-05 16:27:07 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-05-05 16:27:07 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-05-05 16:27:08 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-05 16:27:08 - app.services.vector_store - INFO - 集合 knowledge_base 已存在
2025-05-05 16:27:08 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections/knowledge_base "HTTP/1.1 200 OK"
2025-05-05 16:27:08 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-05 16:27:08 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-05 16:27:08 - app.routers.documents - INFO - 接收到文件上传请求: 验证码.pdf, 类型: application/pdf
2025-05-05 16:27:08 - app.routers.documents - INFO - 解析元数据: {"name":"验证码"}...
2025-05-05 16:27:08 - app.routers.documents - INFO - 开始处理上传的文件
2025-05-05 16:27:08 - app.services.document_service - INFO - 开始处理文件: 验证码.pdf, 内容类型: application/pdf
2025-05-05 16:27:08 - app.services.document_service - INFO - 文件大小: 162462 字节
2025-05-05 16:27:08 - app.services.document_service - INFO - 文件类型识别为: pdf
2025-05-05 16:27:08 - app.services.document_service - INFO - 检测到二进制文件类型: pdf，将进行Base64编码
2025-05-05 16:27:08 - app.services.document_service - INFO - 文件包含NUL字符，确认为二进制文件
2025-05-05 16:27:08 - app.services.document_service - INFO - Base64编码完成，编码后大小: 216626 字节
2025-05-05 16:27:08 - app.services.document_service - INFO - 准备创建文档记录
2025-05-05 16:27:08 - app.services.document_service - INFO - 创建文档: 验证码.pdf, 类型: pdf, 用户ID: 1
2025-05-05 16:27:09 - app.services.document_service - INFO - 文档创建成功: ID=15
2025-05-05 16:27:09 - app.routers.documents - INFO - 文件处理成功，文档ID: 15
2025-05-05 16:27:09 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-05 16:27:09 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-05 16:27:09 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-05 16:27:09 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-05 16:27:09 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-05 16:27:09 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-05 16:27:09 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-05 16:27:09 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-05-05 16:27:09 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-05-05 16:27:09 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-05 16:27:09 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-05-05 16:27:09 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-05-05 16:27:09 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-05 16:27:09 - app.services.vector_store - INFO - 集合 knowledge_base 已存在
2025-05-05 16:27:09 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-05 16:27:09 - app.services.vector_store - INFO - 集合 knowledge_base 已存在
2025-05-05 16:27:09 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections/knowledge_base "HTTP/1.1 200 OK"
2025-05-05 16:27:09 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections/knowledge_base "HTTP/1.1 200 OK"
2025-05-05 16:27:10 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-05 16:27:10 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-05 16:27:10 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-05 16:27:10 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-05 16:27:22 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-05 16:27:22 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-05 16:27:22 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-05 16:27:23 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-05 16:27:23 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-05 16:27:23 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-05 16:27:23 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-05 16:27:23 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-05 16:27:23 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-05 16:27:23 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-05 16:27:23 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-05 16:27:23 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-05-05 16:27:23 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-05-05 16:27:23 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-05 16:27:23 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-05-05 16:27:23 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-05-05 16:27:23 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-05 16:27:23 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-05 16:27:23 - app.services.vector_store - INFO - 集合 knowledge_base 已存在
2025-05-05 16:27:23 - app.services.vector_store - INFO - 集合 knowledge_base 已存在
2025-05-05 16:27:23 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections/knowledge_base "HTTP/1.1 200 OK"
2025-05-05 16:27:23 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections/knowledge_base "HTTP/1.1 200 OK"
2025-05-05 16:27:23 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-05 16:27:24 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-05 16:27:24 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-05 16:27:24 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-05 16:27:24 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-05 16:27:25 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-05 16:28:13 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-05 16:28:13 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-05 16:28:13 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-05 16:28:13 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-05 16:28:13 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-05-05 16:28:13 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-05-05 16:28:13 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-05 16:28:13 - app.services.vector_store - INFO - 集合 knowledge_base 已存在
2025-05-05 16:28:13 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections/knowledge_base "HTTP/1.1 200 OK"
2025-05-05 16:28:14 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-05 16:28:14 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-05 16:28:34 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-05 16:28:34 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-05 16:28:34 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-05 16:28:34 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-05 16:28:34 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-05 16:28:34 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-05 16:28:35 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-05 16:28:35 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-05 16:28:35 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-05 16:28:35 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-05 16:28:35 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-05 16:28:35 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-05 16:28:35 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-05-05 16:28:35 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-05-05 16:28:35 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-05-05 16:28:35 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-05-05 16:28:35 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-05 16:28:35 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-05 16:28:35 - app.services.vector_store - INFO - 集合 knowledge_base 已存在
2025-05-05 16:28:35 - app.services.vector_store - INFO - 集合 knowledge_base 已存在
2025-05-05 16:28:35 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections/knowledge_base "HTTP/1.1 200 OK"
2025-05-05 16:28:35 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections/knowledge_base "HTTP/1.1 200 OK"
2025-05-05 16:28:35 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-05 16:28:35 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-05 16:28:36 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-05 16:28:36 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-05 16:28:36 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-05 16:28:37 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-05 16:28:37 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-05 16:28:37 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-05 16:28:37 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-05 16:28:37 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-05 16:28:37 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-05-05 16:28:37 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-05-05 16:28:37 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-05 16:28:37 - app.services.vector_store - INFO - 集合 knowledge_base 已存在
2025-05-05 16:28:37 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections/knowledge_base "HTTP/1.1 200 OK"
2025-05-05 16:28:38 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-05 16:28:38 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-05 16:38:41 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-05 16:38:42 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-05 16:38:42 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-05 16:38:42 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-05 16:38:42 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-05-05 16:38:42 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-05-05 16:38:42 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-05 16:38:42 - app.services.vector_store - INFO - 集合 knowledge_base 已存在
2025-05-05 16:38:42 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections/knowledge_base "HTTP/1.1 200 OK"
2025-05-05 16:38:49 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-05 16:38:49 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-05 16:39:01 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-05 16:39:02 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-05 16:39:02 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-05 16:39:02 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-05 16:39:02 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-05-05 16:39:02 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-05-05 16:39:02 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-05 16:39:02 - app.services.vector_store - INFO - 集合 knowledge_base 已存在
2025-05-05 16:39:02 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections/knowledge_base "HTTP/1.1 200 OK"
2025-05-05 16:39:02 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-05 16:39:02 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-05 16:39:12 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-05 16:39:12 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-05 16:39:12 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-05 16:39:12 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-05 16:39:12 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-05-05 16:39:12 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-05-05 16:39:13 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-05 16:39:13 - app.services.vector_store - INFO - 集合 knowledge_base 已存在
2025-05-05 16:39:13 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections/knowledge_base "HTTP/1.1 200 OK"
2025-05-05 16:39:13 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-05 16:39:13 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-05 16:39:22 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-05 16:39:22 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-05 16:39:22 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-05 16:39:23 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-05 16:39:23 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-05-05 16:39:23 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-05-05 16:39:23 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-05 16:39:23 - app.services.vector_store - INFO - 集合 knowledge_base 已存在
2025-05-05 16:39:23 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections/knowledge_base "HTTP/1.1 200 OK"
2025-05-05 16:39:23 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-05 16:39:24 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-05 16:39:30 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-05 16:39:30 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-05 16:39:30 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-05 16:39:31 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-05 16:39:31 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-05-05 16:39:31 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-05-05 16:39:31 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-05 16:39:31 - app.services.vector_store - INFO - 集合 knowledge_base 已存在
2025-05-05 16:39:31 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections/knowledge_base "HTTP/1.1 200 OK"
2025-05-05 16:39:31 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-05 16:39:31 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-05 16:43:35 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-05 16:43:36 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-05 16:43:36 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-05 16:43:36 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-05 16:43:36 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-05-05 16:43:36 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-05-05 16:43:36 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-05 16:43:36 - app.services.vector_store - INFO - 集合 knowledge_base 已存在
2025-05-05 16:43:37 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections/knowledge_base "HTTP/1.1 200 OK"
2025-05-05 16:43:37 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-05 16:43:37 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-05 16:43:43 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-05 16:43:43 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-05 16:43:43 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-05 16:43:43 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-05 16:43:43 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-05-05 16:43:43 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-05-05 16:43:44 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-05 16:43:44 - app.services.vector_store - INFO - 集合 knowledge_base 已存在
2025-05-05 16:43:44 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections/knowledge_base "HTTP/1.1 200 OK"
2025-05-05 16:43:44 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-05 16:43:44 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-05 16:43:56 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-05 16:43:57 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-05 16:43:57 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-05 16:43:58 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-05 16:43:58 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-05-05 16:43:58 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-05-05 16:43:59 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-05 16:43:59 - app.services.vector_store - INFO - 集合 knowledge_base 已存在
2025-05-05 16:43:59 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections/knowledge_base "HTTP/1.1 200 OK"
2025-05-05 16:44:01 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-05 16:44:02 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-05 16:44:30 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-05 16:44:31 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-05 16:44:31 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-05 16:44:31 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-05 16:44:31 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-05 16:44:31 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-05 16:44:32 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-05 16:44:32 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-05 16:44:32 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-05 16:44:32 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-05 16:44:32 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-05 16:44:32 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-05 16:44:32 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-05-05 16:44:32 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-05-05 16:44:32 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-05-05 16:44:32 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-05-05 16:44:33 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-05 16:44:33 - app.services.vector_store - INFO - 集合 knowledge_base 已存在
2025-05-05 16:44:33 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-05 16:44:33 - app.services.vector_store - INFO - 集合 knowledge_base 已存在
2025-05-05 16:44:33 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections/knowledge_base "HTTP/1.1 200 OK"
2025-05-05 16:44:33 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections/knowledge_base "HTTP/1.1 200 OK"
2025-05-05 16:44:33 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-05 16:44:34 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-05 16:44:34 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-05 16:44:34 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-05 16:44:34 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-05 16:44:34 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-05 16:46:14 - root - INFO - 日志系统初始化完成
2025-05-05 16:46:15 - app.main - INFO - 数据库表创建完成
2025-05-05 16:49:12 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-05 16:49:12 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-05 16:49:13 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-05 16:49:13 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-05 16:49:14 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-05 16:49:14 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-05 16:49:14 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-05 16:49:14 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-05 16:49:14 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-05 16:49:14 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-05 16:49:14 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-05 16:49:14 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-05 16:49:14 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-05 16:49:15 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-05 16:49:15 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-05 16:49:15 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-05-05 16:49:15 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-05-05 16:49:15 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-05-05 16:49:15 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-05-05 16:49:15 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-05 16:49:15 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-05-05 16:49:15 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-05-05 16:49:15 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-05 16:49:15 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-05 16:49:15 - app.services.vector_store - INFO - 集合 knowledge_base 已存在
2025-05-05 16:49:15 - app.services.vector_store - INFO - 集合 knowledge_base 已存在
2025-05-05 16:49:15 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections/knowledge_base "HTTP/1.1 200 OK"
2025-05-05 16:49:15 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections/knowledge_base "HTTP/1.1 200 OK"
2025-05-05 16:49:15 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-05 16:49:15 - app.services.vector_store - INFO - 集合 knowledge_base 已存在
2025-05-05 16:49:15 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections/knowledge_base "HTTP/1.1 200 OK"
2025-05-05 16:49:15 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-05 16:49:16 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-05 16:49:16 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-05 16:49:16 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-05 16:49:17 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-05 16:49:17 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-05 16:49:19 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-05 16:49:20 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-05 16:49:20 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-05 16:49:20 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-05 16:49:20 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-05-05 16:49:20 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-05-05 16:49:20 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-05 16:49:20 - app.services.vector_store - INFO - 集合 knowledge_base 已存在
2025-05-05 16:49:20 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections/knowledge_base "HTTP/1.1 200 OK"
2025-05-05 16:49:21 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-05 16:49:21 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-05 16:49:29 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-05 16:49:29 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-05 16:49:29 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-05 16:49:29 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-05 16:49:29 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-05-05 16:49:29 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-05-05 16:49:29 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-05 16:49:29 - app.services.vector_store - INFO - 集合 knowledge_base 已存在
2025-05-05 16:49:29 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections/knowledge_base "HTTP/1.1 200 OK"
2025-05-05 16:49:30 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-05 16:49:30 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-05 16:50:14 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-05 16:50:14 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-05 16:50:14 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-05 16:50:15 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-05 16:50:15 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-05-05 16:50:15 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-05-05 16:50:15 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-05 16:50:15 - app.services.vector_store - INFO - 集合 knowledge_base 已存在
2025-05-05 16:50:15 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections/knowledge_base "HTTP/1.1 200 OK"
2025-05-05 16:50:15 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-05 16:50:16 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-05 16:50:16 - app.routers.documents - INFO - 接收到文件上传请求: 附件2：中移在线4A管理平台与应用系统接入手册V1.7(4).docx, 类型: application/vnd.openxmlformats-officedocument.wordprocessingml.document
2025-05-05 16:50:16 - app.routers.documents - INFO - 解析元数据: {"name":"附件2：中移在线4A管理平台与应用系统接入手册V1.7(4)"}...
2025-05-05 16:50:16 - app.routers.documents - INFO - 开始处理上传的文件
2025-05-05 16:50:16 - app.services.document_service - INFO - 开始处理文件: 附件2：中移在线4A管理平台与应用系统接入手册V1.7(4).docx, 内容类型: application/vnd.openxmlformats-officedocument.wordprocessingml.document
2025-05-05 16:50:16 - app.services.document_service - INFO - 文件大小: 6517274 字节
2025-05-05 16:50:16 - app.services.document_service - INFO - 文件类型识别为: docx
2025-05-05 16:50:16 - app.services.document_service - INFO - 检测到二进制文件类型: docx，将进行Base64编码
2025-05-05 16:50:16 - app.services.document_service - INFO - 文件包含NUL字符，确认为二进制文件
2025-05-05 16:50:16 - app.services.document_service - INFO - Base64编码完成，编码后大小: 8689710 字节
2025-05-05 16:50:16 - app.services.document_service - INFO - 准备创建文档记录
2025-05-05 16:50:16 - app.services.document_service - INFO - 创建文档: 附件2：中移在线4A管理平台与应用系统接入手册V1.7(4).docx, 类型: docx, 用户ID: 1
2025-05-05 16:50:16 - app.services.document_service - INFO - 文档创建成功: ID=16
2025-05-05 16:50:16 - app.routers.documents - INFO - 文件处理成功，文档ID: 16
2025-05-05 16:50:16 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-05 16:50:16 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-05 16:50:17 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-05 16:50:17 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-05 16:50:17 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-05 16:50:17 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-05 16:50:17 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-05 16:50:17 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-05 16:50:17 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-05-05 16:50:17 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-05-05 16:50:17 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-05-05 16:50:17 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-05-05 16:50:17 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-05 16:50:17 - app.services.vector_store - INFO - 集合 knowledge_base 已存在
2025-05-05 16:50:17 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-05 16:50:17 - app.services.vector_store - INFO - 集合 knowledge_base 已存在
2025-05-05 16:50:17 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections/knowledge_base "HTTP/1.1 200 OK"
2025-05-05 16:50:17 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections/knowledge_base "HTTP/1.1 200 OK"
2025-05-05 16:50:17 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-05 16:50:17 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-05 16:50:18 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-05 16:50:18 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-05 16:50:33 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-05 16:50:33 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-05 16:50:33 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-05 16:50:33 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-05 16:50:33 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-05-05 16:50:33 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-05-05 16:50:33 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-05 16:50:33 - app.services.vector_store - INFO - 集合 knowledge_base 已存在
2025-05-05 16:50:33 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections/knowledge_base "HTTP/1.1 200 OK"
2025-05-05 16:50:34 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-05 16:50:34 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-05 16:56:17 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-05 16:56:17 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-05 16:56:17 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-05 16:56:17 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-05 16:56:17 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-05 16:56:17 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-05 16:56:18 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-05 16:56:18 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-05 16:56:18 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-05 16:56:18 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-05 16:56:18 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-05 16:56:18 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-05-05 16:56:18 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-05-05 16:56:18 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-05 16:56:18 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-05-05 16:56:18 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-05-05 16:56:18 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-05 16:56:18 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-05 16:56:18 - app.services.vector_store - INFO - 集合 knowledge_base 已存在
2025-05-05 16:56:18 - app.services.vector_store - INFO - 集合 knowledge_base 已存在
2025-05-05 16:56:18 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections/knowledge_base "HTTP/1.1 200 OK"
2025-05-05 16:56:18 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections/knowledge_base "HTTP/1.1 200 OK"
2025-05-05 16:56:19 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-05 16:56:19 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-05 16:56:19 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-05 16:56:20 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-05 16:56:20 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-05 16:56:20 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-05 16:56:45 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-05 16:56:45 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-05 16:56:45 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-05 16:56:46 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-05 16:56:46 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-05 16:56:46 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-05 16:56:46 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-05 16:56:46 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-05 16:56:46 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-05 16:56:46 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-05 16:56:46 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-05 16:56:46 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-05-05 16:56:46 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-05-05 16:56:46 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-05 16:56:46 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-05-05 16:56:46 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-05-05 16:56:46 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-05 16:56:46 - app.services.vector_store - INFO - 集合 knowledge_base 已存在
2025-05-05 16:56:46 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-05 16:56:46 - app.services.vector_store - INFO - 集合 knowledge_base 已存在
2025-05-05 16:56:47 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections/knowledge_base "HTTP/1.1 200 OK"
2025-05-05 16:56:47 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections/knowledge_base "HTTP/1.1 200 OK"
2025-05-05 16:56:47 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-05 16:56:47 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-05 16:56:47 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-05 16:56:47 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-05 16:57:10 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-05 16:57:10 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-05 16:57:10 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-05 16:57:10 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-05 16:57:10 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-05 16:57:10 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-05 16:57:11 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-05 16:57:11 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-05 16:57:11 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-05 16:57:11 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-05 16:57:11 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-05 16:57:11 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-05 16:57:11 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-05-05 16:57:11 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-05-05 16:57:11 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-05-05 16:57:11 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-05-05 16:57:12 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-05 16:57:12 - app.services.vector_store - INFO - 集合 knowledge_base 已存在
2025-05-05 16:57:12 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-05 16:57:12 - app.services.vector_store - INFO - 集合 knowledge_base 已存在
2025-05-05 16:57:12 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections/knowledge_base "HTTP/1.1 200 OK"
2025-05-05 16:57:12 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections/knowledge_base "HTTP/1.1 200 OK"
2025-05-05 16:57:13 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-05 16:57:13 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-05 16:57:13 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-05 16:57:13 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-05 17:00:58 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-05 17:00:58 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-05 17:00:58 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-05 17:00:58 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-05 17:00:58 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-05 17:00:58 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-05 17:00:59 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-05 17:00:59 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-05 17:00:59 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-05 17:00:59 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-05 17:00:59 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-05 17:00:59 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-05 17:00:59 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-05-05 17:00:59 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-05-05 17:00:59 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-05-05 17:00:59 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-05-05 17:00:59 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-05 17:00:59 - app.services.vector_store - INFO - 集合 knowledge_base 已存在
2025-05-05 17:00:59 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-05 17:00:59 - app.services.vector_store - INFO - 集合 knowledge_base 已存在
2025-05-05 17:00:59 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections/knowledge_base "HTTP/1.1 200 OK"
2025-05-05 17:00:59 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections/knowledge_base "HTTP/1.1 200 OK"
2025-05-05 17:00:59 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-05 17:00:59 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-05 17:00:59 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-05 17:01:00 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-05 17:01:00 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-05 17:01:00 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-05 17:09:34 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-05 17:09:35 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-05 17:09:35 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-05 17:09:35 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-05 17:09:35 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-05 17:09:35 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-05 17:09:35 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-05 17:09:35 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-05 17:09:36 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-05 17:09:36 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-05 17:09:36 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-05-05 17:09:36 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-05 17:09:36 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-05-05 17:09:36 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-05 17:09:36 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-05 17:09:36 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-05-05 17:09:36 - app.services.vector_store - INFO - 集合 knowledge_base 已存在
2025-05-05 17:09:36 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-05-05 17:09:36 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections/knowledge_base "HTTP/1.1 200 OK"
2025-05-05 17:09:36 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-05 17:09:36 - app.services.vector_store - INFO - 集合 knowledge_base 已存在
2025-05-05 17:09:36 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections/knowledge_base "HTTP/1.1 200 OK"
2025-05-05 17:09:38 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-05 17:09:39 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-05 17:09:42 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-05 17:09:44 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-05 17:09:44 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-05 17:09:44 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-05 17:09:44 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-05-05 17:09:44 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-05-05 17:09:44 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-05 17:09:45 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-05 17:09:45 - app.services.vector_store - INFO - 集合 knowledge_base 已存在
2025-05-05 17:09:45 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-05 17:09:46 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections/knowledge_base "HTTP/1.1 200 OK"
2025-05-05 17:09:46 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-05 17:09:46 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-05 17:09:47 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-05 17:09:47 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-05 17:09:51 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-05 17:09:52 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-05 17:09:52 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-05 17:09:52 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-05 17:09:52 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-05-05 17:09:52 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-05-05 17:09:52 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-05 17:09:52 - app.services.vector_store - INFO - 集合 knowledge_base 已存在
2025-05-05 17:09:52 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections/knowledge_base "HTTP/1.1 200 OK"
2025-05-05 17:09:52 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-05 17:09:52 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-05 17:10:02 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-05 17:10:02 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-05 17:10:02 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-05 17:10:03 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-05 17:10:03 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-05-05 17:10:03 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-05-05 17:10:03 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-05 17:10:03 - app.services.vector_store - INFO - 集合 knowledge_base 已存在
2025-05-05 17:10:03 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections/knowledge_base "HTTP/1.1 200 OK"
2025-05-05 17:10:04 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-05 17:10:04 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-05 17:10:39 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-05 17:10:39 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-05 17:10:39 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-05 17:10:39 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-05 17:10:39 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-05-05 17:10:39 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-05-05 17:10:40 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-05 17:10:40 - app.services.vector_store - INFO - 集合 knowledge_base 已存在
2025-05-05 17:10:40 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections/knowledge_base "HTTP/1.1 200 OK"
2025-05-05 17:10:40 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-05 17:10:40 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-05 17:11:04 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-05 17:11:04 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-05 17:11:04 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-05 17:11:05 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-05 17:11:05 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-05-05 17:11:05 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-05-05 17:11:05 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-05 17:11:05 - app.services.vector_store - INFO - 集合 knowledge_base 已存在
2025-05-05 17:11:05 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections/knowledge_base "HTTP/1.1 200 OK"
2025-05-05 17:11:05 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-05 17:11:05 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-05 17:11:18 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-05 17:11:19 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-05 17:11:19 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-05 17:11:19 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-05 17:11:19 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-05-05 17:11:19 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-05-05 17:11:19 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-05 17:11:19 - app.services.vector_store - INFO - 集合 knowledge_base 已存在
2025-05-05 17:11:19 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections/knowledge_base "HTTP/1.1 200 OK"
2025-05-05 17:11:19 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-05 17:11:20 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-05 17:12:03 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-05 17:12:03 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-05 17:12:03 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-05 17:12:04 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-05 17:12:04 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-05-05 17:12:04 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-05-05 17:12:04 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-05 17:12:04 - app.services.vector_store - INFO - 集合 knowledge_base 已存在
2025-05-05 17:12:04 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections/knowledge_base "HTTP/1.1 200 OK"
2025-05-05 17:12:04 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-05 17:12:05 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-05 17:12:15 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-05 17:12:18 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-05 17:12:18 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-05 17:12:18 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-05 17:12:18 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-05-05 17:12:18 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-05-05 17:12:18 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-05 17:12:18 - app.services.vector_store - INFO - 集合 knowledge_base 已存在
2025-05-05 17:12:18 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections/knowledge_base "HTTP/1.1 200 OK"
2025-05-05 17:12:19 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-05 17:12:19 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-05 17:12:46 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-05 17:12:47 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-05 17:12:47 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-05 17:12:47 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-05 17:12:47 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-05-05 17:12:47 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-05-05 17:12:47 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-05 17:12:47 - app.services.vector_store - INFO - 集合 knowledge_base 已存在
2025-05-05 17:12:47 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections/knowledge_base "HTTP/1.1 200 OK"
2025-05-05 17:12:48 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-05 17:12:48 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-05 17:12:58 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-05 17:12:59 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-05 17:12:59 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-05 17:12:59 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-05 17:12:59 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-05-05 17:12:59 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-05-05 17:12:59 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-05 17:12:59 - app.services.vector_store - INFO - 集合 knowledge_base 已存在
2025-05-05 17:13:00 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections/knowledge_base "HTTP/1.1 200 OK"
2025-05-05 17:13:00 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-05 17:13:01 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-05 17:13:07 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-05 17:13:07 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-05 17:13:07 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-05 17:13:08 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-05 17:13:08 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-05-05 17:13:08 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-05-05 17:13:08 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-05 17:13:08 - app.services.vector_store - INFO - 集合 knowledge_base 已存在
2025-05-05 17:13:08 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections/knowledge_base "HTTP/1.1 200 OK"
2025-05-05 17:13:08 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-05 17:13:08 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-05 17:13:20 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-05 17:13:20 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-05 17:13:20 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-05 17:13:21 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-05 17:13:21 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-05-05 17:13:21 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-05-05 17:13:21 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-05 17:13:21 - app.services.vector_store - INFO - 集合 knowledge_base 已存在
2025-05-05 17:13:21 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections/knowledge_base "HTTP/1.1 200 OK"
2025-05-05 17:13:21 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-05 17:13:21 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-05 17:16:22 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-05 17:16:22 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-05 17:16:22 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-05 17:16:22 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-05 17:16:22 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-05 17:16:22 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-05 17:16:23 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-05 17:16:23 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 502 Bad Gateway"
2025-05-05 17:16:23 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-05 17:16:23 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-05 17:16:24 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 502 Bad Gateway"
2025-05-05 17:16:24 - app.services.vector_store - WARNING - Qdrant连接尝试 1/3 失败 (HTTP 502): 无内容
2025-05-05 17:16:24 - app.services.vector_store - INFO - 在 2 秒后重试...
2025-05-05 17:16:25 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-05 17:16:26 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 502 Bad Gateway"
2025-05-05 17:16:26 - app.services.vector_store - WARNING - Qdrant连接尝试 2/3 失败 (HTTP 502): 无内容
2025-05-05 17:16:26 - app.services.vector_store - INFO - 在 4 秒后重试...
2025-05-05 17:16:27 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 502 Bad Gateway"
2025-05-05 17:16:27 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-05 17:16:27 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-05 17:16:27 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 502 Bad Gateway"
2025-05-05 17:16:27 - app.services.vector_store - WARNING - Qdrant连接尝试 1/3 失败 (HTTP 502): 无内容
2025-05-05 17:16:27 - app.services.vector_store - INFO - 在 2 秒后重试...
2025-05-05 17:16:28 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 502 Bad Gateway"
2025-05-05 17:16:28 - app.services.vector_store - WARNING - Qdrant连接尝试 1/3 失败 (HTTP 502): 无内容
2025-05-05 17:16:28 - app.services.vector_store - INFO - 在 2 秒后重试...
2025-05-05 17:16:32 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 502 Bad Gateway"
2025-05-05 17:16:32 - app.services.vector_store - WARNING - Qdrant连接尝试 2/3 失败 (HTTP 502): 无内容
2025-05-05 17:16:32 - app.services.vector_store - INFO - 在 4 秒后重试...
2025-05-05 17:16:32 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 502 Bad Gateway"
2025-05-05 17:16:32 - app.services.vector_store - WARNING - Qdrant连接尝试 3/3 失败 (HTTP 502): 无内容
2025-05-05 17:16:32 - app.services.vector_store - ERROR - 在 3 次尝试后无法连接到Qdrant服务器
2025-05-05 17:16:32 - app.services.vector_store - WARNING - 连接到Qdrant服务器失败: 无法连接到Qdrant服务器. 切换到本地模拟模式.
2025-05-05 17:16:32 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-05 17:16:32 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-05 17:16:34 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 502 Bad Gateway"
2025-05-05 17:16:34 - app.services.vector_store - WARNING - Qdrant连接尝试 2/3 失败 (HTTP 502): 无内容
2025-05-05 17:16:34 - app.services.vector_store - INFO - 在 4 秒后重试...
2025-05-05 17:16:38 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 502 Bad Gateway"
2025-05-05 17:16:38 - app.services.vector_store - WARNING - Qdrant连接尝试 3/3 失败 (HTTP 502): 无内容
2025-05-05 17:16:38 - app.services.vector_store - ERROR - 在 3 次尝试后无法连接到Qdrant服务器
2025-05-05 17:16:38 - app.services.vector_store - WARNING - 连接到Qdrant服务器失败: 无法连接到Qdrant服务器. 切换到本地模拟模式.
2025-05-05 17:16:38 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-05 17:16:38 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-05 17:16:38 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-05 17:16:40 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 502 Bad Gateway"
2025-05-05 17:16:40 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-05 17:16:40 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 502 Bad Gateway"
2025-05-05 17:16:40 - app.services.vector_store - WARNING - Qdrant连接尝试 3/3 失败 (HTTP 502): 无内容
2025-05-05 17:16:40 - app.services.vector_store - ERROR - 在 3 次尝试后无法连接到Qdrant服务器
2025-05-05 17:16:40 - app.services.vector_store - WARNING - 连接到Qdrant服务器失败: 无法连接到Qdrant服务器. 切换到本地模拟模式.
2025-05-05 17:16:40 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-05 17:16:40 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-05 17:16:40 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 502 Bad Gateway"
2025-05-05 17:16:40 - app.services.vector_store - WARNING - Qdrant连接尝试 1/3 失败 (HTTP 502): 无内容
2025-05-05 17:16:40 - app.services.vector_store - INFO - 在 2 秒后重试...
2025-05-05 17:16:43 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 502 Bad Gateway"
2025-05-05 17:16:43 - app.services.vector_store - WARNING - Qdrant连接尝试 2/3 失败 (HTTP 502): 无内容
2025-05-05 17:16:43 - app.services.vector_store - INFO - 在 4 秒后重试...
2025-05-05 17:16:48 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 502 Bad Gateway"
2025-05-05 17:16:48 - app.services.vector_store - WARNING - Qdrant连接尝试 3/3 失败 (HTTP 502): 无内容
2025-05-05 17:16:48 - app.services.vector_store - ERROR - 在 3 次尝试后无法连接到Qdrant服务器
2025-05-05 17:16:48 - app.services.vector_store - WARNING - 连接到Qdrant服务器失败: 无法连接到Qdrant服务器. 切换到本地模拟模式.
2025-05-05 17:16:48 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-05 17:16:48 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-05 17:16:55 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-05 17:16:55 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-05 17:16:55 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-05 17:16:55 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-05 17:16:55 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-05-05 17:16:55 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-05-05 17:16:55 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-05 17:16:55 - app.services.vector_store - INFO - 集合 knowledge_base 已存在
2025-05-05 17:16:55 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections/knowledge_base "HTTP/1.1 200 OK"
2025-05-05 17:17:02 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-05 17:17:02 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-05 17:37:59 - root - INFO - 日志系统初始化完成
2025-05-05 17:38:00 - app.main - INFO - 数据库表创建完成
2025-05-05 17:38:06 - root - INFO - 日志系统初始化完成
2025-05-05 17:38:07 - app.main - INFO - 数据库表创建完成
2025-05-05 17:38:27 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-05 17:38:27 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-05 17:38:27 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-05 17:38:27 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-05 17:38:27 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-05 17:38:27 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-05 17:38:27 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-05 17:38:27 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-05 17:38:27 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-05 17:38:27 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-05-05 17:38:27 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-05-05 17:38:27 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-05 17:38:27 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-05-05 17:38:27 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-05-05 17:38:28 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-05 17:38:28 - app.services.vector_store - INFO - 集合 knowledge_base 已存在
2025-05-05 17:38:28 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-05 17:38:28 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-05 17:38:28 - app.services.vector_store - INFO - 集合 knowledge_base 已存在
2025-05-05 17:38:28 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections/knowledge_base "HTTP/1.1 200 OK"
2025-05-05 17:38:28 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections/knowledge_base "HTTP/1.1 200 OK"
2025-05-05 17:38:28 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-05 17:38:28 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-05 17:38:28 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-05 17:38:28 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-05 17:38:28 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-05 17:38:28 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-05-05 17:38:28 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-05-05 17:38:29 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-05 17:38:29 - app.services.vector_store - INFO - 集合 knowledge_base 已存在
2025-05-05 17:38:29 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections/knowledge_base "HTTP/1.1 200 OK"
2025-05-05 17:38:29 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-05 17:38:29 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-05 17:38:29 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-05 17:38:30 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-05 17:38:30 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-05 17:38:30 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-05 17:38:37 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-05 17:38:38 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-05 17:38:38 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-05 17:38:38 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-05 17:38:38 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-05-05 17:38:38 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-05-05 17:38:38 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-05 17:38:38 - app.services.vector_store - INFO - 集合 knowledge_base 已存在
2025-05-05 17:38:38 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections/knowledge_base "HTTP/1.1 200 OK"
2025-05-05 17:38:39 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-05 17:38:39 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-05 17:38:39 - app.routers.documents - INFO - 接收到文件上传请求: 验证码.pdf, 类型: application/pdf
2025-05-05 17:38:39 - app.routers.documents - INFO - 解析元数据: {"name":"验证码"}...
2025-05-05 17:38:39 - app.routers.documents - INFO - 开始处理上传的文件
2025-05-05 17:38:39 - app.services.document_service - INFO - 开始处理文件: 验证码.pdf, 内容类型: application/pdf
2025-05-05 17:38:39 - app.services.document_service - INFO - 文件大小: 162462 字节
2025-05-05 17:38:39 - app.services.document_service - INFO - 文件类型识别为: pdf
2025-05-05 17:38:39 - app.services.document_service - INFO - 检测到二进制文件类型: pdf，将进行Base64编码
2025-05-05 17:38:39 - app.services.document_service - INFO - 文件包含NUL字符，确认为二进制文件
2025-05-05 17:38:39 - app.services.document_service - INFO - Base64编码完成，编码后大小: 216626 字节
2025-05-05 17:38:39 - app.services.document_service - INFO - 准备创建文档记录
2025-05-05 17:38:39 - app.services.document_service - INFO - 创建文档: 验证码.pdf, 类型: pdf, 用户ID: 1
2025-05-05 17:38:39 - app.services.document_service - INFO - 文档创建成功: ID=17
2025-05-05 17:38:39 - app.routers.documents - INFO - 文件处理成功，文档ID: 17
2025-05-05 17:38:39 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-05 17:38:39 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-05 17:38:39 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-05 17:38:39 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-05 17:38:39 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-05 17:38:39 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-05 17:38:40 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-05 17:38:40 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-05 17:38:40 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-05-05 17:38:40 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-05-05 17:38:40 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-05-05 17:38:40 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-05-05 17:38:40 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-05 17:38:40 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-05 17:38:40 - app.services.vector_store - INFO - 集合 knowledge_base 已存在
2025-05-05 17:38:40 - app.services.vector_store - INFO - 集合 knowledge_base 已存在
2025-05-05 17:38:40 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections/knowledge_base "HTTP/1.1 200 OK"
2025-05-05 17:38:40 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections/knowledge_base "HTTP/1.1 200 OK"
2025-05-05 17:38:40 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-05 17:38:41 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-05 17:38:41 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-05 17:38:41 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-05 17:38:43 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-05 17:38:43 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-05 17:38:43 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-05 17:38:43 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-05 17:38:43 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-05-05 17:38:43 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-05-05 17:38:43 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-05 17:38:43 - app.services.vector_store - INFO - 集合 knowledge_base 已存在
2025-05-05 17:38:43 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections/knowledge_base "HTTP/1.1 200 OK"
2025-05-05 17:38:44 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-05 17:38:44 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-05 17:51:01 - root - INFO - 日志系统初始化完成
2025-05-05 17:51:01 - app.main - INFO - 数据库表创建完成
2025-05-05 17:54:09 - root - INFO - 日志系统初始化完成
2025-05-05 17:54:10 - app.main - INFO - 数据库表创建完成
2025-05-05 17:54:10 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-05 17:54:10 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-05 17:54:10 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-05 17:54:10 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-05 17:54:11 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-05 17:54:11 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-05 17:54:11 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-05 17:54:11 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-05 17:54:11 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-05 17:54:11 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-05 17:54:11 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-05-05 17:54:11 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-05-05 17:54:11 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-05 17:54:11 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-05 17:54:11 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-05 17:54:11 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-05 17:54:11 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-05 17:54:11 - app.services.vector_store - INFO - 集合 knowledge_base 已存在
2025-05-05 17:54:11 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-05 17:54:11 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-05-05 17:54:11 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-05-05 17:54:11 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections/knowledge_base "HTTP/1.1 200 OK"
2025-05-05 17:54:11 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-05 17:54:11 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-05 17:54:11 - app.services.vector_store - INFO - 集合 knowledge_base 已存在
2025-05-05 17:54:11 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-05-05 17:54:11 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-05-05 17:54:11 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections/knowledge_base "HTTP/1.1 200 OK"
2025-05-05 17:54:12 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-05 17:54:12 - app.services.vector_store - INFO - 集合 knowledge_base 已存在
2025-05-05 17:54:12 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections/knowledge_base "HTTP/1.1 200 OK"
2025-05-05 17:54:12 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-05 17:54:15 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-05 17:54:15 - app.routers.documents - INFO - 接收到文件上传请求: 验证码.pdf, 类型: application/pdf
2025-05-05 17:54:15 - app.routers.documents - INFO - 解析元数据: {"name":"验证码"}...
2025-05-05 17:54:15 - app.routers.documents - INFO - 开始处理上传的文件
2025-05-05 17:54:15 - app.services.document_service - INFO - 开始处理文件: 验证码.pdf, 内容类型: application/pdf
2025-05-05 17:54:15 - app.services.document_service - INFO - 文件大小: 162462 字节
2025-05-05 17:54:15 - app.services.document_service - INFO - 文件类型识别为: pdf
2025-05-05 17:54:15 - app.services.document_service - INFO - 检测到二进制文件类型: pdf，将进行Base64编码
2025-05-05 17:54:15 - app.services.document_service - INFO - 文件包含NUL字符，确认为二进制文件
2025-05-05 17:54:15 - app.services.document_service - INFO - Base64编码完成，编码后大小: 216626 字节
2025-05-05 17:54:15 - app.services.document_service - INFO - 准备创建文档记录
2025-05-05 17:54:15 - app.services.document_service - INFO - 创建文档: 验证码.pdf, 类型: pdf, 用户ID: 1
2025-05-05 17:54:18 - app.services.document_service - INFO - 文档创建成功: ID=18
2025-05-05 17:54:18 - app.routers.documents - INFO - 文件处理成功，文档ID: 18
2025-05-05 17:54:18 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-05 17:54:19 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-05 17:54:19 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-05 17:54:19 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-05 17:54:19 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-05 17:54:19 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-05 17:54:19 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-05 17:54:20 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-05 17:54:20 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-05 17:54:20 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-05 17:54:20 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-05-05 17:54:20 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-05-05 17:54:20 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-05 17:54:20 - app.services.vector_store - INFO - 集合 knowledge_base 已存在
2025-05-05 17:54:20 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections/knowledge_base "HTTP/1.1 200 OK"
2025-05-05 17:54:20 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-05 17:54:21 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-05 17:54:28 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-05 17:54:28 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-05 17:54:28 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-05 17:54:29 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-05 17:54:29 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-05-05 17:54:29 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-05-05 17:54:29 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-05 17:54:29 - app.services.vector_store - INFO - 集合 knowledge_base 已存在
2025-05-05 17:54:29 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections/knowledge_base "HTTP/1.1 200 OK"
2025-05-05 17:54:29 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-05 17:54:30 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-05 17:54:30 - app.routers.documents - INFO - 接收到文件上传请求: Neo4j-33250fb6-Created-2025-04-11.txt, 类型: text/plain
2025-05-05 17:54:30 - app.routers.documents - INFO - 解析元数据: {"name":"Neo4j-33250fb6-Created-2025-04-11"}...
2025-05-05 17:54:30 - app.routers.documents - INFO - 开始处理上传的文件
2025-05-05 17:54:30 - app.services.document_service - INFO - 开始处理文件: Neo4j-33250fb6-Created-2025-04-11.txt, 内容类型: text/plain
2025-05-05 17:54:30 - app.services.document_service - INFO - 文件大小: 322 字节
2025-05-05 17:54:30 - app.services.document_service - INFO - 文件类型识别为: txt
2025-05-05 17:54:30 - app.services.document_service - INFO - 文本文件类型: txt，使用普通UTF-8解码
2025-05-05 17:54:30 - app.services.document_service - INFO - 准备创建文档记录
2025-05-05 17:54:30 - app.services.document_service - INFO - 创建文档: Neo4j-33250fb6-Created-2025-04-11.txt, 类型: txt, 用户ID: 1
2025-05-05 17:54:30 - app.services.document_service - INFO - 文档创建成功: ID=19
2025-05-05 17:54:30 - app.routers.documents - INFO - 文件处理成功，文档ID: 19
2025-05-05 17:54:30 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-05 17:54:30 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-05 17:54:30 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-05 17:54:30 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-05 17:54:30 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-05 17:54:30 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-05 17:54:30 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-05 17:54:30 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-05 17:54:30 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-05-05 17:54:30 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-05-05 17:54:30 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-05-05 17:54:30 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-05-05 17:54:30 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-05 17:54:30 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-05 17:54:30 - app.services.vector_store - INFO - 集合 knowledge_base 已存在
2025-05-05 17:54:30 - app.services.vector_store - INFO - 集合 knowledge_base 已存在
2025-05-05 17:54:30 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections/knowledge_base "HTTP/1.1 200 OK"
2025-05-05 17:54:30 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections/knowledge_base "HTTP/1.1 200 OK"
2025-05-05 17:54:31 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-05 17:54:31 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-05 17:54:32 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-05 17:54:32 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-05 17:54:34 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-05 17:54:34 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-05 17:54:34 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-05 17:54:35 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-05 17:54:35 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-05-05 17:54:35 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-05-05 17:54:35 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-05 17:54:35 - app.services.vector_store - INFO - 集合 knowledge_base 已存在
2025-05-05 17:54:35 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections/knowledge_base "HTTP/1.1 200 OK"
2025-05-05 17:54:35 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-05 17:54:35 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-05 17:57:26 - root - INFO - 日志系统初始化完成
2025-05-05 17:57:27 - app.main - INFO - 数据库表创建完成
2025-05-05 18:07:09 - root - INFO - 日志系统初始化完成
2025-05-05 18:07:10 - app.main - INFO - 数据库表创建完成
2025-05-05 18:07:19 - root - INFO - 日志系统初始化完成
2025-05-05 18:07:21 - app.main - INFO - 数据库表创建完成
2025-05-05 18:08:13 - root - INFO - 日志系统初始化完成
2025-05-05 18:08:14 - app.main - INFO - 数据库表创建完成
2025-05-05 18:11:22 - root - INFO - 日志系统初始化完成
2025-05-05 18:11:25 - app.main - INFO - 数据库表创建完成
2025-05-05 18:12:09 - root - INFO - 日志系统初始化完成
2025-05-05 18:12:11 - app.main - INFO - 数据库表创建完成
2025-05-05 18:12:44 - root - INFO - 日志系统初始化完成
2025-05-05 18:12:45 - app.main - INFO - 数据库表创建完成
2025-05-05 18:12:55 - root - INFO - 日志系统初始化完成
2025-05-05 18:12:57 - app.main - INFO - 数据库表创建完成
2025-05-05 18:18:07 - app.services.vector_store - INFO - 初始化向量存储服务
2025-05-05 18:18:07 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-05 18:18:07 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-05 18:18:08 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-05 18:18:08 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-05 18:18:08 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-05-05 18:18:08 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-05-05 18:18:08 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-05 18:18:08 - app.services.vector_store - INFO - 创建集合: knowledge_base
2025-05-05 18:18:08 - app.services.vector_store - ERROR - 检查或创建集合失败: 'Settings' object has no attribute 'VECTOR_SIZE'
2025-05-05 18:18:08 - app.auth.dependencies - WARNING - 令牌解码失败: Signature verification failed.
2025-05-05 18:22:54 - root - INFO - 日志系统初始化完成
2025-05-05 18:22:55 - app.main - INFO - 数据库表创建完成
2025-05-05 18:25:21 - root - INFO - 日志系统初始化完成
2025-05-05 18:25:22 - app.main - INFO - 数据库表创建完成
2025-05-05 18:25:52 - root - INFO - 日志系统初始化完成
2025-05-05 18:25:53 - app.main - INFO - 数据库表创建完成
2025-05-05 18:26:48 - root - INFO - 日志系统初始化完成
2025-05-05 18:26:49 - app.main - INFO - 数据库表创建完成
2025-05-05 18:27:39 - root - INFO - 日志系统初始化完成
2025-05-05 18:27:45 - app.main - INFO - 数据库表创建完成
2025-05-05 18:28:37 - root - INFO - 日志系统初始化完成
2025-05-05 18:28:41 - app.main - INFO - 数据库表创建完成
2025-05-05 18:30:41 - root - INFO - 日志系统初始化完成
2025-05-05 18:30:54 - root - INFO - 日志系统初始化完成
2025-05-05 18:30:56 - app.main - INFO - 数据库表创建完成
2025-05-05 18:31:43 - root - INFO - 日志系统初始化完成
2025-05-05 18:31:47 - app.main - INFO - 数据库表创建完成
2025-05-05 18:32:03 - root - INFO - 日志系统初始化完成
2025-05-05 18:32:04 - app.main - INFO - 数据库表创建完成
2025-05-05 18:32:12 - app.services.vector_store - INFO - 初始化向量存储服务
2025-05-05 18:32:12 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-05 18:32:12 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-05 18:32:12 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-05 18:32:12 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-05 18:32:12 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-05-05 18:32:12 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-05-05 18:32:12 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-05 18:32:12 - app.services.vector_store - INFO - 创建集合: knowledge_base
2025-05-05 18:32:12 - app.services.vector_store - ERROR - 检查或创建集合失败: 'Settings' object has no attribute 'VECTOR_SIZE'
2025-05-05 18:32:12 - app.auth.dependencies - WARNING - 令牌解码失败: Signature verification failed.
2025-05-05 18:34:41 - root - INFO - 日志系统初始化完成
2025-05-05 18:34:42 - app.main - INFO - 数据库表创建完成
2025-05-05 18:34:51 - root - INFO - 日志系统初始化完成
2025-05-05 18:34:53 - app.main - INFO - 数据库表创建完成
2025-05-05 18:35:34 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-05 18:35:36 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-05 18:35:36 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-05 18:35:37 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-05 18:35:37 - app.services.vector_store - INFO - 初始化向量存储服务
2025-05-05 18:35:37 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-05 18:35:37 - app.services.vector_store - INFO - 初始化向量存储服务
2025-05-05 18:35:37 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-05 18:35:37 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-05 18:35:37 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-05 18:35:37 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-05 18:35:37 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-05 18:35:38 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-05 18:35:38 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-05-05 18:35:38 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-05-05 18:35:38 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-05 18:35:38 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-05-05 18:35:38 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-05-05 18:35:38 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-05 18:35:38 - app.services.vector_store - INFO - 创建集合: knowledge_base
2025-05-05 18:35:38 - app.services.vector_store - ERROR - 检查或创建集合失败: 'Settings' object has no attribute 'VECTOR_SIZE'
2025-05-05 18:35:38 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-05 18:35:38 - app.services.vector_store - INFO - 创建集合: knowledge_base
2025-05-05 18:35:38 - app.services.vector_store - ERROR - 检查或创建集合失败: 'Settings' object has no attribute 'VECTOR_SIZE'
2025-05-05 18:35:38 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-05 18:35:38 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-05 18:35:39 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-05 18:35:39 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-05 18:35:39 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-05 18:35:40 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-05 18:35:40 - app.services.vector_store - INFO - 初始化向量存储服务
2025-05-05 18:35:40 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-05 18:35:40 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-05 18:35:41 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-05 18:35:41 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-05 18:35:41 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-05-05 18:35:41 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-05-05 18:35:41 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-05 18:35:41 - app.services.vector_store - INFO - 创建集合: knowledge_base
2025-05-05 18:35:41 - app.services.vector_store - ERROR - 检查或创建集合失败: 'Settings' object has no attribute 'VECTOR_SIZE'
2025-05-05 18:35:41 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-05 18:35:41 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-05 18:35:50 - app.services.vector_store - INFO - 初始化向量存储服务
2025-05-05 18:35:50 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-05 18:35:50 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-05 18:35:50 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-05 18:35:50 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-05 18:35:50 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-05-05 18:35:50 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-05-05 18:35:50 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-05 18:35:50 - app.services.vector_store - INFO - 创建集合: knowledge_base
2025-05-05 18:35:50 - app.services.vector_store - ERROR - 检查或创建集合失败: 'Settings' object has no attribute 'VECTOR_SIZE'
2025-05-05 18:35:50 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-05 18:35:50 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-05 18:35:50 - app.routers.documents - INFO - 接收到文件上传请求: 验证码.pdf, 类型: application/pdf
2025-05-05 18:35:50 - app.routers.documents - INFO - 解析元数据: {"name":"验证码"}...
2025-05-05 18:35:50 - app.routers.documents - INFO - 开始处理上传的文件
2025-05-05 18:35:50 - app.services.document_service - INFO - 开始处理文件: 验证码.pdf, 内容类型: application/pdf
2025-05-05 18:35:50 - app.services.document_service - INFO - 文件大小: 162462 字节
2025-05-05 18:35:50 - app.services.document_service - INFO - 文件类型识别为: pdf
2025-05-05 18:35:50 - app.services.document_service - INFO - 检测到二进制文件类型: pdf，将进行Base64编码
2025-05-05 18:35:50 - app.services.document_service - INFO - 文件包含NUL字符，确认为二进制文件
2025-05-05 18:35:50 - app.services.document_service - INFO - Base64编码完成，编码后大小: 216626 字节
2025-05-05 18:35:50 - app.services.document_service - INFO - 准备创建文档记录
2025-05-05 18:35:50 - app.services.document_service - INFO - 创建文档: 验证码.pdf, 类型: pdf, 用户ID: 1
2025-05-05 18:35:51 - app.services.document_service - INFO - 文档创建成功: ID=20
2025-05-05 18:35:51 - app.services.task_service - INFO - 创建上传任务: 验证码.pdf, 用户: 1
2025-05-05 18:35:52 - app.services.task_service - INFO - 上传任务创建成功: beb0cb7f-3c5e-46a0-888e-95397fab52b8
2025-05-05 18:35:52 - app.routers.documents - INFO - 触发Celery任务处理文档: 20
2025-05-05 18:35:52 - app.routers.documents - INFO - 文件处理成功，文档ID: 20, 任务ID: beb0cb7f-3c5e-46a0-888e-95397fab52b8
2025-05-05 18:35:52 - app.services.vector_store - INFO - 初始化向量存储服务
2025-05-05 18:35:52 - app.services.vector_store - INFO - 初始化向量存储服务
2025-05-05 18:35:52 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-05 18:35:52 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-05 18:35:52 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-05 18:35:52 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-05 18:35:52 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-05 18:35:52 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-05 18:35:53 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-05 18:35:53 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-05-05 18:35:53 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-05-05 18:35:53 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-05 18:35:53 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-05-05 18:35:53 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-05-05 18:35:53 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-05 18:35:53 - app.services.vector_store - INFO - 创建集合: knowledge_base
2025-05-05 18:35:53 - app.services.vector_store - ERROR - 检查或创建集合失败: 'Settings' object has no attribute 'VECTOR_SIZE'
2025-05-05 18:35:53 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-05 18:35:54 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-05 18:35:54 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-05 18:35:54 - app.services.vector_store - INFO - 创建集合: knowledge_base
2025-05-05 18:35:54 - app.services.vector_store - ERROR - 检查或创建集合失败: 'Settings' object has no attribute 'VECTOR_SIZE'
2025-05-05 18:35:54 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-05 18:35:55 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-05 18:35:57 - app.services.vector_store - INFO - 初始化向量存储服务
2025-05-05 18:35:57 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-05 18:35:57 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-05 18:35:57 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-05 18:35:57 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-05 18:35:57 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-05-05 18:35:57 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-05-05 18:35:58 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-05 18:35:58 - app.services.vector_store - INFO - 创建集合: knowledge_base
2025-05-05 18:35:58 - app.services.vector_store - ERROR - 检查或创建集合失败: 'Settings' object has no attribute 'VECTOR_SIZE'
2025-05-05 18:35:58 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-05 18:35:58 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-05 18:37:43 - root - INFO - 日志系统初始化完成
2025-05-05 18:37:46 - app.main - INFO - 数据库表创建完成
2025-05-05 18:38:00 - root - INFO - 日志系统初始化完成
2025-05-05 18:38:01 - app.main - INFO - 数据库表创建完成
2025-05-05 18:38:15 - root - INFO - 日志系统初始化完成
2025-05-05 18:38:16 - app.main - INFO - 数据库表创建完成
2025-05-05 18:38:52 - root - INFO - 日志系统初始化完成
2025-05-05 18:38:56 - app.main - INFO - 数据库表创建完成
2025-05-05 18:39:04 - root - INFO - 日志系统初始化完成
2025-05-05 18:39:05 - app.main - INFO - 数据库表创建完成
2025-05-05 18:39:12 - root - INFO - 日志系统初始化完成
2025-05-05 18:39:14 - app.main - INFO - 数据库表创建完成
2025-05-05 18:39:24 - root - INFO - 日志系统初始化完成
2025-05-05 18:39:26 - app.main - INFO - 数据库表创建完成
2025-05-05 18:39:51 - root - INFO - 日志系统初始化完成
2025-05-05 18:39:53 - app.main - INFO - 数据库表创建完成
2025-05-05 18:40:24 - root - INFO - 日志系统初始化完成
2025-05-05 18:40:27 - app.main - INFO - 数据库表创建完成
2025-05-05 18:40:34 - root - INFO - 日志系统初始化完成
2025-05-05 18:40:35 - app.main - INFO - 数据库表创建完成
2025-05-05 18:40:55 - root - INFO - 日志系统初始化完成
2025-05-05 18:40:56 - app.main - INFO - 数据库表创建完成
2025-05-05 18:41:33 - root - INFO - 日志系统初始化完成
2025-05-05 18:41:34 - app.main - INFO - 数据库表创建完成
2025-05-05 18:41:59 - root - INFO - 日志系统初始化完成
2025-05-05 18:42:06 - root - INFO - 日志系统初始化完成
2025-05-05 18:42:10 - app.main - INFO - 数据库表创建完成
2025-05-05 18:42:21 - root - INFO - 日志系统初始化完成
2025-05-05 18:42:22 - app.main - INFO - 数据库表创建完成
2025-05-05 18:42:31 - app.auth.dependencies - WARNING - 认证请求没有提供令牌
2025-05-05 18:42:46 - app.services.vector_store - INFO - 初始化向量存储服务
2025-05-05 18:42:46 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-05 18:42:46 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-05 18:42:47 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-05 18:42:47 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-05 18:42:47 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-05-05 18:42:47 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-05-05 18:42:47 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-05 18:42:47 - app.services.vector_store - INFO - 创建集合: knowledge_base
2025-05-05 18:42:48 - app.services.vector_store - ERROR - 检查或创建集合失败: 'Settings' object has no attribute 'VECTOR_SIZE'
2025-05-05 18:42:48 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-05 18:42:48 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-05 18:43:02 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-05 18:43:03 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-05 18:43:03 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-05 18:43:03 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-05 18:43:03 - app.services.vector_store - INFO - 初始化向量存储服务
2025-05-05 18:43:03 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-05 18:43:03 - app.services.vector_store - INFO - 初始化向量存储服务
2025-05-05 18:43:03 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-05 18:43:03 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-05 18:43:03 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-05 18:43:03 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-05 18:43:04 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-05 18:43:04 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-05 18:43:04 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-05 18:43:04 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-05-05 18:43:04 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-05-05 18:43:04 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-05-05 18:43:04 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-05-05 18:43:04 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-05 18:43:04 - app.services.vector_store - INFO - 创建集合: knowledge_base
2025-05-05 18:43:04 - app.services.vector_store - ERROR - 检查或创建集合失败: 'Settings' object has no attribute 'VECTOR_SIZE'
2025-05-05 18:43:04 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-05 18:43:04 - app.services.vector_store - INFO - 创建集合: knowledge_base
2025-05-05 18:43:04 - app.services.vector_store - ERROR - 检查或创建集合失败: 'Settings' object has no attribute 'VECTOR_SIZE'
2025-05-05 18:43:05 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-05 18:43:05 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-05 18:43:05 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-05 18:43:05 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-05 18:43:05 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-05 18:43:05 - app.services.vector_store - INFO - 初始化向量存储服务
2025-05-05 18:43:05 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-05 18:43:05 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-05 18:43:05 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-05 18:43:05 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-05 18:43:05 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-05-05 18:43:05 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-05-05 18:43:05 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-05 18:43:05 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-05 18:43:05 - app.services.vector_store - INFO - 创建集合: knowledge_base
2025-05-05 18:43:05 - app.services.vector_store - ERROR - 检查或创建集合失败: 'Settings' object has no attribute 'VECTOR_SIZE'
2025-05-05 18:43:05 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-05 18:43:06 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-05 18:43:06 - app.services.vector_store - INFO - 初始化向量存储服务
2025-05-05 18:43:06 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-05 18:43:06 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-05 18:43:06 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-05 18:43:06 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-05 18:43:06 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-05-05 18:43:06 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-05-05 18:43:06 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-05 18:43:06 - app.services.vector_store - INFO - 创建集合: knowledge_base
2025-05-05 18:43:06 - app.services.vector_store - ERROR - 检查或创建集合失败: 'Settings' object has no attribute 'VECTOR_SIZE'
2025-05-05 18:43:06 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-05 18:43:07 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-05 18:45:43 - root - INFO - 日志系统初始化完成
2025-05-05 18:45:45 - app.main - INFO - 数据库表创建完成
2025-05-05 18:46:14 - app.services.vector_store - INFO - 初始化向量存储服务
2025-05-05 18:46:14 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-05 18:46:14 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-05 18:46:14 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-05 18:46:14 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-05 18:46:14 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-05-05 18:46:14 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-05-05 18:46:15 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-05 18:46:15 - app.services.vector_store - INFO - 创建集合: knowledge_base
2025-05-05 18:46:15 - app.services.vector_store - ERROR - 检查或创建集合失败: 'Settings' object has no attribute 'VECTOR_SIZE'
2025-05-05 18:46:15 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-05 18:46:15 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-05 18:46:15 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-05 18:46:15 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-05 18:49:24 - root - INFO - 日志系统初始化完成
2025-05-05 18:49:25 - app.main - INFO - 数据库表创建完成
2025-05-05 18:52:17 - root - INFO - 日志系统初始化完成
2025-05-05 18:52:19 - app.main - INFO - 数据库表创建完成
2025-05-05 18:52:26 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-05 18:52:26 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-05 18:52:26 - app.services.vector_store - INFO - 初始化向量存储服务
2025-05-05 18:52:26 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-05 18:52:26 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-05 18:52:27 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-05 18:52:27 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-05 18:52:27 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-05-05 18:52:27 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-05-05 18:52:27 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-05 18:52:27 - app.services.vector_store - INFO - 创建集合: knowledge_base
2025-05-05 18:52:27 - app.services.vector_store - ERROR - 检查或创建集合失败: 'Settings' object has no attribute 'VECTOR_SIZE'
2025-05-05 18:52:28 - app.services.vector_store - INFO - 初始化向量存储服务
2025-05-05 18:52:28 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-05 18:52:28 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-05 18:52:28 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-05 18:52:28 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-05 18:52:28 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-05 18:52:28 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-05-05 18:52:28 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-05-05 18:52:28 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-05 18:52:28 - app.services.vector_store - INFO - 创建集合: knowledge_base
2025-05-05 18:52:28 - app.services.vector_store - ERROR - 检查或创建集合失败: 'Settings' object has no attribute 'VECTOR_SIZE'
2025-05-05 18:52:28 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-05 18:52:28 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-05 18:52:29 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-05 18:52:29 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-05 18:52:29 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-05 18:52:31 - app.services.vector_store - INFO - 初始化向量存储服务
2025-05-05 18:52:31 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-05 18:52:31 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-05 18:52:31 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-05 18:52:31 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-05 18:52:31 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-05-05 18:52:31 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-05-05 18:52:31 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-05 18:52:31 - app.services.vector_store - INFO - 创建集合: knowledge_base
2025-05-05 18:52:31 - app.services.vector_store - ERROR - 检查或创建集合失败: 'Settings' object has no attribute 'VECTOR_SIZE'
2025-05-05 18:52:31 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-05 18:52:31 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-05 18:52:32 - app.services.vector_store - INFO - 初始化向量存储服务
2025-05-05 18:52:32 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-05 18:52:32 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-05 18:52:32 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-05 18:52:32 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-05 18:52:32 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-05-05 18:52:32 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-05-05 18:52:32 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-05 18:52:32 - app.services.vector_store - INFO - 创建集合: knowledge_base
2025-05-05 18:52:32 - app.services.vector_store - ERROR - 检查或创建集合失败: 'Settings' object has no attribute 'VECTOR_SIZE'
2025-05-05 18:52:32 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-05 18:52:32 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-05 18:52:32 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-05 18:52:32 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-05 18:56:19 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-05 18:56:19 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-05 18:56:35 - root - INFO - 日志系统初始化完成
2025-05-05 18:56:41 - app.main - INFO - 数据库表创建完成
2025-05-05 18:56:43 - app.services.vector_store - INFO - 初始化向量存储服务
2025-05-05 18:56:43 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-05 18:56:43 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-05 18:56:43 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-05 18:56:43 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-05 18:56:43 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-05-05 18:56:43 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-05-05 18:56:43 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-05 18:56:43 - app.services.vector_store - INFO - 创建集合: knowledge_base
2025-05-05 18:56:43 - app.services.vector_store - ERROR - 检查或创建集合失败: 'Settings' object has no attribute 'VECTOR_SIZE'
2025-05-05 18:56:43 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-05 18:56:44 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-05 18:56:44 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-05 18:56:44 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-05 18:57:05 - app.services.vector_store - INFO - 初始化向量存储服务
2025-05-05 18:57:05 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-05 18:57:05 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-05 18:57:05 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-05 18:57:05 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-05 18:57:05 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-05-05 18:57:05 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-05-05 18:57:05 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-05 18:57:05 - app.services.vector_store - INFO - 创建集合: knowledge_base
2025-05-05 18:57:05 - app.services.vector_store - ERROR - 检查或创建集合失败: 'Settings' object has no attribute 'VECTOR_SIZE'
2025-05-05 18:57:05 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-05 18:57:05 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-05 18:57:05 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-05 18:57:06 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-05 18:58:32 - root - INFO - 日志系统初始化完成
2025-05-05 18:58:33 - app.main - INFO - 数据库表创建完成
2025-05-05 18:58:45 - root - INFO - 日志系统初始化完成
2025-05-05 18:58:46 - app.main - INFO - 数据库表创建完成
2025-05-05 18:58:55 - root - INFO - 日志系统初始化完成
2025-05-05 18:58:55 - app.main - INFO - 数据库表创建完成
2025-05-05 18:59:54 - root - INFO - 日志系统初始化完成
2025-05-05 18:59:54 - app.main - INFO - 数据库表创建完成
2025-05-05 19:00:58 - root - INFO - 日志系统初始化完成
2025-05-05 19:00:59 - app.main - INFO - 数据库表创建完成
2025-05-05 19:06:19 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-05 19:06:19 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-05 19:06:19 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-05 19:06:19 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-05 19:06:19 - app.services.vector_store - INFO - 初始化向量存储服务
2025-05-05 19:06:19 - app.services.vector_store - INFO - 初始化向量存储服务
2025-05-05 19:06:19 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-05 19:06:19 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-05 19:06:19 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-05 19:06:19 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-05 19:06:19 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-05 19:06:19 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-05 19:06:19 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-05 19:06:19 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-05-05 19:06:19 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-05-05 19:06:19 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-05 19:06:19 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-05-05 19:06:19 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-05-05 19:06:20 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-05 19:06:20 - app.services.vector_store - INFO - 创建集合: knowledge_base
2025-05-05 19:06:20 - app.services.vector_store - ERROR - 检查或创建集合失败: 'Settings' object has no attribute 'VECTOR_SIZE'
2025-05-05 19:06:20 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-05 19:06:20 - app.services.vector_store - INFO - 创建集合: knowledge_base
2025-05-05 19:06:20 - app.services.vector_store - ERROR - 检查或创建集合失败: 'Settings' object has no attribute 'VECTOR_SIZE'
2025-05-05 19:06:20 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-05 19:06:20 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-05 19:06:20 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-05 19:06:20 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-05 19:06:21 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-05 19:06:21 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-05 19:08:00 - root - INFO - 日志系统初始化完成
2025-05-05 19:08:01 - app.main - INFO - 数据库表创建完成
2025-05-05 19:08:08 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-05 19:08:08 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-05 19:08:08 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-05 19:08:08 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-05 19:08:08 - app.services.vector_store - INFO - 初始化向量存储服务
2025-05-05 19:08:08 - app.services.vector_store - INFO - 初始化向量存储服务
2025-05-05 19:08:08 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-05 19:08:08 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-05 19:08:08 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-05 19:08:08 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-05 19:08:08 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-05 19:08:08 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-05 19:08:08 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-05 19:08:08 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-05 19:08:08 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-05-05 19:08:08 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-05-05 19:08:08 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-05-05 19:08:08 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-05-05 19:08:08 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-05 19:08:08 - app.services.vector_store - INFO - 创建集合: knowledge_base
2025-05-05 19:08:08 - app.services.vector_store - ERROR - 检查或创建集合失败: 'Settings' object has no attribute 'VECTOR_SIZE'
2025-05-05 19:08:08 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-05 19:08:08 - app.services.vector_store - INFO - 创建集合: knowledge_base
2025-05-05 19:08:08 - app.services.vector_store - ERROR - 检查或创建集合失败: 'Settings' object has no attribute 'VECTOR_SIZE'
2025-05-05 19:08:09 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-05 19:08:09 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-05 19:08:09 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-05 19:08:09 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-05 19:08:09 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-05 19:08:10 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-05 19:08:10 - app.services.vector_store - INFO - 初始化向量存储服务
2025-05-05 19:08:10 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-05 19:08:10 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-05 19:08:10 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-05 19:08:10 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-05 19:08:10 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-05-05 19:08:10 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-05-05 19:08:10 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-05 19:08:10 - app.services.vector_store - INFO - 创建集合: knowledge_base
2025-05-05 19:08:10 - app.services.vector_store - ERROR - 检查或创建集合失败: 'Settings' object has no attribute 'VECTOR_SIZE'
2025-05-05 19:08:10 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-05 19:08:10 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-05 19:08:11 - app.services.vector_store - INFO - 初始化向量存储服务
2025-05-05 19:08:11 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-05 19:08:11 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-05 19:08:11 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-05 19:08:11 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-05 19:08:11 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-05-05 19:08:11 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-05-05 19:08:11 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-05 19:08:11 - app.services.vector_store - INFO - 创建集合: knowledge_base
2025-05-05 19:08:11 - app.services.vector_store - ERROR - 检查或创建集合失败: 'Settings' object has no attribute 'VECTOR_SIZE'
2025-05-05 19:08:11 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-05 19:08:11 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-05 19:08:11 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-05 19:08:11 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-05 19:10:13 - root - INFO - 日志系统初始化完成
2025-05-05 19:10:15 - app.main - INFO - 数据库表创建完成
2025-05-05 19:10:32 - root - INFO - 日志系统初始化完成
2025-05-05 19:10:33 - app.main - INFO - 数据库表创建完成
2025-05-05 19:10:33 - app.services.vector_store - INFO - 初始化向量存储服务
2025-05-05 19:10:33 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-05 19:10:33 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-05 19:10:33 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-05 19:10:33 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-05 19:10:33 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-05-05 19:10:33 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-05-05 19:10:33 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-05 19:10:33 - app.services.vector_store - INFO - 创建集合: knowledge_base
2025-05-05 19:10:33 - app.services.vector_store - ERROR - 检查或创建集合失败: 'Settings' object has no attribute 'VECTOR_SIZE'
2025-05-05 19:10:33 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-05 19:10:33 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-05 19:11:06 - root - INFO - 日志系统初始化完成
2025-05-05 19:11:07 - app.main - INFO - 数据库表创建完成
2025-05-05 19:11:08 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-05 19:11:08 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-05 19:11:08 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-05 19:11:09 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-05 19:18:33 - root - INFO - 日志系统初始化完成
2025-05-05 19:18:34 - app.main - INFO - 数据库表创建完成
2025-05-05 19:18:51 - root - INFO - 日志系统初始化完成
2025-05-05 19:18:52 - app.main - INFO - 数据库表创建完成
2025-05-05 19:19:47 - root - INFO - 日志系统初始化完成
2025-05-05 19:19:49 - app.main - INFO - 数据库表创建完成
2025-05-05 19:19:49 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-05 19:19:49 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-05 19:19:49 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-05 19:19:49 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-05 19:19:49 - app.services.vector_store - INFO - 初始化向量存储服务
2025-05-05 19:19:49 - app.services.vector_store - INFO - 初始化向量存储服务
2025-05-05 19:19:49 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-05 19:19:49 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-05 19:19:49 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-05 19:19:49 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-05 19:19:49 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-05 19:19:49 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-05 19:19:50 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-05 19:19:50 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-05-05 19:19:50 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-05-05 19:19:50 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-05 19:19:50 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-05-05 19:19:50 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-05-05 19:19:50 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-05 19:19:50 - app.services.vector_store - INFO - 创建集合: knowledge_base
2025-05-05 19:19:50 - app.services.vector_store - ERROR - 检查或创建集合失败: 'Settings' object has no attribute 'VECTOR_SIZE'
2025-05-05 19:19:50 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-05 19:19:50 - app.services.vector_store - INFO - 创建集合: knowledge_base
2025-05-05 19:19:50 - app.services.vector_store - ERROR - 检查或创建集合失败: 'Settings' object has no attribute 'VECTOR_SIZE'
2025-05-05 19:19:50 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-05 19:19:50 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-05 19:19:50 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-05 19:19:51 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-05 19:19:51 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-05 19:19:51 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-05 19:19:51 - app.services.vector_store - INFO - 初始化向量存储服务
2025-05-05 19:19:51 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-05 19:19:51 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-05 19:19:51 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-05 19:19:52 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-05 19:19:52 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-05-05 19:19:52 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-05-05 19:19:52 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-05 19:19:52 - app.services.vector_store - INFO - 创建集合: knowledge_base
2025-05-05 19:19:52 - app.services.vector_store - ERROR - 检查或创建集合失败: 'Settings' object has no attribute 'VECTOR_SIZE'
2025-05-05 19:19:52 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-05 19:19:52 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-05 19:19:52 - app.services.vector_store - INFO - 初始化向量存储服务
2025-05-05 19:19:52 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-05 19:19:52 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-05 19:19:52 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-05 19:19:52 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-05 19:19:52 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-05-05 19:19:52 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-05-05 19:19:52 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-05 19:19:52 - app.services.vector_store - INFO - 创建集合: knowledge_base
2025-05-05 19:19:52 - app.services.vector_store - ERROR - 检查或创建集合失败: 'Settings' object has no attribute 'VECTOR_SIZE'
2025-05-05 19:19:52 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-05 19:19:53 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-05 19:19:53 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-05 19:19:53 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-05 19:21:49 - root - INFO - 日志系统初始化完成
2025-05-05 19:21:50 - app.main - INFO - 数据库表创建完成
2025-05-05 19:21:58 - root - INFO - 日志系统初始化完成
2025-05-05 19:21:59 - app.main - INFO - 数据库表创建完成
2025-05-05 19:22:07 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-05 19:22:07 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-05 19:22:07 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-05 19:22:07 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-05 19:22:07 - app.services.vector_store - INFO - 初始化向量存储服务
2025-05-05 19:22:07 - app.services.vector_store - INFO - 初始化向量存储服务
2025-05-05 19:22:07 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-05 19:22:07 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-05 19:22:07 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-05 19:22:07 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-05 19:22:07 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-05 19:22:07 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-05 19:22:07 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-05 19:22:07 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-05 19:22:07 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-05-05 19:22:07 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-05-05 19:22:07 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-05-05 19:22:07 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-05-05 19:22:07 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-05 19:22:07 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-05 19:22:07 - app.services.vector_store - INFO - 创建集合: knowledge_base
2025-05-05 19:22:07 - app.services.vector_store - INFO - 创建集合: knowledge_base
2025-05-05 19:22:07 - app.services.vector_store - ERROR - 检查或创建集合失败: 'Settings' object has no attribute 'VECTOR_SIZE'
2025-05-05 19:22:07 - app.services.vector_store - ERROR - 检查或创建集合失败: 'Settings' object has no attribute 'VECTOR_SIZE'
2025-05-05 19:22:08 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-05 19:22:08 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-05 19:22:08 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-05 19:22:09 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-05 19:22:09 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-05 19:22:09 - app.services.vector_store - INFO - 初始化向量存储服务
2025-05-05 19:22:09 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-05 19:22:09 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-05 19:22:09 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-05 19:22:09 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-05 19:22:09 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-05-05 19:22:09 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-05-05 19:22:09 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-05 19:22:09 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-05 19:22:09 - app.services.vector_store - INFO - 创建集合: knowledge_base
2025-05-05 19:22:09 - app.services.vector_store - ERROR - 检查或创建集合失败: 'Settings' object has no attribute 'VECTOR_SIZE'
2025-05-05 19:22:09 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-05 19:22:09 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-05 19:22:10 - app.services.vector_store - INFO - 初始化向量存储服务
2025-05-05 19:22:10 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-05 19:22:10 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-05 19:22:10 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-05 19:22:10 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-05 19:22:10 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-05-05 19:22:10 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-05-05 19:22:10 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-05 19:22:10 - app.services.vector_store - INFO - 创建集合: knowledge_base
2025-05-05 19:22:10 - app.services.vector_store - ERROR - 检查或创建集合失败: 'Settings' object has no attribute 'VECTOR_SIZE'
2025-05-05 19:22:10 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-05 19:22:10 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-05 19:22:10 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-05 19:22:10 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-05 19:24:12 - root - INFO - 日志系统初始化完成
2025-05-05 19:24:13 - app.main - INFO - 数据库表创建完成
2025-05-05 19:27:23 - root - INFO - 日志系统初始化完成
2025-05-05 19:27:26 - app.main - INFO - 数据库表创建完成
2025-05-05 19:27:39 - root - INFO - 日志系统初始化完成
2025-05-05 19:27:39 - app.main - INFO - 数据库表创建完成
2025-05-05 19:27:58 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-05 19:27:59 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-05 19:27:59 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-05 19:27:59 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-05 19:27:59 - app.services.vector_store - INFO - 初始化向量存储服务
2025-05-05 19:27:59 - app.services.vector_store - INFO - 初始化向量存储服务
2025-05-05 19:27:59 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-05 19:27:59 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-05 19:27:59 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-05 19:27:59 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-05 19:27:59 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-05 19:27:59 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-05 19:27:59 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-05 19:27:59 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-05 19:27:59 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-05-05 19:27:59 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-05-05 19:27:59 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-05-05 19:27:59 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-05-05 19:27:59 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-05 19:27:59 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-05 19:27:59 - app.services.vector_store - INFO - 创建集合: knowledge_base
2025-05-05 19:27:59 - app.services.vector_store - INFO - 创建集合: knowledge_base
2025-05-05 19:27:59 - app.services.vector_store - ERROR - 检查或创建集合失败: 'Settings' object has no attribute 'VECTOR_SIZE'
2025-05-05 19:27:59 - app.services.vector_store - ERROR - 检查或创建集合失败: 'Settings' object has no attribute 'VECTOR_SIZE'
2025-05-05 19:28:00 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-05 19:28:00 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-05 19:28:00 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-05 19:28:00 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-05 19:28:00 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-05 19:28:01 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-05 19:28:01 - app.services.vector_store - INFO - 初始化向量存储服务
2025-05-05 19:28:01 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-05 19:28:01 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-05 19:28:01 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-05 19:28:01 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-05 19:28:01 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-05-05 19:28:01 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-05-05 19:28:01 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-05 19:28:01 - app.services.vector_store - INFO - 创建集合: knowledge_base
2025-05-05 19:28:01 - app.services.vector_store - ERROR - 检查或创建集合失败: 'Settings' object has no attribute 'VECTOR_SIZE'
2025-05-05 19:28:01 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-05 19:28:01 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-05 19:28:01 - app.services.vector_store - INFO - 初始化向量存储服务
2025-05-05 19:28:01 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-05 19:28:01 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-05 19:28:01 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-05 19:28:01 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-05 19:28:01 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-05-05 19:28:01 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-05-05 19:28:01 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-05 19:28:01 - app.services.vector_store - INFO - 创建集合: knowledge_base
2025-05-05 19:28:01 - app.services.vector_store - ERROR - 检查或创建集合失败: 'Settings' object has no attribute 'VECTOR_SIZE'
2025-05-05 19:28:01 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-05 19:28:01 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-05 19:28:02 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-05 19:28:02 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-05 19:29:29 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-05 19:29:30 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-05 19:29:35 - root - INFO - 日志系统初始化完成
2025-05-05 19:29:35 - app.main - INFO - 数据库表创建完成
2025-05-05 19:29:53 - root - INFO - 日志系统初始化完成
2025-05-05 19:29:54 - app.main - INFO - 数据库表创建完成
2025-05-05 19:29:54 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-05 19:29:54 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-05 19:30:12 - root - INFO - 日志系统初始化完成
2025-05-05 19:30:13 - app.main - INFO - 数据库表创建完成
2025-05-05 19:30:25 - root - INFO - 日志系统初始化完成
2025-05-05 19:30:26 - app.main - INFO - 数据库表创建完成
2025-05-05 19:30:30 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-05 19:30:31 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-05 19:30:31 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-05 19:30:31 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-05 19:30:31 - app.services.vector_store - INFO - 初始化向量存储服务
2025-05-05 19:30:31 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-05 19:30:31 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-05 19:30:31 - app.services.vector_store - INFO - 初始化向量存储服务
2025-05-05 19:30:31 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-05 19:30:31 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-05 19:30:31 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-05 19:30:31 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-05 19:30:31 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-05 19:30:31 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-05-05 19:30:31 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-05-05 19:30:31 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-05 19:30:31 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-05-05 19:30:31 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-05-05 19:30:31 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-05 19:30:31 - app.services.vector_store - INFO - 创建集合: knowledge_base
2025-05-05 19:30:31 - app.services.vector_store - ERROR - 检查或创建集合失败: 'Settings' object has no attribute 'VECTOR_SIZE'
2025-05-05 19:30:32 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-05 19:30:32 - app.services.vector_store - INFO - 创建集合: knowledge_base
2025-05-05 19:30:32 - app.services.vector_store - ERROR - 检查或创建集合失败: 'Settings' object has no attribute 'VECTOR_SIZE'
2025-05-05 19:30:32 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-05 19:30:32 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-05 19:30:32 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-05 19:30:32 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-05 19:30:33 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-05 19:30:33 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-05 19:30:33 - app.services.vector_store - INFO - 初始化向量存储服务
2025-05-05 19:30:33 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-05 19:30:33 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-05 19:30:33 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-05 19:30:34 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-05 19:30:34 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-05-05 19:30:34 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-05-05 19:30:34 - app.services.vector_store - INFO - 初始化向量存储服务
2025-05-05 19:30:34 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-05 19:30:34 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-05 19:30:34 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-05 19:30:34 - app.services.vector_store - INFO - 创建集合: knowledge_base
2025-05-05 19:30:34 - app.services.vector_store - ERROR - 检查或创建集合失败: 'Settings' object has no attribute 'VECTOR_SIZE'
2025-05-05 19:30:34 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-05 19:30:34 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-05 19:30:34 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-05 19:30:34 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-05 19:30:34 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-05-05 19:30:34 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-05-05 19:30:34 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-05 19:30:34 - app.services.vector_store - INFO - 创建集合: knowledge_base
2025-05-05 19:30:34 - app.services.vector_store - ERROR - 检查或创建集合失败: 'Settings' object has no attribute 'VECTOR_SIZE'
2025-05-05 19:30:34 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-05 19:30:34 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-05 19:30:35 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-05 19:30:35 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-05 19:32:01 - root - INFO - 日志系统初始化完成
2025-05-05 19:32:02 - app.main - INFO - 数据库表创建完成
2025-05-05 19:32:12 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-05 19:32:12 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-05 19:32:27 - root - INFO - 日志系统初始化完成
2025-05-05 19:32:27 - app.main - INFO - 数据库表创建完成
2025-05-05 19:33:04 - root - INFO - 日志系统初始化完成
2025-05-05 19:33:05 - app.main - INFO - 数据库表创建完成
2025-05-05 19:33:05 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-05 19:33:05 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-05 19:33:05 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-05 19:33:05 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-05 19:33:05 - app.services.vector_store - INFO - 初始化向量存储服务
2025-05-05 19:33:05 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-05 19:33:05 - app.services.vector_store - INFO - 初始化向量存储服务
2025-05-05 19:33:05 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-05 19:33:05 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-05 19:33:05 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-05 19:33:05 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-05 19:33:05 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-05 19:33:05 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-05 19:33:05 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-05 19:33:05 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-05-05 19:33:05 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-05-05 19:33:05 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-05-05 19:33:05 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-05-05 19:33:05 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-05 19:33:05 - app.services.vector_store - INFO - 创建集合: knowledge_base
2025-05-05 19:33:05 - app.services.vector_store - ERROR - 检查或创建集合失败: 'Settings' object has no attribute 'VECTOR_SIZE'
2025-05-05 19:33:05 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-05 19:33:05 - app.services.vector_store - INFO - 创建集合: knowledge_base
2025-05-05 19:33:05 - app.services.vector_store - ERROR - 检查或创建集合失败: 'Settings' object has no attribute 'VECTOR_SIZE'
2025-05-05 19:33:06 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-05 19:33:06 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-05 19:33:06 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-05 19:33:06 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-05 19:33:06 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-05 19:33:06 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-05 19:33:06 - app.services.vector_store - INFO - 初始化向量存储服务
2025-05-05 19:33:06 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-05 19:33:06 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-05 19:33:07 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-05 19:33:07 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-05 19:33:07 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-05-05 19:33:07 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-05-05 19:33:07 - app.services.vector_store - INFO - 初始化向量存储服务
2025-05-05 19:33:07 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-05 19:33:07 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-05 19:33:07 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-05 19:33:07 - app.services.vector_store - INFO - 创建集合: knowledge_base
2025-05-05 19:33:07 - app.services.vector_store - ERROR - 检查或创建集合失败: 'Settings' object has no attribute 'VECTOR_SIZE'
2025-05-05 19:33:07 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-05 19:33:07 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-05 19:33:07 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-05 19:33:07 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-05 19:33:07 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-05-05 19:33:07 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-05-05 19:33:07 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-05 19:33:07 - app.services.vector_store - INFO - 创建集合: knowledge_base
2025-05-05 19:33:07 - app.services.vector_store - ERROR - 检查或创建集合失败: 'Settings' object has no attribute 'VECTOR_SIZE'
2025-05-05 19:33:07 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-05 19:33:07 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-05 19:33:07 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-05 19:33:07 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-05 19:35:57 - root - INFO - 日志系统初始化完成
2025-05-05 19:36:04 - app.main - INFO - 数据库表创建完成
2025-05-05 19:36:04 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-05 19:36:04 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-05 19:36:05 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-05 19:36:05 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-05 19:36:05 - app.services.vector_store - INFO - 初始化向量存储服务
2025-05-05 19:36:05 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-05 19:36:05 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-05 19:36:05 - app.services.vector_store - INFO - 初始化向量存储服务
2025-05-05 19:36:05 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-05 19:36:05 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-05 19:36:05 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-05 19:36:05 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-05 19:36:05 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-05 19:36:05 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-05 19:36:05 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-05-05 19:36:05 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-05-05 19:36:05 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-05-05 19:36:05 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-05-05 19:36:05 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-05 19:36:05 - app.services.vector_store - INFO - 创建集合: knowledge_base
2025-05-05 19:36:05 - app.services.vector_store - ERROR - 检查或创建集合失败: 'Settings' object has no attribute 'VECTOR_SIZE'
2025-05-05 19:36:05 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-05 19:36:05 - app.services.vector_store - INFO - 创建集合: knowledge_base
2025-05-05 19:36:05 - app.services.vector_store - ERROR - 检查或创建集合失败: 'Settings' object has no attribute 'VECTOR_SIZE'
2025-05-05 19:36:05 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-05 19:36:05 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-05 19:36:05 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-05 19:36:06 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-05 19:36:06 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-05 19:36:06 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-05 19:36:06 - app.services.vector_store - INFO - 初始化向量存储服务
2025-05-05 19:36:06 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-05 19:36:06 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-05 19:36:06 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-05 19:36:06 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-05 19:36:06 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-05-05 19:36:06 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-05-05 19:36:06 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-05 19:36:06 - app.services.vector_store - INFO - 创建集合: knowledge_base
2025-05-05 19:36:06 - app.services.vector_store - ERROR - 检查或创建集合失败: 'Settings' object has no attribute 'VECTOR_SIZE'
2025-05-05 19:36:06 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-05 19:36:07 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-05 19:36:07 - app.services.vector_store - INFO - 初始化向量存储服务
2025-05-05 19:36:07 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-05 19:36:07 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-05 19:36:07 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-05 19:36:07 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-05 19:36:07 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-05-05 19:36:07 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-05-05 19:36:07 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-05 19:36:07 - app.services.vector_store - INFO - 创建集合: knowledge_base
2025-05-05 19:36:07 - app.services.vector_store - ERROR - 检查或创建集合失败: 'Settings' object has no attribute 'VECTOR_SIZE'
2025-05-05 19:36:07 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-05 19:36:07 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-05 19:36:07 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-05 19:36:07 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-05 19:36:26 - root - INFO - 日志系统初始化完成
2025-05-05 19:36:26 - app.main - INFO - 数据库表创建完成
2025-05-05 20:11:55 - root - INFO - 日志系统初始化完成
2025-05-05 20:11:55 - app.main - INFO - 数据库表创建完成
2025-05-05 20:12:03 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-05 20:12:03 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-05 20:12:03 - app.services.vector_store - INFO - 初始化向量存储服务
2025-05-05 20:12:03 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-05 20:12:03 - app.services.vector_store - INFO - 初始化向量存储服务
2025-05-05 20:12:03 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-05 20:12:03 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-05 20:12:03 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-05 20:12:03 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-05 20:12:04 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-05 20:12:04 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-05-05 20:12:04 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-05-05 20:12:04 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-05 20:12:04 - app.services.vector_store - INFO - 创建集合: knowledge_base
2025-05-05 20:12:04 - app.services.vector_store - ERROR - 检查或创建集合失败: 'Settings' object has no attribute 'VECTOR_SIZE'
2025-05-05 20:12:04 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-05 20:12:04 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-05 20:12:05 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-05 20:12:05 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-05-05 20:12:05 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-05-05 20:12:05 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-05 20:12:05 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-05 20:12:05 - app.services.vector_store - INFO - 创建集合: knowledge_base
2025-05-05 20:12:05 - app.services.vector_store - ERROR - 检查或创建集合失败: 'Settings' object has no attribute 'VECTOR_SIZE'
2025-05-05 20:12:05 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-05 20:12:05 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-05 20:12:05 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-05 20:12:06 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-05 20:12:06 - app.services.vector_store - INFO - 初始化向量存储服务
2025-05-05 20:12:06 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-05 20:12:06 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-05 20:12:06 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-05 20:12:06 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-05 20:12:06 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-05-05 20:12:06 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-05-05 20:12:06 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-05 20:12:06 - app.services.vector_store - INFO - 创建集合: knowledge_base
2025-05-05 20:12:06 - app.services.vector_store - ERROR - 检查或创建集合失败: 'Settings' object has no attribute 'VECTOR_SIZE'
2025-05-05 20:12:06 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-05 20:12:06 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-05 20:12:08 - app.services.vector_store - INFO - 初始化向量存储服务
2025-05-05 20:12:08 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-05 20:12:08 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-05 20:12:08 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-05 20:12:08 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-05 20:12:08 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-05-05 20:12:08 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-05-05 20:12:08 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-05 20:12:08 - app.services.vector_store - INFO - 创建集合: knowledge_base
2025-05-05 20:12:08 - app.services.vector_store - ERROR - 检查或创建集合失败: 'Settings' object has no attribute 'VECTOR_SIZE'
2025-05-05 20:12:08 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-05 20:12:08 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-05 20:12:08 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-05 20:12:08 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-05 20:16:27 - root - INFO - 日志系统初始化完成
2025-05-05 20:16:28 - app.main - INFO - 数据库表创建完成
2025-05-05 20:17:08 - app.services.vector_store - INFO - 初始化向量存储服务
2025-05-05 20:17:08 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-05 20:17:08 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-05 20:17:08 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-05 20:17:08 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-05 20:17:08 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-05-05 20:17:08 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-05-05 20:17:08 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-05 20:17:08 - app.services.vector_store - INFO - 创建集合: knowledge_base
2025-05-05 20:17:08 - app.services.vector_store - ERROR - 检查或创建集合失败: 'Settings' object has no attribute 'VECTOR_SIZE'
2025-05-05 20:17:08 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-05 20:17:09 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-05 20:17:09 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-05 20:17:09 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-05 20:26:49 - root - INFO - 日志系统初始化完成
2025-05-05 20:26:51 - app.main - INFO - 数据库表创建完成
2025-05-05 20:26:55 - app.services.vector_store - INFO - 初始化向量存储服务
2025-05-05 20:26:55 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-05 20:26:55 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-05 20:26:55 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-05 20:26:55 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-05 20:26:55 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-05-05 20:26:55 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-05-05 20:26:55 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-05 20:26:55 - app.services.vector_store - INFO - 创建集合: knowledge_base
2025-05-05 20:26:55 - app.services.vector_store - ERROR - 检查或创建集合失败: 'Settings' object has no attribute 'VECTOR_SIZE'
2025-05-05 20:26:55 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-05 20:26:55 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-05 20:26:55 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-05 20:26:56 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-05 20:32:40 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-05 20:32:40 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-05 20:32:40 - app.services.vector_store - INFO - 初始化向量存储服务
2025-05-05 20:32:40 - app.services.vector_store - INFO - 初始化向量存储服务
2025-05-05 20:32:40 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-05 20:32:40 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-05 20:32:40 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-05 20:32:40 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-05 20:32:40 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-05 20:32:40 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-05 20:32:40 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-05 20:32:40 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-05 20:32:40 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-05 20:32:40 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-05-05 20:32:40 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-05-05 20:32:40 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-05 20:32:40 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-05-05 20:32:40 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-05-05 20:32:40 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-05 20:32:40 - app.services.vector_store - INFO - 创建集合: knowledge_base
2025-05-05 20:32:40 - app.services.vector_store - ERROR - 检查或创建集合失败: 'Settings' object has no attribute 'VECTOR_SIZE'
2025-05-05 20:32:40 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-05 20:32:41 - app.services.vector_store - INFO - 创建集合: knowledge_base
2025-05-05 20:32:41 - app.services.vector_store - ERROR - 检查或创建集合失败: 'Settings' object has no attribute 'VECTOR_SIZE'
2025-05-05 20:32:42 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-05 20:32:42 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-05 20:32:42 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-05 20:32:42 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-05 20:32:42 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-05 20:32:42 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-06 12:47:16 - root - INFO - 日志系统初始化完成
2025-05-06 12:47:17 - app.main - INFO - 数据库表创建完成
2025-05-06 12:47:50 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-06 12:47:50 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-06 12:47:50 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-06 12:47:50 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-06 12:47:50 - app.services.vector_store - INFO - 初始化向量存储服务
2025-05-06 12:47:50 - app.services.vector_store - INFO - 初始化向量存储服务
2025-05-06 12:47:50 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-06 12:47:50 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-06 12:47:50 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-06 12:47:50 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-06 12:47:50 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-06 12:47:50 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-06 12:47:50 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-06 12:47:50 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-06 12:47:50 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-05-06 12:47:50 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-05-06 12:47:50 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-05-06 12:47:50 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-05-06 12:47:51 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-06 12:47:51 - app.services.vector_store - INFO - 创建集合: knowledge_base
2025-05-06 12:47:51 - app.services.vector_store - ERROR - 检查或创建集合失败: 'Settings' object has no attribute 'VECTOR_SIZE'
2025-05-06 12:47:51 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-06 12:47:51 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-06 12:47:51 - app.services.vector_store - INFO - 创建集合: knowledge_base
2025-05-06 12:47:51 - app.services.vector_store - ERROR - 检查或创建集合失败: 'Settings' object has no attribute 'VECTOR_SIZE'
2025-05-06 12:47:51 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-06 12:47:51 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-06 12:47:51 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-06 12:47:51 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-06 12:47:51 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-06 12:47:55 - app.services.vector_store - INFO - 初始化向量存储服务
2025-05-06 12:47:55 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-06 12:47:55 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-06 12:47:55 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-06 12:47:55 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-06 12:47:55 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-05-06 12:47:55 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-05-06 12:47:55 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-06 12:47:55 - app.services.vector_store - INFO - 创建集合: knowledge_base
2025-05-06 12:47:55 - app.services.vector_store - ERROR - 检查或创建集合失败: 'Settings' object has no attribute 'VECTOR_SIZE'
2025-05-06 12:47:55 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-06 12:47:55 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-06 12:47:56 - app.services.vector_store - INFO - 初始化向量存储服务
2025-05-06 12:47:56 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-06 12:47:56 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-06 12:47:56 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-06 12:47:56 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-06 12:47:56 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-05-06 12:47:56 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-05-06 12:47:56 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-06 12:47:56 - app.services.vector_store - INFO - 创建集合: knowledge_base
2025-05-06 12:47:56 - app.services.vector_store - ERROR - 检查或创建集合失败: 'Settings' object has no attribute 'VECTOR_SIZE'
2025-05-06 12:47:56 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-06 12:47:56 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-06 12:47:56 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-06 12:47:56 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-06 13:01:52 - root - INFO - 日志系统初始化完成
2025-05-06 13:01:52 - app.main - INFO - 数据库表创建完成
2025-05-07 14:41:44 - root - INFO - 日志系统初始化完成
2025-05-07 14:41:44 - app.main - INFO - 数据库表创建完成
2025-05-07 14:42:26 - app.services.vector_store - INFO - 初始化向量存储服务
2025-05-07 14:42:26 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-07 14:42:26 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-07 14:42:26 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-07 14:42:27 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-07 14:42:27 - app.services.vector_store - INFO - 初始化向量存储服务
2025-05-07 14:42:27 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-07 14:42:27 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-07 14:42:27 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-07 14:42:27 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-07 14:42:27 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-05-07 14:42:27 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-05-07 14:42:27 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-07 14:42:27 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-07 14:42:27 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-07 14:42:27 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-05-07 14:42:27 - app.services.vector_store - INFO - 创建集合: knowledge_base
2025-05-07 14:42:27 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-05-07 14:42:27 - app.services.vector_store - ERROR - 检查或创建集合失败: 'Settings' object has no attribute 'VECTOR_SIZE'
2025-05-07 14:42:27 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-07 14:42:27 - app.services.vector_store - INFO - 创建集合: knowledge_base
2025-05-07 14:42:27 - app.services.vector_store - ERROR - 检查或创建集合失败: 'Settings' object has no attribute 'VECTOR_SIZE'
2025-05-07 14:42:27 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-07 14:42:27 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-07 14:42:27 - app.routers.documents - ERROR - 获取文档列表失败: Column expression, FROM clause, or other columns clause element expected, got <class 'app.models.document.Document'>.
Traceback (most recent call last):
  File "/Users/wangke/notebook-ai/notebook-backend/app/routers/documents.py", line 216, in list_documents
    documents, total = document_service.get_documents(current_user.id, skip, limit, search)
  File "/Users/wangke/notebook-ai/notebook-backend/app/services/document_service.py", line 120, in get_documents
    query = self.db.query(Document).filter(
  File "/Users/wangke/notebook-ai/notebook-backend/venv/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2955, in query
    return self._query_cls(entities, self, **kwargs)
  File "/Users/wangke/notebook-ai/notebook-backend/venv/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 276, in __init__
    self._set_entities(entities)
  File "/Users/wangke/notebook-ai/notebook-backend/venv/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 288, in _set_entities
    self._raw_columns = [
  File "/Users/wangke/notebook-ai/notebook-backend/venv/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 289, in <listcomp>
    coercions.expect(
  File "/Users/wangke/notebook-ai/notebook-backend/venv/lib/python3.10/site-packages/sqlalchemy/sql/coercions.py", line 395, in expect
    resolved = impl._literal_coercion(
  File "/Users/wangke/notebook-ai/notebook-backend/venv/lib/python3.10/site-packages/sqlalchemy/sql/coercions.py", line 634, in _literal_coercion
    self._raise_for_expected(element, argname)
  File "/Users/wangke/notebook-ai/notebook-backend/venv/lib/python3.10/site-packages/sqlalchemy/sql/coercions.py", line 1132, in _raise_for_expected
    return super()._raise_for_expected(
  File "/Users/wangke/notebook-ai/notebook-backend/venv/lib/python3.10/site-packages/sqlalchemy/sql/coercions.py", line 695, in _raise_for_expected
    super()._raise_for_expected(
  File "/Users/wangke/notebook-ai/notebook-backend/venv/lib/python3.10/site-packages/sqlalchemy/sql/coercions.py", line 518, in _raise_for_expected
    raise exc.ArgumentError(msg, code=code) from err
sqlalchemy.exc.ArgumentError: Column expression, FROM clause, or other columns clause element expected, got <class 'app.models.document.Document'>.
2025-05-07 14:42:27 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-07 14:42:27 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-07 14:42:27 - app.routers.documents - ERROR - 获取文档列表失败: Column expression, FROM clause, or other columns clause element expected, got <class 'app.models.document.Document'>.
Traceback (most recent call last):
  File "/Users/wangke/notebook-ai/notebook-backend/app/routers/documents.py", line 216, in list_documents
    documents, total = document_service.get_documents(current_user.id, skip, limit, search)
  File "/Users/wangke/notebook-ai/notebook-backend/app/services/document_service.py", line 120, in get_documents
    query = self.db.query(Document).filter(
  File "/Users/wangke/notebook-ai/notebook-backend/venv/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2955, in query
    return self._query_cls(entities, self, **kwargs)
  File "/Users/wangke/notebook-ai/notebook-backend/venv/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 276, in __init__
    self._set_entities(entities)
  File "/Users/wangke/notebook-ai/notebook-backend/venv/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 288, in _set_entities
    self._raw_columns = [
  File "/Users/wangke/notebook-ai/notebook-backend/venv/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 289, in <listcomp>
    coercions.expect(
  File "/Users/wangke/notebook-ai/notebook-backend/venv/lib/python3.10/site-packages/sqlalchemy/sql/coercions.py", line 395, in expect
    resolved = impl._literal_coercion(
  File "/Users/wangke/notebook-ai/notebook-backend/venv/lib/python3.10/site-packages/sqlalchemy/sql/coercions.py", line 634, in _literal_coercion
    self._raise_for_expected(element, argname)
  File "/Users/wangke/notebook-ai/notebook-backend/venv/lib/python3.10/site-packages/sqlalchemy/sql/coercions.py", line 1132, in _raise_for_expected
    return super()._raise_for_expected(
  File "/Users/wangke/notebook-ai/notebook-backend/venv/lib/python3.10/site-packages/sqlalchemy/sql/coercions.py", line 695, in _raise_for_expected
    super()._raise_for_expected(
  File "/Users/wangke/notebook-ai/notebook-backend/venv/lib/python3.10/site-packages/sqlalchemy/sql/coercions.py", line 518, in _raise_for_expected
    raise exc.ArgumentError(msg, code=code) from err
sqlalchemy.exc.ArgumentError: Column expression, FROM clause, or other columns clause element expected, got <class 'app.models.document.Document'>.
2025-05-07 14:42:27 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-07 14:42:27 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-07 14:42:31 - app.services.vector_store - INFO - 初始化向量存储服务
2025-05-07 14:42:31 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-07 14:42:31 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-07 14:42:31 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-07 14:42:31 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-07 14:42:31 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-05-07 14:42:31 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-05-07 14:42:31 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-07 14:42:31 - app.services.vector_store - INFO - 创建集合: knowledge_base
2025-05-07 14:42:31 - app.services.vector_store - ERROR - 检查或创建集合失败: 'Settings' object has no attribute 'VECTOR_SIZE'
2025-05-07 14:42:31 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-07 14:42:31 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-07 14:42:31 - app.routers.documents - ERROR - 获取文档列表失败: Column expression, FROM clause, or other columns clause element expected, got <class 'app.models.document.Document'>.
Traceback (most recent call last):
  File "/Users/wangke/notebook-ai/notebook-backend/app/routers/documents.py", line 216, in list_documents
    documents, total = document_service.get_documents(current_user.id, skip, limit, search)
  File "/Users/wangke/notebook-ai/notebook-backend/app/services/document_service.py", line 120, in get_documents
    query = self.db.query(Document).filter(
  File "/Users/wangke/notebook-ai/notebook-backend/venv/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2955, in query
    return self._query_cls(entities, self, **kwargs)
  File "/Users/wangke/notebook-ai/notebook-backend/venv/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 276, in __init__
    self._set_entities(entities)
  File "/Users/wangke/notebook-ai/notebook-backend/venv/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 288, in _set_entities
    self._raw_columns = [
  File "/Users/wangke/notebook-ai/notebook-backend/venv/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 289, in <listcomp>
    coercions.expect(
  File "/Users/wangke/notebook-ai/notebook-backend/venv/lib/python3.10/site-packages/sqlalchemy/sql/coercions.py", line 395, in expect
    resolved = impl._literal_coercion(
  File "/Users/wangke/notebook-ai/notebook-backend/venv/lib/python3.10/site-packages/sqlalchemy/sql/coercions.py", line 634, in _literal_coercion
    self._raise_for_expected(element, argname)
  File "/Users/wangke/notebook-ai/notebook-backend/venv/lib/python3.10/site-packages/sqlalchemy/sql/coercions.py", line 1132, in _raise_for_expected
    return super()._raise_for_expected(
  File "/Users/wangke/notebook-ai/notebook-backend/venv/lib/python3.10/site-packages/sqlalchemy/sql/coercions.py", line 695, in _raise_for_expected
    super()._raise_for_expected(
  File "/Users/wangke/notebook-ai/notebook-backend/venv/lib/python3.10/site-packages/sqlalchemy/sql/coercions.py", line 518, in _raise_for_expected
    raise exc.ArgumentError(msg, code=code) from err
sqlalchemy.exc.ArgumentError: Column expression, FROM clause, or other columns clause element expected, got <class 'app.models.document.Document'>.
2025-05-07 14:42:49 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-07 14:42:49 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-07 14:42:49 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-07 14:42:49 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-07 14:42:49 - app.services.vector_store - INFO - 初始化向量存储服务
2025-05-07 14:42:49 - app.services.vector_store - INFO - 初始化向量存储服务
2025-05-07 14:42:49 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-07 14:42:49 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-07 14:42:49 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-07 14:42:49 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-07 14:42:49 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-07 14:42:49 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-07 14:42:49 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-07 14:42:49 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-05-07 14:42:49 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-05-07 14:42:49 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-07 14:42:49 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-05-07 14:42:49 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-05-07 14:42:49 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-07 14:42:49 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-07 14:42:49 - app.services.vector_store - INFO - 创建集合: knowledge_base
2025-05-07 14:42:49 - app.services.vector_store - INFO - 创建集合: knowledge_base
2025-05-07 14:42:49 - app.services.vector_store - ERROR - 检查或创建集合失败: 'Settings' object has no attribute 'VECTOR_SIZE'
2025-05-07 14:42:49 - app.services.vector_store - ERROR - 检查或创建集合失败: 'Settings' object has no attribute 'VECTOR_SIZE'
2025-05-07 14:42:49 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-07 14:42:49 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-07 14:42:49 - app.routers.documents - ERROR - 获取文档列表失败: Column expression, FROM clause, or other columns clause element expected, got <class 'app.models.document.Document'>.
Traceback (most recent call last):
  File "/Users/wangke/notebook-ai/notebook-backend/app/routers/documents.py", line 216, in list_documents
    documents, total = document_service.get_documents(current_user.id, skip, limit, search)
  File "/Users/wangke/notebook-ai/notebook-backend/app/services/document_service.py", line 120, in get_documents
    query = self.db.query(Document).filter(
  File "/Users/wangke/notebook-ai/notebook-backend/venv/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2955, in query
    return self._query_cls(entities, self, **kwargs)
  File "/Users/wangke/notebook-ai/notebook-backend/venv/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 276, in __init__
    self._set_entities(entities)
  File "/Users/wangke/notebook-ai/notebook-backend/venv/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 288, in _set_entities
    self._raw_columns = [
  File "/Users/wangke/notebook-ai/notebook-backend/venv/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 289, in <listcomp>
    coercions.expect(
  File "/Users/wangke/notebook-ai/notebook-backend/venv/lib/python3.10/site-packages/sqlalchemy/sql/coercions.py", line 395, in expect
    resolved = impl._literal_coercion(
  File "/Users/wangke/notebook-ai/notebook-backend/venv/lib/python3.10/site-packages/sqlalchemy/sql/coercions.py", line 634, in _literal_coercion
    self._raise_for_expected(element, argname)
  File "/Users/wangke/notebook-ai/notebook-backend/venv/lib/python3.10/site-packages/sqlalchemy/sql/coercions.py", line 1132, in _raise_for_expected
    return super()._raise_for_expected(
  File "/Users/wangke/notebook-ai/notebook-backend/venv/lib/python3.10/site-packages/sqlalchemy/sql/coercions.py", line 695, in _raise_for_expected
    super()._raise_for_expected(
  File "/Users/wangke/notebook-ai/notebook-backend/venv/lib/python3.10/site-packages/sqlalchemy/sql/coercions.py", line 518, in _raise_for_expected
    raise exc.ArgumentError(msg, code=code) from err
sqlalchemy.exc.ArgumentError: Column expression, FROM clause, or other columns clause element expected, got <class 'app.models.document.Document'>.
2025-05-07 14:42:49 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-07 14:42:49 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-07 14:42:49 - app.routers.documents - ERROR - 获取文档列表失败: Column expression, FROM clause, or other columns clause element expected, got <class 'app.models.document.Document'>.
Traceback (most recent call last):
  File "/Users/wangke/notebook-ai/notebook-backend/app/routers/documents.py", line 216, in list_documents
    documents, total = document_service.get_documents(current_user.id, skip, limit, search)
  File "/Users/wangke/notebook-ai/notebook-backend/app/services/document_service.py", line 120, in get_documents
    query = self.db.query(Document).filter(
  File "/Users/wangke/notebook-ai/notebook-backend/venv/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2955, in query
    return self._query_cls(entities, self, **kwargs)
  File "/Users/wangke/notebook-ai/notebook-backend/venv/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 276, in __init__
    self._set_entities(entities)
  File "/Users/wangke/notebook-ai/notebook-backend/venv/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 288, in _set_entities
    self._raw_columns = [
  File "/Users/wangke/notebook-ai/notebook-backend/venv/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 289, in <listcomp>
    coercions.expect(
  File "/Users/wangke/notebook-ai/notebook-backend/venv/lib/python3.10/site-packages/sqlalchemy/sql/coercions.py", line 395, in expect
    resolved = impl._literal_coercion(
  File "/Users/wangke/notebook-ai/notebook-backend/venv/lib/python3.10/site-packages/sqlalchemy/sql/coercions.py", line 634, in _literal_coercion
    self._raise_for_expected(element, argname)
  File "/Users/wangke/notebook-ai/notebook-backend/venv/lib/python3.10/site-packages/sqlalchemy/sql/coercions.py", line 1132, in _raise_for_expected
    return super()._raise_for_expected(
  File "/Users/wangke/notebook-ai/notebook-backend/venv/lib/python3.10/site-packages/sqlalchemy/sql/coercions.py", line 695, in _raise_for_expected
    super()._raise_for_expected(
  File "/Users/wangke/notebook-ai/notebook-backend/venv/lib/python3.10/site-packages/sqlalchemy/sql/coercions.py", line 518, in _raise_for_expected
    raise exc.ArgumentError(msg, code=code) from err
sqlalchemy.exc.ArgumentError: Column expression, FROM clause, or other columns clause element expected, got <class 'app.models.document.Document'>.
2025-05-07 14:42:49 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-07 14:42:49 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-07 15:15:29 - root - INFO - 日志系统初始化完成
2025-05-07 15:15:29 - app.main - INFO - 数据库表创建完成
2025-05-07 15:15:44 - root - INFO - 日志系统初始化完成
2025-05-07 15:15:44 - app.main - INFO - 数据库表创建完成
2025-05-07 15:16:08 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-07 15:16:08 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-07 15:16:08 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-07 15:16:08 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-07 15:16:08 - app.services.vector_store - INFO - 初始化向量存储服务
2025-05-07 15:16:08 - app.services.vector_store - INFO - 初始化向量存储服务
2025-05-07 15:16:08 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-07 15:16:08 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-07 15:16:08 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-07 15:16:08 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-07 15:16:08 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-07 15:16:08 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-07 15:16:08 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-07 15:16:08 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-05-07 15:16:08 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-05-07 15:16:08 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-07 15:16:08 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-05-07 15:16:08 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-05-07 15:16:08 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-07 15:16:08 - app.services.vector_store - INFO - 创建集合: knowledge_base
2025-05-07 15:16:08 - app.services.vector_store - ERROR - 检查或创建集合失败: 'Settings' object has no attribute 'VECTOR_SIZE'
2025-05-07 15:16:08 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-07 15:16:08 - app.services.vector_store - INFO - 创建集合: knowledge_base
2025-05-07 15:16:08 - app.services.vector_store - ERROR - 检查或创建集合失败: 'Settings' object has no attribute 'VECTOR_SIZE'
2025-05-07 15:16:08 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-07 15:16:09 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-07 15:16:09 - app.routers.documents - ERROR - 获取文档列表失败: (psycopg2.errors.UndefinedColumn) column documents.doc_metadata does not exist
LINE 2: ...or_count, documents.task_id AS documents_task_id, documents....
                                                             ^

[SQL: SELECT count(*) AS count_1 
FROM (SELECT documents.id AS documents_id, documents.name AS documents_name, documents.file_type AS documents_file_type, documents.user_id AS documents_user_id, documents.processing_status AS documents_processing_status, documents.bucket_name AS documents_bucket_name, documents.object_key AS documents_object_key, documents.content_type AS documents_content_type, documents.file_size AS documents_file_size, documents.etag AS documents_etag, documents.vector_store_id AS documents_vector_store_id, documents.vector_collection_name AS documents_vector_collection_name, documents.vector_count AS documents_vector_count, documents.task_id AS documents_task_id, documents.doc_metadata AS documents_doc_metadata, documents.created_at AS documents_created_at, documents.updated_at AS documents_updated_at 
FROM documents 
WHERE documents.user_id = %(user_id_1)s) AS anon_1]
[parameters: {'user_id_1': 1}]
(Background on this error at: https://sqlalche.me/e/20/f405)
Traceback (most recent call last):
  File "/Users/wangke/notebook-ai/notebook-backend/venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/wangke/notebook-ai/notebook-backend/venv/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 945, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.UndefinedColumn: column documents.doc_metadata does not exist
LINE 2: ...or_count, documents.task_id AS documents_task_id, documents....
                                                             ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/wangke/notebook-ai/notebook-backend/app/routers/documents.py", line 219, in list_documents
    documents, total = document_service.get_documents(current_user.id, skip, limit, search)
  File "/Users/wangke/notebook-ai/notebook-backend/app/services/document_service.py", line 129, in get_documents
    total = query.count()
  File "/Users/wangke/notebook-ai/notebook-backend/venv/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 3147, in count
    self._legacy_from_self(col).enable_eagerloads(False).scalar()
  File "/Users/wangke/notebook-ai/notebook-backend/venv/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2836, in scalar
    ret = self.one()
  File "/Users/wangke/notebook-ai/notebook-backend/venv/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2809, in one
    return self._iter().one()  # type: ignore
  File "/Users/wangke/notebook-ai/notebook-backend/venv/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2858, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/Users/wangke/notebook-ai/notebook-backend/venv/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2365, in execute
    return self._execute_internal(
  File "/Users/wangke/notebook-ai/notebook-backend/venv/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/Users/wangke/notebook-ai/notebook-backend/venv/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 306, in orm_execute_statement
    result = conn.execute(
  File "/Users/wangke/notebook-ai/notebook-backend/venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1416, in execute
    return meth(
  File "/Users/wangke/notebook-ai/notebook-backend/venv/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/Users/wangke/notebook-ai/notebook-backend/venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1638, in _execute_clauseelement
    ret = self._execute_context(
  File "/Users/wangke/notebook-ai/notebook-backend/venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1843, in _execute_context
    return self._exec_single_context(
  File "/Users/wangke/notebook-ai/notebook-backend/venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1983, in _exec_single_context
    self._handle_dbapi_exception(
  File "/Users/wangke/notebook-ai/notebook-backend/venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2352, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/wangke/notebook-ai/notebook-backend/venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/wangke/notebook-ai/notebook-backend/venv/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 945, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedColumn) column documents.doc_metadata does not exist
LINE 2: ...or_count, documents.task_id AS documents_task_id, documents....
                                                             ^

[SQL: SELECT count(*) AS count_1 
FROM (SELECT documents.id AS documents_id, documents.name AS documents_name, documents.file_type AS documents_file_type, documents.user_id AS documents_user_id, documents.processing_status AS documents_processing_status, documents.bucket_name AS documents_bucket_name, documents.object_key AS documents_object_key, documents.content_type AS documents_content_type, documents.file_size AS documents_file_size, documents.etag AS documents_etag, documents.vector_store_id AS documents_vector_store_id, documents.vector_collection_name AS documents_vector_collection_name, documents.vector_count AS documents_vector_count, documents.task_id AS documents_task_id, documents.doc_metadata AS documents_doc_metadata, documents.created_at AS documents_created_at, documents.updated_at AS documents_updated_at 
FROM documents 
WHERE documents.user_id = %(user_id_1)s) AS anon_1]
[parameters: {'user_id_1': 1}]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-05-07 15:16:09 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-07 15:16:09 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-07 15:16:09 - app.routers.documents - ERROR - 获取文档列表失败: (psycopg2.errors.UndefinedColumn) column documents.doc_metadata does not exist
LINE 2: ...or_count, documents.task_id AS documents_task_id, documents....
                                                             ^

[SQL: SELECT count(*) AS count_1 
FROM (SELECT documents.id AS documents_id, documents.name AS documents_name, documents.file_type AS documents_file_type, documents.user_id AS documents_user_id, documents.processing_status AS documents_processing_status, documents.bucket_name AS documents_bucket_name, documents.object_key AS documents_object_key, documents.content_type AS documents_content_type, documents.file_size AS documents_file_size, documents.etag AS documents_etag, documents.vector_store_id AS documents_vector_store_id, documents.vector_collection_name AS documents_vector_collection_name, documents.vector_count AS documents_vector_count, documents.task_id AS documents_task_id, documents.doc_metadata AS documents_doc_metadata, documents.created_at AS documents_created_at, documents.updated_at AS documents_updated_at 
FROM documents 
WHERE documents.user_id = %(user_id_1)s) AS anon_1]
[parameters: {'user_id_1': 1}]
(Background on this error at: https://sqlalche.me/e/20/f405)
Traceback (most recent call last):
  File "/Users/wangke/notebook-ai/notebook-backend/venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/wangke/notebook-ai/notebook-backend/venv/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 945, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.UndefinedColumn: column documents.doc_metadata does not exist
LINE 2: ...or_count, documents.task_id AS documents_task_id, documents....
                                                             ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/wangke/notebook-ai/notebook-backend/app/routers/documents.py", line 219, in list_documents
    documents, total = document_service.get_documents(current_user.id, skip, limit, search)
  File "/Users/wangke/notebook-ai/notebook-backend/app/services/document_service.py", line 129, in get_documents
    total = query.count()
  File "/Users/wangke/notebook-ai/notebook-backend/venv/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 3147, in count
    self._legacy_from_self(col).enable_eagerloads(False).scalar()
  File "/Users/wangke/notebook-ai/notebook-backend/venv/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2836, in scalar
    ret = self.one()
  File "/Users/wangke/notebook-ai/notebook-backend/venv/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2809, in one
    return self._iter().one()  # type: ignore
  File "/Users/wangke/notebook-ai/notebook-backend/venv/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2858, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/Users/wangke/notebook-ai/notebook-backend/venv/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2365, in execute
    return self._execute_internal(
  File "/Users/wangke/notebook-ai/notebook-backend/venv/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/Users/wangke/notebook-ai/notebook-backend/venv/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 306, in orm_execute_statement
    result = conn.execute(
  File "/Users/wangke/notebook-ai/notebook-backend/venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1416, in execute
    return meth(
  File "/Users/wangke/notebook-ai/notebook-backend/venv/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/Users/wangke/notebook-ai/notebook-backend/venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1638, in _execute_clauseelement
    ret = self._execute_context(
  File "/Users/wangke/notebook-ai/notebook-backend/venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1843, in _execute_context
    return self._exec_single_context(
  File "/Users/wangke/notebook-ai/notebook-backend/venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1983, in _exec_single_context
    self._handle_dbapi_exception(
  File "/Users/wangke/notebook-ai/notebook-backend/venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2352, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/wangke/notebook-ai/notebook-backend/venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/wangke/notebook-ai/notebook-backend/venv/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 945, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedColumn) column documents.doc_metadata does not exist
LINE 2: ...or_count, documents.task_id AS documents_task_id, documents....
                                                             ^

[SQL: SELECT count(*) AS count_1 
FROM (SELECT documents.id AS documents_id, documents.name AS documents_name, documents.file_type AS documents_file_type, documents.user_id AS documents_user_id, documents.processing_status AS documents_processing_status, documents.bucket_name AS documents_bucket_name, documents.object_key AS documents_object_key, documents.content_type AS documents_content_type, documents.file_size AS documents_file_size, documents.etag AS documents_etag, documents.vector_store_id AS documents_vector_store_id, documents.vector_collection_name AS documents_vector_collection_name, documents.vector_count AS documents_vector_count, documents.task_id AS documents_task_id, documents.doc_metadata AS documents_doc_metadata, documents.created_at AS documents_created_at, documents.updated_at AS documents_updated_at 
FROM documents 
WHERE documents.user_id = %(user_id_1)s) AS anon_1]
[parameters: {'user_id_1': 1}]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-05-07 15:16:09 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-07 15:16:09 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-07 15:16:15 - root - INFO - 日志系统初始化完成
2025-05-07 15:16:15 - app.main - INFO - 数据库表创建完成
2025-05-07 15:16:36 - root - INFO - 日志系统初始化完成
2025-05-07 15:16:36 - app.main - INFO - 数据库表创建完成
2025-05-07 15:19:53 - root - INFO - 日志系统初始化完成
2025-05-07 15:19:53 - app.main - INFO - 数据库表创建完成
2025-05-07 15:19:58 - root - INFO - 日志系统初始化完成
2025-05-07 15:19:59 - app.main - INFO - 数据库表创建完成
2025-05-07 15:20:05 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-07 15:20:05 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-07 15:20:05 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-07 15:20:06 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-07 15:20:06 - app.services.vector_store - INFO - 初始化向量存储服务
2025-05-07 15:20:06 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-07 15:20:06 - app.services.vector_store - INFO - 初始化向量存储服务
2025-05-07 15:20:06 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-07 15:20:06 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-07 15:20:06 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-07 15:20:06 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-07 15:20:06 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-07 15:20:06 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-07 15:20:06 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-07 15:20:06 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-05-07 15:20:06 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-05-07 15:20:06 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-05-07 15:20:06 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-05-07 15:20:06 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-07 15:20:06 - app.services.vector_store - INFO - 创建集合: knowledge_base
2025-05-07 15:20:06 - app.services.vector_store - ERROR - 检查或创建集合失败: 'Settings' object has no attribute 'VECTOR_SIZE'
2025-05-07 15:20:06 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-07 15:20:06 - app.services.vector_store - INFO - 创建集合: knowledge_base
2025-05-07 15:20:06 - app.services.vector_store - ERROR - 检查或创建集合失败: 'Settings' object has no attribute 'VECTOR_SIZE'
2025-05-07 15:20:06 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-07 15:20:06 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-07 15:20:06 - app.routers.documents - ERROR - 处理文档 20 失败: 'NoneType' object is not subscriptable
2025-05-07 15:20:06 - app.routers.documents - ERROR - 获取文档列表失败: 1 validation error for DocumentList
items
  Field required [type=missing, input_value={'documents': [], 'total'...age': 1, 'page_size': 1}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.9/v/missing
Traceback (most recent call last):
  File "/Users/wangke/notebook-ai/notebook-backend/app/routers/documents.py", line 246, in list_documents
    return DocumentList(documents=document_previews, total=total, page=skip//limit + 1, page_size=limit)
  File "/Users/wangke/notebook-ai/notebook-backend/venv/lib/python3.10/site-packages/pydantic/main.py", line 212, in __init__
    validated_self = self.__pydantic_validator__.validate_python(data, self_instance=self)
pydantic_core._pydantic_core.ValidationError: 1 validation error for DocumentList
items
  Field required [type=missing, input_value={'documents': [], 'total'...age': 1, 'page_size': 1}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.9/v/missing
2025-05-07 15:20:06 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-07 15:20:06 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-07 15:20:06 - app.routers.documents - ERROR - 处理文档 20 失败: 'NoneType' object is not subscriptable
2025-05-07 15:20:06 - app.routers.documents - ERROR - 处理文档 19 失败: 'NoneType' object is not subscriptable
2025-05-07 15:20:06 - app.routers.documents - ERROR - 处理文档 18 失败: 'NoneType' object is not subscriptable
2025-05-07 15:20:06 - app.routers.documents - ERROR - 处理文档 17 失败: 'NoneType' object is not subscriptable
2025-05-07 15:20:06 - app.routers.documents - ERROR - 处理文档 16 失败: 'NoneType' object is not subscriptable
2025-05-07 15:20:06 - app.routers.documents - ERROR - 处理文档 15 失败: 'NoneType' object is not subscriptable
2025-05-07 15:20:06 - app.routers.documents - ERROR - 处理文档 14 失败: 'NoneType' object is not subscriptable
2025-05-07 15:20:06 - app.routers.documents - ERROR - 处理文档 13 失败: 'NoneType' object is not subscriptable
2025-05-07 15:20:06 - app.routers.documents - ERROR - 处理文档 12 失败: 'NoneType' object is not subscriptable
2025-05-07 15:20:06 - app.routers.documents - ERROR - 处理文档 11 失败: 'NoneType' object is not subscriptable
2025-05-07 15:20:06 - app.routers.documents - ERROR - 获取文档列表失败: 1 validation error for DocumentList
items
  Field required [type=missing, input_value={'documents': [], 'total'...ge': 1, 'page_size': 10}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.9/v/missing
Traceback (most recent call last):
  File "/Users/wangke/notebook-ai/notebook-backend/app/routers/documents.py", line 246, in list_documents
    return DocumentList(documents=document_previews, total=total, page=skip//limit + 1, page_size=limit)
  File "/Users/wangke/notebook-ai/notebook-backend/venv/lib/python3.10/site-packages/pydantic/main.py", line 212, in __init__
    validated_self = self.__pydantic_validator__.validate_python(data, self_instance=self)
pydantic_core._pydantic_core.ValidationError: 1 validation error for DocumentList
items
  Field required [type=missing, input_value={'documents': [], 'total'...ge': 1, 'page_size': 10}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.9/v/missing
2025-05-07 15:20:06 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-07 15:20:06 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-07 15:22:36 - root - INFO - 日志系统初始化完成
2025-05-07 15:22:36 - app.main - INFO - 数据库表创建完成
2025-05-07 15:22:38 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-07 15:22:38 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-07 15:22:38 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-07 15:22:38 - app.services.vector_store - INFO - 初始化向量存储服务
2025-05-07 15:22:38 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-07 15:22:38 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-07 15:22:38 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-07 15:22:38 - app.services.vector_store - INFO - 初始化向量存储服务
2025-05-07 15:22:38 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-07 15:22:38 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-07 15:22:38 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-07 15:22:38 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-07 15:22:38 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-07 15:22:38 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-05-07 15:22:38 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-05-07 15:22:38 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-07 15:22:38 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-05-07 15:22:38 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-05-07 15:22:38 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-07 15:22:38 - app.services.vector_store - INFO - 创建集合: knowledge_base
2025-05-07 15:22:38 - app.services.vector_store - ERROR - 检查或创建集合失败: 'Settings' object has no attribute 'VECTOR_SIZE'
2025-05-07 15:22:38 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-07 15:22:38 - app.services.vector_store - INFO - 创建集合: knowledge_base
2025-05-07 15:22:38 - app.services.vector_store - ERROR - 检查或创建集合失败: 'Settings' object has no attribute 'VECTOR_SIZE'
2025-05-07 15:22:38 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-07 15:22:38 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-07 15:22:38 - app.routers.documents - ERROR - 处理文档 20 失败: 'NoneType' object is not subscriptable
2025-05-07 15:22:38 - app.routers.documents - ERROR - 处理文档 19 失败: 'NoneType' object is not subscriptable
2025-05-07 15:22:38 - app.routers.documents - ERROR - 处理文档 18 失败: 'NoneType' object is not subscriptable
2025-05-07 15:22:38 - app.routers.documents - ERROR - 处理文档 17 失败: 'NoneType' object is not subscriptable
2025-05-07 15:22:38 - app.routers.documents - ERROR - 处理文档 16 失败: 'NoneType' object is not subscriptable
2025-05-07 15:22:38 - app.routers.documents - ERROR - 处理文档 15 失败: 'NoneType' object is not subscriptable
2025-05-07 15:22:38 - app.routers.documents - ERROR - 处理文档 14 失败: 'NoneType' object is not subscriptable
2025-05-07 15:22:38 - app.routers.documents - ERROR - 处理文档 13 失败: 'NoneType' object is not subscriptable
2025-05-07 15:22:38 - app.routers.documents - ERROR - 处理文档 12 失败: 'NoneType' object is not subscriptable
2025-05-07 15:22:38 - app.routers.documents - ERROR - 处理文档 11 失败: 'NoneType' object is not subscriptable
2025-05-07 15:22:38 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-07 15:22:38 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-07 15:22:38 - app.routers.documents - ERROR - 处理文档 20 失败: 'NoneType' object is not subscriptable
2025-05-07 15:22:38 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-07 15:22:38 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-07 15:22:40 - app.services.vector_store - INFO - 初始化向量存储服务
2025-05-07 15:22:40 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-07 15:22:40 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-07 15:22:40 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-07 15:22:40 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-07 15:22:40 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-05-07 15:22:40 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-05-07 15:22:40 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-07 15:22:40 - app.services.vector_store - INFO - 创建集合: knowledge_base
2025-05-07 15:22:40 - app.services.vector_store - ERROR - 检查或创建集合失败: 'Settings' object has no attribute 'VECTOR_SIZE'
2025-05-07 15:22:40 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-07 15:22:40 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-07 15:22:40 - app.routers.documents - ERROR - 处理文档 20 失败: 'NoneType' object is not subscriptable
2025-05-07 15:22:54 - app.services.vector_store - INFO - 初始化向量存储服务
2025-05-07 15:22:54 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-07 15:22:54 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-07 15:22:54 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-07 15:22:54 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-07 15:22:54 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-05-07 15:22:54 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-05-07 15:22:54 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-07 15:22:54 - app.services.vector_store - INFO - 创建集合: knowledge_base
2025-05-07 15:22:54 - app.services.vector_store - ERROR - 检查或创建集合失败: 'Settings' object has no attribute 'VECTOR_SIZE'
2025-05-07 15:22:54 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-07 15:22:54 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-07 15:22:54 - app.routers.documents - ERROR - 处理文档 20 失败: 'NoneType' object is not subscriptable
2025-05-07 15:22:54 - app.routers.documents - ERROR - 处理文档 19 失败: 'NoneType' object is not subscriptable
2025-05-07 15:22:54 - app.routers.documents - ERROR - 处理文档 18 失败: 'NoneType' object is not subscriptable
2025-05-07 15:22:54 - app.routers.documents - ERROR - 处理文档 17 失败: 'NoneType' object is not subscriptable
2025-05-07 15:22:54 - app.routers.documents - ERROR - 处理文档 16 失败: 'NoneType' object is not subscriptable
2025-05-07 15:22:54 - app.routers.documents - ERROR - 处理文档 15 失败: 'NoneType' object is not subscriptable
2025-05-07 15:22:54 - app.routers.documents - ERROR - 处理文档 14 失败: 'NoneType' object is not subscriptable
2025-05-07 15:22:54 - app.routers.documents - ERROR - 处理文档 13 失败: 'NoneType' object is not subscriptable
2025-05-07 15:22:54 - app.routers.documents - ERROR - 处理文档 12 失败: 'NoneType' object is not subscriptable
2025-05-07 15:22:54 - app.routers.documents - ERROR - 处理文档 11 失败: 'NoneType' object is not subscriptable
2025-05-07 15:22:55 - app.services.vector_store - INFO - 初始化向量存储服务
2025-05-07 15:22:55 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-07 15:22:55 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-07 15:22:55 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-07 15:22:55 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-07 15:22:55 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-05-07 15:22:55 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-05-07 15:22:55 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-07 15:22:55 - app.services.vector_store - INFO - 创建集合: knowledge_base
2025-05-07 15:22:55 - app.services.vector_store - ERROR - 检查或创建集合失败: 'Settings' object has no attribute 'VECTOR_SIZE'
2025-05-07 15:22:55 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-07 15:22:55 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-07 15:22:55 - app.routers.documents - ERROR - 处理文档 20 失败: 'NoneType' object is not subscriptable
2025-05-07 15:22:55 - app.routers.documents - ERROR - 处理文档 19 失败: 'NoneType' object is not subscriptable
2025-05-07 15:22:55 - app.routers.documents - ERROR - 处理文档 18 失败: 'NoneType' object is not subscriptable
2025-05-07 15:22:55 - app.routers.documents - ERROR - 处理文档 17 失败: 'NoneType' object is not subscriptable
2025-05-07 15:22:55 - app.routers.documents - ERROR - 处理文档 16 失败: 'NoneType' object is not subscriptable
2025-05-07 15:22:55 - app.routers.documents - ERROR - 处理文档 15 失败: 'NoneType' object is not subscriptable
2025-05-07 15:22:55 - app.routers.documents - ERROR - 处理文档 14 失败: 'NoneType' object is not subscriptable
2025-05-07 15:22:55 - app.routers.documents - ERROR - 处理文档 13 失败: 'NoneType' object is not subscriptable
2025-05-07 15:22:55 - app.routers.documents - ERROR - 处理文档 12 失败: 'NoneType' object is not subscriptable
2025-05-07 15:22:55 - app.routers.documents - ERROR - 处理文档 11 失败: 'NoneType' object is not subscriptable
2025-05-07 15:23:07 - app.services.vector_store - INFO - 初始化向量存储服务
2025-05-07 15:23:07 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-07 15:23:07 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-07 15:23:07 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-07 15:23:07 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-07 15:23:07 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-05-07 15:23:07 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-05-07 15:23:07 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-07 15:23:07 - app.services.vector_store - INFO - 创建集合: knowledge_base
2025-05-07 15:23:07 - app.services.vector_store - ERROR - 检查或创建集合失败: 'Settings' object has no attribute 'VECTOR_SIZE'
2025-05-07 15:23:07 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-07 15:23:07 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-07 15:23:07 - app.routers.documents - INFO - 接收到文件上传请求: 外系统连接模块划分.txt, 类型: text/plain
2025-05-07 15:23:07 - app.routers.documents - INFO - 解析元数据: {"name":"外系统连接模块划分"}...
2025-05-07 15:23:07 - app.routers.documents - INFO - 开始处理上传的文件
2025-05-07 15:23:07 - app.services.document_service - INFO - 开始处理文件: 外系统连接模块划分.txt, 内容类型: text/plain
2025-05-07 15:23:07 - app.services.document_service - INFO - 文件大小: 3751 字节
2025-05-07 15:23:07 - app.services.document_service - INFO - 文件类型识别为: txt
2025-05-07 15:23:07 - app.services.document_service - INFO - 文本文件类型: txt，使用普通UTF-8解码
2025-05-07 15:23:07 - app.services.document_service - INFO - 准备创建文档记录
2025-05-07 15:23:07 - app.services.document_service - INFO - 创建文档: 外系统连接模块划分.txt, 类型: txt, 用户ID: 1
2025-05-07 15:23:08 - app.services.document_service - INFO - 文档创建成功: ID=21
2025-05-07 15:23:08 - app.services.task_service - INFO - 创建任务: 处理文档: 外系统连接模块划分.txt, 类型: DOCUMENT_PROCESSING, 创建者: 1
2025-05-07 15:23:08 - app.services.task_service - INFO - 任务创建成功: 829ef741-f4d5-4483-907c-488821bdbe0e
2025-05-07 15:23:08 - app.services.document_service - INFO - 更新文档状态: ID=21, 状态=PROCESSING
2025-05-07 15:23:08 - app.services.document_service - INFO - 文档状态已更新: ID=21, 状态=PROCESSING
2025-05-07 15:23:08 - app.routers.documents - ERROR - 上传文档失败: process_document() missing 2 required positional arguments: 'task_id' and 'file_path'
Traceback (most recent call last):
  File "/Users/wangke/notebook-ai/notebook-backend/app/routers/documents.py", line 113, in upload_document
    process_document.delay(task.id)
  File "/Users/wangke/notebook-ai/notebook-backend/venv/lib/python3.10/site-packages/celery/app/task.py", line 444, in delay
    return self.apply_async(args, kwargs)
  File "/Users/wangke/notebook-ai/notebook-backend/venv/lib/python3.10/site-packages/celery/app/task.py", line 559, in apply_async
    check_arguments(*(args or ()), **(kwargs or {}))
TypeError: process_document() missing 2 required positional arguments: 'task_id' and 'file_path'
2025-05-07 15:26:22 - root - INFO - 日志系统初始化完成
2025-05-07 15:26:23 - app.main - INFO - 数据库表创建完成
2025-05-07 15:26:42 - root - INFO - 日志系统初始化完成
2025-05-07 15:26:42 - app.main - INFO - 数据库表创建完成
2025-05-07 20:00:58 - root - INFO - 日志系统初始化完成
2025-05-07 20:00:59 - app.main - INFO - 数据库表创建完成
2025-05-07 20:03:39 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-07 20:03:39 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-07 20:03:39 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-07 20:03:40 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-07 20:03:40 - app.services.vector_store - INFO - 初始化向量存储服务
2025-05-07 20:03:40 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-07 20:03:40 - app.services.vector_store - INFO - 初始化向量存储服务
2025-05-07 20:03:40 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-07 20:03:40 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-07 20:03:40 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-07 20:03:40 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-07 20:03:40 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-07 20:03:40 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-07 20:03:40 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-07 20:03:40 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-05-07 20:03:40 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-05-07 20:03:40 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-05-07 20:03:40 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-05-07 20:03:40 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-07 20:03:40 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-07 20:03:40 - app.services.vector_store - INFO - 创建集合: knowledge_base
2025-05-07 20:03:40 - app.services.vector_store - INFO - 创建集合: knowledge_base
2025-05-07 20:03:40 - app.services.vector_store - ERROR - 检查或创建集合失败: 'Settings' object has no attribute 'VECTOR_SIZE'
2025-05-07 20:03:40 - app.services.vector_store - ERROR - 检查或创建集合失败: 'Settings' object has no attribute 'VECTOR_SIZE'
2025-05-07 20:03:40 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-07 20:03:40 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-07 20:03:40 - app.routers.documents - ERROR - 处理文档 21 失败: 'NoneType' object is not subscriptable
2025-05-07 20:03:40 - app.routers.documents - ERROR - 处理文档 20 失败: 'NoneType' object is not subscriptable
2025-05-07 20:03:40 - app.routers.documents - ERROR - 处理文档 19 失败: 'NoneType' object is not subscriptable
2025-05-07 20:03:40 - app.routers.documents - ERROR - 处理文档 18 失败: 'NoneType' object is not subscriptable
2025-05-07 20:03:40 - app.routers.documents - ERROR - 处理文档 17 失败: 'NoneType' object is not subscriptable
2025-05-07 20:03:40 - app.routers.documents - ERROR - 处理文档 16 失败: 'NoneType' object is not subscriptable
2025-05-07 20:03:40 - app.routers.documents - ERROR - 处理文档 15 失败: 'NoneType' object is not subscriptable
2025-05-07 20:03:40 - app.routers.documents - ERROR - 处理文档 14 失败: 'NoneType' object is not subscriptable
2025-05-07 20:03:40 - app.routers.documents - ERROR - 处理文档 13 失败: 'NoneType' object is not subscriptable
2025-05-07 20:03:40 - app.routers.documents - ERROR - 处理文档 12 失败: 'NoneType' object is not subscriptable
2025-05-07 20:03:40 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-07 20:03:40 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-07 20:03:40 - app.routers.documents - ERROR - 处理文档 21 失败: 'NoneType' object is not subscriptable
2025-05-07 20:03:41 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-07 20:03:41 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-07 20:03:45 - app.services.vector_store - INFO - 初始化向量存储服务
2025-05-07 20:03:45 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-07 20:03:45 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-07 20:03:45 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-07 20:03:45 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-07 20:03:45 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-05-07 20:03:45 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-05-07 20:03:45 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-07 20:03:45 - app.services.vector_store - INFO - 创建集合: knowledge_base
2025-05-07 20:03:45 - app.services.vector_store - ERROR - 检查或创建集合失败: 'Settings' object has no attribute 'VECTOR_SIZE'
2025-05-07 20:03:45 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-07 20:03:45 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-07 20:03:45 - app.routers.documents - ERROR - 处理文档 21 失败: 'NoneType' object is not subscriptable
2025-05-07 20:03:48 - app.services.vector_store - INFO - 初始化向量存储服务
2025-05-07 20:03:48 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-07 20:03:48 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-07 20:03:48 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-07 20:03:48 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-07 20:03:48 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-05-07 20:03:48 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-05-07 20:03:48 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-07 20:03:48 - app.services.vector_store - INFO - 创建集合: knowledge_base
2025-05-07 20:03:48 - app.services.vector_store - ERROR - 检查或创建集合失败: 'Settings' object has no attribute 'VECTOR_SIZE'
2025-05-07 20:03:48 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-07 20:03:48 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-07 20:03:48 - app.routers.documents - ERROR - 处理文档 21 失败: 'NoneType' object is not subscriptable
2025-05-07 20:03:48 - app.routers.documents - ERROR - 处理文档 20 失败: 'NoneType' object is not subscriptable
2025-05-07 20:03:48 - app.routers.documents - ERROR - 处理文档 19 失败: 'NoneType' object is not subscriptable
2025-05-07 20:03:48 - app.routers.documents - ERROR - 处理文档 18 失败: 'NoneType' object is not subscriptable
2025-05-07 20:03:48 - app.routers.documents - ERROR - 处理文档 17 失败: 'NoneType' object is not subscriptable
2025-05-07 20:03:48 - app.routers.documents - ERROR - 处理文档 16 失败: 'NoneType' object is not subscriptable
2025-05-07 20:03:48 - app.routers.documents - ERROR - 处理文档 15 失败: 'NoneType' object is not subscriptable
2025-05-07 20:03:48 - app.routers.documents - ERROR - 处理文档 14 失败: 'NoneType' object is not subscriptable
2025-05-07 20:03:48 - app.routers.documents - ERROR - 处理文档 13 失败: 'NoneType' object is not subscriptable
2025-05-07 20:03:48 - app.routers.documents - ERROR - 处理文档 12 失败: 'NoneType' object is not subscriptable
2025-05-07 20:03:49 - app.services.vector_store - INFO - 初始化向量存储服务
2025-05-07 20:03:49 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-07 20:03:49 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-07 20:03:49 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-07 20:03:49 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-07 20:03:49 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-05-07 20:03:49 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-05-07 20:03:49 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-07 20:03:49 - app.services.vector_store - INFO - 创建集合: knowledge_base
2025-05-07 20:03:49 - app.services.vector_store - ERROR - 检查或创建集合失败: 'Settings' object has no attribute 'VECTOR_SIZE'
2025-05-07 20:03:49 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-07 20:03:50 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-07 20:03:50 - app.routers.documents - ERROR - 处理文档 21 失败: 'NoneType' object is not subscriptable
2025-05-07 20:03:50 - app.routers.documents - ERROR - 处理文档 20 失败: 'NoneType' object is not subscriptable
2025-05-07 20:03:50 - app.routers.documents - ERROR - 处理文档 19 失败: 'NoneType' object is not subscriptable
2025-05-07 20:03:50 - app.routers.documents - ERROR - 处理文档 18 失败: 'NoneType' object is not subscriptable
2025-05-07 20:03:50 - app.routers.documents - ERROR - 处理文档 17 失败: 'NoneType' object is not subscriptable
2025-05-07 20:03:50 - app.routers.documents - ERROR - 处理文档 16 失败: 'NoneType' object is not subscriptable
2025-05-07 20:03:50 - app.routers.documents - ERROR - 处理文档 15 失败: 'NoneType' object is not subscriptable
2025-05-07 20:03:50 - app.routers.documents - ERROR - 处理文档 14 失败: 'NoneType' object is not subscriptable
2025-05-07 20:03:50 - app.routers.documents - ERROR - 处理文档 13 失败: 'NoneType' object is not subscriptable
2025-05-07 20:03:50 - app.routers.documents - ERROR - 处理文档 12 失败: 'NoneType' object is not subscriptable
2025-05-07 20:08:44 - root - INFO - 日志系统初始化完成
2025-05-07 20:08:44 - app.main - INFO - 数据库表创建完成
2025-05-07 20:08:58 - root - INFO - 日志系统初始化完成
2025-05-07 20:08:58 - app.main - INFO - 数据库表创建完成
2025-05-07 20:08:59 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-07 20:08:59 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-07 20:08:59 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-07 20:08:59 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-07 20:08:59 - app.services.vector_store - INFO - 初始化向量存储服务
2025-05-07 20:08:59 - app.services.vector_store - INFO - 初始化向量存储服务
2025-05-07 20:08:59 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-07 20:08:59 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-07 20:08:59 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-07 20:08:59 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-07 20:08:59 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-07 20:08:59 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-07 20:08:59 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-07 20:08:59 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-07 20:08:59 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-05-07 20:08:59 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-05-07 20:08:59 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-05-07 20:08:59 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-05-07 20:08:59 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-07 20:09:00 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-07 20:09:00 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-07 20:09:00 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-07 20:09:00 - app.services.vector_store - INFO - 创建集合: knowledge_base
2025-05-07 20:09:00 - app.services.vector_store - INFO - 创建集合: knowledge_base
2025-05-07 20:09:00 - app.services.vector_store - ERROR - 检查或创建集合失败: 'Settings' object has no attribute 'VECTOR_SIZE'
2025-05-07 20:09:00 - app.services.vector_store - ERROR - 检查或创建集合失败: 'Settings' object has no attribute 'VECTOR_SIZE'
2025-05-07 20:09:00 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-07 20:09:00 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-07 20:09:00 - app.routers.documents - ERROR - 处理文档 21 失败: 1 validation error for DocumentPreview
status
  Input should be 'pending', 'processing', 'completed', 'failed' or 'deleted' [type=enum, input_value='PROCESSING', input_type=str]
    For further information visit https://errors.pydantic.dev/2.9/v/enum
Traceback (most recent call last):
  File "/Users/wangke/notebook-ai/notebook-backend/app/routers/documents.py", line 264, in list_documents
    document_previews.append(DocumentPreview.model_validate(doc_dict))
  File "/Users/wangke/notebook-ai/notebook-backend/venv/lib/python3.10/site-packages/pydantic/main.py", line 596, in model_validate
    return cls.__pydantic_validator__.validate_python(
pydantic_core._pydantic_core.ValidationError: 1 validation error for DocumentPreview
status
  Input should be 'pending', 'processing', 'completed', 'failed' or 'deleted' [type=enum, input_value='PROCESSING', input_type=str]
    For further information visit https://errors.pydantic.dev/2.9/v/enum
2025-05-07 20:09:00 - app.routers.documents - ERROR - 处理文档 20 失败: 1 validation error for DocumentPreview
status
  Input should be 'pending', 'processing', 'completed', 'failed' or 'deleted' [type=enum, input_value='PENDING', input_type=str]
    For further information visit https://errors.pydantic.dev/2.9/v/enum
Traceback (most recent call last):
  File "/Users/wangke/notebook-ai/notebook-backend/app/routers/documents.py", line 264, in list_documents
    document_previews.append(DocumentPreview.model_validate(doc_dict))
  File "/Users/wangke/notebook-ai/notebook-backend/venv/lib/python3.10/site-packages/pydantic/main.py", line 596, in model_validate
    return cls.__pydantic_validator__.validate_python(
pydantic_core._pydantic_core.ValidationError: 1 validation error for DocumentPreview
status
  Input should be 'pending', 'processing', 'completed', 'failed' or 'deleted' [type=enum, input_value='PENDING', input_type=str]
    For further information visit https://errors.pydantic.dev/2.9/v/enum
2025-05-07 20:09:00 - app.routers.documents - ERROR - 处理文档 19 失败: 1 validation error for DocumentPreview
status
  Input should be 'pending', 'processing', 'completed', 'failed' or 'deleted' [type=enum, input_value='PENDING', input_type=str]
    For further information visit https://errors.pydantic.dev/2.9/v/enum
Traceback (most recent call last):
  File "/Users/wangke/notebook-ai/notebook-backend/app/routers/documents.py", line 264, in list_documents
    document_previews.append(DocumentPreview.model_validate(doc_dict))
  File "/Users/wangke/notebook-ai/notebook-backend/venv/lib/python3.10/site-packages/pydantic/main.py", line 596, in model_validate
    return cls.__pydantic_validator__.validate_python(
pydantic_core._pydantic_core.ValidationError: 1 validation error for DocumentPreview
status
  Input should be 'pending', 'processing', 'completed', 'failed' or 'deleted' [type=enum, input_value='PENDING', input_type=str]
    For further information visit https://errors.pydantic.dev/2.9/v/enum
2025-05-07 20:09:00 - app.routers.documents - ERROR - 处理文档 18 失败: 1 validation error for DocumentPreview
status
  Input should be 'pending', 'processing', 'completed', 'failed' or 'deleted' [type=enum, input_value='PENDING', input_type=str]
    For further information visit https://errors.pydantic.dev/2.9/v/enum
Traceback (most recent call last):
  File "/Users/wangke/notebook-ai/notebook-backend/app/routers/documents.py", line 264, in list_documents
    document_previews.append(DocumentPreview.model_validate(doc_dict))
  File "/Users/wangke/notebook-ai/notebook-backend/venv/lib/python3.10/site-packages/pydantic/main.py", line 596, in model_validate
    return cls.__pydantic_validator__.validate_python(
pydantic_core._pydantic_core.ValidationError: 1 validation error for DocumentPreview
status
  Input should be 'pending', 'processing', 'completed', 'failed' or 'deleted' [type=enum, input_value='PENDING', input_type=str]
    For further information visit https://errors.pydantic.dev/2.9/v/enum
2025-05-07 20:09:00 - app.routers.documents - ERROR - 处理文档 17 失败: 1 validation error for DocumentPreview
status
  Input should be 'pending', 'processing', 'completed', 'failed' or 'deleted' [type=enum, input_value='PENDING', input_type=str]
    For further information visit https://errors.pydantic.dev/2.9/v/enum
Traceback (most recent call last):
  File "/Users/wangke/notebook-ai/notebook-backend/app/routers/documents.py", line 264, in list_documents
    document_previews.append(DocumentPreview.model_validate(doc_dict))
  File "/Users/wangke/notebook-ai/notebook-backend/venv/lib/python3.10/site-packages/pydantic/main.py", line 596, in model_validate
    return cls.__pydantic_validator__.validate_python(
pydantic_core._pydantic_core.ValidationError: 1 validation error for DocumentPreview
status
  Input should be 'pending', 'processing', 'completed', 'failed' or 'deleted' [type=enum, input_value='PENDING', input_type=str]
    For further information visit https://errors.pydantic.dev/2.9/v/enum
2025-05-07 20:09:00 - app.routers.documents - ERROR - 处理文档 16 失败: 1 validation error for DocumentPreview
status
  Input should be 'pending', 'processing', 'completed', 'failed' or 'deleted' [type=enum, input_value='PENDING', input_type=str]
    For further information visit https://errors.pydantic.dev/2.9/v/enum
Traceback (most recent call last):
  File "/Users/wangke/notebook-ai/notebook-backend/app/routers/documents.py", line 264, in list_documents
    document_previews.append(DocumentPreview.model_validate(doc_dict))
  File "/Users/wangke/notebook-ai/notebook-backend/venv/lib/python3.10/site-packages/pydantic/main.py", line 596, in model_validate
    return cls.__pydantic_validator__.validate_python(
pydantic_core._pydantic_core.ValidationError: 1 validation error for DocumentPreview
status
  Input should be 'pending', 'processing', 'completed', 'failed' or 'deleted' [type=enum, input_value='PENDING', input_type=str]
    For further information visit https://errors.pydantic.dev/2.9/v/enum
2025-05-07 20:09:00 - app.routers.documents - ERROR - 处理文档 15 失败: 1 validation error for DocumentPreview
status
  Input should be 'pending', 'processing', 'completed', 'failed' or 'deleted' [type=enum, input_value='PENDING', input_type=str]
    For further information visit https://errors.pydantic.dev/2.9/v/enum
Traceback (most recent call last):
  File "/Users/wangke/notebook-ai/notebook-backend/app/routers/documents.py", line 264, in list_documents
    document_previews.append(DocumentPreview.model_validate(doc_dict))
  File "/Users/wangke/notebook-ai/notebook-backend/venv/lib/python3.10/site-packages/pydantic/main.py", line 596, in model_validate
    return cls.__pydantic_validator__.validate_python(
pydantic_core._pydantic_core.ValidationError: 1 validation error for DocumentPreview
status
  Input should be 'pending', 'processing', 'completed', 'failed' or 'deleted' [type=enum, input_value='PENDING', input_type=str]
    For further information visit https://errors.pydantic.dev/2.9/v/enum
2025-05-07 20:09:00 - app.routers.documents - ERROR - 处理文档 14 失败: 1 validation error for DocumentPreview
status
  Input should be 'pending', 'processing', 'completed', 'failed' or 'deleted' [type=enum, input_value='PENDING', input_type=str]
    For further information visit https://errors.pydantic.dev/2.9/v/enum
Traceback (most recent call last):
  File "/Users/wangke/notebook-ai/notebook-backend/app/routers/documents.py", line 264, in list_documents
    document_previews.append(DocumentPreview.model_validate(doc_dict))
  File "/Users/wangke/notebook-ai/notebook-backend/venv/lib/python3.10/site-packages/pydantic/main.py", line 596, in model_validate
    return cls.__pydantic_validator__.validate_python(
pydantic_core._pydantic_core.ValidationError: 1 validation error for DocumentPreview
status
  Input should be 'pending', 'processing', 'completed', 'failed' or 'deleted' [type=enum, input_value='PENDING', input_type=str]
    For further information visit https://errors.pydantic.dev/2.9/v/enum
2025-05-07 20:09:00 - app.routers.documents - ERROR - 处理文档 13 失败: 1 validation error for DocumentPreview
status
  Input should be 'pending', 'processing', 'completed', 'failed' or 'deleted' [type=enum, input_value='PENDING', input_type=str]
    For further information visit https://errors.pydantic.dev/2.9/v/enum
Traceback (most recent call last):
  File "/Users/wangke/notebook-ai/notebook-backend/app/routers/documents.py", line 264, in list_documents
    document_previews.append(DocumentPreview.model_validate(doc_dict))
  File "/Users/wangke/notebook-ai/notebook-backend/venv/lib/python3.10/site-packages/pydantic/main.py", line 596, in model_validate
    return cls.__pydantic_validator__.validate_python(
pydantic_core._pydantic_core.ValidationError: 1 validation error for DocumentPreview
status
  Input should be 'pending', 'processing', 'completed', 'failed' or 'deleted' [type=enum, input_value='PENDING', input_type=str]
    For further information visit https://errors.pydantic.dev/2.9/v/enum
2025-05-07 20:09:00 - app.routers.documents - ERROR - 处理文档 12 失败: 1 validation error for DocumentPreview
status
  Input should be 'pending', 'processing', 'completed', 'failed' or 'deleted' [type=enum, input_value='PENDING', input_type=str]
    For further information visit https://errors.pydantic.dev/2.9/v/enum
Traceback (most recent call last):
  File "/Users/wangke/notebook-ai/notebook-backend/app/routers/documents.py", line 264, in list_documents
    document_previews.append(DocumentPreview.model_validate(doc_dict))
  File "/Users/wangke/notebook-ai/notebook-backend/venv/lib/python3.10/site-packages/pydantic/main.py", line 596, in model_validate
    return cls.__pydantic_validator__.validate_python(
pydantic_core._pydantic_core.ValidationError: 1 validation error for DocumentPreview
status
  Input should be 'pending', 'processing', 'completed', 'failed' or 'deleted' [type=enum, input_value='PENDING', input_type=str]
    For further information visit https://errors.pydantic.dev/2.9/v/enum
2025-05-07 20:09:00 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-07 20:09:00 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-07 20:09:00 - app.routers.documents - ERROR - 处理文档 21 失败: 1 validation error for DocumentPreview
status
  Input should be 'pending', 'processing', 'completed', 'failed' or 'deleted' [type=enum, input_value='PROCESSING', input_type=str]
    For further information visit https://errors.pydantic.dev/2.9/v/enum
Traceback (most recent call last):
  File "/Users/wangke/notebook-ai/notebook-backend/app/routers/documents.py", line 264, in list_documents
    document_previews.append(DocumentPreview.model_validate(doc_dict))
  File "/Users/wangke/notebook-ai/notebook-backend/venv/lib/python3.10/site-packages/pydantic/main.py", line 596, in model_validate
    return cls.__pydantic_validator__.validate_python(
pydantic_core._pydantic_core.ValidationError: 1 validation error for DocumentPreview
status
  Input should be 'pending', 'processing', 'completed', 'failed' or 'deleted' [type=enum, input_value='PROCESSING', input_type=str]
    For further information visit https://errors.pydantic.dev/2.9/v/enum
2025-05-07 20:09:01 - app.services.vector_store - INFO - 初始化向量存储服务
2025-05-07 20:09:01 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-07 20:09:01 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-07 20:09:01 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-07 20:09:01 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-07 20:09:01 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-05-07 20:09:01 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-05-07 20:09:02 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-07 20:09:02 - app.services.vector_store - INFO - 创建集合: knowledge_base
2025-05-07 20:09:02 - app.services.vector_store - ERROR - 检查或创建集合失败: 'Settings' object has no attribute 'VECTOR_SIZE'
2025-05-07 20:09:02 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-07 20:09:02 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-07 20:09:02 - app.routers.documents - ERROR - 处理文档 21 失败: 1 validation error for DocumentPreview
status
  Input should be 'pending', 'processing', 'completed', 'failed' or 'deleted' [type=enum, input_value='PROCESSING', input_type=str]
    For further information visit https://errors.pydantic.dev/2.9/v/enum
Traceback (most recent call last):
  File "/Users/wangke/notebook-ai/notebook-backend/app/routers/documents.py", line 264, in list_documents
    document_previews.append(DocumentPreview.model_validate(doc_dict))
  File "/Users/wangke/notebook-ai/notebook-backend/venv/lib/python3.10/site-packages/pydantic/main.py", line 596, in model_validate
    return cls.__pydantic_validator__.validate_python(
pydantic_core._pydantic_core.ValidationError: 1 validation error for DocumentPreview
status
  Input should be 'pending', 'processing', 'completed', 'failed' or 'deleted' [type=enum, input_value='PROCESSING', input_type=str]
    For further information visit https://errors.pydantic.dev/2.9/v/enum
2025-05-07 20:10:25 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-07 20:10:25 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-07 20:10:25 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-07 20:10:25 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-07 20:10:25 - app.services.vector_store - INFO - 初始化向量存储服务
2025-05-07 20:10:25 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-07 20:10:25 - app.services.vector_store - INFO - 初始化向量存储服务
2025-05-07 20:10:25 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-07 20:10:25 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-07 20:10:25 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-07 20:10:25 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-07 20:10:25 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-07 20:10:25 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-07 20:10:25 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-05-07 20:10:25 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-05-07 20:10:25 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-07 20:10:25 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-05-07 20:10:25 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-05-07 20:10:26 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-07 20:10:26 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-07 20:10:26 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-07 20:10:26 - app.services.vector_store - INFO - 创建集合: knowledge_base
2025-05-07 20:10:26 - app.services.vector_store - INFO - 创建集合: knowledge_base
2025-05-07 20:10:26 - app.services.vector_store - ERROR - 检查或创建集合失败: 'Settings' object has no attribute 'VECTOR_SIZE'
2025-05-07 20:10:26 - app.services.vector_store - ERROR - 检查或创建集合失败: 'Settings' object has no attribute 'VECTOR_SIZE'
2025-05-07 20:10:26 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-07 20:10:26 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-07 20:10:26 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-07 20:10:26 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-07 20:10:26 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-07 20:10:27 - app.services.vector_store - INFO - 初始化向量存储服务
2025-05-07 20:10:27 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-07 20:10:27 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-07 20:10:28 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-07 20:10:28 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-07 20:10:28 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-05-07 20:10:28 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-05-07 20:10:28 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-07 20:10:28 - app.services.vector_store - INFO - 创建集合: knowledge_base
2025-05-07 20:10:28 - app.services.vector_store - ERROR - 检查或创建集合失败: 'Settings' object has no attribute 'VECTOR_SIZE'
2025-05-07 20:10:28 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-07 20:10:28 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-07 20:10:49 - app.services.vector_store - INFO - 初始化向量存储服务
2025-05-07 20:10:49 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-07 20:10:49 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-07 20:10:49 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-07 20:10:49 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-07 20:10:49 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-05-07 20:10:49 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-05-07 20:10:50 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-07 20:10:50 - app.services.vector_store - INFO - 创建集合: knowledge_base
2025-05-07 20:10:50 - app.services.vector_store - ERROR - 检查或创建集合失败: 'Settings' object has no attribute 'VECTOR_SIZE'
2025-05-07 20:10:50 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-07 20:10:50 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-07 20:10:50 - app.routers.documents - INFO - 接收到文件上传请求: 验证码.pdf, 类型: application/pdf
2025-05-07 20:10:50 - app.routers.documents - INFO - 解析元数据: {"name":"验证码"}...
2025-05-07 20:10:50 - app.routers.documents - INFO - 开始处理上传的文件
2025-05-07 20:10:50 - app.utils.file_utils - INFO - 文件已保存到临时路径: /var/folders/gs/kbsr2cy55nz47p4hyrxbtg0r0000gn/T/tmp7712qf_9.pdf
2025-05-07 20:10:50 - app.routers.documents - INFO - 文件已保存到临时路径: /var/folders/gs/kbsr2cy55nz47p4hyrxbtg0r0000gn/T/tmp7712qf_9.pdf
2025-05-07 20:10:50 - app.routers.documents - ERROR - 上传文档失败: object int can't be used in 'await' expression
Traceback (most recent call last):
  File "/Users/wangke/notebook-ai/notebook-backend/app/routers/documents.py", line 94, in upload_document
    await file.file.seek(0)
TypeError: object int can't be used in 'await' expression
2025-05-07 20:12:34 - root - INFO - 日志系统初始化完成
2025-05-07 20:12:34 - app.main - INFO - 数据库表创建完成
2025-05-07 20:12:47 - root - INFO - 日志系统初始化完成
2025-05-07 20:12:48 - app.main - INFO - 数据库表创建完成
2025-05-07 20:12:48 - app.services.vector_store - INFO - 初始化向量存储服务
2025-05-07 20:12:48 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-07 20:12:48 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-07 20:12:48 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-07 20:12:48 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-07 20:12:48 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-05-07 20:12:48 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-05-07 20:12:48 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-07 20:12:48 - app.services.vector_store - INFO - 创建集合: knowledge_base
2025-05-07 20:12:48 - app.services.vector_store - ERROR - 检查或创建集合失败: 'Settings' object has no attribute 'VECTOR_SIZE'
2025-05-07 20:12:48 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-07 20:12:49 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-07 20:12:49 - app.routers.documents - INFO - 接收到文件上传请求: 验证码.pdf, 类型: application/pdf
2025-05-07 20:12:49 - app.routers.documents - INFO - 解析元数据: {"name":"验证码"}...
2025-05-07 20:12:49 - app.routers.documents - INFO - 开始处理上传的文件
2025-05-07 20:12:49 - app.utils.file_utils - INFO - 文件已保存到临时路径: /var/folders/gs/kbsr2cy55nz47p4hyrxbtg0r0000gn/T/tmpw9s8v8s3.pdf
2025-05-07 20:12:49 - app.routers.documents - INFO - 文件已保存到临时路径: /var/folders/gs/kbsr2cy55nz47p4hyrxbtg0r0000gn/T/tmpw9s8v8s3.pdf
2025-05-07 20:12:49 - app.services.document_service - INFO - 开始处理文件: 验证码.pdf, 内容类型: application/pdf
2025-05-07 20:12:49 - app.services.document_service - INFO - 文件大小: 162462 字节
2025-05-07 20:12:49 - app.services.document_service - INFO - 文件类型识别为: pdf
2025-05-07 20:12:49 - app.services.document_service - INFO - 检测到二进制文件类型: pdf，将进行Base64编码
2025-05-07 20:12:49 - app.services.document_service - INFO - 文件包含NUL字符，确认为二进制文件
2025-05-07 20:12:49 - app.services.document_service - INFO - Base64编码完成，编码后大小: 216626 字节
2025-05-07 20:12:49 - app.services.document_service - INFO - 准备创建文档记录
2025-05-07 20:12:49 - app.services.document_service - INFO - 创建文档: 验证码.pdf, 类型: pdf, 用户ID: 1
2025-05-07 20:12:49 - app.services.document_service - INFO - 文档创建成功: ID=22
2025-05-07 20:12:49 - app.services.task_service - INFO - 创建任务: 处理文档: 验证码.pdf, 类型: DOCUMENT_PROCESSING, 创建者: 1
2025-05-07 20:12:49 - app.services.task_service - INFO - 任务创建成功: 46ef206a-1a32-4888-8e0e-a5b20bd463f2
2025-05-07 20:12:49 - app.services.document_service - INFO - 更新文档状态: ID=22, 状态=PROCESSING
2025-05-07 20:12:49 - app.services.document_service - INFO - 文档状态已更新: ID=22, 状态=PROCESSING
2025-05-07 20:12:49 - app.routers.documents - INFO - 文件处理成功，文档ID: 22, 任务ID: 46ef206a-1a32-4888-8e0e-a5b20bd463f2
2025-05-07 20:12:49 - app.routers.documents - ERROR - 上传文档失败: 2 validation errors for DocumentResponse
content
  Input should be a valid string [type=string_type, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.9/v/string_type
status
  Input should be 'pending', 'processing', 'completed', 'failed' or 'deleted' [type=enum, input_value='PROCESSING', input_type=str]
    For further information visit https://errors.pydantic.dev/2.9/v/enum
Traceback (most recent call last):
  File "/Users/wangke/notebook-ai/notebook-backend/app/routers/documents.py", line 139, in upload_document
    return DocumentResponse.model_validate(doc_dict)
  File "/Users/wangke/notebook-ai/notebook-backend/venv/lib/python3.10/site-packages/pydantic/main.py", line 596, in model_validate
    return cls.__pydantic_validator__.validate_python(
pydantic_core._pydantic_core.ValidationError: 2 validation errors for DocumentResponse
content
  Input should be a valid string [type=string_type, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.9/v/string_type
status
  Input should be 'pending', 'processing', 'completed', 'failed' or 'deleted' [type=enum, input_value='PROCESSING', input_type=str]
    For further information visit https://errors.pydantic.dev/2.9/v/enum
2025-05-07 20:16:30 - root - INFO - 日志系统初始化完成
2025-05-07 20:16:31 - app.main - INFO - 数据库表创建完成
2025-05-07 20:16:49 - root - INFO - 日志系统初始化完成
2025-05-07 20:16:49 - app.main - INFO - 数据库表创建完成
2025-05-07 20:20:16 - root - INFO - 日志系统初始化完成
2025-05-07 20:20:17 - app.main - INFO - 数据库表创建完成
2025-05-07 20:20:40 - root - INFO - 日志系统初始化完成
2025-05-07 20:20:40 - app.main - INFO - 数据库表创建完成
2025-05-07 20:20:52 - root - INFO - 日志系统初始化完成
2025-05-07 20:20:53 - app.main - INFO - 数据库表创建完成
2025-05-07 20:21:21 - root - INFO - 日志系统初始化完成
2025-05-07 20:21:22 - app.main - INFO - 数据库表创建完成
2025-05-07 20:21:33 - root - INFO - 日志系统初始化完成
2025-05-07 20:21:33 - app.main - INFO - 数据库表创建完成
2025-05-07 20:21:42 - app.services.vector_store - INFO - 初始化向量存储服务
2025-05-07 20:21:42 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-07 20:21:42 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-07 20:21:42 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-07 20:21:42 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-07 20:21:42 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-05-07 20:21:42 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-05-07 20:21:42 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-07 20:21:42 - app.services.vector_store - INFO - 创建集合: knowledge_base
2025-05-07 20:21:42 - app.services.vector_store - ERROR - 检查或创建集合失败: 'Settings' object has no attribute 'VECTOR_SIZE'
2025-05-07 20:21:42 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-07 20:21:42 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-07 20:21:42 - app.routers.documents - INFO - 接收到文件上传请求: 验证码.pdf, 类型: application/pdf
2025-05-07 20:21:42 - app.routers.documents - INFO - 解析元数据: {"name":"验证码"}...
2025-05-07 20:21:42 - app.routers.documents - INFO - 开始处理上传的文件
2025-05-07 20:21:42 - app.utils.file_utils - INFO - 文件已保存到临时路径: /var/folders/gs/kbsr2cy55nz47p4hyrxbtg0r0000gn/T/tmp165zfz6o.pdf
2025-05-07 20:21:42 - app.routers.documents - INFO - 文件已保存到临时路径: /var/folders/gs/kbsr2cy55nz47p4hyrxbtg0r0000gn/T/tmp165zfz6o.pdf
2025-05-07 20:21:42 - app.services.document_service - INFO - 开始处理文件: 验证码.pdf, 内容类型: application/pdf
2025-05-07 20:21:42 - app.services.document_service - INFO - 文件大小: 162462 字节
2025-05-07 20:21:42 - app.services.document_service - INFO - 文件类型识别为: pdf
2025-05-07 20:21:42 - app.services.document_service - INFO - 检测到二进制文件类型: pdf，将进行Base64编码
2025-05-07 20:21:42 - app.services.document_service - INFO - 文件包含NUL字符，确认为二进制文件
2025-05-07 20:21:42 - app.services.document_service - INFO - Base64编码完成，编码后大小: 216626 字节
2025-05-07 20:21:42 - app.services.document_service - INFO - 准备创建文档记录
2025-05-07 20:21:42 - app.services.document_service - INFO - 创建文档: 验证码.pdf, 类型: pdf, 用户ID: 1
2025-05-07 20:21:42 - app.services.document_service - INFO - 文档创建成功: ID=23
2025-05-07 20:21:42 - app.services.task_service - INFO - 创建任务: 处理文档: 验证码.pdf, 类型: DOCUMENT_PROCESSING, 创建者: 1
2025-05-07 20:21:42 - app.services.task_service - INFO - 任务创建成功: aef9f2de-7104-4376-9c8e-ce8c0b597c41
2025-05-07 20:21:42 - app.services.document_service - INFO - 更新文档状态: ID=23, 状态=processing
2025-05-07 20:21:42 - app.services.document_service - INFO - 文档状态已更新: ID=23, 状态=processing
2025-05-07 20:21:43 - app.routers.documents - INFO - 文件处理成功，文档ID: 23, 任务ID: aef9f2de-7104-4376-9c8e-ce8c0b597c41
2025-05-07 20:21:43 - app.services.vector_store - INFO - 初始化向量存储服务
2025-05-07 20:21:43 - app.services.vector_store - INFO - 初始化向量存储服务
2025-05-07 20:21:43 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-07 20:21:43 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-07 20:21:43 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-07 20:21:43 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-07 20:21:43 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-07 20:21:43 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-07 20:21:43 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-07 20:21:43 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-07 20:21:43 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-05-07 20:21:43 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-05-07 20:21:43 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-05-07 20:21:43 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-05-07 20:21:43 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-07 20:21:43 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-07 20:21:43 - app.services.vector_store - INFO - 创建集合: knowledge_base
2025-05-07 20:21:43 - app.services.vector_store - INFO - 创建集合: knowledge_base
2025-05-07 20:21:43 - app.services.vector_store - ERROR - 检查或创建集合失败: 'Settings' object has no attribute 'VECTOR_SIZE'
2025-05-07 20:21:43 - app.services.vector_store - ERROR - 检查或创建集合失败: 'Settings' object has no attribute 'VECTOR_SIZE'
2025-05-07 20:21:43 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-07 20:21:43 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-07 20:21:43 - app.routers.documents - ERROR - 处理文档 22 失败: 1 validation error for DocumentPreview
status
  Input should be 'pending', 'processing', 'completed', 'failed' or 'deleted' [type=enum, input_value='PROCESSING', input_type=str]
    For further information visit https://errors.pydantic.dev/2.9/v/enum
Traceback (most recent call last):
  File "/Users/wangke/notebook-ai/notebook-backend/app/routers/documents.py", line 264, in list_documents
    document_previews.append(DocumentPreview.model_validate(doc_dict))
  File "/Users/wangke/notebook-ai/notebook-backend/venv/lib/python3.10/site-packages/pydantic/main.py", line 596, in model_validate
    return cls.__pydantic_validator__.validate_python(
pydantic_core._pydantic_core.ValidationError: 1 validation error for DocumentPreview
status
  Input should be 'pending', 'processing', 'completed', 'failed' or 'deleted' [type=enum, input_value='PROCESSING', input_type=str]
    For further information visit https://errors.pydantic.dev/2.9/v/enum
2025-05-07 20:21:43 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-07 20:21:43 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-07 20:22:29 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-07 20:22:29 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-07 20:22:29 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-07 20:22:29 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-07 20:22:29 - app.services.vector_store - INFO - 初始化向量存储服务
2025-05-07 20:22:29 - app.services.vector_store - INFO - 初始化向量存储服务
2025-05-07 20:22:29 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-07 20:22:29 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-07 20:22:29 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-07 20:22:29 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-07 20:22:29 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-07 20:22:29 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-07 20:22:29 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-07 20:22:29 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-07 20:22:29 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-05-07 20:22:29 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-05-07 20:22:29 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-05-07 20:22:29 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-05-07 20:22:30 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-07 20:22:30 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-07 20:22:30 - app.services.vector_store - INFO - 创建集合: knowledge_base
2025-05-07 20:22:30 - app.services.vector_store - INFO - 创建集合: knowledge_base
2025-05-07 20:22:30 - app.services.vector_store - ERROR - 检查或创建集合失败: 'Settings' object has no attribute 'VECTOR_SIZE'
2025-05-07 20:22:30 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-07 20:22:30 - app.services.vector_store - ERROR - 检查或创建集合失败: 'Settings' object has no attribute 'VECTOR_SIZE'
2025-05-07 20:22:30 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-07 20:22:30 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-07 20:22:30 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-07 20:22:30 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-07 20:22:30 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-07 20:22:30 - app.services.vector_store - INFO - 初始化向量存储服务
2025-05-07 20:22:30 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-07 20:22:30 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-07 20:22:31 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-07 20:22:31 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-07 20:22:31 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-05-07 20:22:31 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-05-07 20:22:31 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-07 20:22:31 - app.services.vector_store - INFO - 创建集合: knowledge_base
2025-05-07 20:22:31 - app.services.vector_store - ERROR - 检查或创建集合失败: 'Settings' object has no attribute 'VECTOR_SIZE'
2025-05-07 20:22:31 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-07 20:22:31 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-07 20:22:35 - app.services.vector_store - INFO - 初始化向量存储服务
2025-05-07 20:22:35 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-07 20:22:35 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-07 20:22:35 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-07 20:22:36 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-07 20:22:36 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-05-07 20:22:36 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-05-07 20:22:36 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-07 20:22:36 - app.services.vector_store - INFO - 创建集合: knowledge_base
2025-05-07 20:22:36 - app.services.vector_store - ERROR - 检查或创建集合失败: 'Settings' object has no attribute 'VECTOR_SIZE'
2025-05-07 20:22:36 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-07 20:22:36 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-07 20:23:08 - app.services.vector_store - INFO - 初始化向量存储服务
2025-05-07 20:23:08 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-07 20:23:08 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-07 20:23:08 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-07 20:23:09 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-07 20:23:09 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-05-07 20:23:09 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-05-07 20:23:09 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-07 20:23:09 - app.services.vector_store - INFO - 创建集合: knowledge_base
2025-05-07 20:23:09 - app.services.vector_store - ERROR - 检查或创建集合失败: 'Settings' object has no attribute 'VECTOR_SIZE'
2025-05-07 20:23:09 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-07 20:23:09 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-07 20:23:09 - app.routers.documents - INFO - 接收到文件上传请求: 线上诊断Arthas 15ff8eef777580839c4dcf2d552da527.md, 类型: text/markdown
2025-05-07 20:23:09 - app.routers.documents - INFO - 解析元数据: {"name":"线上诊断Arthas 15ff8eef777580839c4dcf2d552da527"}...
2025-05-07 20:23:09 - app.routers.documents - INFO - 开始处理上传的文件
2025-05-07 20:23:09 - app.utils.file_utils - INFO - 文件已保存到临时路径: /var/folders/gs/kbsr2cy55nz47p4hyrxbtg0r0000gn/T/tmp5w47h_h_.md
2025-05-07 20:23:09 - app.routers.documents - INFO - 文件已保存到临时路径: /var/folders/gs/kbsr2cy55nz47p4hyrxbtg0r0000gn/T/tmp5w47h_h_.md
2025-05-07 20:23:09 - app.services.document_service - INFO - 开始处理文件: 线上诊断Arthas 15ff8eef777580839c4dcf2d552da527.md, 内容类型: text/markdown
2025-05-07 20:23:09 - app.services.document_service - INFO - 文件大小: 13075 字节
2025-05-07 20:23:09 - app.services.document_service - INFO - 文件类型识别为: md
2025-05-07 20:23:09 - app.services.document_service - INFO - 文本文件类型: md，使用普通UTF-8解码
2025-05-07 20:23:09 - app.services.document_service - INFO - 准备创建文档记录
2025-05-07 20:23:09 - app.services.document_service - INFO - 创建文档: 线上诊断Arthas 15ff8eef777580839c4dcf2d552da527.md, 类型: md, 用户ID: 1
2025-05-07 20:23:09 - app.services.document_service - INFO - 文档创建成功: ID=24
2025-05-07 20:23:09 - app.services.task_service - INFO - 创建任务: 处理文档: 线上诊断Arthas 15ff8eef777580839c4dcf2d552da527.md, 类型: DOCUMENT_PROCESSING, 创建者: 1
2025-05-07 20:23:09 - app.services.task_service - INFO - 任务创建成功: cee3c883-9bf4-4f45-b76e-8c9425893081
2025-05-07 20:23:09 - app.services.document_service - INFO - 更新文档状态: ID=24, 状态=processing
2025-05-07 20:23:09 - app.services.document_service - INFO - 文档状态已更新: ID=24, 状态=processing
2025-05-07 20:23:09 - app.routers.documents - INFO - 文件处理成功，文档ID: 24, 任务ID: cee3c883-9bf4-4f45-b76e-8c9425893081
2025-05-07 20:23:09 - app.services.vector_store - INFO - 初始化向量存储服务
2025-05-07 20:23:09 - app.services.vector_store - INFO - 初始化向量存储服务
2025-05-07 20:23:09 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-07 20:23:09 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-07 20:23:09 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-07 20:23:09 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-07 20:23:09 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-07 20:23:09 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-07 20:23:09 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-07 20:23:09 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-07 20:23:09 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-05-07 20:23:09 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-05-07 20:23:09 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-05-07 20:23:09 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-05-07 20:23:10 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-07 20:23:10 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-07 20:23:10 - app.services.vector_store - INFO - 创建集合: knowledge_base
2025-05-07 20:23:10 - app.services.vector_store - INFO - 创建集合: knowledge_base
2025-05-07 20:23:10 - app.services.vector_store - ERROR - 检查或创建集合失败: 'Settings' object has no attribute 'VECTOR_SIZE'
2025-05-07 20:23:10 - app.services.vector_store - ERROR - 检查或创建集合失败: 'Settings' object has no attribute 'VECTOR_SIZE'
2025-05-07 20:23:10 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-07 20:23:10 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-07 20:23:10 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-07 20:23:10 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-07 20:24:16 - app.services.vector_store - INFO - 初始化向量存储服务
2025-05-07 20:24:16 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-07 20:24:16 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-07 20:24:16 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-07 20:24:16 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-07 20:24:16 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-05-07 20:24:16 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-05-07 20:24:16 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-07 20:24:16 - app.services.vector_store - INFO - 创建集合: knowledge_base
2025-05-07 20:24:16 - app.services.vector_store - ERROR - 检查或创建集合失败: 'Settings' object has no attribute 'VECTOR_SIZE'
2025-05-07 20:24:16 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-07 20:24:16 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-07 20:26:21 - app.services.vector_store - INFO - 初始化向量存储服务
2025-05-07 20:26:21 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-07 20:26:21 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-07 20:26:21 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-07 20:26:21 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-07 20:26:21 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-05-07 20:26:21 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-05-07 20:26:21 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-07 20:26:21 - app.services.vector_store - INFO - 创建集合: knowledge_base
2025-05-07 20:26:21 - app.services.vector_store - ERROR - 检查或创建集合失败: 'Settings' object has no attribute 'VECTOR_SIZE'
2025-05-07 20:26:21 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-07 20:26:21 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-07 20:27:00 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-07 20:27:00 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-07 20:27:00 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-07 20:27:00 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-07 20:27:00 - app.services.vector_store - INFO - 初始化向量存储服务
2025-05-07 20:27:00 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-07 20:27:00 - app.services.vector_store - INFO - 初始化向量存储服务
2025-05-07 20:27:00 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-07 20:27:00 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-07 20:27:00 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-07 20:27:00 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-07 20:27:00 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-07 20:27:00 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-07 20:27:00 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-07 20:27:00 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-05-07 20:27:00 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-05-07 20:27:00 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-05-07 20:27:00 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-05-07 20:27:00 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-07 20:27:00 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-07 20:27:00 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-07 20:27:00 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-07 20:27:00 - app.services.vector_store - INFO - 创建集合: knowledge_base
2025-05-07 20:27:00 - app.services.vector_store - INFO - 创建集合: knowledge_base
2025-05-07 20:27:00 - app.services.vector_store - ERROR - 检查或创建集合失败: 'Settings' object has no attribute 'VECTOR_SIZE'
2025-05-07 20:27:00 - app.services.vector_store - ERROR - 检查或创建集合失败: 'Settings' object has no attribute 'VECTOR_SIZE'
2025-05-07 20:27:00 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-07 20:27:01 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-07 20:27:01 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-07 20:27:01 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-07 20:27:21 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-07 20:27:21 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-07 20:27:28 - app.services.vector_store - INFO - 初始化向量存储服务
2025-05-07 20:27:28 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-07 20:27:28 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-07 20:27:28 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-07 20:27:28 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-07 20:27:28 - app.services.vector_store - INFO - 初始化向量存储服务
2025-05-07 20:27:28 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-07 20:27:28 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-07 20:27:28 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-07 20:27:29 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-07 20:27:29 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-05-07 20:27:29 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-05-07 20:27:29 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-07 20:27:29 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-07 20:27:29 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-05-07 20:27:29 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-05-07 20:27:29 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-07 20:27:29 - app.services.vector_store - INFO - 创建集合: knowledge_base
2025-05-07 20:27:29 - app.services.vector_store - ERROR - 检查或创建集合失败: 'Settings' object has no attribute 'VECTOR_SIZE'
2025-05-07 20:27:29 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-07 20:27:29 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-07 20:27:29 - app.services.vector_store - INFO - 创建集合: knowledge_base
2025-05-07 20:27:29 - app.services.vector_store - ERROR - 检查或创建集合失败: 'Settings' object has no attribute 'VECTOR_SIZE'
2025-05-07 20:27:29 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-07 20:27:29 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-07 20:27:29 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-07 20:27:29 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-07 20:27:29 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-07 20:29:15 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-07 20:29:15 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-07 20:29:15 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-07 20:29:15 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-07 20:29:15 - app.services.vector_store - INFO - 初始化向量存储服务
2025-05-07 20:29:15 - app.services.vector_store - INFO - 初始化向量存储服务
2025-05-07 20:29:15 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-07 20:29:15 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-07 20:29:15 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-07 20:29:15 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-07 20:29:15 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-07 20:29:15 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-07 20:29:15 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-07 20:29:15 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-07 20:29:15 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-05-07 20:29:15 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-05-07 20:29:15 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-05-07 20:29:15 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-05-07 20:29:16 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-07 20:29:16 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-07 20:29:16 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-07 20:29:16 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-07 20:29:16 - app.services.vector_store - INFO - 创建集合: knowledge_base
2025-05-07 20:29:16 - app.services.vector_store - ERROR - 检查或创建集合失败: 'Settings' object has no attribute 'VECTOR_SIZE'
2025-05-07 20:29:16 - app.services.vector_store - INFO - 创建集合: knowledge_base
2025-05-07 20:29:16 - app.services.vector_store - ERROR - 检查或创建集合失败: 'Settings' object has no attribute 'VECTOR_SIZE'
2025-05-07 20:29:16 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-07 20:29:16 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-07 20:29:16 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-07 20:29:16 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-07 20:29:31 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-07 20:29:31 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-07 20:29:31 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-07 20:29:31 - app.services.vector_store - INFO - 初始化向量存储服务
2025-05-07 20:29:31 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-07 20:29:31 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-07 20:29:31 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-07 20:29:31 - app.services.vector_store - INFO - 初始化向量存储服务
2025-05-07 20:29:31 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-07 20:29:31 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-07 20:29:31 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-07 20:29:31 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-07 20:29:31 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-07 20:29:31 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-05-07 20:29:31 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-05-07 20:29:31 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-07 20:29:31 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-05-07 20:29:31 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-05-07 20:29:31 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-07 20:29:31 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-07 20:29:32 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-07 20:29:32 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-07 20:29:32 - app.services.vector_store - INFO - 创建集合: knowledge_base
2025-05-07 20:29:32 - app.services.vector_store - ERROR - 检查或创建集合失败: 'Settings' object has no attribute 'VECTOR_SIZE'
2025-05-07 20:29:32 - app.services.vector_store - INFO - 创建集合: knowledge_base
2025-05-07 20:29:32 - app.services.vector_store - ERROR - 检查或创建集合失败: 'Settings' object has no attribute 'VECTOR_SIZE'
2025-05-07 20:29:32 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-07 20:29:32 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-07 20:29:32 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-07 20:29:32 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-07 20:29:47 - app.services.vector_store - INFO - 初始化向量存储服务
2025-05-07 20:29:47 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-07 20:29:47 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-07 20:29:47 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-07 20:29:47 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-07 20:29:47 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-05-07 20:29:47 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-05-07 20:29:47 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-07 20:29:47 - app.services.vector_store - INFO - 创建集合: knowledge_base
2025-05-07 20:29:47 - app.services.vector_store - ERROR - 检查或创建集合失败: 'Settings' object has no attribute 'VECTOR_SIZE'
2025-05-07 20:29:47 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-07 20:29:47 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-07 20:29:50 - app.services.vector_store - INFO - 初始化向量存储服务
2025-05-07 20:29:50 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-07 20:29:50 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-07 20:29:50 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-07 20:29:50 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-07 20:29:50 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-05-07 20:29:50 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-05-07 20:29:50 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-07 20:29:50 - app.services.vector_store - INFO - 创建集合: knowledge_base
2025-05-07 20:29:50 - app.services.vector_store - ERROR - 检查或创建集合失败: 'Settings' object has no attribute 'VECTOR_SIZE'
2025-05-07 20:29:50 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-07 20:29:50 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-07 20:29:50 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-07 20:29:51 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-07 20:29:51 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-07 20:29:51 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-07 20:29:51 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-07 20:29:52 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-07 20:29:52 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-07 20:29:52 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-07 20:29:53 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-07 20:29:53 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-07 20:29:53 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-07 20:29:54 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-07 20:29:54 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-07 20:29:54 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-07 20:29:55 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-07 20:29:55 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-07 20:29:55 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-07 20:29:56 - app.services.vector_store - INFO - 初始化向量存储服务
2025-05-07 20:29:56 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-07 20:29:56 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-07 20:29:56 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-07 20:29:56 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-07 20:29:56 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-05-07 20:29:56 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-05-07 20:29:56 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-07 20:29:56 - app.services.vector_store - INFO - 创建集合: knowledge_base
2025-05-07 20:29:56 - app.services.vector_store - ERROR - 检查或创建集合失败: 'Settings' object has no attribute 'VECTOR_SIZE'
2025-05-07 20:29:56 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-07 20:29:56 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-07 20:29:56 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-07 20:29:56 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-07 20:29:56 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-07 20:29:56 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-07 20:29:56 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-07 20:29:57 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-07 20:29:57 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-07 20:29:57 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-07 20:29:58 - app.services.vector_store - INFO - 初始化向量存储服务
2025-05-07 20:29:58 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-07 20:29:58 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-07 20:29:58 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-07 20:29:58 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-07 20:29:58 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-05-07 20:29:58 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-05-07 20:29:58 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-07 20:29:58 - app.services.vector_store - INFO - 创建集合: knowledge_base
2025-05-07 20:29:58 - app.services.vector_store - ERROR - 检查或创建集合失败: 'Settings' object has no attribute 'VECTOR_SIZE'
2025-05-07 20:29:58 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-07 20:29:58 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-07 20:29:59 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-07 20:29:59 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-07 20:29:59 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-07 20:29:59 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-07 20:29:59 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-07 20:30:00 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-07 20:30:00 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-07 20:30:00 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-07 20:30:01 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-07 20:30:01 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-07 20:30:01 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-07 20:30:02 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-07 20:30:02 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-07 20:30:02 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-07 20:30:03 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-07 20:30:03 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-07 20:30:03 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-07 20:30:04 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-07 20:30:04 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-07 20:30:04 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-07 20:30:05 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-07 20:30:05 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-07 20:30:05 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-07 20:30:06 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-07 20:30:06 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-07 20:30:06 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-07 20:30:07 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-07 20:30:07 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-07 20:30:07 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-07 20:30:08 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-07 20:30:08 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-07 20:30:08 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-07 20:30:09 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-07 20:30:09 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-07 20:30:10 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-07 20:30:11 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-07 20:30:11 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-07 20:30:11 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-07 20:30:13 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-07 20:30:13 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-07 20:30:13 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-07 20:30:15 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-07 20:30:15 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-07 20:30:15 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-07 20:30:17 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-07 20:30:17 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-07 20:30:17 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-07 20:30:19 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-07 20:30:19 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-07 20:30:19 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-07 20:30:21 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-07 20:30:21 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-07 20:30:21 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-07 20:30:23 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-07 20:30:23 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-07 20:30:23 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-07 20:30:25 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-07 20:30:25 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-07 20:30:25 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-07 20:30:27 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-07 20:30:27 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-07 20:30:27 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-07 20:30:29 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-07 20:30:29 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-07 20:30:29 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-07 20:30:31 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-07 20:30:31 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-07 20:30:31 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-07 20:30:33 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-07 20:30:33 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-07 20:30:33 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-07 20:30:35 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-07 20:30:35 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-07 20:30:35 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-07 20:30:37 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-07 20:30:37 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-07 20:30:37 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-07 20:30:39 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-07 20:30:39 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-07 20:30:39 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-07 20:30:40 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-07 20:30:40 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-07 20:30:40 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-07 20:30:41 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-07 20:30:41 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-07 20:30:41 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-07 20:30:42 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-07 20:30:42 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-07 20:30:42 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-07 20:30:43 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-07 20:30:43 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-07 20:30:43 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-07 20:30:44 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-07 20:30:44 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-07 20:30:44 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-07 20:30:45 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-07 20:30:45 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-07 20:30:45 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-07 20:30:46 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-07 20:30:47 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-07 20:30:47 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-07 20:30:48 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-07 20:30:48 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-07 20:30:48 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-07 20:30:49 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-07 20:30:49 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-07 20:30:49 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-07 20:30:50 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-07 20:30:50 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-07 20:30:50 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-07 20:30:52 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-07 20:30:52 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-07 20:30:53 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-07 20:30:53 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-07 20:30:53 - app.services.vector_store - INFO - 初始化向量存储服务
2025-05-07 20:30:53 - app.services.vector_store - INFO - 初始化向量存储服务
2025-05-07 20:30:53 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-07 20:30:53 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-07 20:30:53 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-07 20:30:53 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-07 20:30:53 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-07 20:30:53 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-07 20:30:53 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-07 20:30:53 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-07 20:30:53 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-05-07 20:30:53 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-05-07 20:30:53 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-05-07 20:30:53 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-05-07 20:30:53 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-07 20:30:53 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-07 20:30:53 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-07 20:30:53 - app.services.vector_store - INFO - 创建集合: knowledge_base
2025-05-07 20:30:53 - app.services.vector_store - ERROR - 检查或创建集合失败: 'Settings' object has no attribute 'VECTOR_SIZE'
2025-05-07 20:30:53 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-07 20:30:53 - app.services.vector_store - INFO - 创建集合: knowledge_base
2025-05-07 20:30:53 - app.services.vector_store - ERROR - 检查或创建集合失败: 'Settings' object has no attribute 'VECTOR_SIZE'
2025-05-07 20:30:53 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-07 20:30:53 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-07 20:30:53 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-07 20:30:53 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-07 20:30:55 - app.services.vector_store - INFO - 初始化向量存储服务
2025-05-07 20:30:55 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-07 20:30:55 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-07 20:30:55 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-07 20:30:55 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-07 20:30:55 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-05-07 20:30:55 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-05-07 20:30:55 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-07 20:30:55 - app.services.vector_store - INFO - 创建集合: knowledge_base
2025-05-07 20:30:55 - app.services.vector_store - ERROR - 检查或创建集合失败: 'Settings' object has no attribute 'VECTOR_SIZE'
2025-05-07 20:30:55 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-07 20:30:55 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-07 20:31:05 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-07 20:31:05 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-07 20:31:05 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-07 20:31:05 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-07 20:31:05 - app.services.vector_store - INFO - 初始化向量存储服务
2025-05-07 20:31:05 - app.services.vector_store - INFO - 初始化向量存储服务
2025-05-07 20:31:05 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-07 20:31:05 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-07 20:31:05 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-07 20:31:05 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-07 20:31:05 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-07 20:31:05 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-07 20:31:05 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-07 20:31:05 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-07 20:31:05 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-05-07 20:31:05 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-05-07 20:31:05 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-05-07 20:31:05 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-05-07 20:31:06 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-07 20:31:06 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-07 20:31:06 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-07 20:31:06 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-07 20:31:06 - app.services.vector_store - INFO - 创建集合: knowledge_base
2025-05-07 20:31:06 - app.services.vector_store - INFO - 创建集合: knowledge_base
2025-05-07 20:31:06 - app.services.vector_store - ERROR - 检查或创建集合失败: 'Settings' object has no attribute 'VECTOR_SIZE'
2025-05-07 20:31:06 - app.services.vector_store - ERROR - 检查或创建集合失败: 'Settings' object has no attribute 'VECTOR_SIZE'
2025-05-07 20:31:06 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-07 20:31:06 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-07 20:31:06 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-07 20:31:06 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-07 20:33:13 - root - INFO - 日志系统初始化完成
2025-05-07 20:33:14 - app.main - INFO - 数据库表创建完成
2025-05-07 20:33:37 - app.services.vector_store - INFO - 初始化向量存储服务
2025-05-07 20:33:37 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-07 20:33:37 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-07 20:33:37 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-07 20:33:37 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-07 20:33:37 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-05-07 20:33:37 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-05-07 20:33:37 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-07 20:33:37 - app.services.vector_store - INFO - 创建集合: knowledge_base
2025-05-07 20:33:37 - app.services.vector_store - ERROR - 检查或创建集合失败: 'Settings' object has no attribute 'VECTOR_SIZE'
2025-05-07 20:33:37 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-07 20:33:37 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-07 20:33:54 - app.services.vector_store - INFO - 初始化向量存储服务
2025-05-07 20:33:54 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-07 20:33:54 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-07 20:33:54 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-07 20:33:54 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-07 20:33:54 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-05-07 20:33:54 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-05-07 20:33:54 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-07 20:33:54 - app.services.vector_store - INFO - 创建集合: knowledge_base
2025-05-07 20:33:54 - app.services.vector_store - ERROR - 检查或创建集合失败: 'Settings' object has no attribute 'VECTOR_SIZE'
2025-05-07 20:33:54 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-07 20:33:54 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-07 20:35:00 - app.services.vector_store - INFO - 初始化向量存储服务
2025-05-07 20:35:00 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-07 20:35:00 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-07 20:35:00 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-07 20:35:00 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-07 20:35:00 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-05-07 20:35:00 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-05-07 20:35:00 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-07 20:35:00 - app.services.vector_store - INFO - 创建集合: knowledge_base
2025-05-07 20:35:00 - app.services.vector_store - ERROR - 检查或创建集合失败: 'Settings' object has no attribute 'VECTOR_SIZE'
2025-05-07 20:35:00 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-07 20:35:00 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-07 20:35:22 - app.services.vector_store - INFO - 初始化向量存储服务
2025-05-07 20:35:22 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-07 20:35:22 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-07 20:35:22 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-07 20:35:22 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-07 20:35:22 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-05-07 20:35:22 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-05-07 20:35:22 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-07 20:35:22 - app.services.vector_store - INFO - 创建集合: knowledge_base
2025-05-07 20:35:22 - app.services.vector_store - ERROR - 检查或创建集合失败: 'Settings' object has no attribute 'VECTOR_SIZE'
2025-05-07 20:35:22 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-07 20:35:22 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-07 20:37:45 - root - INFO - 日志系统初始化完成
2025-05-07 20:37:45 - app.main - INFO - 数据库表创建完成
2025-05-07 20:37:58 - root - INFO - 日志系统初始化完成
2025-05-07 20:37:59 - app.main - INFO - 数据库表创建完成
2025-05-07 20:38:20 - app.services.vector_store - INFO - 初始化向量存储服务
2025-05-07 20:38:20 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-07 20:38:20 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-07 20:38:20 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-07 20:38:20 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-07 20:38:20 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-05-07 20:38:20 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-05-07 20:38:20 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-07 20:38:20 - app.services.vector_store - INFO - 创建集合: knowledge_base
2025-05-07 20:38:20 - app.services.vector_store - ERROR - 检查或创建集合失败: 'Settings' object has no attribute 'VECTOR_SIZE'
2025-05-07 20:38:20 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-07 20:38:20 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-07 20:38:20 - app.routers.documents - ERROR - 处理文档 24 失败: 1 validation error for DocumentPreview
title
  Field required [type=missing, input_value={'id': 24, 'name': '线...: '', 'file_type': 'md'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.9/v/missing
Traceback (most recent call last):
  File "/Users/wangke/notebook-ai/notebook-backend/app/routers/documents.py", line 266, in list_documents
    document_previews.append(DocumentPreview.model_validate(doc_dict))
  File "/Users/wangke/notebook-ai/notebook-backend/venv/lib/python3.10/site-packages/pydantic/main.py", line 596, in model_validate
    return cls.__pydantic_validator__.validate_python(
pydantic_core._pydantic_core.ValidationError: 1 validation error for DocumentPreview
title
  Field required [type=missing, input_value={'id': 24, 'name': '线...: '', 'file_type': 'md'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.9/v/missing
2025-05-07 20:38:20 - app.routers.documents - ERROR - 处理文档 23 失败: 1 validation error for DocumentPreview
title
  Field required [type=missing, input_value={'id': 23, 'name': '验... '', 'file_type': 'pdf'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.9/v/missing
Traceback (most recent call last):
  File "/Users/wangke/notebook-ai/notebook-backend/app/routers/documents.py", line 266, in list_documents
    document_previews.append(DocumentPreview.model_validate(doc_dict))
  File "/Users/wangke/notebook-ai/notebook-backend/venv/lib/python3.10/site-packages/pydantic/main.py", line 596, in model_validate
    return cls.__pydantic_validator__.validate_python(
pydantic_core._pydantic_core.ValidationError: 1 validation error for DocumentPreview
title
  Field required [type=missing, input_value={'id': 23, 'name': '验... '', 'file_type': 'pdf'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.9/v/missing
2025-05-07 20:38:32 - app.services.vector_store - INFO - 初始化向量存储服务
2025-05-07 20:38:32 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-07 20:38:32 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-07 20:38:32 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-07 20:38:32 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-07 20:38:32 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-05-07 20:38:32 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-05-07 20:38:32 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-07 20:38:32 - app.services.vector_store - INFO - 创建集合: knowledge_base
2025-05-07 20:38:32 - app.services.vector_store - ERROR - 检查或创建集合失败: 'Settings' object has no attribute 'VECTOR_SIZE'
2025-05-07 20:38:32 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-07 20:38:32 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-07 20:38:32 - app.routers.documents - ERROR - 处理文档 24 失败: 1 validation error for DocumentPreview
title
  Field required [type=missing, input_value={'id': 24, 'name': '线...: '', 'file_type': 'md'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.9/v/missing
Traceback (most recent call last):
  File "/Users/wangke/notebook-ai/notebook-backend/app/routers/documents.py", line 266, in list_documents
    document_previews.append(DocumentPreview.model_validate(doc_dict))
  File "/Users/wangke/notebook-ai/notebook-backend/venv/lib/python3.10/site-packages/pydantic/main.py", line 596, in model_validate
    return cls.__pydantic_validator__.validate_python(
pydantic_core._pydantic_core.ValidationError: 1 validation error for DocumentPreview
title
  Field required [type=missing, input_value={'id': 24, 'name': '线...: '', 'file_type': 'md'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.9/v/missing
2025-05-07 20:38:32 - app.routers.documents - ERROR - 处理文档 23 失败: 1 validation error for DocumentPreview
title
  Field required [type=missing, input_value={'id': 23, 'name': '验... '', 'file_type': 'pdf'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.9/v/missing
Traceback (most recent call last):
  File "/Users/wangke/notebook-ai/notebook-backend/app/routers/documents.py", line 266, in list_documents
    document_previews.append(DocumentPreview.model_validate(doc_dict))
  File "/Users/wangke/notebook-ai/notebook-backend/venv/lib/python3.10/site-packages/pydantic/main.py", line 596, in model_validate
    return cls.__pydantic_validator__.validate_python(
pydantic_core._pydantic_core.ValidationError: 1 validation error for DocumentPreview
title
  Field required [type=missing, input_value={'id': 23, 'name': '验... '', 'file_type': 'pdf'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.9/v/missing
2025-05-07 20:39:43 - root - INFO - 日志系统初始化完成
2025-05-07 20:39:44 - app.main - INFO - 数据库表创建完成
2025-05-07 20:40:04 - root - INFO - 日志系统初始化完成
2025-05-07 20:40:05 - app.main - INFO - 数据库表创建完成
2025-05-07 20:40:09 - app.services.vector_store - INFO - 初始化向量存储服务
2025-05-07 20:40:09 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-07 20:40:09 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-07 20:40:09 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-07 20:40:10 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-07 20:40:10 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-05-07 20:40:10 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-05-07 20:40:10 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-07 20:40:10 - app.services.vector_store - INFO - 创建集合: knowledge_base
2025-05-07 20:40:10 - app.services.vector_store - ERROR - 检查或创建集合失败: 'Settings' object has no attribute 'VECTOR_SIZE'
2025-05-07 20:40:10 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-07 20:40:10 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-07 20:40:40 - app.services.vector_store - INFO - 初始化向量存储服务
2025-05-07 20:40:40 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-07 20:40:40 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-07 20:40:40 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-07 20:40:40 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-07 20:40:40 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-05-07 20:40:40 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-05-07 20:40:40 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-07 20:40:40 - app.services.vector_store - INFO - 创建集合: knowledge_base
2025-05-07 20:40:40 - app.services.vector_store - ERROR - 检查或创建集合失败: 'Settings' object has no attribute 'VECTOR_SIZE'
2025-05-07 20:40:40 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-07 20:40:40 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-07 20:40:44 - app.services.vector_store - INFO - 初始化向量存储服务
2025-05-07 20:40:44 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-07 20:40:44 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-07 20:40:45 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-07 20:40:45 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-07 20:40:45 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-05-07 20:40:45 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-05-07 20:40:45 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-07 20:40:45 - app.services.vector_store - INFO - 创建集合: knowledge_base
2025-05-07 20:40:45 - app.services.vector_store - ERROR - 检查或创建集合失败: 'Settings' object has no attribute 'VECTOR_SIZE'
2025-05-07 20:40:45 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-07 20:40:45 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-07 20:40:45 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-07 20:40:45 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-07 20:40:45 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-07 20:40:45 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-07 20:40:45 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-07 20:40:46 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-07 20:40:46 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-07 20:40:46 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-07 20:41:27 - root - INFO - 日志系统初始化完成
2025-05-07 20:41:27 - app.main - INFO - 数据库表创建完成
2025-05-07 20:44:45 - root - INFO - 日志系统初始化完成
2025-05-07 20:44:45 - app.main - INFO - 数据库表创建完成
2025-05-07 20:44:57 - root - INFO - 日志系统初始化完成
2025-05-07 20:44:57 - app.main - INFO - 数据库表创建完成
2025-05-07 20:44:57 - app.services.vector_store - INFO - 初始化向量存储服务
2025-05-07 20:44:57 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-07 20:44:57 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-07 20:44:58 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-07 20:44:58 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-07 20:44:58 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-05-07 20:44:58 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-05-07 20:44:58 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-07 20:44:58 - app.services.vector_store - INFO - 创建集合: knowledge_base
2025-05-07 20:44:58 - app.services.vector_store - ERROR - 检查或创建集合失败: 'Settings' object has no attribute 'VECTOR_SIZE'
2025-05-07 20:44:58 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-07 20:44:58 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-07 20:45:06 - app.services.vector_store - INFO - 初始化向量存储服务
2025-05-07 20:45:06 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-07 20:45:06 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-07 20:45:06 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-07 20:45:06 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-07 20:45:06 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-05-07 20:45:06 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-05-07 20:45:06 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-07 20:45:06 - app.services.vector_store - INFO - 创建集合: knowledge_base
2025-05-07 20:45:06 - app.services.vector_store - ERROR - 检查或创建集合失败: 'Settings' object has no attribute 'VECTOR_SIZE'
2025-05-07 20:45:06 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-07 20:45:06 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-07 20:45:06 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-07 20:45:06 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-07 20:45:06 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-07 20:45:06 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-07 20:45:06 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-07 20:45:07 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-07 20:45:07 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-07 20:45:07 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-07 20:45:08 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-07 20:45:09 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-07 20:45:09 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-07 20:45:10 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-07 20:45:10 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-07 20:45:10 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-07 20:45:11 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-07 20:45:11 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-07 20:45:11 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-07 20:45:12 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-07 20:45:12 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-07 20:45:12 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-07 20:45:13 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-07 20:45:13 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-07 20:45:13 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-07 20:45:14 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-07 20:45:14 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-07 20:45:14 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-07 20:45:15 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-07 20:45:15 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-07 20:45:15 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-07 20:45:16 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-07 20:45:16 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-07 20:45:16 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-07 20:45:17 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-07 20:45:17 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-07 20:45:17 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-07 20:45:18 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-07 20:45:18 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-07 20:45:18 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-07 20:45:19 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-07 20:45:19 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-07 20:45:19 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-07 20:45:20 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-07 20:45:20 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-07 20:45:21 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-07 20:45:22 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-07 20:45:22 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-07 20:45:22 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-07 20:45:24 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-07 20:45:24 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-07 20:45:24 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-07 20:45:26 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-07 20:45:26 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-07 20:45:26 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-07 20:45:28 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-07 20:45:28 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-07 20:45:28 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-07 20:45:30 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-07 20:45:30 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-07 20:45:30 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-07 20:45:32 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-07 20:45:32 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-07 20:45:32 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-07 20:45:34 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-07 20:45:34 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-07 20:45:34 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-07 20:45:36 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-07 20:45:36 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-07 20:45:36 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-07 20:45:38 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-07 20:45:38 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-07 20:45:38 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-07 20:45:40 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-07 20:45:40 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-07 20:45:40 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-07 20:45:42 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-07 20:45:42 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-07 20:45:42 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-07 20:45:44 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-07 20:45:44 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-07 20:45:44 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-07 20:45:46 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-07 20:45:46 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-07 20:45:46 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-07 20:45:48 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-07 20:45:48 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-07 20:45:48 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-07 20:45:50 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-07 20:45:50 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-07 20:45:50 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-07 20:45:52 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-07 20:45:52 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-07 20:45:52 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-07 20:45:54 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-07 20:45:54 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-07 20:45:54 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-07 20:45:56 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-07 20:45:56 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-07 20:45:56 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-07 20:45:58 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-07 20:45:58 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-07 20:45:58 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-07 20:46:00 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-07 20:46:00 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-07 20:46:00 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-07 20:46:02 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-07 20:46:02 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-07 20:46:02 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-07 20:46:04 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-07 20:46:04 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-07 20:46:04 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-07 20:46:06 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-07 20:46:06 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-07 20:46:06 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-07 20:46:08 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-07 20:46:08 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-07 20:46:08 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-07 20:46:10 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-07 20:46:10 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-07 20:46:10 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-07 20:46:12 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-07 20:46:12 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-07 20:46:12 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-07 20:46:14 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-07 20:46:14 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-07 20:46:14 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-07 20:46:16 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-07 20:46:16 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-07 20:46:16 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-07 20:46:18 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-07 20:46:18 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-07 20:46:18 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-07 20:46:20 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-07 20:46:20 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-07 20:46:20 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-07 20:46:22 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-07 20:46:22 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-07 20:46:22 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-07 20:46:24 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-07 20:46:24 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-07 20:46:24 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-07 20:46:26 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-07 20:46:26 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-07 20:46:26 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-07 20:46:28 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-07 20:46:28 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-07 20:46:28 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-07 20:46:30 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-07 20:46:30 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-07 20:46:30 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-07 20:46:32 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-07 20:46:32 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-07 20:46:32 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-07 20:46:34 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-07 20:46:34 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-07 20:46:34 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-07 20:46:36 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-07 20:46:36 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-07 20:46:36 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-07 20:46:38 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-07 20:46:38 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-07 20:46:38 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-07 20:46:40 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-07 20:46:40 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-07 20:46:40 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-07 20:46:42 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-07 20:46:42 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-07 20:46:42 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-07 20:46:44 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-07 20:46:44 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-07 20:46:44 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-07 20:46:46 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-07 20:46:46 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-07 20:46:46 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-07 20:46:48 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-07 20:46:48 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-07 20:46:48 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-07 20:46:50 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-07 20:46:50 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-07 20:46:50 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-07 20:46:52 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-07 20:46:52 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-07 20:46:52 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-07 20:46:54 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-07 20:46:54 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-07 20:46:54 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-07 20:46:56 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-07 20:46:56 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-07 20:46:56 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-07 20:46:58 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-07 20:46:58 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-07 20:46:58 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-07 20:47:00 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-07 20:47:00 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-07 20:47:00 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-07 20:47:02 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-07 20:47:02 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-07 20:47:02 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-07 20:47:04 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-07 20:47:04 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-07 20:47:04 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-07 20:47:06 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-07 20:47:06 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-07 20:47:06 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-07 20:47:08 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-07 20:47:08 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-07 20:47:08 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-07 20:47:10 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-07 20:47:10 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-07 20:47:10 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-07 20:47:12 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-07 20:47:12 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-07 20:47:12 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-07 20:47:14 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-07 20:47:14 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-07 20:47:14 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-07 20:47:16 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-07 20:47:16 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-07 20:47:16 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-07 20:47:18 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-07 20:47:18 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-07 20:47:18 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-07 20:47:20 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-07 20:47:20 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-07 20:47:20 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-07 20:47:22 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-07 20:47:22 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-07 20:47:22 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-07 20:47:24 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-07 20:47:24 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-07 20:47:24 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-07 20:47:26 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-07 20:47:26 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-07 20:47:26 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-07 20:47:28 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-07 20:47:28 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-07 20:47:28 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-07 20:47:51 - root - INFO - 日志系统初始化完成
2025-05-07 20:47:51 - app.main - INFO - 数据库表创建完成
2025-05-07 20:47:51 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-07 20:47:51 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-07 20:47:51 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-07 20:47:53 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-07 20:47:53 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-07 20:47:53 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-07 20:47:55 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-07 20:47:55 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-07 20:47:55 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-07 20:47:57 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-07 20:47:57 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-07 20:47:57 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-07 20:47:59 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-07 20:47:59 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-07 20:47:59 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-07 20:48:01 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-07 20:48:01 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-07 20:48:01 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-07 20:48:03 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-07 20:48:03 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-07 20:48:03 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-07 20:48:05 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-07 20:48:05 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-07 20:48:05 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-07 20:48:17 - root - INFO - 日志系统初始化完成
2025-05-07 20:48:17 - app.main - INFO - 数据库表创建完成
2025-05-07 20:48:29 - root - INFO - 日志系统初始化完成
2025-05-07 20:48:29 - app.main - INFO - 数据库表创建完成
2025-05-07 20:48:41 - root - INFO - 日志系统初始化完成
2025-05-07 20:48:41 - app.main - INFO - 数据库表创建完成
2025-05-07 20:48:41 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-07 20:48:41 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-07 20:48:41 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-07 20:48:43 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-07 20:48:43 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-07 20:48:43 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-07 20:48:56 - root - INFO - 日志系统初始化完成
2025-05-07 20:48:57 - app.main - INFO - 数据库表创建完成
2025-05-07 20:49:07 - root - INFO - 日志系统初始化完成
2025-05-07 20:49:08 - app.main - INFO - 数据库表创建完成
2025-05-07 20:49:08 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-07 20:49:08 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-07 20:49:08 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-07 20:49:10 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-07 20:49:10 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-07 20:49:10 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-07 20:49:12 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-07 20:49:12 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-07 20:49:12 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-07 20:49:14 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-07 20:49:14 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-07 20:49:14 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-07 20:49:16 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-07 20:49:16 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-07 20:49:16 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-07 20:49:18 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-07 20:49:18 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-07 20:49:18 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-07 20:49:20 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-07 20:49:20 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-07 20:49:20 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-07 20:49:22 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-07 20:49:22 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-07 20:49:22 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-07 20:49:24 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-07 20:49:24 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-07 20:49:24 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-07 20:49:26 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-07 20:49:26 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-07 20:49:26 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-07 20:49:28 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-07 20:49:28 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-07 20:49:28 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-07 20:49:30 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-07 20:49:30 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-07 20:49:30 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-07 20:49:32 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-07 20:49:32 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-07 20:49:32 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-07 20:49:34 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-07 20:49:34 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-07 20:49:34 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-07 20:49:36 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-07 20:49:36 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-07 20:49:36 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-07 20:49:38 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-07 20:49:38 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-07 20:49:38 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-07 20:49:40 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-07 20:49:40 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-07 20:49:40 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-07 20:49:42 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-07 20:49:42 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-07 20:49:42 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-07 20:49:44 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-07 20:49:44 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-07 20:49:44 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-07 20:49:46 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-07 20:49:46 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-07 20:49:46 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-07 20:49:48 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-07 20:49:48 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-07 20:49:48 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-07 20:49:50 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-07 20:49:50 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-07 20:49:50 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-07 20:49:52 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-07 20:49:52 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-07 20:49:52 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-07 20:49:54 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-07 20:49:54 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-07 20:49:54 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-07 20:49:56 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-07 20:49:56 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-07 20:49:56 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-07 20:49:58 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-07 20:49:58 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-07 20:49:58 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-07 20:50:00 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-07 20:50:00 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-07 20:50:00 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-07 20:50:02 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-07 20:50:02 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-07 20:50:02 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-07 20:50:04 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-07 20:50:04 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-07 20:50:04 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-07 20:50:06 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-07 20:50:06 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-07 20:50:06 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-07 20:50:08 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-07 20:50:08 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-07 20:50:08 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-07 20:50:10 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-07 20:50:10 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-07 20:50:10 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-07 20:50:12 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-07 20:50:12 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-07 20:50:12 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-07 20:50:14 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-07 20:50:14 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-07 20:50:14 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-07 20:50:16 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-07 20:50:16 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-07 20:50:16 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-07 20:50:18 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-07 20:50:18 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-07 20:50:18 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-07 20:50:20 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-07 20:50:20 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-07 20:50:20 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-07 20:50:22 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-07 20:50:22 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-07 20:50:22 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-07 20:50:24 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-07 20:50:24 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-07 20:50:24 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-07 20:50:26 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-07 20:50:26 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-07 20:50:26 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-07 20:50:28 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-07 20:50:28 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-07 20:50:28 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-07 20:50:30 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-07 20:50:30 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-07 20:50:30 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-07 20:50:32 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-07 20:50:32 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-07 20:50:32 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-07 20:50:34 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-07 20:50:34 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-07 20:50:34 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-07 20:50:35 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-07 20:50:35 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-07 20:50:35 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-07 20:50:36 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-07 20:50:36 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-07 20:50:36 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-07 20:50:37 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-07 20:50:37 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-07 20:50:37 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-07 20:50:41 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-07 20:50:41 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-07 20:50:41 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-07 20:50:41 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-07 20:50:41 - app.services.vector_store - INFO - 初始化向量存储服务
2025-05-07 20:50:41 - app.services.vector_store - INFO - 初始化向量存储服务
2025-05-07 20:50:41 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-07 20:50:41 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-07 20:50:41 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-07 20:50:41 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-07 20:50:41 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-07 20:50:41 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-07 20:50:41 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-07 20:50:41 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-07 20:50:41 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-05-07 20:50:41 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-05-07 20:50:41 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-05-07 20:50:41 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-05-07 20:50:41 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-07 20:50:41 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-07 20:50:42 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-07 20:50:42 - app.services.vector_store - INFO - 创建集合: knowledge_base
2025-05-07 20:50:42 - app.services.vector_store - ERROR - 检查或创建集合失败: 'Settings' object has no attribute 'VECTOR_SIZE'
2025-05-07 20:50:42 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-07 20:50:42 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-07 20:50:42 - app.services.vector_store - INFO - 创建集合: knowledge_base
2025-05-07 20:50:42 - app.services.vector_store - ERROR - 检查或创建集合失败: 'Settings' object has no attribute 'VECTOR_SIZE'
2025-05-07 20:50:42 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-07 20:50:42 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-07 20:50:42 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-07 20:50:43 - app.services.vector_store - INFO - 初始化向量存储服务
2025-05-07 20:50:43 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-07 20:50:43 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-07 20:50:43 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-07 20:50:43 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-07 20:50:43 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-05-07 20:50:43 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-05-07 20:50:44 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-07 20:50:44 - app.services.vector_store - INFO - 创建集合: knowledge_base
2025-05-07 20:50:44 - app.services.vector_store - ERROR - 检查或创建集合失败: 'Settings' object has no attribute 'VECTOR_SIZE'
2025-05-07 20:50:44 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-07 20:50:44 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-07 20:50:52 - app.services.vector_store - INFO - 初始化向量存储服务
2025-05-07 20:50:52 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-07 20:50:52 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-07 20:50:52 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-07 20:50:52 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-07 20:50:52 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-05-07 20:50:52 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-05-07 20:50:52 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-07 20:50:52 - app.services.vector_store - INFO - 创建集合: knowledge_base
2025-05-07 20:50:52 - app.services.vector_store - ERROR - 检查或创建集合失败: 'Settings' object has no attribute 'VECTOR_SIZE'
2025-05-07 20:50:52 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-07 20:50:53 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-07 20:50:53 - app.routers.documents - INFO - 接收到文件上传请求: 验证码.pdf, 类型: application/pdf
2025-05-07 20:50:53 - app.routers.documents - INFO - 解析元数据: {"name":"验证码"}...
2025-05-07 20:50:53 - app.routers.documents - INFO - 开始处理上传的文件
2025-05-07 20:50:53 - app.utils.file_utils - INFO - 文件已保存到临时路径: /var/folders/gs/kbsr2cy55nz47p4hyrxbtg0r0000gn/T/tmpvi71izva.pdf
2025-05-07 20:50:53 - app.routers.documents - INFO - 文件已保存到临时路径: /var/folders/gs/kbsr2cy55nz47p4hyrxbtg0r0000gn/T/tmpvi71izva.pdf
2025-05-07 20:50:53 - app.services.document_service - INFO - 开始处理文件: 验证码.pdf, 内容类型: application/pdf
2025-05-07 20:50:53 - app.services.document_service - INFO - 文件大小: 162462 字节
2025-05-07 20:50:53 - app.services.document_service - INFO - 文件类型识别为: pdf
2025-05-07 20:50:53 - app.services.document_service - INFO - 检测到二进制文件类型: pdf，将进行Base64编码
2025-05-07 20:50:53 - app.services.document_service - INFO - 文件包含NUL字符，确认为二进制文件
2025-05-07 20:50:53 - app.services.document_service - INFO - Base64编码完成，编码后大小: 216626 字节
2025-05-07 20:50:53 - app.services.document_service - INFO - 准备创建文档记录
2025-05-07 20:50:53 - app.services.document_service - INFO - 创建文档: 验证码.pdf, 类型: pdf, 用户ID: 1
2025-05-07 20:50:53 - app.services.document_service - INFO - 文档创建成功: ID=25
2025-05-07 20:50:53 - app.services.task_service - INFO - 创建任务: 处理文档: 验证码.pdf, 类型: DOCUMENT_PROCESSING, 创建者: 1
2025-05-07 20:50:53 - app.services.task_service - INFO - 任务创建成功: f5c0f7d1-038c-43f8-977e-f7c7f5d6cba1
2025-05-07 20:50:53 - app.services.document_service - INFO - 更新文档状态: ID=25, 状态=processing
2025-05-07 20:50:53 - app.services.document_service - INFO - 文档状态已更新: ID=25, 状态=processing
2025-05-07 20:50:53 - app.routers.documents - INFO - 文件处理成功，文档ID: 25, 任务ID: f5c0f7d1-038c-43f8-977e-f7c7f5d6cba1
2025-05-07 20:50:53 - app.services.vector_store - INFO - 初始化向量存储服务
2025-05-07 20:50:53 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-07 20:50:53 - app.services.vector_store - INFO - 初始化向量存储服务
2025-05-07 20:50:53 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-07 20:50:53 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-07 20:50:53 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-07 20:50:53 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-07 20:50:53 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-07 20:50:53 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-07 20:50:53 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-07 20:50:53 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-05-07 20:50:53 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-05-07 20:50:53 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-05-07 20:50:53 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-05-07 20:50:53 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-07 20:50:53 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-07 20:50:53 - app.services.vector_store - INFO - 创建集合: knowledge_base
2025-05-07 20:50:53 - app.services.vector_store - ERROR - 检查或创建集合失败: 'Settings' object has no attribute 'VECTOR_SIZE'
2025-05-07 20:50:53 - app.services.vector_store - INFO - 创建集合: knowledge_base
2025-05-07 20:50:53 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-07 20:50:53 - app.services.vector_store - ERROR - 检查或创建集合失败: 'Settings' object has no attribute 'VECTOR_SIZE'
2025-05-07 20:50:53 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-07 20:50:54 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-07 20:50:54 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-07 20:50:55 - app.services.vector_store - INFO - 初始化向量存储服务
2025-05-07 20:50:55 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-07 20:50:55 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-07 20:50:55 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-07 20:50:55 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-07 20:50:55 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-05-07 20:50:55 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-05-07 20:50:55 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-07 20:50:55 - app.services.vector_store - INFO - 创建集合: knowledge_base
2025-05-07 20:50:55 - app.services.vector_store - ERROR - 检查或创建集合失败: 'Settings' object has no attribute 'VECTOR_SIZE'
2025-05-07 20:50:55 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-07 20:50:55 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-07 20:50:56 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-07 20:50:56 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-07 20:50:56 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-07 20:50:56 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-07 20:50:56 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-07 20:50:57 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-07 20:50:57 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-07 20:50:57 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-07 20:50:58 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-07 20:50:58 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-07 20:50:58 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-07 20:50:59 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-07 20:51:00 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-07 20:51:00 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-07 20:51:01 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-07 20:51:01 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-07 20:51:01 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-07 20:51:02 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-07 20:51:02 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-07 20:51:02 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-07 20:51:04 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-07 20:51:04 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-07 20:51:04 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-07 20:51:06 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-07 20:51:06 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-07 20:51:06 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-07 20:51:08 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-07 20:51:08 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-07 20:51:08 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-07 20:51:10 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-07 20:51:10 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-07 20:51:10 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-07 20:51:12 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-07 20:51:12 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-07 20:51:12 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-07 20:51:14 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-07 20:51:14 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-07 20:51:14 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-07 20:51:16 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-07 20:51:16 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-07 20:51:16 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-07 20:51:18 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-07 20:51:18 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-07 20:51:18 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-07 20:51:20 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-07 20:51:20 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-07 20:51:20 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-07 20:51:22 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-07 20:51:22 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-07 20:51:22 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-07 20:51:24 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-07 20:51:24 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-07 20:51:24 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-07 20:51:26 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-07 20:51:26 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-07 20:51:26 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-07 20:51:28 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-07 20:51:28 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-07 20:51:28 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-07 20:51:30 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-07 20:51:30 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-07 20:51:30 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-07 20:51:32 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-07 20:51:32 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-07 20:51:32 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-07 20:51:35 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-07 20:51:35 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-07 20:51:35 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-07 20:51:37 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-07 20:51:37 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-07 20:51:37 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-07 20:51:39 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-07 20:51:39 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-07 20:51:39 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-07 20:51:41 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-07 20:51:41 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-07 20:51:41 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-07 20:51:43 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-07 20:51:43 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-07 20:51:43 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-07 20:51:45 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-07 20:51:45 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-07 20:51:45 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-07 20:51:47 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-07 20:51:47 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-07 20:51:47 - app.routers.websockets - WARNING - WebSocket连接在初始化过程中断开
2025-05-07 20:51:49 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-07 20:51:49 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-07 20:51:49 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-07 20:51:49 - app.services.vector_store - INFO - 初始化向量存储服务
2025-05-07 20:51:49 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-07 20:51:49 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-07 20:51:49 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-07 20:51:49 - app.services.vector_store - INFO - 初始化向量存储服务
2025-05-07 20:51:49 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-07 20:51:49 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-07 20:51:50 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-07 20:51:50 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-07 20:51:50 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-07 20:51:50 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-07 20:51:50 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-05-07 20:51:50 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-05-07 20:51:50 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-05-07 20:51:50 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-05-07 20:51:50 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-07 20:51:50 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-07 20:51:50 - app.services.vector_store - INFO - 创建集合: knowledge_base
2025-05-07 20:51:50 - app.services.vector_store - INFO - 创建集合: knowledge_base
2025-05-07 20:51:50 - app.services.vector_store - ERROR - 检查或创建集合失败: 'Settings' object has no attribute 'VECTOR_SIZE'
2025-05-07 20:51:50 - app.services.vector_store - ERROR - 检查或创建集合失败: 'Settings' object has no attribute 'VECTOR_SIZE'
2025-05-07 20:51:50 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-07 20:51:50 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-07 20:51:50 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-07 20:51:50 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-07 20:51:51 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-07 20:51:51 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-07 21:42:40 - root - INFO - 日志系统初始化完成
2025-05-07 21:42:41 - app.main - INFO - 数据库表创建完成
2025-05-07 21:42:44 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-07 21:42:44 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-07 21:42:44 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-07 21:42:44 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-07 21:42:44 - app.services.vector_store - INFO - 初始化向量存储服务
2025-05-07 21:42:44 - app.services.vector_store - INFO - 初始化向量存储服务
2025-05-07 21:42:44 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-07 21:42:44 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-07 21:42:44 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-07 21:42:44 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-07 21:42:45 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-07 21:42:45 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-07 21:42:45 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-07 21:42:45 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-07 21:42:45 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-05-07 21:42:45 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-05-07 21:42:45 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-05-07 21:42:45 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-05-07 21:42:45 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-07 21:42:45 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-07 21:42:45 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-07 21:42:45 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-07 21:42:45 - app.services.vector_store - INFO - 创建集合: knowledge_base
2025-05-07 21:42:45 - app.services.vector_store - INFO - 创建集合: knowledge_base
2025-05-07 21:42:45 - httpx - INFO - HTTP Request: PUT http://wangigor.ddns.net:30063/collections/knowledge_base "HTTP/1.1 409 Conflict"
2025-05-07 21:42:45 - httpx - INFO - HTTP Request: PUT http://wangigor.ddns.net:30063/collections/knowledge_base "HTTP/1.1 409 Conflict"
2025-05-07 21:42:45 - app.services.vector_store - ERROR - 检查或创建集合失败: Client error '409 Conflict' for url 'http://wangigor.ddns.net:30063/collections/knowledge_base'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/409
2025-05-07 21:42:45 - app.services.vector_store - ERROR - 检查或创建集合失败: Client error '409 Conflict' for url 'http://wangigor.ddns.net:30063/collections/knowledge_base'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/409
2025-05-07 21:42:45 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-07 21:42:45 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-07 21:42:45 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-07 21:42:45 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-07 21:42:52 - app.services.vector_store - INFO - 初始化向量存储服务
2025-05-07 21:42:52 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-07 21:42:52 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-07 21:42:52 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-07 21:42:52 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-07 21:42:52 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-05-07 21:42:52 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-05-07 21:42:52 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-07 21:42:52 - app.services.vector_store - INFO - 创建集合: knowledge_base
2025-05-07 21:42:52 - httpx - INFO - HTTP Request: PUT http://wangigor.ddns.net:30063/collections/knowledge_base "HTTP/1.1 409 Conflict"
2025-05-07 21:42:52 - app.services.vector_store - ERROR - 检查或创建集合失败: Client error '409 Conflict' for url 'http://wangigor.ddns.net:30063/collections/knowledge_base'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/409
2025-05-07 21:42:52 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-07 21:42:52 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-07 21:43:04 - app.services.vector_store - INFO - 初始化向量存储服务
2025-05-07 21:43:04 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-07 21:43:04 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-07 21:43:04 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-07 21:43:04 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-07 21:43:04 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-05-07 21:43:04 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-05-07 21:43:05 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-07 21:43:05 - app.services.vector_store - INFO - 创建集合: knowledge_base
2025-05-07 21:43:05 - httpx - INFO - HTTP Request: PUT http://wangigor.ddns.net:30063/collections/knowledge_base "HTTP/1.1 409 Conflict"
2025-05-07 21:43:05 - app.services.vector_store - ERROR - 检查或创建集合失败: Client error '409 Conflict' for url 'http://wangigor.ddns.net:30063/collections/knowledge_base'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/409
2025-05-07 21:43:05 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-07 21:43:05 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-07 21:43:05 - app.routers.documents - INFO - 接收到文件上传请求: 线上诊断Arthas 15ff8eef777580839c4dcf2d552da527.md, 类型: text/markdown
2025-05-07 21:43:05 - app.routers.documents - INFO - 解析元数据: {"name":"线上诊断Arthas 15ff8eef777580839c4dcf2d552da527"}...
2025-05-07 21:43:05 - app.routers.documents - INFO - 开始处理上传的文件
2025-05-07 21:43:05 - app.utils.file_utils - INFO - 文件已保存到临时路径: /var/folders/gs/kbsr2cy55nz47p4hyrxbtg0r0000gn/T/tmpkor96y7b.md
2025-05-07 21:43:05 - app.routers.documents - INFO - 文件已保存到临时路径: /var/folders/gs/kbsr2cy55nz47p4hyrxbtg0r0000gn/T/tmpkor96y7b.md
2025-05-07 21:43:05 - app.services.document_service - INFO - 开始处理文件: 线上诊断Arthas 15ff8eef777580839c4dcf2d552da527.md, 内容类型: text/markdown
2025-05-07 21:43:05 - app.services.document_service - INFO - 文件大小: 13075 字节
2025-05-07 21:43:05 - app.services.document_service - INFO - 文件类型识别为: md
2025-05-07 21:43:05 - app.services.document_service - INFO - 文本文件类型: md，使用普通UTF-8解码
2025-05-07 21:43:05 - app.services.document_service - INFO - 准备创建文档记录
2025-05-07 21:43:05 - app.services.document_service - INFO - 创建文档: 线上诊断Arthas 15ff8eef777580839c4dcf2d552da527.md, 类型: md, 用户ID: 1
2025-05-07 21:43:05 - app.services.document_service - INFO - 文档创建成功: ID=26
2025-05-07 21:43:05 - app.services.task_service - INFO - 创建任务: 处理文档: 线上诊断Arthas 15ff8eef777580839c4dcf2d552da527.md, 类型: DOCUMENT_PROCESSING, 创建者: 1
2025-05-07 21:43:05 - app.services.task_service - INFO - 任务创建成功: 7df9f062-6244-4d99-b0de-0ca9844d736e
2025-05-07 21:43:05 - app.services.document_service - INFO - 更新文档状态: ID=26, 状态=processing
2025-05-07 21:43:05 - app.services.document_service - INFO - 文档状态已更新: ID=26, 状态=processing
2025-05-07 21:43:05 - app.routers.documents - INFO - 文件处理成功，文档ID: 26, 任务ID: 7df9f062-6244-4d99-b0de-0ca9844d736e
2025-05-07 21:43:05 - app.services.vector_store - INFO - 初始化向量存储服务
2025-05-07 21:43:05 - app.services.vector_store - INFO - 初始化向量存储服务
2025-05-07 21:43:05 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-07 21:43:05 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-07 21:43:05 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-07 21:43:05 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-07 21:43:06 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-07 21:43:06 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-07 21:43:06 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-07 21:43:06 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-07 21:43:06 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-05-07 21:43:06 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-05-07 21:43:06 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-05-07 21:43:06 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-05-07 21:43:06 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-07 21:43:06 - app.services.vector_store - INFO - 创建集合: knowledge_base
2025-05-07 21:43:06 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-07 21:43:06 - app.services.vector_store - INFO - 创建集合: knowledge_base
2025-05-07 21:43:06 - httpx - INFO - HTTP Request: PUT http://wangigor.ddns.net:30063/collections/knowledge_base "HTTP/1.1 409 Conflict"
2025-05-07 21:43:06 - app.services.vector_store - ERROR - 检查或创建集合失败: Client error '409 Conflict' for url 'http://wangigor.ddns.net:30063/collections/knowledge_base'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/409
2025-05-07 21:43:06 - httpx - INFO - HTTP Request: PUT http://wangigor.ddns.net:30063/collections/knowledge_base "HTTP/1.1 409 Conflict"
2025-05-07 21:43:06 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-07 21:43:06 - app.services.vector_store - ERROR - 检查或创建集合失败: Client error '409 Conflict' for url 'http://wangigor.ddns.net:30063/collections/knowledge_base'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/409
2025-05-07 21:43:06 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-07 21:43:06 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-07 21:43:06 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-07 21:47:16 - root - INFO - 日志系统初始化完成
2025-05-07 21:47:17 - app.main - INFO - 数据库表创建完成
2025-05-07 21:48:12 - root - INFO - 日志系统初始化完成
2025-05-07 21:48:13 - app.main - INFO - 数据库表创建完成
2025-05-07 21:48:25 - root - INFO - 日志系统初始化完成
2025-05-07 21:48:25 - app.main - INFO - 数据库表创建完成
2025-05-07 21:48:39 - root - INFO - 日志系统初始化完成
2025-05-07 21:48:40 - app.main - INFO - 数据库表创建完成
2025-05-07 21:49:54 - root - INFO - 日志系统初始化完成
2025-05-07 21:49:54 - app.main - INFO - 数据库表创建完成
2025-05-07 22:06:47 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-07 22:06:47 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-07 22:06:47 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-07 22:06:47 - app.services.vector_store - INFO - 初始化向量存储服务
2025-05-07 22:06:47 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-07 22:06:47 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-07 22:06:47 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-07 22:06:47 - app.services.vector_store - INFO - 初始化向量存储服务
2025-05-07 22:06:47 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-07 22:06:47 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-07 22:06:47 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-07 22:06:48 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-07 22:06:48 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-05-07 22:06:48 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-05-07 22:06:48 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-07 22:06:48 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-07 22:06:48 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-05-07 22:06:48 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-05-07 22:06:48 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-07 22:06:48 - app.services.vector_store - INFO - 创建集合: knowledge_base
2025-05-07 22:06:48 - httpx - INFO - HTTP Request: PUT http://wangigor.ddns.net:30063/collections/knowledge_base "HTTP/1.1 409 Conflict"
2025-05-07 22:06:48 - app.services.vector_store - ERROR - 检查或创建集合失败: Client error '409 Conflict' for url 'http://wangigor.ddns.net:30063/collections/knowledge_base'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/409
2025-05-07 22:06:48 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-07 22:06:48 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-07 22:06:48 - app.services.vector_store - INFO - 创建集合: knowledge_base
2025-05-07 22:06:48 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-07 22:06:48 - httpx - INFO - HTTP Request: PUT http://wangigor.ddns.net:30063/collections/knowledge_base "HTTP/1.1 409 Conflict"
2025-05-07 22:06:48 - app.services.vector_store - ERROR - 检查或创建集合失败: Client error '409 Conflict' for url 'http://wangigor.ddns.net:30063/collections/knowledge_base'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/409
2025-05-07 22:06:48 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-07 22:06:48 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-07 22:06:48 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-07 22:06:48 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-08 12:52:45 - root - INFO - 日志系统初始化完成
2025-05-08 12:52:45 - app.main - INFO - 数据库表创建完成
2025-05-08 12:53:54 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 12:53:54 - app.services.vector_store - INFO - 初始化向量存储服务
2025-05-08 12:53:54 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-08 12:53:54 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-08 12:53:54 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-08 12:53:54 - app.services.vector_store - INFO - 初始化向量存储服务
2025-05-08 12:53:54 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-08 12:53:54 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-08 12:53:54 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 12:53:54 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-08 12:53:59 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 502 Bad Gateway"
2025-05-08 12:53:59 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 502 Bad Gateway"
2025-05-08 12:53:59 - app.services.vector_store - ERROR - 连接到Qdrant失败: Server error '502 Bad Gateway' for url 'http://wangigor.ddns.net:30063'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/502
2025-05-08 12:53:59 - app.services.vector_store - ERROR - 连接到Qdrant失败: Server error '502 Bad Gateway' for url 'http://wangigor.ddns.net:30063'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/502
2025-05-08 12:53:59 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 12:53:59 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-08 12:53:59 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 12:53:59 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-08 12:53:59 - app.services.vector_store - INFO - 初始化向量存储服务
2025-05-08 12:53:59 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-08 12:53:59 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-08 12:54:04 - app.services.vector_store - INFO - 初始化向量存储服务
2025-05-08 12:54:04 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-08 12:54:04 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-08 12:54:05 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 502 Bad Gateway"
2025-05-08 12:54:05 - app.services.vector_store - ERROR - 连接到Qdrant失败: Server error '502 Bad Gateway' for url 'http://wangigor.ddns.net:30063'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/502
2025-05-08 12:54:05 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 12:54:05 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-08 12:54:09 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 502 Bad Gateway"
2025-05-08 12:54:09 - app.services.vector_store - ERROR - 连接到Qdrant失败: Server error '502 Bad Gateway' for url 'http://wangigor.ddns.net:30063'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/502
2025-05-08 12:54:09 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 12:54:09 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-08 12:54:10 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 12:54:10 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 12:54:10 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 12:54:10 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-08 12:54:10 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 12:54:11 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 12:54:11 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 12:54:11 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 12:54:13 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 12:54:13 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 12:54:13 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 12:54:15 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 12:54:15 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 12:54:15 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 12:54:17 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 12:54:17 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 12:54:17 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 12:54:18 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 12:54:18 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 12:54:18 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 12:54:19 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 12:54:19 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 12:54:19 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 12:54:20 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 12:54:20 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 12:54:20 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 12:54:21 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 12:54:21 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 12:54:22 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 12:54:23 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 12:54:23 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 12:54:23 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 12:54:24 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 12:54:24 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 12:54:24 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 12:54:25 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 12:54:25 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 12:54:25 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 12:54:26 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 12:54:26 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 12:54:26 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 12:54:27 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 12:54:27 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 12:54:27 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 12:54:29 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 12:54:29 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 12:54:29 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 12:54:30 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 12:54:30 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 12:54:30 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 12:54:31 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 12:54:31 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 12:54:31 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 12:54:32 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 12:54:32 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 12:54:32 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 12:54:33 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 12:54:33 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 12:54:33 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 12:54:34 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 12:54:34 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 12:54:34 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 12:54:35 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 12:54:35 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 12:54:35 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 12:54:35 - app.services.vector_store - INFO - 初始化向量存储服务
2025-05-08 12:54:35 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-08 12:54:35 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-08 12:54:36 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-08 12:54:36 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-08 12:54:36 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-05-08 12:54:36 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-05-08 12:54:36 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-08 12:54:36 - app.services.vector_store - INFO - 创建集合: knowledge_base
2025-05-08 12:54:36 - httpx - INFO - HTTP Request: PUT http://wangigor.ddns.net:30063/collections/knowledge_base "HTTP/1.1 409 Conflict"
2025-05-08 12:54:36 - app.services.vector_store - ERROR - 检查或创建集合失败: Client error '409 Conflict' for url 'http://wangigor.ddns.net:30063/collections/knowledge_base'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/409
2025-05-08 12:54:36 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 12:54:36 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-08 12:54:36 - app.routers.documents - INFO - 接收到文件上传请求: 线上诊断Arthas 15ff8eef777580839c4dcf2d552da527.md, 类型: text/markdown
2025-05-08 12:54:36 - app.routers.documents - INFO - 解析元数据: {"name":"线上诊断Arthas 15ff8eef777580839c4dcf2d552da527"}...
2025-05-08 12:54:36 - app.routers.documents - INFO - 开始处理上传的文件
2025-05-08 12:54:36 - app.utils.file_utils - INFO - 文件已保存到临时路径: /var/folders/gs/kbsr2cy55nz47p4hyrxbtg0r0000gn/T/tmp1kuo9vno.md
2025-05-08 12:54:36 - app.routers.documents - INFO - 文件已保存到临时路径: /var/folders/gs/kbsr2cy55nz47p4hyrxbtg0r0000gn/T/tmp1kuo9vno.md
2025-05-08 12:54:36 - app.services.document_service - INFO - 开始处理文件: 线上诊断Arthas 15ff8eef777580839c4dcf2d552da527.md, 内容类型: text/markdown
2025-05-08 12:54:36 - app.services.document_service - INFO - 文件大小: 13075 字节
2025-05-08 12:54:36 - app.services.document_service - INFO - 文件类型识别为: md
2025-05-08 12:54:36 - app.services.document_service - INFO - 文本文件类型: md，使用普通UTF-8解码
2025-05-08 12:54:36 - app.services.document_service - INFO - 准备创建文档记录
2025-05-08 12:54:36 - app.services.document_service - INFO - 创建文档: 线上诊断Arthas 15ff8eef777580839c4dcf2d552da527.md, 类型: md, 用户ID: 1
2025-05-08 12:54:36 - app.services.document_service - INFO - 文档创建成功: ID=27
2025-05-08 12:54:36 - app.services.task_service - INFO - 创建任务: 处理文档: 线上诊断Arthas 15ff8eef777580839c4dcf2d552da527.md, 类型: DOCUMENT_PROCESSING, 创建者: 1
2025-05-08 12:54:36 - app.services.task_service - INFO - 任务创建成功: 23f740d3-bd9a-4659-8241-221d83cbd1ae
2025-05-08 12:54:36 - app.services.document_service - INFO - 更新文档状态: ID=27, 状态=processing
2025-05-08 12:54:36 - app.services.document_service - INFO - 文档状态已更新: ID=27, 状态=processing
2025-05-08 12:54:36 - app.routers.documents - INFO - 文件处理成功，文档ID: 27, 任务ID: 23f740d3-bd9a-4659-8241-221d83cbd1ae
2025-05-08 12:54:36 - app.services.vector_store - INFO - 初始化向量存储服务
2025-05-08 12:54:36 - app.services.vector_store - INFO - 初始化向量存储服务
2025-05-08 12:54:36 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-08 12:54:36 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-08 12:54:36 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-08 12:54:36 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-08 12:54:36 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-08 12:54:36 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-08 12:54:36 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-08 12:54:36 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-08 12:54:36 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-05-08 12:54:36 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-05-08 12:54:36 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-05-08 12:54:36 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-05-08 12:54:36 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-08 12:54:36 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-08 12:54:36 - app.services.vector_store - INFO - 创建集合: knowledge_base
2025-05-08 12:54:36 - app.services.vector_store - INFO - 创建集合: knowledge_base
2025-05-08 12:54:36 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 12:54:36 - httpx - INFO - HTTP Request: PUT http://wangigor.ddns.net:30063/collections/knowledge_base "HTTP/1.1 409 Conflict"
2025-05-08 12:54:36 - app.services.vector_store - ERROR - 检查或创建集合失败: Client error '409 Conflict' for url 'http://wangigor.ddns.net:30063/collections/knowledge_base'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/409
2025-05-08 12:54:36 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 12:54:36 - httpx - INFO - HTTP Request: PUT http://wangigor.ddns.net:30063/collections/knowledge_base "HTTP/1.1 409 Conflict"
2025-05-08 12:54:36 - app.services.vector_store - ERROR - 检查或创建集合失败: Client error '409 Conflict' for url 'http://wangigor.ddns.net:30063/collections/knowledge_base'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/409
2025-05-08 12:54:36 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 12:54:36 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-08 12:54:36 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 12:54:36 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-08 12:54:36 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 12:54:37 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 12:54:38 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 12:54:38 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 12:54:39 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 12:54:39 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 12:54:39 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 12:54:40 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 12:54:40 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 12:54:40 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 12:54:42 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 12:54:42 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 12:54:42 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 12:54:44 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 12:54:44 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 12:54:44 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 12:54:46 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 12:54:46 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 12:54:46 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 12:54:48 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 12:54:48 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 12:54:48 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 12:54:50 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 12:54:50 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 12:54:50 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 12:54:52 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 12:54:52 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 12:54:52 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 12:54:54 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 12:54:54 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 12:54:54 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 12:54:56 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 12:54:56 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 12:54:56 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 12:54:58 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 12:54:58 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 12:54:58 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 12:55:00 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 12:55:00 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 12:55:00 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 12:55:02 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 12:55:02 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 12:55:02 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 12:55:04 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 12:55:04 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 12:55:04 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 12:55:06 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 12:55:06 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 12:55:06 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 12:55:08 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 12:55:08 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 12:55:08 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 12:55:09 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 12:55:09 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 12:55:09 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 12:55:10 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 12:55:10 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 12:55:10 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 12:55:11 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 12:55:11 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 12:55:11 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 12:55:12 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 12:55:12 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 12:55:12 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 12:55:13 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 12:55:13 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 12:55:13 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 12:55:14 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 12:55:14 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 12:55:14 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 12:55:15 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 12:55:15 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 12:55:15 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 12:55:16 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 12:55:16 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 12:55:16 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 12:55:18 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 12:55:18 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 12:55:18 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 12:55:19 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 12:55:19 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 12:55:19 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 12:55:20 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 12:55:20 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 12:55:20 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 12:55:21 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 12:55:21 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 12:55:21 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 12:55:22 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 12:55:22 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 12:55:22 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 12:55:23 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 12:55:23 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 12:55:23 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 12:55:24 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 12:55:24 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 12:55:24 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 12:55:25 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 12:55:25 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 12:55:25 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 12:55:26 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 12:55:26 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 12:55:26 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 12:55:27 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 12:55:27 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 12:55:27 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 12:55:28 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 12:55:28 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 12:55:28 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 12:55:29 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 12:55:29 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 12:55:29 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 12:55:30 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 12:55:30 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 12:55:30 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 12:55:31 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 12:55:31 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 12:55:31 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 12:55:32 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 12:55:32 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 12:55:33 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 12:55:34 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 12:55:34 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 12:55:34 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 12:55:35 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 12:55:35 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 12:55:35 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 12:55:36 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 12:55:36 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 12:55:36 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 12:55:37 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 12:55:37 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 12:55:37 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 12:55:38 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 12:55:38 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 12:55:38 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 12:55:39 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 12:55:39 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 12:55:39 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 12:55:40 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 12:55:40 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 12:55:40 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 12:55:41 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 12:55:41 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 12:55:41 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 12:55:42 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 12:55:42 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 12:55:42 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 12:55:43 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 12:55:43 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 12:55:43 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 12:55:44 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 12:55:44 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 12:55:44 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 12:55:45 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 12:55:45 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 12:55:45 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 12:55:46 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 12:55:46 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 12:55:46 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 12:55:47 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 12:55:47 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 12:55:47 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 12:55:48 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 12:55:48 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 12:55:48 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 12:55:49 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 12:55:49 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 12:55:49 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 12:55:50 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 12:55:50 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 12:55:50 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 12:55:51 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 12:55:51 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 12:55:52 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 12:55:53 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 12:55:53 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 12:55:53 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 12:55:54 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 12:55:54 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 12:55:54 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 12:55:55 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 12:55:55 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 12:55:55 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 12:55:56 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 12:55:56 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 12:55:56 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 12:55:57 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 12:55:57 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 12:55:57 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 12:55:58 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 12:55:58 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 12:55:58 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 12:55:59 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 12:55:59 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 12:55:59 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 12:56:00 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 12:56:00 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 12:56:00 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 12:56:01 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 12:56:01 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 12:56:01 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 12:56:02 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 12:56:02 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 12:56:02 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 12:56:03 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 12:56:03 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 12:56:03 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 12:56:04 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 12:56:04 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 12:56:04 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 12:56:05 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 12:56:05 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 12:56:05 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 12:56:06 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 12:56:06 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 12:56:06 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 12:56:07 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 12:56:08 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 12:56:08 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 12:56:09 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 12:56:09 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 12:56:09 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 12:56:10 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 12:56:10 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 12:56:10 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 12:56:11 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 12:56:11 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 12:56:11 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 12:56:12 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 12:56:12 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 12:56:12 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 12:56:13 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 12:56:13 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 12:56:13 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 12:56:14 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 12:56:14 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 12:56:14 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 12:56:15 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 12:56:15 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 12:56:15 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 12:56:16 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 12:56:16 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 12:56:16 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 12:56:17 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 12:56:17 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 12:56:17 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 12:56:18 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 12:56:18 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 12:56:18 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 12:56:19 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 12:56:19 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 12:56:19 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 12:56:20 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 12:56:20 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 12:56:20 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 12:56:21 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 12:56:21 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 12:56:21 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 12:56:22 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 12:56:22 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 12:56:22 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 12:56:23 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 12:56:24 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 12:56:24 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 12:56:25 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 12:56:25 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 12:56:25 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 12:56:26 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 12:56:26 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 12:56:26 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 12:56:27 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 12:56:27 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 12:56:27 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 12:56:28 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 12:56:28 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 12:56:28 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 12:56:29 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 12:56:29 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 12:56:29 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 12:56:30 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 12:56:31 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 12:56:31 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 12:56:32 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 12:56:32 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 12:56:32 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 12:56:33 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 12:56:33 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 12:56:33 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 12:56:34 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 12:56:34 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 12:56:34 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 12:56:35 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 12:56:35 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 12:56:35 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 12:56:36 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 12:56:36 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 12:56:36 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 12:56:37 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 12:56:37 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 12:56:37 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 12:56:38 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 12:56:38 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 12:56:38 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 12:56:39 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 12:56:39 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 12:56:39 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 12:56:40 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 12:56:40 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 12:56:40 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 12:56:41 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 12:56:41 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 12:56:41 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 12:56:42 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 12:56:42 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 12:56:42 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 12:56:43 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 12:56:43 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 12:56:43 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 12:56:44 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 12:56:44 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 12:56:44 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 12:56:45 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 12:56:45 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 12:56:46 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 12:56:47 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 12:56:47 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 12:56:47 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 12:56:48 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 12:56:48 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 12:56:48 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 12:56:49 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 12:56:49 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 12:56:49 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 12:56:50 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 12:56:50 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 12:56:50 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 12:56:51 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 12:56:51 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 12:56:51 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 12:56:52 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 12:56:52 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 12:56:52 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 12:56:53 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 12:56:53 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 12:56:53 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 12:56:54 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 12:56:54 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 12:56:54 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 12:56:55 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 12:56:55 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 12:56:55 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 12:56:56 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 12:56:56 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 12:56:56 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 12:56:57 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 12:56:57 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 12:56:57 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 12:56:58 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 12:56:58 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 12:56:58 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 12:56:59 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 12:56:59 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 12:56:59 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 12:57:00 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 12:57:00 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 12:57:00 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 12:57:01 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 12:57:01 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 12:57:01 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 12:57:02 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 12:57:02 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 12:57:02 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 12:57:03 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 12:57:04 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 12:57:04 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 12:57:05 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 12:57:05 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 12:57:05 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 12:57:06 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 12:57:06 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 12:57:06 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 12:57:07 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 12:57:07 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 12:57:07 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 12:57:08 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 12:57:08 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 12:57:08 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 12:57:09 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 12:57:09 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 12:57:09 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 12:57:10 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 12:57:10 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 12:57:10 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 12:57:11 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 12:57:11 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 12:57:11 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 12:57:12 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 12:57:12 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 12:57:12 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 12:57:13 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 12:57:13 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 12:57:13 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 12:57:14 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 12:57:14 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 12:57:14 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 12:57:15 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 12:57:15 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 12:57:15 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 12:57:16 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 12:57:16 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 12:57:16 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 12:57:17 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 12:57:17 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 12:57:17 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 12:57:18 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 12:57:18 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 12:57:18 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 12:57:19 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 12:57:19 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 12:57:19 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 12:57:20 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 12:57:20 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 12:57:20 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 12:57:21 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 12:57:22 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 12:57:22 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 12:57:23 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 12:57:23 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 12:57:23 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 12:57:24 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 12:57:24 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 12:57:24 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 12:57:25 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 12:57:25 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 12:57:25 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 12:57:26 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 12:57:26 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 12:57:26 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 12:57:27 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 12:57:27 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 12:57:27 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 12:57:28 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 12:57:28 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 12:57:28 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 12:57:29 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 12:57:29 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 12:57:29 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 12:57:30 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 12:57:30 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 12:57:30 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 12:57:31 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 12:57:31 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 12:57:31 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 12:57:32 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 12:57:32 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 12:57:32 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 12:57:33 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 12:57:33 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 12:57:33 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 12:57:34 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 12:57:34 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 12:57:34 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 12:57:35 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 12:57:35 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 12:57:35 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 12:57:36 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 12:57:36 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 12:57:36 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 12:57:37 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 12:57:38 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 12:57:38 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 12:57:39 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 12:57:39 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 12:57:39 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 12:57:40 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 12:57:40 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 12:57:40 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 12:57:41 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 12:57:41 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 12:57:41 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 12:57:42 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 12:57:42 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 12:57:42 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 12:57:43 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 12:57:43 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 12:57:43 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 12:57:44 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 12:57:44 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 12:57:44 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 12:57:45 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 12:57:45 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 12:57:45 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 12:57:46 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 12:57:46 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 12:57:46 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 12:57:47 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 12:57:47 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 12:57:47 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 12:57:48 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 12:57:48 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 12:57:48 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 12:57:49 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 12:57:49 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 12:57:49 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 12:57:50 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 12:57:50 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 12:57:50 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 12:57:51 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 12:57:51 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 12:57:51 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 12:57:52 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 12:57:52 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 12:57:52 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 12:57:53 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 12:57:53 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 12:57:53 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 12:57:54 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 12:57:55 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 12:57:55 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 12:57:56 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 12:57:56 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 12:57:56 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 12:57:57 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 12:57:57 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 12:57:57 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 12:57:58 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 12:57:58 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 12:57:58 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 12:57:59 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 12:57:59 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 12:57:59 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 12:58:00 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 12:58:00 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 12:58:00 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 12:58:01 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 12:58:01 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 12:58:01 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 12:58:02 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 12:58:02 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 12:58:02 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 12:58:03 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 12:58:03 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 12:58:03 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 12:58:04 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 12:58:04 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 12:58:04 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 12:58:05 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 12:58:05 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 12:58:05 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 12:58:06 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 12:58:06 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 12:58:06 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 12:58:07 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 12:58:07 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 12:58:07 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 12:58:08 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 12:58:08 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 12:58:08 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 12:58:09 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 12:58:09 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 12:58:09 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 12:58:10 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 12:58:10 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 12:58:11 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 12:58:12 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 12:58:12 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 12:58:12 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 12:58:13 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 12:58:13 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 12:58:13 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 12:58:14 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 12:58:14 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 12:58:14 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 12:58:15 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 12:58:15 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 12:58:15 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 12:58:16 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 12:58:16 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 12:58:16 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 12:58:17 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 12:58:17 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 12:58:17 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 12:58:18 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 12:58:18 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 12:58:18 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 12:58:19 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 12:58:19 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 12:58:19 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 12:58:20 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 12:58:20 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 12:58:20 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 12:58:21 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 12:58:21 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 12:58:21 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 12:58:22 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 12:58:22 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 12:58:22 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 12:58:23 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 12:58:23 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 12:58:23 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 12:58:24 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 12:58:24 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 12:58:24 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 12:58:25 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 12:58:25 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 12:58:25 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 12:58:26 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 12:58:26 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 12:58:26 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 12:58:27 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 12:58:27 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 12:58:27 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 12:58:28 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 12:58:29 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 12:58:29 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 12:58:30 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 12:58:30 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 12:58:30 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 12:58:31 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 12:58:31 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 12:58:31 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 12:58:32 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 12:58:32 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 12:58:32 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 12:58:33 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 12:58:33 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 12:58:33 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 12:58:34 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 12:58:34 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 12:58:34 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 12:58:35 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 12:58:35 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 12:58:35 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 12:58:36 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 12:58:36 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 12:58:36 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 12:58:37 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 12:58:37 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 12:58:37 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 12:58:38 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 12:58:38 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 12:58:38 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 12:58:39 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 12:58:39 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 12:58:39 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 12:58:40 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 12:58:40 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 12:58:40 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 12:58:41 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 12:58:41 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 12:58:41 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 12:58:42 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 12:58:42 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 12:58:43 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 12:58:44 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 12:58:44 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 12:58:44 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 12:58:45 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 12:58:45 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 12:58:45 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 12:58:46 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 12:58:46 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 12:58:46 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 12:58:47 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 12:58:47 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 12:58:47 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 12:58:48 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 12:58:48 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 12:58:48 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 12:58:49 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 12:58:49 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 12:58:49 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 12:58:50 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 12:58:50 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 12:58:50 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 12:58:51 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 12:58:51 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 12:58:51 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 12:58:52 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 12:58:52 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 12:58:52 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 12:58:53 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 12:58:53 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 12:58:53 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 12:58:54 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 12:58:54 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 12:58:54 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 12:58:55 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 12:58:55 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 12:58:55 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 12:58:56 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 12:58:56 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 12:58:56 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 12:58:57 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 12:58:57 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 12:58:57 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 12:58:58 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 12:58:58 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 12:58:58 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 12:58:59 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 12:58:59 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 12:58:59 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 12:59:00 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 12:59:00 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 12:59:01 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 12:59:02 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 12:59:02 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 12:59:02 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 12:59:03 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 12:59:03 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 12:59:03 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 12:59:04 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 12:59:04 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 12:59:04 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 12:59:05 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 12:59:05 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 12:59:05 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 12:59:06 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 12:59:06 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 12:59:06 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 12:59:07 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 12:59:07 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 12:59:07 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 12:59:08 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 12:59:08 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 12:59:08 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 12:59:09 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 12:59:09 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 12:59:09 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 12:59:10 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 12:59:10 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 12:59:10 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 12:59:11 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 12:59:11 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 12:59:11 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 12:59:12 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 12:59:12 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 12:59:12 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 12:59:13 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 12:59:13 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 12:59:13 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 12:59:14 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 12:59:14 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 12:59:14 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 12:59:15 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 12:59:16 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 12:59:16 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 12:59:17 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 12:59:17 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 12:59:17 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 12:59:18 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 12:59:18 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 12:59:18 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 12:59:19 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 12:59:19 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 12:59:19 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 12:59:20 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 12:59:20 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 12:59:20 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 12:59:21 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 12:59:21 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 12:59:21 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 12:59:22 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 12:59:22 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 12:59:22 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 12:59:23 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 12:59:23 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 12:59:23 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 12:59:24 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 12:59:24 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 12:59:24 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 12:59:25 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 12:59:25 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 12:59:25 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 12:59:26 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 12:59:26 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 12:59:26 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 12:59:27 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 12:59:27 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 12:59:27 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 12:59:28 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 12:59:28 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 12:59:28 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 12:59:29 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 12:59:29 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 12:59:29 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 12:59:30 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 12:59:31 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 12:59:31 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 12:59:32 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 12:59:32 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 12:59:32 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 12:59:33 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 12:59:33 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 12:59:33 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 12:59:34 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 12:59:34 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 12:59:34 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 12:59:35 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 12:59:35 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 12:59:35 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 12:59:36 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 12:59:36 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 12:59:36 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 12:59:37 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 12:59:37 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 12:59:37 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 12:59:38 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 12:59:38 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 12:59:38 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 12:59:39 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 12:59:39 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 12:59:39 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 12:59:40 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 12:59:40 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 12:59:40 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 12:59:41 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 12:59:41 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 12:59:41 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 12:59:42 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 12:59:42 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 12:59:42 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 12:59:43 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 12:59:43 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 12:59:43 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 12:59:44 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 12:59:44 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 12:59:44 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 12:59:45 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 12:59:45 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 12:59:46 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 12:59:47 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 12:59:47 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 12:59:47 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 12:59:48 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 12:59:48 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 12:59:48 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 12:59:49 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 12:59:49 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 12:59:49 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 12:59:50 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 12:59:50 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 12:59:50 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 12:59:51 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 12:59:51 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 12:59:51 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 12:59:52 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 12:59:52 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 12:59:52 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 12:59:53 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 12:59:53 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 12:59:53 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 12:59:54 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 12:59:54 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 12:59:54 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 12:59:55 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 12:59:55 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 12:59:55 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 12:59:56 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 12:59:56 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 12:59:56 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 12:59:57 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 12:59:57 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 12:59:57 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 12:59:58 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 12:59:58 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 12:59:58 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 12:59:59 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 12:59:59 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 12:59:59 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:00:00 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:00:00 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:00:00 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:00:01 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:00:01 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:00:01 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:00:02 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:00:02 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:00:02 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:00:03 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:00:03 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:00:03 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:00:04 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:00:04 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:00:05 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:00:06 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:00:06 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:00:06 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:00:07 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:00:07 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:00:07 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:00:08 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:00:08 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:00:08 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:00:09 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:00:09 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:00:09 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:00:10 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:00:10 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:00:10 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:00:11 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:00:11 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:00:11 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:00:12 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:00:12 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:00:12 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:00:13 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:00:13 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:00:13 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:00:14 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:00:14 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:00:14 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:00:15 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:00:15 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:00:15 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:00:16 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:00:16 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:00:16 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:00:17 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:00:17 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:00:17 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:00:18 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:00:18 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:00:18 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:00:19 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:00:19 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:00:19 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:00:20 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:00:20 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:00:20 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:00:21 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:00:22 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:00:22 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:00:23 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:00:23 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:00:23 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:00:24 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:00:24 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:00:24 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:00:25 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:00:25 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:00:25 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:00:26 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:00:26 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:00:26 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:00:27 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:00:27 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:00:27 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:00:28 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:00:28 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:00:28 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:00:29 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:00:29 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:00:29 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:00:30 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:00:30 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:00:30 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:00:31 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:00:31 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:00:31 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:00:32 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:00:32 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:00:32 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:00:33 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:00:33 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:00:33 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:00:34 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:00:34 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:00:34 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:00:35 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:00:35 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:00:35 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:00:36 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:00:36 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:00:36 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:00:37 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:00:37 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:00:37 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:00:38 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:00:39 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:00:39 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:00:40 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:00:40 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:00:40 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:00:41 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:00:41 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:00:41 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:00:42 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:00:42 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:00:42 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:00:43 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:00:43 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:00:43 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:00:44 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:00:44 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:00:44 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:00:45 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:00:45 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:00:45 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:00:46 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:00:46 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:00:46 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:00:47 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:00:47 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:00:47 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:00:48 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:00:48 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:00:48 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:00:49 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:00:49 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:00:49 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:00:50 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:00:50 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:00:50 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:00:51 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:00:51 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:00:51 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:00:52 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:00:52 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:00:52 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:00:53 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:00:53 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:00:53 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:00:54 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:00:54 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:00:54 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:00:55 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:00:56 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:00:56 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:00:57 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:00:57 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:00:57 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:00:58 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:00:58 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:00:58 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:00:59 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:00:59 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:00:59 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:01:00 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:01:00 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:01:00 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:01:01 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:01:01 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:01:01 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:01:02 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:01:02 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:01:02 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:01:03 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:01:03 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:01:03 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:01:04 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:01:04 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:01:04 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:01:05 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:01:05 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:01:05 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:01:06 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:01:06 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:01:06 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:01:07 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:01:07 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:01:07 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:01:08 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:01:08 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:01:08 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:01:09 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:01:09 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:01:09 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:01:10 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:01:10 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:01:10 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:01:11 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:01:11 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:01:12 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:01:13 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:01:13 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:01:13 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:01:14 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:01:14 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:01:14 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:01:15 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:01:15 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:01:15 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:01:16 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:01:16 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:01:16 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:01:17 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:01:17 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:01:17 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:01:18 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:01:18 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:01:18 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:01:19 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:01:19 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:01:19 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:01:20 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:01:20 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:01:20 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:01:21 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:01:21 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:01:21 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:01:22 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:01:22 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:01:22 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:01:23 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:01:23 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:01:23 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:01:24 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:01:24 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:01:24 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:01:25 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:01:25 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:01:25 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:01:26 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:01:26 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:01:26 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:01:27 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:01:27 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:01:27 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:01:28 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:01:28 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:01:28 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:01:29 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:01:29 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:01:29 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:01:30 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:01:31 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:01:31 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:01:32 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:01:32 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:01:32 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:01:33 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:01:33 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:01:33 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:01:34 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:01:34 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:01:34 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:01:35 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:01:35 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:01:35 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:01:36 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:01:36 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:01:36 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:01:37 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:01:37 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:01:37 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:01:38 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:01:38 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:01:38 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:01:39 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:01:39 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:01:39 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:01:40 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:01:40 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:01:40 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:01:41 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:01:41 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:01:41 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:01:42 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:01:42 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:01:42 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:01:43 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:01:43 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:01:43 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:01:44 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:01:44 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:01:44 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:01:45 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:01:45 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:01:45 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:01:46 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:01:46 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:01:46 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:01:47 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:01:48 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:01:48 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:01:49 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:01:49 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:01:49 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:01:50 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:01:50 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:01:50 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:01:51 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:01:51 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:01:51 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:01:52 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:01:52 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:01:52 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:01:53 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:01:53 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:01:53 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:01:54 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:01:54 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:01:54 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:01:55 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:01:55 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:01:55 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:01:56 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:01:56 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:01:56 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:01:57 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:01:57 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:01:57 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:01:58 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:01:58 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:01:58 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:02:00 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:02:00 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:02:00 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:02:02 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:02:02 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:02:02 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:02:04 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:02:04 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:02:04 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:02:06 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:02:06 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:02:06 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:02:08 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:02:08 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:02:08 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:02:10 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:02:10 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:02:10 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:02:12 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:02:12 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:02:12 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:02:14 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:02:14 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:02:14 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:02:16 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:02:16 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:02:16 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:02:18 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:02:18 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:02:18 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:02:20 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:02:20 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:02:20 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:02:22 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:02:22 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:02:22 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:02:24 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:02:24 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:02:24 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:02:26 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:02:26 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:02:26 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:02:28 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:02:28 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:02:28 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:02:30 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:02:30 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:02:30 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:02:32 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:02:32 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:02:32 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:02:34 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:02:34 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:02:34 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:02:36 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:02:36 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:02:36 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:02:38 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:02:38 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:02:38 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:02:40 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:02:40 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:02:40 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:02:42 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:02:42 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:02:42 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:02:44 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:02:44 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:02:44 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:02:46 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:02:46 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:02:46 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:02:48 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:02:48 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:02:48 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:02:50 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:02:50 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:02:50 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:02:52 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:02:52 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:02:52 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:02:54 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:02:54 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:02:54 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:02:56 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:02:56 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:02:56 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:02:58 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:02:58 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:02:58 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:03:00 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:03:00 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:03:00 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:03:02 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:03:02 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:03:02 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:03:04 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:03:04 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:03:04 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:03:06 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:03:06 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:03:06 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:03:08 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:03:08 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:03:08 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:03:10 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:03:10 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:03:10 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:03:12 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:03:12 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:03:12 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:03:14 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:03:14 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:03:14 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:03:16 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:03:16 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:03:16 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:03:18 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:03:18 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:03:18 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:03:20 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:03:20 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:03:21 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:03:22 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:03:22 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:03:22 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:03:24 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:03:24 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:03:24 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:03:26 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:03:26 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:03:26 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:03:28 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:03:28 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:03:28 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:03:30 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:03:30 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:03:30 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:03:32 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:03:32 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:03:32 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:03:34 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:03:34 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:03:34 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:03:36 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:03:36 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:03:36 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:03:38 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:03:38 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:03:38 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:03:40 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:03:40 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:03:40 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:03:42 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:03:42 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:03:42 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:03:44 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:03:44 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:03:44 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:03:46 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:03:46 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:03:46 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:03:48 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:03:48 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:03:48 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:03:50 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:03:50 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:03:50 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:03:52 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:03:52 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:03:52 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:03:54 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:03:54 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:03:54 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:03:56 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:03:56 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:03:56 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:03:58 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:03:58 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:03:58 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:04:00 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:04:00 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:04:00 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:04:02 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:04:02 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:04:02 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:04:04 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:04:04 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:04:04 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:04:06 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:04:06 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:04:06 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:04:08 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:04:08 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:04:08 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:04:10 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:04:10 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:04:10 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:04:12 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:04:12 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:04:12 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:04:14 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:04:14 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:04:14 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:04:16 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:04:16 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:04:16 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:04:18 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:04:18 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:04:18 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:04:20 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:04:20 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:04:20 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:04:22 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:04:22 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:04:22 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:04:24 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:04:24 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:04:24 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:04:26 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:04:26 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:04:26 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:04:28 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:04:28 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:04:28 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:04:30 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:04:30 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:04:30 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:04:32 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:04:32 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:04:32 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:04:34 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:04:34 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:04:34 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:04:36 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:04:36 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:04:36 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:04:38 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:04:38 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:04:38 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:04:40 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:04:40 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:04:40 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:04:42 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:04:42 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:04:42 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:04:44 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:04:44 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:04:44 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:04:46 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:04:46 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:04:46 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:04:48 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:04:48 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:04:48 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:04:50 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:04:50 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:04:50 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:04:52 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:04:52 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:04:52 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:04:54 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:04:54 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:04:54 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:04:56 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:04:56 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:04:56 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:04:58 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:04:58 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:04:58 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:05:00 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:05:00 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:05:00 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:05:02 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:05:02 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:05:02 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:05:04 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:05:04 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:05:04 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:05:06 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:05:06 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:05:06 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:05:08 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:05:08 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:05:08 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:05:10 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:05:10 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:05:10 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:05:12 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:05:12 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:05:12 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:05:14 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:05:14 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:05:14 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:05:16 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:05:16 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:05:16 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:05:18 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:05:18 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:05:18 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:05:20 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:05:20 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:05:20 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:05:22 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:05:22 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:05:22 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:05:24 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:05:24 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:05:24 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:05:26 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:05:26 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:05:26 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:05:28 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:05:28 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:05:28 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:05:30 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:05:30 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:05:30 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:05:32 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:05:32 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:05:32 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:05:34 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:05:34 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:05:34 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:05:36 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:05:36 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:05:36 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:05:38 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:05:38 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:05:38 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:05:40 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:05:40 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:05:40 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:05:42 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:05:42 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:05:42 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:05:44 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:05:44 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:05:44 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:05:46 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:05:46 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:05:46 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:05:48 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:05:48 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:05:48 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:05:50 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:05:50 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:05:50 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:05:52 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:05:52 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:05:52 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:05:54 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:05:54 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:05:54 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:05:56 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:05:56 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:05:56 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:05:58 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:05:58 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:05:58 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:06:00 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:06:00 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:06:00 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:06:02 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:06:02 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:06:02 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:06:04 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:06:04 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:06:04 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:06:06 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:06:06 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:06:06 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:06:08 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:06:08 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:06:08 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:06:10 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:06:10 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:06:10 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:06:12 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:06:12 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:06:12 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:06:14 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:06:14 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:06:14 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:06:16 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:06:16 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:06:16 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:06:18 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:06:18 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:06:18 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:06:20 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:06:20 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:06:20 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:06:22 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:06:22 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:06:22 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:06:24 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:06:24 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:06:24 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:06:26 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:06:26 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:06:26 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:06:28 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:06:28 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:06:28 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:06:30 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:06:30 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:06:30 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:06:32 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:06:32 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:06:32 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:06:34 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:06:34 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:06:34 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:06:36 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:06:36 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:06:36 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:06:38 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:06:38 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:06:38 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:06:40 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:06:40 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:06:40 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:06:42 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:06:42 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:06:42 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:06:44 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:06:44 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:06:44 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:06:46 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:06:46 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:06:46 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:06:48 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:06:48 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:06:48 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:06:50 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:06:50 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:06:50 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:06:52 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:06:52 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:06:52 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:06:54 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:06:54 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:06:54 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:06:56 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:06:56 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:06:56 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:06:58 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:06:58 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:06:58 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:07:00 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:07:00 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:07:00 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:07:02 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:07:02 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:07:02 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:07:04 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:07:04 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:07:04 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:07:06 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:07:06 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:07:06 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:07:08 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:07:08 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:07:08 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:07:10 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:07:10 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:07:10 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:07:12 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:07:12 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:07:12 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:07:14 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:07:14 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:07:14 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:07:16 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:07:16 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:07:16 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:07:18 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:07:18 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:07:18 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:07:20 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:07:20 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:07:20 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:07:22 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:07:22 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:07:22 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:07:24 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:07:24 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:07:24 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:07:26 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:07:26 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:07:26 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:07:28 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:07:28 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:07:28 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:07:30 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:07:30 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:07:30 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:07:32 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:07:32 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:07:32 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:07:34 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:07:34 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:07:34 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:07:36 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:07:36 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:07:36 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:07:38 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:07:38 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:07:38 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:07:40 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:07:40 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:07:40 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:07:42 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:07:42 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:07:42 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:07:44 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:07:44 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:07:44 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:07:46 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:07:46 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:07:46 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:07:48 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:07:48 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:07:48 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:07:50 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:07:50 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:07:50 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:07:52 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:07:52 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:07:52 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:07:54 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:07:54 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:07:54 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:07:56 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:07:56 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:07:56 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:07:58 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:07:58 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:07:58 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:08:00 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:08:00 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:08:00 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:08:02 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:08:02 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:08:02 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:08:04 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:08:04 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:08:04 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:08:06 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:08:06 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:08:06 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:08:08 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:08:08 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:08:08 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:08:10 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:08:10 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:08:10 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:08:12 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:08:12 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:08:12 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:08:14 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:08:14 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:08:14 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:08:16 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:08:16 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:08:16 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:08:18 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:08:18 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:08:18 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:08:20 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:08:20 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:08:20 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:08:22 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:08:22 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:08:22 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:08:24 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:08:24 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:08:24 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:08:26 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:08:26 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:08:26 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:08:28 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:08:28 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:08:28 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:08:30 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:08:30 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:08:30 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:08:32 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:08:32 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:08:32 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:08:34 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:08:34 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:08:34 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:08:36 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:08:36 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:08:36 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:08:38 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:08:38 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:08:38 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:08:40 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:08:40 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:08:40 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:08:42 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:08:42 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:08:42 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:08:44 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:08:44 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:08:44 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:08:46 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:08:46 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:08:46 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:08:48 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:08:48 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:08:48 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:08:50 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:08:50 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:08:50 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:08:52 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:08:52 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:08:52 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:08:54 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:08:54 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:08:54 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:08:56 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:08:56 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:08:56 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:08:58 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:08:58 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:08:58 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:09:00 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:09:00 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:09:00 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:09:02 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:09:02 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:09:02 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:09:04 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:09:04 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:09:04 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:09:06 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:09:06 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:09:06 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:09:08 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:09:08 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:09:08 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:09:10 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:09:10 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:09:10 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:09:12 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:09:12 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:09:12 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:09:14 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:09:14 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:09:14 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:09:16 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:09:16 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:09:16 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:09:18 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:09:18 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:09:18 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:09:20 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:09:20 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:09:20 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:09:22 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:09:22 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:09:22 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:09:24 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:09:24 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:09:24 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:09:26 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:09:26 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:09:26 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:09:28 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:09:28 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:09:28 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:09:30 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:09:30 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:09:30 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:09:32 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:09:32 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:09:32 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:09:34 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:09:34 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:09:34 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:09:36 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:09:36 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:09:36 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:09:38 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:09:38 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:09:38 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:09:40 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:09:40 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:09:40 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:09:42 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:09:42 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:09:42 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:09:44 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:09:44 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:09:44 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:09:46 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:09:46 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:09:46 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:09:48 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:09:48 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:09:48 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:09:50 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:09:50 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:09:50 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:09:52 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:09:52 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:09:52 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:09:54 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:09:54 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:09:54 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:09:56 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:09:56 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:09:56 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:09:58 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:09:58 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:09:58 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:10:00 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:10:00 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:10:00 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:10:02 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:10:02 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:10:02 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:10:04 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:10:04 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:10:04 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:10:06 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:10:06 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:10:06 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:10:08 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:10:08 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:10:08 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:10:10 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:10:10 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:10:10 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:10:12 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:10:12 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:10:12 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:10:14 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:10:14 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:10:14 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:10:16 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:10:16 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:10:16 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:10:18 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:10:18 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:10:18 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:10:20 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:10:20 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:10:20 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:10:22 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:10:22 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:10:22 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:10:24 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:10:24 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:10:24 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:10:26 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:10:26 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:10:26 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:10:28 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:10:28 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:10:28 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:10:30 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:10:30 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:10:30 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:10:32 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:10:32 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:10:32 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:10:34 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:10:34 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:10:34 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:10:36 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:10:36 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:10:36 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:10:38 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:10:38 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:10:38 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:10:40 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:10:40 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:10:40 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:10:42 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:10:42 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:10:42 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:10:44 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:10:44 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:10:44 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:10:46 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:10:46 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:10:46 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:10:48 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:10:48 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:10:48 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:10:50 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:10:50 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:10:50 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:10:52 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:10:52 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:10:52 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:10:54 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:10:54 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:10:54 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:10:56 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:10:56 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:10:56 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:10:58 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:10:58 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:10:58 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:11:00 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:11:00 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:11:00 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:11:02 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:11:02 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:11:02 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:11:04 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:11:04 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:11:04 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:11:06 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:11:06 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:11:06 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:11:08 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:11:08 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:11:08 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:11:10 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:11:10 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:11:10 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:11:12 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:11:12 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:11:12 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:11:14 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:11:14 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:11:14 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:11:16 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:11:16 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:11:16 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:11:18 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:11:18 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:11:18 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:11:20 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:11:20 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:11:20 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:11:22 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:11:22 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:11:22 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:11:24 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:11:24 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:11:24 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:11:26 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:11:26 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:11:26 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:11:28 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:11:28 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:11:28 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:11:30 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:11:30 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:11:30 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:11:32 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:11:32 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:11:32 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:11:34 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:11:34 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:11:34 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:11:36 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:11:36 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:11:36 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:11:38 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:11:38 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:11:38 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:11:40 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:11:40 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:11:40 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:11:42 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:11:42 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:11:42 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:11:44 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:11:44 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:11:44 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:11:46 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:11:46 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:11:46 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:11:48 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:11:48 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:11:48 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:11:50 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:11:50 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:11:50 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:11:52 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:11:52 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:11:52 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:11:54 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:11:54 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:11:54 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:11:56 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:11:56 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:11:56 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:11:58 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:11:58 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:11:58 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:12:00 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:12:00 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:12:00 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:12:02 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:12:02 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:12:02 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:12:04 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:12:04 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:12:04 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:12:06 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:12:06 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:12:06 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:12:08 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:12:08 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:12:08 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:12:10 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:12:10 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:12:10 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:12:12 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:12:12 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:12:12 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:12:14 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:12:14 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:12:14 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:12:16 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:12:16 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:12:16 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:12:18 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:12:18 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:12:18 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:12:20 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:12:20 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:12:20 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:12:22 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:12:22 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:12:22 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:12:24 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:12:24 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:12:24 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:12:26 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:12:26 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:12:26 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:12:28 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:12:28 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:12:28 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:12:30 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:12:30 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:12:30 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:12:32 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:12:32 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:12:32 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:12:34 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:12:34 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:12:34 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:12:35 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:12:35 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:12:35 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:12:36 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:12:36 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:12:36 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:12:37 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:12:37 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:12:37 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:12:40 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:12:40 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:12:40 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:12:41 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:12:41 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:12:41 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:12:42 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:12:42 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:12:42 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:12:43 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:12:43 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:12:43 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:12:44 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:12:45 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:12:45 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:12:46 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:12:46 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:12:46 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:12:47 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:12:47 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:12:47 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:12:48 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:12:48 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:12:48 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:12:49 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:12:49 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:12:49 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:12:50 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:12:50 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:12:50 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:12:50 - app.services.vector_store - INFO - 初始化向量存储服务
2025-05-08 13:12:50 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-08 13:12:50 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-08 13:12:50 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-08 13:12:50 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-08 13:12:50 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-05-08 13:12:50 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-05-08 13:12:51 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-08 13:12:51 - app.services.vector_store - INFO - 创建集合: knowledge_base
2025-05-08 13:12:51 - httpx - INFO - HTTP Request: PUT http://wangigor.ddns.net:30063/collections/knowledge_base "HTTP/1.1 409 Conflict"
2025-05-08 13:12:51 - app.services.vector_store - ERROR - 检查或创建集合失败: Client error '409 Conflict' for url 'http://wangigor.ddns.net:30063/collections/knowledge_base'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/409
2025-05-08 13:12:51 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:12:51 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-08 13:12:51 - app.routers.documents - INFO - 接收到文件上传请求: 线上诊断Arthas 15ff8eef777580839c4dcf2d552da527.md, 类型: text/markdown
2025-05-08 13:12:51 - app.routers.documents - INFO - 解析元数据: {"name":"线上诊断Arthas 15ff8eef777580839c4dcf2d552da527"}...
2025-05-08 13:12:51 - app.routers.documents - INFO - 开始处理上传的文件
2025-05-08 13:12:51 - app.utils.file_utils - INFO - 文件已保存到临时路径: /var/folders/gs/kbsr2cy55nz47p4hyrxbtg0r0000gn/T/tmpxdaby6da.md
2025-05-08 13:12:51 - app.routers.documents - INFO - 文件已保存到临时路径: /var/folders/gs/kbsr2cy55nz47p4hyrxbtg0r0000gn/T/tmpxdaby6da.md
2025-05-08 13:12:51 - app.services.document_service - INFO - 开始处理文件: 线上诊断Arthas 15ff8eef777580839c4dcf2d552da527.md, 内容类型: text/markdown
2025-05-08 13:12:51 - app.services.document_service - INFO - 文件大小: 13075 字节
2025-05-08 13:12:51 - app.services.document_service - INFO - 文件类型识别为: md
2025-05-08 13:12:51 - app.services.document_service - INFO - 文本文件类型: md，使用普通UTF-8解码
2025-05-08 13:12:51 - app.services.document_service - INFO - 准备创建文档记录
2025-05-08 13:12:51 - app.services.document_service - INFO - 创建文档: 线上诊断Arthas 15ff8eef777580839c4dcf2d552da527.md, 类型: md, 用户ID: 1
2025-05-08 13:12:51 - app.services.document_service - INFO - 文档创建成功: ID=28
2025-05-08 13:12:51 - app.services.task_service - INFO - 创建任务: 处理文档: 线上诊断Arthas 15ff8eef777580839c4dcf2d552da527.md, 类型: DOCUMENT_PROCESSING, 创建者: 1
2025-05-08 13:12:51 - app.services.task_service - INFO - 任务创建成功: 27369235-0d17-4dd2-a1c3-22a6cd94cbe4
2025-05-08 13:12:51 - app.services.document_service - INFO - 更新文档状态: ID=28, 状态=processing
2025-05-08 13:12:51 - app.services.document_service - INFO - 文档状态已更新: ID=28, 状态=processing
2025-05-08 13:12:51 - app.routers.documents - INFO - 文件处理成功，文档ID: 28, 任务ID: 27369235-0d17-4dd2-a1c3-22a6cd94cbe4
2025-05-08 13:12:51 - app.services.vector_store - INFO - 初始化向量存储服务
2025-05-08 13:12:51 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-08 13:12:51 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-08 13:12:51 - app.services.vector_store - INFO - 初始化向量存储服务
2025-05-08 13:12:51 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-08 13:12:51 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-08 13:12:51 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:12:51 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:12:51 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:12:52 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:12:52 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:12:52 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:12:54 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:12:54 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:12:54 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:12:56 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:12:56 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:12:56 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:12:56 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 502 Bad Gateway"
2025-05-08 13:12:56 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 502 Bad Gateway"
2025-05-08 13:12:56 - app.services.vector_store - ERROR - 连接到Qdrant失败: Server error '502 Bad Gateway' for url 'http://wangigor.ddns.net:30063'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/502
2025-05-08 13:12:56 - app.services.vector_store - ERROR - 连接到Qdrant失败: Server error '502 Bad Gateway' for url 'http://wangigor.ddns.net:30063'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/502
2025-05-08 13:12:56 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:12:56 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-08 13:12:56 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:12:56 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-08 13:12:58 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:12:58 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:12:58 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:13:00 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:13:00 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:13:00 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:13:02 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:13:02 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:13:02 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:13:04 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:13:04 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:13:04 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:13:06 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:13:06 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:13:06 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:13:08 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:13:08 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:13:08 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:13:10 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:13:10 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:13:10 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:13:12 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:13:12 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:13:12 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:13:14 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:13:14 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:13:14 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:13:16 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:13:16 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:13:16 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:13:18 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:13:18 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:13:18 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:13:20 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:13:20 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:13:20 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:13:21 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:13:21 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:13:21 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:13:23 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:13:23 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:13:23 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:13:25 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:13:25 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:13:25 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:13:27 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:13:27 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:13:27 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:13:29 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:13:29 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:13:29 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:13:31 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:13:31 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:13:31 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:13:33 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:13:33 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:13:33 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:13:35 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:13:35 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:13:35 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:13:37 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:13:37 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:13:37 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:13:39 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:13:39 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:13:39 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:13:41 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:13:41 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:13:41 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:13:43 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:13:43 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:13:43 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:13:45 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:13:45 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:13:45 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:13:47 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:13:47 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:13:47 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:13:49 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:13:49 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:13:49 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:13:51 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:13:51 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:13:51 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:13:53 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:13:53 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:13:53 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:13:55 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:13:55 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:13:55 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:13:57 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:13:57 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:13:57 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:13:59 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:13:59 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:13:59 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:14:01 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:14:01 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:14:01 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:14:03 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:14:03 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:14:03 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:14:05 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:14:05 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:14:05 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:14:07 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:14:07 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:14:07 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:14:09 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:14:09 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:14:09 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:14:11 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:14:11 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:14:11 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:14:13 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:14:13 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:14:13 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:14:15 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:14:15 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:14:15 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:14:17 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:14:17 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:14:17 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:14:19 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:14:19 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:14:19 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:14:21 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:14:21 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:14:21 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:14:23 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:14:23 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:14:23 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:14:25 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:14:25 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:14:25 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:14:27 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:14:27 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:14:27 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:14:29 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:14:29 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:14:29 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:14:31 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:14:31 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:14:31 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:14:33 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:14:33 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:14:33 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:14:35 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:14:35 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:14:35 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:14:37 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:14:37 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:14:37 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:14:39 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:14:39 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:14:39 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:14:41 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:14:41 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:14:41 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:14:43 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:14:43 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:14:43 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:14:45 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:14:45 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:14:45 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:14:47 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:14:47 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:14:47 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:14:49 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:14:49 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:14:49 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:14:51 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:14:51 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:14:51 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:14:53 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:14:53 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:14:53 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:14:55 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:14:55 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:14:55 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:14:57 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:14:57 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:14:57 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:14:59 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:14:59 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:14:59 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:15:01 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:15:01 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:15:01 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:15:03 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:15:03 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:15:03 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:15:05 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:15:05 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:15:05 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:15:07 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:15:07 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:15:07 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:15:09 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:15:09 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:15:09 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:15:11 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:15:11 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:15:11 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:15:13 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:15:13 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:15:13 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:15:15 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:15:15 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:15:15 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:15:17 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:15:17 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:15:17 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:15:19 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:15:19 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:15:19 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:15:21 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:15:21 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:15:21 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:15:23 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:15:23 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:15:23 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:15:25 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:15:25 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:15:25 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:15:27 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:15:27 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:15:27 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:15:29 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:15:29 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:15:29 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:15:31 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:15:31 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:15:31 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:15:33 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:15:33 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:15:33 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:15:35 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:15:35 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:15:35 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:15:37 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:15:37 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:15:37 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:15:39 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:15:39 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:15:39 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:15:41 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:15:41 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:15:41 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:15:43 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:15:43 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:15:43 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:15:45 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:15:45 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:15:45 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:15:47 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:15:47 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:15:47 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:15:49 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:15:49 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:15:49 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:15:51 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:15:51 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:15:51 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:15:53 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:15:53 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:15:53 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:15:55 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:15:55 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:15:55 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:15:57 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:15:57 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:15:57 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:15:59 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:15:59 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:15:59 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:16:01 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:16:01 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:16:01 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:16:03 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:16:03 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:16:03 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:16:05 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:16:05 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:16:05 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:16:07 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:16:07 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:16:07 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:16:09 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:16:09 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:16:09 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:16:11 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:16:11 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:16:11 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:16:13 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:16:13 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:16:13 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:16:15 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:16:15 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:16:15 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:16:17 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:16:17 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:16:17 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:16:19 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:16:19 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:16:19 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:16:21 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:16:21 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:16:21 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:16:23 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:16:23 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:16:23 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:16:25 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:16:25 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:16:25 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:16:27 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:16:27 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:16:27 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:16:29 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:16:29 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:16:29 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:16:31 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:16:31 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:16:31 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:16:33 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:16:33 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:16:33 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:16:35 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:16:35 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:16:35 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:16:37 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:16:37 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:16:37 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:16:39 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:16:39 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:16:39 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:16:41 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:16:41 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:16:41 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:16:43 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:16:43 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:16:43 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:16:45 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:16:45 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:16:45 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:16:47 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:16:47 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:16:47 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:16:49 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:16:49 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:16:49 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:16:51 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:16:51 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:16:51 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:16:53 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:16:53 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:16:53 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:16:55 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:16:55 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:16:55 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:16:57 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:16:57 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:16:57 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:16:59 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:16:59 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:16:59 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:17:01 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:17:01 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:17:01 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:17:03 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:17:03 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:17:03 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:17:05 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:17:05 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:17:05 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:17:07 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:17:07 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:17:07 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:17:09 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:17:09 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:17:09 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:17:11 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:17:11 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:17:11 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:17:13 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:17:13 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:17:13 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:17:15 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:17:15 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:17:15 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:17:17 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:17:17 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:17:17 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:17:19 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:17:19 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:17:19 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:17:21 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:17:21 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:17:21 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:17:23 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:17:23 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:17:23 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:17:25 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:17:25 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:17:25 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:17:27 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:17:27 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:17:27 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:17:29 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:17:29 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:17:29 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:17:31 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:17:31 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:17:31 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:17:33 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:17:33 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:17:33 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:17:35 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:17:35 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:17:35 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:17:37 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:17:37 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:17:37 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:17:39 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:17:39 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:17:39 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:17:41 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:17:41 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:17:41 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:17:43 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:17:43 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:17:43 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:17:45 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:17:45 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:17:45 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:17:47 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:17:47 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:17:47 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:17:49 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:17:49 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:17:49 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:17:51 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:17:51 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:17:51 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:17:53 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:17:53 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:17:53 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:17:55 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:17:55 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:17:55 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:17:57 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:17:57 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:17:57 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:17:59 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:17:59 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:17:59 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:18:01 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:18:01 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:18:01 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:18:03 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:18:03 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:18:03 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:18:05 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:18:05 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:18:05 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:18:07 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:18:07 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:18:07 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:18:09 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:18:09 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:18:09 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:18:11 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:18:11 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:18:11 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:18:13 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:18:13 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:18:13 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:18:15 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:18:15 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:18:15 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:18:17 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:18:17 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:18:17 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:18:19 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:18:19 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:18:19 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:18:21 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:18:21 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:18:21 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:18:23 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:18:23 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:18:23 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:18:25 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:18:25 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:18:25 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:18:27 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:18:27 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:18:27 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:18:29 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:18:29 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:18:29 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:18:31 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:18:31 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:18:31 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:18:33 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:18:33 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:18:33 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:18:35 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:18:35 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:18:35 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:18:37 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:18:37 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:18:37 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:18:39 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:18:39 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:18:39 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:18:41 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:18:41 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:18:41 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:18:43 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:18:43 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:18:43 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:18:45 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:18:45 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:18:45 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:18:47 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:18:47 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:18:47 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:18:49 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:18:49 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:18:49 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:18:51 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:18:51 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:18:51 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:18:53 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:18:53 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:18:53 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:18:55 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:18:55 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:18:55 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:18:57 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:18:57 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:18:57 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:18:59 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:18:59 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:18:59 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:19:01 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:19:01 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:19:01 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:19:03 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:19:03 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:19:03 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:19:05 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:19:05 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:19:05 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:19:07 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:19:07 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:19:07 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:19:09 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:19:09 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:19:09 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:19:11 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:19:11 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:19:11 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:19:13 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:19:13 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:19:13 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:19:15 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:19:15 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:19:15 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:19:17 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:19:17 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:19:17 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:19:19 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:19:19 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:19:19 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:19:21 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:19:21 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:19:21 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:19:23 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:19:23 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:19:23 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:19:25 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:19:25 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:19:25 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:19:27 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:19:27 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:19:27 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:19:29 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:19:29 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:19:29 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:19:31 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:19:31 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:19:31 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:19:33 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:19:33 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:19:33 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:19:35 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:19:35 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:19:35 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:19:37 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:19:37 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:19:37 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:19:39 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:19:39 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:19:39 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:19:41 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:19:41 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:19:41 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:19:43 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:19:43 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:19:43 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:19:45 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:19:45 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:19:45 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:19:47 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:19:47 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:19:47 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:19:49 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:19:49 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:19:49 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:19:51 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:19:51 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:19:51 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:19:53 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:19:53 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:19:53 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:19:55 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:19:55 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:19:55 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:19:57 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:19:57 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:19:57 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:19:59 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:19:59 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:19:59 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:20:01 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:20:01 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:20:01 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:20:03 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:20:03 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:20:03 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:20:05 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:20:05 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:20:05 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:20:07 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:20:07 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:20:07 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:20:09 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:20:09 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:20:09 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:20:11 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:20:11 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:20:11 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:20:13 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:20:13 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:20:13 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:20:15 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:20:15 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:20:15 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:20:17 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:20:17 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:20:17 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:20:19 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:20:19 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:20:19 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:20:21 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:20:21 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:20:21 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:20:23 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:20:23 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:20:23 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:20:25 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:20:25 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:20:25 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:20:27 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:20:27 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:20:27 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:20:29 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:20:29 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:20:29 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:20:31 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:20:31 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:20:31 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:20:33 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:20:33 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:20:33 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:20:35 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:20:35 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:20:35 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:20:37 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:20:37 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:20:37 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:20:39 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:20:39 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:20:39 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:20:41 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:20:41 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:20:41 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:20:43 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:20:43 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:20:43 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:20:45 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:20:45 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:20:45 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:20:47 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:20:47 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:20:47 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:20:49 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:20:49 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:20:49 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:20:50 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:20:50 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:20:50 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:20:51 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:20:51 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:20:51 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:20:52 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:20:52 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:20:52 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:20:53 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:20:53 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:20:53 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:20:55 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:20:55 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:20:55 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:20:57 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:20:57 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:20:57 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:20:59 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:20:59 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:20:59 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:21:01 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:21:01 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:21:01 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:21:03 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:21:03 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:21:03 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:21:05 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:21:05 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:21:05 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:21:07 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:21:07 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:21:07 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:21:09 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:21:09 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:21:09 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:21:11 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:21:11 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:21:11 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:21:13 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:21:13 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:21:13 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:21:15 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:21:15 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:21:15 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:21:17 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:21:17 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:21:17 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:21:19 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:21:19 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:21:19 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:21:21 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:21:21 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:21:21 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:21:23 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:21:23 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:21:23 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:21:25 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:21:25 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:21:25 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:21:27 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:21:27 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:21:27 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:21:29 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:21:29 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:21:29 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:21:31 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:21:31 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:21:31 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:21:33 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:21:33 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:21:33 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:21:35 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:21:35 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:21:35 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:21:37 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:21:37 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:21:37 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:21:39 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:21:39 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:21:39 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:21:41 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:21:41 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:21:41 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:21:42 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:21:42 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:21:42 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:21:44 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:21:44 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:21:44 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:21:46 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:21:46 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:21:46 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:21:48 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:21:48 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:21:48 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:21:50 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:21:50 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:21:50 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:21:52 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:21:52 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:21:52 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:21:54 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:21:54 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:21:54 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:21:56 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:21:56 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:21:56 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:21:58 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:21:58 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:21:58 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:22:00 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:22:00 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:22:00 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:22:02 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:22:02 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:22:02 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:22:04 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:22:04 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:22:04 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:22:06 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:22:06 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:22:06 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:22:08 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:22:08 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:22:08 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:22:10 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:22:10 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:22:10 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:22:12 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:22:12 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:22:12 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:22:14 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:22:14 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:22:14 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:22:16 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:22:16 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:22:16 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:22:18 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:22:18 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:22:18 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:22:20 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:22:20 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:22:20 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:22:22 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:22:22 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:22:22 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:22:24 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:22:24 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:22:24 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:22:26 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:22:26 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:22:26 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:22:28 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:22:28 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:22:28 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:22:30 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:22:30 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:22:30 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:22:32 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:22:32 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:22:32 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:22:34 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:22:34 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:22:34 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:22:36 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:22:36 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:22:36 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:22:38 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:22:38 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:22:38 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:22:40 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:22:40 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:22:40 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:22:42 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:22:42 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:22:42 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:22:44 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:22:44 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:22:44 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:22:46 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:22:46 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:22:46 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:22:48 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:22:48 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:22:48 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:22:50 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:22:50 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:22:50 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:22:52 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:22:52 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:22:52 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:22:54 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:22:54 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:22:54 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:22:56 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:22:56 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:22:56 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:22:58 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:22:58 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:22:58 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:23:00 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:23:00 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:23:00 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:23:02 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:23:02 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:23:02 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:23:04 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:23:04 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:23:04 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:23:06 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:23:06 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:23:06 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:23:08 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:23:08 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:23:08 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:23:10 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:23:10 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:23:10 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:23:12 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:23:12 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:23:12 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:23:14 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:23:14 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:23:14 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:23:16 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:23:16 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:23:16 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:23:18 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:23:18 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:23:18 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:23:20 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:23:20 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:23:20 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:23:22 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:23:22 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:23:22 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:23:24 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:23:24 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:23:24 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:23:26 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:23:26 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:23:26 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:23:28 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:23:28 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:23:28 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:23:30 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:23:30 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:23:30 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:23:32 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:23:32 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:23:32 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:23:34 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:23:34 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:23:34 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:23:36 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:23:36 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:23:36 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:23:38 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:23:38 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:23:38 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:23:40 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:23:40 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:23:40 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:23:42 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:23:42 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:23:42 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:23:44 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:23:44 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:23:44 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:23:46 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:23:46 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:23:46 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:23:48 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:23:48 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:23:48 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:23:50 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:23:50 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:23:50 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:23:52 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:23:52 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:23:52 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:23:54 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:23:54 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:23:54 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:23:56 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:23:56 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:23:56 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:23:58 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:23:58 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:23:58 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:24:00 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:24:00 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:24:00 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:24:02 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:24:02 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:24:02 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:24:04 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:24:04 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:24:04 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:24:06 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:24:06 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:24:06 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:24:08 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:24:08 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:24:08 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:24:10 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:24:10 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:24:10 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:24:12 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:24:12 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:24:12 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:24:14 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:24:14 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:24:14 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:24:16 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:24:16 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:24:16 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:24:18 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:24:18 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:24:18 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:24:20 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:24:20 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:24:20 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:24:22 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:24:22 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:24:22 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:24:24 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:24:24 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:24:24 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:24:26 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:24:26 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:24:26 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:24:52 - root - INFO - 日志系统初始化完成
2025-05-08 13:24:52 - app.main - INFO - 数据库表创建完成
2025-05-08 13:24:52 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:24:52 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:24:53 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:24:54 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:24:54 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:24:54 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:24:56 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:24:56 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:24:56 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:24:58 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:24:58 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:24:58 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:25:00 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:25:00 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:25:00 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:25:02 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:25:02 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:25:02 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:25:04 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:25:04 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:25:04 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:25:25 - root - INFO - 日志系统初始化完成
2025-05-08 13:25:26 - app.main - INFO - 数据库表创建完成
2025-05-08 13:25:26 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:25:26 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:25:26 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:25:28 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:25:28 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:25:28 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:25:30 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:25:30 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:25:30 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:25:32 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:25:32 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:25:32 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:25:34 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:25:34 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:25:34 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:25:36 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:25:36 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:25:36 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:25:38 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:25:38 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:25:38 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:25:40 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:25:40 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:25:40 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:25:42 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:25:42 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:25:42 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:25:44 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:25:44 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:25:44 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:25:46 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:25:46 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:25:46 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:25:48 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:25:48 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:25:48 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:25:50 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:25:50 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:25:50 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:25:52 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:25:52 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:25:52 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:25:54 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:25:54 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:25:54 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:25:56 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:25:56 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:25:56 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:25:58 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:25:58 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:25:58 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:26:00 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:26:00 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:26:00 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:26:02 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:26:02 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:26:02 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:26:04 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:26:04 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:26:04 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:26:06 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:26:06 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:26:06 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:26:08 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:26:08 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:26:08 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:26:10 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:26:10 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:26:10 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:26:12 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:26:12 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:26:12 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:26:14 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:26:14 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:26:14 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:26:16 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:26:16 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:26:16 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:26:18 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:26:18 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:26:18 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:26:20 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:26:20 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:26:20 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:26:22 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:26:22 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:26:22 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:26:24 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:26:24 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:26:24 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:26:26 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:26:26 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:26:26 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:26:28 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:26:28 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:26:28 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:26:30 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:26:30 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:26:30 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:26:32 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:26:32 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:26:32 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:26:34 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:26:34 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:26:34 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:26:36 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:26:36 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:26:36 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:26:38 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:26:38 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:26:38 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:26:40 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:26:40 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:26:40 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:26:42 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:26:42 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:26:42 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:26:44 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:26:44 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:26:44 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:26:46 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:26:46 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:26:46 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:26:48 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:26:48 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:26:48 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:26:50 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:26:50 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:26:50 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:26:52 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:26:52 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:26:52 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:26:54 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:26:54 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:26:54 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:26:56 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:26:56 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:26:56 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:26:58 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:26:58 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:26:58 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:27:00 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:27:00 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:27:00 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:27:02 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:27:02 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:27:02 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:27:04 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:27:04 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:27:04 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:27:06 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:27:06 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:27:06 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:27:08 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:27:08 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:27:08 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:27:10 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:27:10 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:27:10 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:27:12 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:27:12 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:27:12 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:27:14 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:27:14 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:27:14 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:27:16 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:27:16 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:27:16 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:27:18 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:27:18 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:27:18 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:27:20 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:27:20 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:27:20 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:27:22 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:27:22 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:27:22 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:27:24 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:27:24 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:27:24 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:27:26 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:27:26 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:27:26 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:27:28 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:27:28 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:27:28 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:27:30 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:27:30 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:27:30 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:27:56 - root - INFO - 日志系统初始化完成
2025-05-08 13:27:56 - app.main - INFO - 数据库表创建完成
2025-05-08 13:28:21 - root - INFO - 日志系统初始化完成
2025-05-08 13:28:21 - app.main - INFO - 数据库表创建完成
2025-05-08 13:28:21 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:28:21 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:28:21 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:28:23 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:28:23 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:28:23 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:28:25 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:28:25 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:28:25 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:28:27 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:28:27 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:28:27 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:28:29 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:28:29 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:28:29 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:28:31 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:28:31 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:28:31 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:28:33 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:28:33 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:28:33 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:28:35 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:28:35 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:28:35 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:28:37 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:28:37 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:28:37 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:28:39 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:28:39 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:28:39 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:28:41 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:28:41 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:28:41 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:28:43 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:28:43 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:28:43 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:28:45 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:28:45 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:28:45 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:28:47 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:28:47 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:28:47 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:28:49 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:28:49 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:28:49 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:28:51 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:28:51 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:28:51 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:28:53 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:28:53 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:28:53 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:28:55 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:28:55 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:28:55 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:28:57 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:28:57 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:28:57 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:28:59 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:28:59 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:28:59 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:29:01 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:29:01 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:29:01 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:29:03 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:29:03 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:29:03 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:29:05 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:29:05 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:29:05 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:29:07 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:29:07 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:29:07 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:29:09 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:29:09 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:29:09 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:29:11 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:29:11 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:29:11 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:29:13 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:29:13 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:29:13 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:29:15 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:29:15 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:29:15 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:29:17 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:29:17 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:29:17 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:29:19 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:29:19 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:29:19 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:29:21 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:29:21 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:29:21 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:29:23 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:29:23 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:29:23 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:29:25 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:29:25 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:29:25 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:29:27 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:29:27 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:29:27 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:29:29 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:29:29 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:29:29 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:29:31 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:29:31 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:29:31 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:29:33 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:29:33 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:29:33 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:29:35 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:29:35 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:29:35 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:29:37 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:29:37 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:29:37 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:29:39 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:29:39 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:29:39 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:29:41 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:29:41 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:29:41 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:29:43 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:29:43 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:29:43 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:29:45 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:29:45 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:29:45 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:29:47 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:29:47 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:29:47 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:29:49 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:29:49 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:29:49 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:29:51 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:29:51 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:29:51 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:29:53 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:29:53 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:29:53 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:29:55 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:29:55 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:29:55 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:29:57 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:29:57 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:29:57 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:29:59 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:29:59 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:29:59 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:30:01 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:30:01 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:30:01 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:30:03 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:30:03 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:30:03 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:30:05 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:30:05 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:30:05 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:30:07 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:30:07 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:30:07 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:30:09 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:30:09 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:30:09 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:30:10 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:30:10 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:30:10 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:30:11 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:30:11 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:30:11 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:30:11 - app.services.vector_store - INFO - 初始化向量存储服务
2025-05-08 13:30:11 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-08 13:30:11 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-08 13:30:12 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-08 13:30:12 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-08 13:30:12 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-05-08 13:30:12 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-05-08 13:30:12 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-08 13:30:12 - app.services.vector_store - INFO - 集合 knowledge_base 已存在
2025-05-08 13:30:12 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections/knowledge_base "HTTP/1.1 200 OK"
2025-05-08 13:30:12 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:30:12 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-08 13:30:12 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:30:12 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:30:12 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:30:13 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-08 13:30:13 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:30:14 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:30:14 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:30:14 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:30:15 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:30:15 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:30:15 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:30:16 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:30:16 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:30:16 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:30:17 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:30:17 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:30:17 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:30:18 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:30:18 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:30:18 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:30:19 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:30:19 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:30:19 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:30:20 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:30:20 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:30:20 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:30:21 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:30:21 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:30:21 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:30:22 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:30:22 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:30:23 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:30:24 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:30:24 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:30:24 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:30:25 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:30:25 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:30:25 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:30:26 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:30:26 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:30:26 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:30:27 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:30:27 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:30:27 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:30:28 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:30:28 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:30:28 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:30:29 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:30:29 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:30:29 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:30:30 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:30:30 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:30:30 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:30:31 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:30:31 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:30:32 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:30:33 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:30:33 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:30:33 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:30:34 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:30:34 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:30:34 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:30:35 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:30:35 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:30:35 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:30:36 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:30:36 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:30:36 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:30:37 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:30:37 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:30:37 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:30:38 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:30:38 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:30:38 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:30:39 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:30:39 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:30:39 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:30:40 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:30:40 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:30:40 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:30:41 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:30:41 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:30:41 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:30:43 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:30:43 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:30:43 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:30:44 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:30:44 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:30:44 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:30:45 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:30:45 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:30:45 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:30:46 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:30:46 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:30:46 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:30:47 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:30:47 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:30:47 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:30:48 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:30:48 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:30:48 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:30:49 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:30:49 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:30:49 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:30:50 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:30:50 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:30:51 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:30:52 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:30:52 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:30:52 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:30:53 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:30:53 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:30:53 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:30:54 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:30:54 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:30:54 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:30:55 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:30:55 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:30:55 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:30:56 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:30:56 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:30:56 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:30:57 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:30:57 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:30:57 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:30:58 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:30:58 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:30:58 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:30:59 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:30:59 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:30:59 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:31:00 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:31:01 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:31:01 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:31:02 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:31:02 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:31:02 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:31:03 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:31:03 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:31:03 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:31:04 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:31:04 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:31:04 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:31:05 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:31:05 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:31:05 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:31:06 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:31:06 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:31:06 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:31:07 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:31:07 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:31:07 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:31:09 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:31:09 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:31:09 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:31:10 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:31:10 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:31:10 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:31:11 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:31:11 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:31:11 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:31:12 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:31:12 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:31:12 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:31:13 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:31:13 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:31:13 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:31:14 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:31:14 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:31:14 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:31:15 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:31:15 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:31:15 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:31:16 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:31:16 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:31:16 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:31:17 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:31:17 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:31:17 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:31:18 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:31:19 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:31:19 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:31:20 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:31:20 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:31:20 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:31:21 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:31:21 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:31:21 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:31:22 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:31:22 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:31:22 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:31:23 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:31:23 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:31:23 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:31:24 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:31:24 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:31:24 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:31:25 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:31:25 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:31:25 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:31:26 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:31:27 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:31:27 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:31:28 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:31:28 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:31:28 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:31:29 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:31:29 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:31:29 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:31:30 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:31:30 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:31:30 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:31:31 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:31:31 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:31:31 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:31:32 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:31:32 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:31:32 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:31:33 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:31:33 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:31:33 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:31:35 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:31:35 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:31:35 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:31:36 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:31:36 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:31:36 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:31:37 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:31:37 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:31:37 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:31:38 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:31:38 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:31:38 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:31:39 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:31:39 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:31:39 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:31:40 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:31:40 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:31:40 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:31:41 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:31:41 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:31:41 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:31:42 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:31:42 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:31:42 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:31:43 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:31:43 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:31:43 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:31:44 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:31:45 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:31:45 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:31:46 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:31:46 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:31:46 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:31:47 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:31:47 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:31:47 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:31:48 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:31:48 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:31:48 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:31:49 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:31:49 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:31:49 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:31:50 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:31:50 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:31:50 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:31:51 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:31:51 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:31:51 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:31:52 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:31:52 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:31:52 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:31:53 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:31:53 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:31:53 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:31:55 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:31:55 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:31:55 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:31:56 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:31:56 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:31:56 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:31:57 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:31:57 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:31:57 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:31:58 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:31:58 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:31:58 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:31:59 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:31:59 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:31:59 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:32:00 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:32:00 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:32:00 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:32:01 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:32:01 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:32:01 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:32:02 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:32:02 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:32:02 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:32:03 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:32:03 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:32:03 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:32:04 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:32:04 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:32:04 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:32:05 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:32:05 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:32:06 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:32:07 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:32:07 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:32:07 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:32:08 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:32:08 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:32:08 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:32:09 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:32:09 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:32:09 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:32:10 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:32:10 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:32:10 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:32:11 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:32:11 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:32:11 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:32:12 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:32:12 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:32:12 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:32:13 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:32:13 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:32:13 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:32:14 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:32:14 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:32:14 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:32:15 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:32:15 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:32:15 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:32:16 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:32:16 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:32:16 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:32:17 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:32:17 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:32:18 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:32:19 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:32:19 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:32:19 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:32:20 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:32:20 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:32:20 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:32:21 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:32:21 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:32:21 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:32:22 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:32:22 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:32:22 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:32:23 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:32:23 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:32:23 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:32:24 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:32:24 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:32:24 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:32:25 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:32:25 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:32:25 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:32:26 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:32:26 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:32:26 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:32:27 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:32:28 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:32:28 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:32:29 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:32:29 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:32:29 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:32:30 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:32:30 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:32:30 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:32:31 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:32:31 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:32:31 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:32:32 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:32:32 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:32:32 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:32:33 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:32:33 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:32:33 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:32:34 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:32:34 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:32:34 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:32:35 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:32:35 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:32:35 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:32:36 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:32:36 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:32:36 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:32:37 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:32:37 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:32:37 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:32:38 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:32:38 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:32:38 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:32:39 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:32:39 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:32:40 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:32:41 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:32:41 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:32:41 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:32:42 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:32:42 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:32:42 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:32:43 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:32:43 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:32:43 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:32:44 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:32:44 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:32:44 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:32:45 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:32:45 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:32:45 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:32:46 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:32:46 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:32:46 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:32:47 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:32:47 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:32:47 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:32:48 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:32:48 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:32:48 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:32:49 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:32:49 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:32:49 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:32:50 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:32:50 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:32:51 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:32:52 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:32:52 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:32:52 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:32:53 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:32:53 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:32:53 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:32:54 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:32:54 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:32:54 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:32:55 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:32:55 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:32:55 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:32:56 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:32:56 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:32:56 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:32:57 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:32:57 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:32:57 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:32:58 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:32:58 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:32:58 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:32:59 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:32:59 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:32:59 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:33:00 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:33:00 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:33:00 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:33:01 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:33:01 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:33:02 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:33:03 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:33:03 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:33:03 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:33:04 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:33:04 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:33:04 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:33:05 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:33:05 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:33:05 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:33:06 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:33:06 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:33:06 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:33:07 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:33:07 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:33:07 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:33:08 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:33:08 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:33:08 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:33:09 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:33:09 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:33:09 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:33:10 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:33:10 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:33:10 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:33:12 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:33:12 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:33:12 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:33:13 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:33:13 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:33:13 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:33:14 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:33:14 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:33:14 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:33:16 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:33:16 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:33:16 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:33:17 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:33:17 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-08 13:33:17 - app.routers.websockets - ERROR - WebSocket连接处理错误: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-08 13:33:26 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:33:26 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-08 13:33:26 - app.services.vector_store - INFO - 初始化向量存储服务
2025-05-08 13:33:26 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-08 13:33:26 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-08 13:33:26 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:33:26 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-08 13:33:27 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-08 13:33:27 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-08 13:33:27 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-05-08 13:33:27 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-05-08 13:33:27 - app.services.vector_store - INFO - 初始化向量存储服务
2025-05-08 13:33:27 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-08 13:33:27 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-08 13:33:27 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-08 13:33:27 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-08 13:33:27 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-08 13:33:27 - app.services.vector_store - INFO - 集合 knowledge_base 已存在
2025-05-08 13:33:27 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-05-08 13:33:27 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-05-08 13:33:27 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections/knowledge_base "HTTP/1.1 200 OK"
2025-05-08 13:33:27 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:33:27 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-08 13:33:27 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-08 13:33:27 - app.services.vector_store - INFO - 集合 knowledge_base 已存在
2025-05-08 13:33:27 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections/knowledge_base "HTTP/1.1 200 OK"
2025-05-08 13:33:27 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:33:27 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-08 13:33:28 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:33:28 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-08 13:34:29 - app.services.vector_store - INFO - 初始化向量存储服务
2025-05-08 13:34:29 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-08 13:34:29 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-08 13:34:30 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-08 13:34:30 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-08 13:34:30 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-05-08 13:34:30 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-05-08 13:34:30 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-08 13:34:30 - app.services.vector_store - INFO - 集合 knowledge_base 已存在
2025-05-08 13:34:30 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections/knowledge_base "HTTP/1.1 200 OK"
2025-05-08 13:34:30 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:34:30 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-08 13:34:43 - app.services.vector_store - INFO - 初始化向量存储服务
2025-05-08 13:34:43 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-08 13:34:43 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-08 13:34:43 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-08 13:34:48 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 502 Bad Gateway"
2025-05-08 13:34:48 - app.services.vector_store - ERROR - 连接到Qdrant失败: Server error '502 Bad Gateway' for url 'http://wangigor.ddns.net:30063/collections'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/502
2025-05-08 13:34:48 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:34:48 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-08 13:34:48 - app.routers.documents - INFO - 接收到文件上传请求: 附件2：中移在线4A管理平台与应用系统接入手册V1.7(4).docx, 类型: application/vnd.openxmlformats-officedocument.wordprocessingml.document
2025-05-08 13:34:48 - app.routers.documents - INFO - 解析元数据: {"name":"附件2：中移在线4A管理平台与应用系统接入手册V1.7(4)"}...
2025-05-08 13:34:48 - app.routers.documents - INFO - 开始处理上传的文件
2025-05-08 13:34:48 - app.utils.file_utils - INFO - 文件已保存到临时路径: /var/folders/gs/kbsr2cy55nz47p4hyrxbtg0r0000gn/T/tmpe2hmmfpd.docx
2025-05-08 13:34:48 - app.routers.documents - INFO - 文件已保存到临时路径: /var/folders/gs/kbsr2cy55nz47p4hyrxbtg0r0000gn/T/tmpe2hmmfpd.docx
2025-05-08 13:34:48 - app.services.document_service - INFO - 开始处理文件: 附件2：中移在线4A管理平台与应用系统接入手册V1.7(4).docx, 内容类型: application/vnd.openxmlformats-officedocument.wordprocessingml.document
2025-05-08 13:34:48 - app.services.document_service - INFO - 文件大小: 6517274 字节
2025-05-08 13:34:49 - app.services.document_service - INFO - 文件类型识别为: docx
2025-05-08 13:34:49 - app.services.document_service - INFO - 检测到二进制文件类型: docx，将进行Base64编码
2025-05-08 13:34:49 - app.services.document_service - INFO - 文件包含NUL字符，确认为二进制文件
2025-05-08 13:34:49 - app.services.document_service - INFO - Base64编码完成，编码后大小: 8689710 字节
2025-05-08 13:34:49 - app.services.document_service - INFO - 准备创建文档记录
2025-05-08 13:34:49 - app.services.document_service - INFO - 创建文档: 附件2：中移在线4A管理平台与应用系统接入手册V1.7(4).docx, 类型: docx, 用户ID: 1
2025-05-08 13:34:49 - app.services.document_service - INFO - 文档创建成功: ID=29
2025-05-08 13:34:49 - app.services.task_service - INFO - 创建任务: 处理文档: 附件2：中移在线4A管理平台与应用系统接入手册V1.7(4).docx, 类型: DOCUMENT_PROCESSING, 创建者: 1
2025-05-08 13:34:49 - app.services.task_service - INFO - 任务创建成功: f95e1ff2-484a-47a7-b8a5-5bf6fc837673
2025-05-08 13:34:49 - app.services.document_service - INFO - 更新文档状态: ID=29, 状态=processing
2025-05-08 13:34:49 - app.services.document_service - INFO - 文档状态已更新: ID=29, 状态=processing
2025-05-08 13:34:49 - app.routers.documents - INFO - 文件处理成功，文档ID: 29, 任务ID: f95e1ff2-484a-47a7-b8a5-5bf6fc837673
2025-05-08 13:34:49 - app.services.vector_store - INFO - 初始化向量存储服务
2025-05-08 13:34:49 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-08 13:34:49 - app.services.vector_store - INFO - 初始化向量存储服务
2025-05-08 13:34:49 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-08 13:34:49 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-08 13:34:49 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-08 13:34:55 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 502 Bad Gateway"
2025-05-08 13:34:55 - app.services.vector_store - ERROR - 连接到Qdrant失败: Server error '502 Bad Gateway' for url 'http://wangigor.ddns.net:30063'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/502
2025-05-08 13:34:55 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 502 Bad Gateway"
2025-05-08 13:34:55 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:34:55 - app.services.vector_store - ERROR - 连接到Qdrant失败: Server error '502 Bad Gateway' for url 'http://wangigor.ddns.net:30063'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/502
2025-05-08 13:34:55 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-08 13:34:55 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 13:34:55 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-08 19:14:23 - root - INFO - 日志系统初始化完成
2025-05-08 19:14:23 - app.main - INFO - 数据库表创建完成
2025-05-08 19:15:01 - root - INFO - 日志系统初始化完成
2025-05-08 19:15:01 - app.main - INFO - 数据库表创建完成
2025-05-08 19:15:11 - root - INFO - 日志系统初始化完成
2025-05-08 19:15:12 - app.main - INFO - 数据库表创建完成
2025-05-08 19:15:22 - root - INFO - 日志系统初始化完成
2025-05-08 19:15:22 - app.main - INFO - 数据库表创建完成
2025-05-08 19:15:27 - root - INFO - 日志系统初始化完成
2025-05-08 19:15:27 - app.main - INFO - 数据库表创建完成
2025-05-08 19:15:56 - root - INFO - 日志系统初始化完成
2025-05-08 19:15:56 - app.main - INFO - 数据库表创建完成
2025-05-08 19:16:01 - root - INFO - 日志系统初始化完成
2025-05-08 19:16:01 - app.main - INFO - 数据库表创建完成
2025-05-08 19:16:36 - root - INFO - 日志系统初始化完成
2025-05-08 19:16:36 - app.main - INFO - 数据库表创建完成
2025-05-08 19:17:19 - root - INFO - 日志系统初始化完成
2025-05-08 19:17:20 - app.main - INFO - 数据库表创建完成
2025-05-08 19:17:29 - root - INFO - 日志系统初始化完成
2025-05-08 19:17:29 - app.main - INFO - 数据库表创建完成
2025-05-08 20:53:37 - root - INFO - 日志系统初始化完成
2025-05-08 20:53:37 - app.main - INFO - 数据库表创建完成
2025-05-08 20:59:36 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 20:59:37 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-08 20:59:37 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 20:59:37 - app.services.vector_store - INFO - 初始化向量存储服务
2025-05-08 20:59:37 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-08 20:59:37 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-08 20:59:37 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-08 20:59:37 - app.services.vector_store - INFO - 初始化向量存储服务
2025-05-08 20:59:37 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-08 20:59:37 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-08 20:59:37 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-08 20:59:37 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-08 20:59:37 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-08 20:59:37 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-05-08 20:59:37 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-05-08 20:59:37 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-08 20:59:37 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-05-08 20:59:37 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-05-08 20:59:38 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-08 20:59:38 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-08 20:59:38 - app.services.vector_store - INFO - 集合 knowledge_base 已存在
2025-05-08 20:59:38 - app.services.vector_store - INFO - 集合 knowledge_base 已存在
2025-05-08 20:59:38 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections/knowledge_base "HTTP/1.1 200 OK"
2025-05-08 20:59:38 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections/knowledge_base "HTTP/1.1 200 OK"
2025-05-08 20:59:38 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 20:59:38 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-08 20:59:38 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 20:59:41 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-08 20:59:41 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-08 20:59:41 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-09 09:27:49 - root - INFO - 日志系统初始化完成
2025-05-09 09:27:49 - app.main - INFO - 数据库表创建完成
2025-05-09 09:28:24 - root - INFO - 日志系统初始化完成
2025-05-09 09:28:24 - app.main - INFO - 数据库表创建完成
2025-05-09 09:28:59 - root - INFO - 日志系统初始化完成
2025-05-09 09:28:59 - app.main - INFO - 数据库表创建完成
2025-05-09 09:29:25 - root - INFO - 日志系统初始化完成
2025-05-09 09:29:26 - app.main - INFO - 数据库表创建完成
2025-05-09 09:41:17 - root - INFO - 日志系统初始化完成
2025-05-09 09:41:17 - app.main - INFO - 数据库表创建完成
2025-05-09 09:41:49 - root - INFO - 日志系统初始化完成
2025-05-09 09:41:49 - app.main - INFO - 数据库表创建完成
2025-05-09 09:42:05 - root - INFO - 日志系统初始化完成
2025-05-09 09:42:06 - app.main - INFO - 数据库表创建完成
2025-05-09 09:42:48 - root - INFO - 日志系统初始化完成
2025-05-09 09:42:54 - app.main - ERROR - 数据库表创建失败: (psycopg2.OperationalError) connection to server at "wangigor.ddns.net" (127.0.0.1), port 30001 failed: Connection refused
	Is the server running on that host and accepting TCP/IP connections?

(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-05-09 09:42:59 - root - INFO - 日志系统初始化完成
2025-05-09 09:42:59 - app.main - ERROR - 数据库表创建失败: (psycopg2.OperationalError) connection to server at "wangigor.ddns.net" (127.0.0.1), port 30001 failed: Connection refused
	Is the server running on that host and accepting TCP/IP connections?

(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-05-09 09:44:01 - root - INFO - 日志系统初始化完成
2025-05-09 09:44:01 - app.main - ERROR - 数据库表创建失败: (psycopg2.OperationalError) connection to server at "wangigor.ddns.net" (127.0.0.1), port 30001 failed: Connection refused
	Is the server running on that host and accepting TCP/IP connections?

(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-05-09 09:44:06 - root - INFO - 日志系统初始化完成
2025-05-09 09:44:06 - app.main - ERROR - 数据库表创建失败: (psycopg2.OperationalError) connection to server at "wangigor.ddns.net" (127.0.0.1), port 30001 failed: Connection refused
	Is the server running on that host and accepting TCP/IP connections?

(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-05-09 09:44:15 - root - INFO - 日志系统初始化完成
2025-05-09 09:44:15 - app.main - ERROR - 数据库表创建失败: (psycopg2.OperationalError) connection to server at "wangigor.ddns.net" (127.0.0.1), port 30001 failed: Connection refused
	Is the server running on that host and accepting TCP/IP connections?

(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-05-09 09:44:20 - root - INFO - 日志系统初始化完成
2025-05-09 09:44:20 - app.main - ERROR - 数据库表创建失败: (psycopg2.OperationalError) connection to server at "wangigor.ddns.net" (127.0.0.1), port 30001 failed: Connection refused
	Is the server running on that host and accepting TCP/IP connections?

(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-05-09 09:44:25 - root - INFO - 日志系统初始化完成
2025-05-09 09:44:25 - app.main - ERROR - 数据库表创建失败: (psycopg2.OperationalError) connection to server at "wangigor.ddns.net" (127.0.0.1), port 30001 failed: Connection refused
	Is the server running on that host and accepting TCP/IP connections?

(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-05-09 09:44:30 - root - INFO - 日志系统初始化完成
2025-05-09 09:44:30 - app.main - ERROR - 数据库表创建失败: (psycopg2.OperationalError) connection to server at "wangigor.ddns.net" (127.0.0.1), port 30001 failed: Connection refused
	Is the server running on that host and accepting TCP/IP connections?

(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-05-09 09:45:06 - root - INFO - 日志系统初始化完成
2025-05-09 09:45:06 - app.main - ERROR - 数据库表创建失败: (psycopg2.OperationalError) connection to server at "wangigor.ddns.net" (127.0.0.1), port 30001 failed: Connection refused
	Is the server running on that host and accepting TCP/IP connections?

(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-05-09 09:45:24 - root - INFO - 日志系统初始化完成
2025-05-09 09:45:24 - app.main - ERROR - 数据库表创建失败: (psycopg2.OperationalError) connection to server at "wangigor.ddns.net" (127.0.0.1), port 30001 failed: Connection refused
	Is the server running on that host and accepting TCP/IP connections?

(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-05-09 09:45:28 - root - INFO - 日志系统初始化完成
2025-05-09 09:45:28 - app.main - ERROR - 数据库表创建失败: (psycopg2.OperationalError) connection to server at "wangigor.ddns.net" (127.0.0.1), port 30001 failed: Connection refused
	Is the server running on that host and accepting TCP/IP connections?

(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-05-09 09:45:45 - root - INFO - 日志系统初始化完成
2025-05-09 09:45:51 - app.main - INFO - 数据库表创建完成
2025-05-09 09:46:08 - root - INFO - 日志系统初始化完成
2025-05-09 09:46:08 - app.main - INFO - 数据库表创建完成
2025-05-09 09:46:13 - root - INFO - 日志系统初始化完成
2025-05-09 09:46:14 - app.main - INFO - 数据库表创建完成
2025-05-09 10:05:05 - root - INFO - 日志系统初始化完成
2025-05-09 10:05:05 - app.main - INFO - 数据库表创建完成
2025-05-09 10:05:15 - root - INFO - 日志系统初始化完成
2025-05-09 10:05:15 - app.main - INFO - 数据库表创建完成
2025-05-09 10:05:38 - root - INFO - 日志系统初始化完成
2025-05-09 10:05:38 - app.main - INFO - 数据库表创建完成
2025-05-09 10:06:02 - root - INFO - 日志系统初始化完成
2025-05-09 10:06:02 - app.main - INFO - 数据库表创建完成
2025-05-09 10:06:51 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-09 10:06:51 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-09 10:06:51 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-09 10:06:51 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-09 10:06:51 - app.services.vector_store - INFO - 初始化向量存储服务
2025-05-09 10:06:51 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-09 10:06:51 - app.services.vector_store - INFO - 初始化向量存储服务
2025-05-09 10:06:51 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-09 10:06:51 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-09 10:06:51 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-09 10:06:51 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-09 10:06:51 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-09 10:06:51 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-09 10:06:51 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-05-09 10:06:51 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-05-09 10:06:51 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-09 10:06:51 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-05-09 10:06:51 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-05-09 10:06:51 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-09 10:06:51 - app.services.vector_store - INFO - 集合 knowledge_base 已存在
2025-05-09 10:06:51 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections/knowledge_base "HTTP/1.1 200 OK"
2025-05-09 10:06:51 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-09 10:06:51 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-09 10:06:51 - app.services.vector_store - INFO - 集合 knowledge_base 已存在
2025-05-09 10:06:51 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-09 10:06:51 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections/knowledge_base "HTTP/1.1 200 OK"
2025-05-09 10:06:51 - app.routers.documents - ERROR - 获取文档列表失败: DocumentService.get_documents() got an unexpected keyword argument 'filters'
Traceback (most recent call last):
  File "/Users/wangke/notebook-ai/notebook-backend/app/routers/documents.py", line 235, in list_documents
    documents, total = document_service.get_documents(
TypeError: DocumentService.get_documents() got an unexpected keyword argument 'filters'
2025-05-09 10:06:51 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-09 10:06:51 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-09 10:06:51 - app.routers.documents - ERROR - 获取文档列表失败: DocumentService.get_documents() got an unexpected keyword argument 'filters'
Traceback (most recent call last):
  File "/Users/wangke/notebook-ai/notebook-backend/app/routers/documents.py", line 235, in list_documents
    documents, total = document_service.get_documents(
TypeError: DocumentService.get_documents() got an unexpected keyword argument 'filters'
2025-05-09 10:06:52 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-09 10:06:52 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-09 10:08:16 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-09 10:08:16 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-09 10:08:16 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-09 10:08:16 - app.services.vector_store - INFO - 初始化向量存储服务
2025-05-09 10:08:16 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-09 10:08:16 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-09 10:08:16 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-09 10:08:16 - app.services.vector_store - INFO - 初始化向量存储服务
2025-05-09 10:08:16 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-09 10:08:16 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-09 10:08:16 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-09 10:08:16 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-09 10:08:16 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-09 10:08:16 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-05-09 10:08:16 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-05-09 10:08:16 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-09 10:08:16 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-05-09 10:08:16 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-05-09 10:08:16 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-09 10:08:16 - app.services.vector_store - INFO - 集合 knowledge_base 已存在
2025-05-09 10:08:16 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-09 10:08:16 - app.services.vector_store - INFO - 集合 knowledge_base 已存在
2025-05-09 10:08:16 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections/knowledge_base "HTTP/1.1 200 OK"
2025-05-09 10:08:17 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-09 10:08:17 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections/knowledge_base "HTTP/1.1 200 OK"
2025-05-09 10:08:17 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-09 10:08:17 - app.routers.documents - ERROR - 获取文档列表失败: DocumentService.get_documents() got an unexpected keyword argument 'filters'
Traceback (most recent call last):
  File "/Users/wangke/notebook-ai/notebook-backend/app/routers/documents.py", line 235, in list_documents
    documents, total = document_service.get_documents(
TypeError: DocumentService.get_documents() got an unexpected keyword argument 'filters'
2025-05-09 10:08:17 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-09 10:08:17 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-09 10:08:17 - app.routers.documents - ERROR - 获取文档列表失败: DocumentService.get_documents() got an unexpected keyword argument 'filters'
Traceback (most recent call last):
  File "/Users/wangke/notebook-ai/notebook-backend/app/routers/documents.py", line 235, in list_documents
    documents, total = document_service.get_documents(
TypeError: DocumentService.get_documents() got an unexpected keyword argument 'filters'
2025-05-09 10:08:17 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-09 10:08:17 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-09 10:09:40 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-09 10:09:40 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-09 10:09:40 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-09 10:09:40 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-09 10:09:40 - app.services.vector_store - INFO - 初始化向量存储服务
2025-05-09 10:09:40 - app.services.vector_store - INFO - 初始化向量存储服务
2025-05-09 10:09:40 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-09 10:09:40 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-09 10:09:40 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-09 10:09:40 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-09 10:09:40 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-09 10:09:40 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-09 10:09:40 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-09 10:09:40 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-09 10:09:40 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-05-09 10:09:40 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-05-09 10:09:40 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-05-09 10:09:40 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-05-09 10:09:40 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-09 10:09:40 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-09 10:09:40 - app.services.vector_store - INFO - 集合 knowledge_base 已存在
2025-05-09 10:09:40 - app.services.vector_store - INFO - 集合 knowledge_base 已存在
2025-05-09 10:09:40 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections/knowledge_base "HTTP/1.1 200 OK"
2025-05-09 10:09:40 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-09 10:09:40 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections/knowledge_base "HTTP/1.1 200 OK"
2025-05-09 10:09:40 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-09 10:09:40 - app.routers.documents - ERROR - 获取文档列表失败: DocumentService.get_documents() got an unexpected keyword argument 'filters'
Traceback (most recent call last):
  File "/Users/wangke/notebook-ai/notebook-backend/app/routers/documents.py", line 235, in list_documents
    documents, total = document_service.get_documents(
TypeError: DocumentService.get_documents() got an unexpected keyword argument 'filters'
2025-05-09 10:09:40 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-09 10:09:40 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-09 10:09:40 - app.routers.documents - ERROR - 获取文档列表失败: DocumentService.get_documents() got an unexpected keyword argument 'filters'
Traceback (most recent call last):
  File "/Users/wangke/notebook-ai/notebook-backend/app/routers/documents.py", line 235, in list_documents
    documents, total = document_service.get_documents(
TypeError: DocumentService.get_documents() got an unexpected keyword argument 'filters'
2025-05-09 10:09:41 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-09 10:09:41 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-09 10:09:49 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-09 10:09:49 - app.services.vector_store - INFO - 初始化向量存储服务
2025-05-09 10:09:49 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-09 10:09:49 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-09 10:09:49 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-09 10:09:49 - app.services.vector_store - INFO - 初始化向量存储服务
2025-05-09 10:09:49 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-09 10:09:49 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-09 10:09:49 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-09 10:09:49 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-09 10:09:49 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-09 10:09:49 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-05-09 10:09:49 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-05-09 10:09:49 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-09 10:09:49 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-05-09 10:09:49 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-05-09 10:09:49 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-09 10:09:49 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-09 10:09:49 - app.services.vector_store - INFO - 集合 knowledge_base 已存在
2025-05-09 10:09:49 - app.services.vector_store - INFO - 集合 knowledge_base 已存在
2025-05-09 10:09:49 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections/knowledge_base "HTTP/1.1 200 OK"
2025-05-09 10:09:49 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections/knowledge_base "HTTP/1.1 200 OK"
2025-05-09 10:09:49 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-09 10:09:49 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-09 10:09:49 - app.routers.documents - ERROR - 获取文档列表失败: DocumentService.get_documents() got an unexpected keyword argument 'filters'
Traceback (most recent call last):
  File "/Users/wangke/notebook-ai/notebook-backend/app/routers/documents.py", line 235, in list_documents
    documents, total = document_service.get_documents(
TypeError: DocumentService.get_documents() got an unexpected keyword argument 'filters'
2025-05-09 10:09:49 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-09 10:09:49 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-09 10:09:49 - app.routers.documents - ERROR - 获取文档列表失败: DocumentService.get_documents() got an unexpected keyword argument 'filters'
Traceback (most recent call last):
  File "/Users/wangke/notebook-ai/notebook-backend/app/routers/documents.py", line 235, in list_documents
    documents, total = document_service.get_documents(
TypeError: DocumentService.get_documents() got an unexpected keyword argument 'filters'
2025-05-09 10:09:50 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-09 10:09:50 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-09 10:10:32 - root - INFO - 日志系统初始化完成
2025-05-09 10:10:32 - app.main - INFO - 数据库表创建完成
2025-05-09 10:10:47 - root - INFO - 日志系统初始化完成
2025-05-09 10:10:53 - app.main - INFO - 数据库表创建完成
2025-05-09 10:11:13 - app.services.vector_store - INFO - 初始化向量存储服务
2025-05-09 10:11:13 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-09 10:11:13 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-09 10:11:13 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-09 10:11:13 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-09 10:11:13 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-05-09 10:11:13 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-05-09 10:11:13 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-09 10:11:13 - app.services.vector_store - INFO - 集合 knowledge_base 已存在
2025-05-09 10:11:13 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections/knowledge_base "HTTP/1.1 200 OK"
2025-05-09 10:11:13 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-09 10:11:13 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-09 10:11:23 - app.services.vector_store - INFO - 初始化向量存储服务
2025-05-09 10:11:23 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-09 10:11:23 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-09 10:11:23 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-09 10:11:23 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-09 10:11:23 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-05-09 10:11:23 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-05-09 10:11:23 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-09 10:11:23 - app.services.vector_store - INFO - 集合 knowledge_base 已存在
2025-05-09 10:11:23 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections/knowledge_base "HTTP/1.1 200 OK"
2025-05-09 10:11:23 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-09 10:11:23 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-09 10:11:25 - app.services.vector_store - INFO - 初始化向量存储服务
2025-05-09 10:11:25 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-09 10:11:25 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-09 10:11:25 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-09 10:11:25 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-09 10:11:25 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-05-09 10:11:25 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-05-09 10:11:25 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-09 10:11:25 - app.services.vector_store - INFO - 集合 knowledge_base 已存在
2025-05-09 10:11:25 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections/knowledge_base "HTTP/1.1 200 OK"
2025-05-09 10:11:25 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-09 10:11:25 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-09 10:29:41 - root - INFO - 日志系统初始化完成
2025-05-09 10:29:42 - app.main - INFO - 数据库表创建完成
2025-05-09 10:29:50 - root - INFO - 日志系统初始化完成
2025-05-09 10:29:50 - app.main - INFO - 数据库表创建完成
2025-05-09 10:30:04 - root - INFO - 日志系统初始化完成
2025-05-09 10:30:04 - app.main - INFO - 数据库表创建完成
2025-05-09 10:30:14 - root - INFO - 日志系统初始化完成
2025-05-09 10:30:15 - app.main - INFO - 数据库表创建完成
2025-05-09 10:31:17 - root - INFO - 日志系统初始化完成
2025-05-09 10:31:18 - app.main - INFO - 数据库表创建完成
2025-05-09 11:13:25 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-09 11:13:25 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-09 11:13:25 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-09 11:13:25 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-09 11:13:25 - app.services.vector_store - INFO - 初始化向量存储服务
2025-05-09 11:13:25 - app.services.vector_store - INFO - 初始化向量存储服务
2025-05-09 11:13:25 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-09 11:13:25 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-09 11:13:25 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-09 11:13:25 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-09 11:13:25 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-09 11:13:25 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-09 11:13:25 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-09 11:13:25 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-09 11:13:25 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-05-09 11:13:25 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-05-09 11:13:25 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-05-09 11:13:25 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-05-09 11:13:25 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-09 11:13:25 - app.services.vector_store - INFO - 集合 knowledge_base 已存在
2025-05-09 11:13:25 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-09 11:13:25 - app.services.vector_store - INFO - 集合 knowledge_base 已存在
2025-05-09 11:13:25 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections/knowledge_base "HTTP/1.1 200 OK"
2025-05-09 11:13:25 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections/knowledge_base "HTTP/1.1 200 OK"
2025-05-09 11:13:25 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-09 11:13:25 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-09 11:13:25 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-09 11:13:25 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-09 11:13:25 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-09 11:13:26 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-09 11:13:38 - app.services.vector_store - INFO - 初始化向量存储服务
2025-05-09 11:13:38 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-09 11:13:38 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-09 11:13:38 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-09 11:13:38 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-09 11:13:38 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-05-09 11:13:38 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-05-09 11:13:38 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-09 11:13:38 - app.services.vector_store - INFO - 集合 knowledge_base 已存在
2025-05-09 11:13:38 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections/knowledge_base "HTTP/1.1 200 OK"
2025-05-09 11:13:38 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-09 11:13:38 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-09 11:13:40 - app.services.vector_store - INFO - 初始化向量存储服务
2025-05-09 11:13:40 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-09 11:13:40 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-09 11:13:40 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-09 11:13:40 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-09 11:13:40 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-05-09 11:13:40 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-05-09 11:13:40 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-09 11:13:40 - app.services.vector_store - INFO - 集合 knowledge_base 已存在
2025-05-09 11:13:40 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections/knowledge_base "HTTP/1.1 200 OK"
2025-05-09 11:13:40 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-09 11:13:41 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-09 11:13:41 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-09 11:13:41 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-09 11:13:41 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-09 11:13:41 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-09 11:13:41 - app.ws.connection_manager - ERROR - 建立WebSocket连接失败: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-09 11:13:59 - app.services.vector_store - INFO - 初始化向量存储服务
2025-05-09 11:13:59 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-09 11:13:59 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-09 11:13:59 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-09 11:13:59 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-09 11:13:59 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-05-09 11:13:59 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-05-09 11:13:59 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-09 11:13:59 - app.services.vector_store - INFO - 集合 knowledge_base 已存在
2025-05-09 11:13:59 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections/knowledge_base "HTTP/1.1 200 OK"
2025-05-09 11:13:59 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-09 11:14:00 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-09 11:14:00 - app.routers.documents - INFO - 接收到文件上传请求: 线上诊断Arthas 15ff8eef777580839c4dcf2d552da527.md, 类型: text/markdown
2025-05-09 11:14:00 - app.routers.documents - INFO - 解析元数据: {"name":"线上诊断Arthas 15ff8eef777580839c4dcf2d552da527"}...
2025-05-09 11:14:00 - app.routers.documents - INFO - 开始处理上传的文件
2025-05-09 11:14:00 - app.utils.file_utils - INFO - 文件已保存到临时路径: /var/folders/gs/kbsr2cy55nz47p4hyrxbtg0r0000gn/T/tmpb_7sbf5i.md
2025-05-09 11:14:00 - app.routers.documents - INFO - 文件已保存到临时路径: /var/folders/gs/kbsr2cy55nz47p4hyrxbtg0r0000gn/T/tmpb_7sbf5i.md
2025-05-09 11:14:00 - app.services.document_service - INFO - 开始处理文件: 线上诊断Arthas 15ff8eef777580839c4dcf2d552da527.md, 内容类型: text/markdown
2025-05-09 11:14:00 - app.services.document_service - INFO - 文件大小: 13075 字节
2025-05-09 11:14:00 - app.services.document_service - INFO - 文件类型识别为: md
2025-05-09 11:14:00 - app.services.document_service - INFO - 文本文件类型: md，使用普通UTF-8解码
2025-05-09 11:14:00 - app.services.document_service - INFO - 准备创建文档记录
2025-05-09 11:14:00 - app.services.document_service - INFO - 创建文档: 线上诊断Arthas 15ff8eef777580839c4dcf2d552da527.md, 类型: md, 用户ID: 1
2025-05-09 11:14:00 - app.services.document_service - INFO - 文档创建成功: ID=30
2025-05-09 11:14:00 - app.services.task_service - INFO - 创建任务: 处理文档: 线上诊断Arthas 15ff8eef777580839c4dcf2d552da527.md, 类型: DOCUMENT_PROCESSING, 创建者: 1
2025-05-09 11:14:00 - app.services.task_service - INFO - 任务创建成功: 20c3c22f-22d1-4a39-ac5c-e91fd53083a8
2025-05-09 11:14:00 - app.services.document_service - INFO - 更新文档状态: ID=30, 状态=processing
2025-05-09 11:14:00 - app.services.document_service - INFO - 文档状态已更新: ID=30, 状态=processing
2025-05-09 11:14:00 - app.routers.documents - INFO - 文件处理成功，文档ID: 30, 任务ID: 20c3c22f-22d1-4a39-ac5c-e91fd53083a8
2025-05-09 11:14:00 - app.services.vector_store - INFO - 初始化向量存储服务
2025-05-09 11:14:00 - app.services.vector_store - INFO - 初始化向量存储服务
2025-05-09 11:14:00 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-09 11:14:00 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-09 11:14:00 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-09 11:14:00 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-09 11:14:00 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-09 11:14:00 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-09 11:14:00 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-09 11:14:00 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-09 11:14:00 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-05-09 11:14:00 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-05-09 11:14:00 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-05-09 11:14:00 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-05-09 11:14:00 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-09 11:14:00 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-09 11:14:00 - app.services.vector_store - INFO - 集合 knowledge_base 已存在
2025-05-09 11:14:00 - app.services.vector_store - INFO - 集合 knowledge_base 已存在
2025-05-09 11:14:00 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections/knowledge_base "HTTP/1.1 200 OK"
2025-05-09 11:14:00 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections/knowledge_base "HTTP/1.1 200 OK"
2025-05-09 11:14:00 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-09 11:14:00 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-09 11:14:00 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-09 11:14:00 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-09 11:14:03 - app.services.vector_store - INFO - 初始化向量存储服务
2025-05-09 11:14:03 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-09 11:14:03 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-09 11:14:03 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-09 11:14:03 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-09 11:14:03 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-05-09 11:14:03 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-05-09 11:14:03 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-09 11:14:03 - app.services.vector_store - INFO - 集合 knowledge_base 已存在
2025-05-09 11:14:03 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections/knowledge_base "HTTP/1.1 200 OK"
2025-05-09 11:14:03 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-09 11:14:03 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-09 11:14:04 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-09 11:14:04 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-09 11:14:04 - app.ws.connection_manager - ERROR - 建立WebSocket连接失败: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-09 11:14:04 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-09 11:14:04 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-09 11:14:46 - app.services.vector_store - INFO - 初始化向量存储服务
2025-05-09 11:14:46 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-09 11:14:46 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-09 11:14:46 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-09 11:14:46 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-09 11:14:46 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-05-09 11:14:46 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-05-09 11:14:46 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-09 11:14:46 - app.services.vector_store - INFO - 集合 knowledge_base 已存在
2025-05-09 11:14:46 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections/knowledge_base "HTTP/1.1 200 OK"
2025-05-09 11:14:46 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-09 11:14:46 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-09 11:14:46 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-09 11:14:46 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-09 11:14:46 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-09 11:14:46 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-09 11:14:46 - app.ws.connection_manager - ERROR - 建立WebSocket连接失败: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-09 11:15:12 - app.services.vector_store - INFO - 初始化向量存储服务
2025-05-09 11:15:12 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-09 11:15:12 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-09 11:15:12 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-09 11:15:12 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-09 11:15:12 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-05-09 11:15:12 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-05-09 11:15:12 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-09 11:15:12 - app.services.vector_store - INFO - 集合 knowledge_base 已存在
2025-05-09 11:15:12 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections/knowledge_base "HTTP/1.1 200 OK"
2025-05-09 11:15:12 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-09 11:15:12 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-09 11:15:12 - app.routers.documents - INFO - 接收到文件上传请求: 5088c668-cb41-4fb4-855b-46a3aa0aa44e_快速改善代码质量的编程规范.pdf, 类型: application/pdf
2025-05-09 11:15:12 - app.routers.documents - INFO - 解析元数据: {"name":"5088c668-cb41-4fb4-855b-46a3aa0aa44e_快速改善代码质量的编程规范"}...
2025-05-09 11:15:12 - app.routers.documents - INFO - 开始处理上传的文件
2025-05-09 11:15:12 - app.utils.file_utils - INFO - 文件已保存到临时路径: /var/folders/gs/kbsr2cy55nz47p4hyrxbtg0r0000gn/T/tmpk5yinzxc.pdf
2025-05-09 11:15:12 - app.routers.documents - INFO - 文件已保存到临时路径: /var/folders/gs/kbsr2cy55nz47p4hyrxbtg0r0000gn/T/tmpk5yinzxc.pdf
2025-05-09 11:15:12 - app.services.document_service - INFO - 开始处理文件: 5088c668-cb41-4fb4-855b-46a3aa0aa44e_快速改善代码质量的编程规范.pdf, 内容类型: application/pdf
2025-05-09 11:15:12 - app.services.document_service - INFO - 文件大小: 2602666 字节
2025-05-09 11:15:12 - app.services.document_service - INFO - 文件类型识别为: pdf
2025-05-09 11:15:12 - app.services.document_service - INFO - 检测到二进制文件类型: pdf，将进行Base64编码
2025-05-09 11:15:12 - app.services.document_service - INFO - 文件包含NUL字符，确认为二进制文件
2025-05-09 11:15:12 - app.services.document_service - INFO - Base64编码完成，编码后大小: 3470234 字节
2025-05-09 11:15:12 - app.services.document_service - INFO - 准备创建文档记录
2025-05-09 11:15:12 - app.services.document_service - INFO - 创建文档: 5088c668-cb41-4fb4-855b-46a3aa0aa44e_快速改善代码质量的编程规范.pdf, 类型: pdf, 用户ID: 1
2025-05-09 11:15:13 - app.services.document_service - INFO - 文档创建成功: ID=31
2025-05-09 11:15:13 - app.services.task_service - INFO - 创建任务: 处理文档: 5088c668-cb41-4fb4-855b-46a3aa0aa44e_快速改善代码质量的编程规范.pdf, 类型: DOCUMENT_PROCESSING, 创建者: 1
2025-05-09 11:15:13 - app.services.task_service - INFO - 任务创建成功: f5d95b46-9101-4d71-9e34-38ae202299ef
2025-05-09 11:15:13 - app.services.document_service - INFO - 更新文档状态: ID=31, 状态=processing
2025-05-09 11:15:13 - app.services.document_service - INFO - 文档状态已更新: ID=31, 状态=processing
2025-05-09 11:15:13 - app.routers.documents - INFO - 文件处理成功，文档ID: 31, 任务ID: f5d95b46-9101-4d71-9e34-38ae202299ef
2025-05-09 11:15:13 - app.services.vector_store - INFO - 初始化向量存储服务
2025-05-09 11:15:13 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-09 11:15:13 - app.services.vector_store - INFO - 初始化向量存储服务
2025-05-09 11:15:13 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-09 11:15:13 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-09 11:15:13 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-09 11:15:13 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-09 11:15:13 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-09 11:15:13 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-09 11:15:13 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-09 11:15:13 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-05-09 11:15:13 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-05-09 11:15:13 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-05-09 11:15:13 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-05-09 11:15:13 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-09 11:15:13 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-09 11:15:13 - app.services.vector_store - INFO - 集合 knowledge_base 已存在
2025-05-09 11:15:13 - app.services.vector_store - INFO - 集合 knowledge_base 已存在
2025-05-09 11:15:13 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections/knowledge_base "HTTP/1.1 200 OK"
2025-05-09 11:15:13 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections/knowledge_base "HTTP/1.1 200 OK"
2025-05-09 11:15:13 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-09 11:15:13 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-09 11:15:13 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-09 11:15:13 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-09 11:15:14 - app.services.vector_store - INFO - 初始化向量存储服务
2025-05-09 11:15:14 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-09 11:15:14 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-09 11:15:15 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-09 11:15:15 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-09 11:15:15 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-05-09 11:15:15 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-05-09 11:15:15 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-09 11:15:15 - app.services.vector_store - INFO - 集合 knowledge_base 已存在
2025-05-09 11:15:15 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections/knowledge_base "HTTP/1.1 200 OK"
2025-05-09 11:15:15 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-09 11:15:15 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-09 11:15:15 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-09 11:15:15 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-09 11:15:15 - app.ws.connection_manager - ERROR - 建立WebSocket连接失败: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-09 11:15:15 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-09 11:15:15 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-09 11:23:03 - app.services.vector_store - INFO - 初始化向量存储服务
2025-05-09 11:23:03 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-09 11:23:03 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-09 11:23:03 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-09 11:23:03 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-09 11:23:03 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-05-09 11:23:03 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-05-09 11:23:03 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-09 11:23:03 - app.services.vector_store - INFO - 集合 knowledge_base 已存在
2025-05-09 11:23:03 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections/knowledge_base "HTTP/1.1 200 OK"
2025-05-09 11:23:03 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-09 11:23:03 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-09 11:23:03 - app.routers.documents - INFO - 接收到文件上传请求: 线上诊断Arthas 15ff8eef777580839c4dcf2d552da527.md, 类型: text/markdown
2025-05-09 11:23:03 - app.routers.documents - INFO - 解析元数据: {"name":"线上诊断Arthas 15ff8eef777580839c4dcf2d552da527"}...
2025-05-09 11:23:03 - app.routers.documents - INFO - 开始处理上传的文件
2025-05-09 11:23:03 - app.utils.file_utils - INFO - 文件已保存到临时路径: /var/folders/gs/kbsr2cy55nz47p4hyrxbtg0r0000gn/T/tmpim4jiab1.md
2025-05-09 11:23:03 - app.routers.documents - INFO - 文件已保存到临时路径: /var/folders/gs/kbsr2cy55nz47p4hyrxbtg0r0000gn/T/tmpim4jiab1.md
2025-05-09 11:23:03 - app.services.document_service - INFO - 开始处理文件: 线上诊断Arthas 15ff8eef777580839c4dcf2d552da527.md, 内容类型: text/markdown
2025-05-09 11:23:03 - app.services.document_service - INFO - 文件大小: 13075 字节
2025-05-09 11:23:03 - app.services.document_service - INFO - 文件类型识别为: md
2025-05-09 11:23:03 - app.services.document_service - INFO - 文本文件类型: md，使用普通UTF-8解码
2025-05-09 11:23:03 - app.services.document_service - INFO - 准备创建文档记录
2025-05-09 11:23:03 - app.services.document_service - INFO - 创建文档: 线上诊断Arthas 15ff8eef777580839c4dcf2d552da527.md, 类型: md, 用户ID: 1
2025-05-09 11:23:03 - app.services.document_service - INFO - 文档创建成功: ID=32
2025-05-09 11:23:03 - app.services.task_service - INFO - 创建任务: 处理文档: 线上诊断Arthas 15ff8eef777580839c4dcf2d552da527.md, 类型: DOCUMENT_PROCESSING, 创建者: 1
2025-05-09 11:23:03 - app.services.task_service - INFO - 任务创建成功: 107a5f47-5e03-4446-87ca-a5d388c69f0f
2025-05-09 11:23:03 - app.services.document_service - INFO - 更新文档状态: ID=32, 状态=processing
2025-05-09 11:23:03 - app.services.document_service - INFO - 文档状态已更新: ID=32, 状态=processing
2025-05-09 11:23:03 - app.routers.documents - INFO - 文件处理成功，文档ID: 32, 任务ID: 107a5f47-5e03-4446-87ca-a5d388c69f0f
2025-05-09 11:23:03 - app.services.vector_store - INFO - 初始化向量存储服务
2025-05-09 11:23:03 - app.services.vector_store - INFO - 初始化向量存储服务
2025-05-09 11:23:03 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-09 11:23:03 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-09 11:23:03 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-09 11:23:03 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-09 11:23:04 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-09 11:23:04 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-09 11:23:04 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-09 11:23:04 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-09 11:23:04 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-05-09 11:23:04 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-05-09 11:23:04 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-05-09 11:23:04 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-05-09 11:23:04 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-09 11:23:04 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-09 11:23:04 - app.services.vector_store - INFO - 集合 knowledge_base 已存在
2025-05-09 11:23:04 - app.services.vector_store - INFO - 集合 knowledge_base 已存在
2025-05-09 11:23:04 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections/knowledge_base "HTTP/1.1 200 OK"
2025-05-09 11:23:04 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections/knowledge_base "HTTP/1.1 200 OK"
2025-05-09 11:23:04 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-09 11:23:04 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-09 11:23:04 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-09 11:23:04 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-09 11:31:16 - root - INFO - 日志系统初始化完成
2025-05-09 11:31:16 - app.main - INFO - 数据库表创建完成
2025-05-09 11:31:16 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-09 11:31:17 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-09 11:31:17 - app.ws.connection_manager - ERROR - 建立WebSocket连接失败: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-09 11:31:17 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-09 11:31:17 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-09 11:31:17 - app.ws.connection_manager - ERROR - 建立WebSocket连接失败: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-09 11:31:17 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-09 11:31:17 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-09 11:31:17 - app.ws.connection_manager - ERROR - 建立WebSocket连接失败: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-09 11:31:17 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-09 11:31:17 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-09 11:31:17 - app.ws.connection_manager - ERROR - 建立WebSocket连接失败: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-09 11:32:03 - root - INFO - 日志系统初始化完成
2025-05-09 11:32:03 - app.main - INFO - 数据库表创建完成
2025-05-09 11:32:03 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-09 11:32:03 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-09 11:32:03 - app.ws.connection_manager - ERROR - 建立WebSocket连接失败: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-09 11:32:03 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-09 11:32:03 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-09 11:32:03 - app.ws.connection_manager - ERROR - 建立WebSocket连接失败: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-09 11:32:03 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-09 11:32:03 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-09 11:32:03 - app.ws.connection_manager - ERROR - 建立WebSocket连接失败: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-09 11:32:03 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-09 11:32:03 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-09 11:32:03 - app.ws.connection_manager - ERROR - 建立WebSocket连接失败: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-09 11:32:20 - root - INFO - 日志系统初始化完成
2025-05-09 11:32:20 - app.main - INFO - 数据库表创建完成
2025-05-09 11:32:21 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-09 11:32:21 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-09 11:32:21 - app.ws.connection_manager - ERROR - 建立WebSocket连接失败: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-09 11:32:21 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-09 11:32:21 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-09 11:32:21 - app.ws.connection_manager - ERROR - 建立WebSocket连接失败: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-09 11:32:21 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-09 11:32:21 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-09 11:32:21 - app.ws.connection_manager - ERROR - 建立WebSocket连接失败: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-09 11:32:21 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-09 11:32:21 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-09 11:32:21 - app.ws.connection_manager - ERROR - 建立WebSocket连接失败: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-09 11:32:36 - root - INFO - 日志系统初始化完成
2025-05-09 11:32:37 - app.main - INFO - 数据库表创建完成
2025-05-09 11:32:37 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-09 11:32:37 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-09 11:32:37 - app.ws.connection_manager - ERROR - 建立WebSocket连接失败: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-09 11:32:37 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-09 11:32:37 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-09 11:32:37 - app.ws.connection_manager - ERROR - 建立WebSocket连接失败: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-09 11:32:37 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-09 11:32:37 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-09 11:32:37 - app.ws.connection_manager - ERROR - 建立WebSocket连接失败: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-09 11:32:37 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-09 11:32:37 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-09 11:32:37 - app.ws.connection_manager - ERROR - 建立WebSocket连接失败: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-09 11:33:41 - root - INFO - 日志系统初始化完成
2025-05-09 11:33:41 - app.main - INFO - 数据库表创建完成
2025-05-09 11:33:41 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-09 11:33:41 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-09 11:33:41 - app.ws.connection_manager - ERROR - 建立WebSocket连接失败: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-09 11:33:41 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-09 11:33:41 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-09 11:33:41 - app.ws.connection_manager - ERROR - 建立WebSocket连接失败: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-09 11:33:41 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-09 11:33:41 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-09 11:33:41 - app.ws.connection_manager - ERROR - 建立WebSocket连接失败: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-09 11:33:41 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-09 11:33:41 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-09 11:33:41 - app.ws.connection_manager - ERROR - 建立WebSocket连接失败: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-09 11:35:48 - root - INFO - 日志系统初始化完成
2025-05-09 11:35:48 - app.main - INFO - 数据库表创建完成
2025-05-09 11:35:50 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-09 11:35:50 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-09 11:35:50 - app.ws.connection_manager - ERROR - 建立WebSocket连接失败: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-09 11:35:50 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-09 11:35:50 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-09 11:35:50 - app.ws.connection_manager - ERROR - 建立WebSocket连接失败: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-09 11:35:50 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-09 11:35:50 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-09 11:35:50 - app.ws.connection_manager - ERROR - 建立WebSocket连接失败: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-09 11:35:50 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-09 11:35:50 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-09 11:35:50 - app.ws.connection_manager - ERROR - 建立WebSocket连接失败: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-09 11:36:24 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-09 11:36:24 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-09 11:36:24 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-09 11:36:24 - app.services.vector_store - INFO - 初始化向量存储服务
2025-05-09 11:36:24 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-09 11:36:24 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-09 11:36:24 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-09 11:36:24 - app.services.vector_store - INFO - 初始化向量存储服务
2025-05-09 11:36:24 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-09 11:36:24 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-09 11:36:24 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-09 11:36:24 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-09 11:36:24 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-09 11:36:24 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-05-09 11:36:24 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-05-09 11:36:24 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-09 11:36:24 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-05-09 11:36:24 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-05-09 11:36:24 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-09 11:36:24 - app.services.vector_store - INFO - 集合 knowledge_base 已存在
2025-05-09 11:36:24 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-09 11:36:24 - app.services.vector_store - INFO - 集合 knowledge_base 已存在
2025-05-09 11:36:24 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections/knowledge_base "HTTP/1.1 200 OK"
2025-05-09 11:36:24 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-09 11:36:24 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections/knowledge_base "HTTP/1.1 200 OK"
2025-05-09 11:36:24 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-09 11:36:24 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-09 11:36:24 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-09 11:36:24 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-09 11:36:25 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-09 11:36:26 - app.services.vector_store - INFO - 初始化向量存储服务
2025-05-09 11:36:26 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-09 11:36:26 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-09 11:36:26 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-09 11:36:26 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-09 11:36:26 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-05-09 11:36:26 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-05-09 11:36:26 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-09 11:36:26 - app.services.vector_store - INFO - 集合 knowledge_base 已存在
2025-05-09 11:36:26 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections/knowledge_base "HTTP/1.1 200 OK"
2025-05-09 11:36:26 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-09 11:36:26 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-09 11:36:39 - app.services.vector_store - INFO - 初始化向量存储服务
2025-05-09 11:36:39 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-09 11:36:39 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-09 11:36:39 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-09 11:36:39 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-09 11:36:39 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-05-09 11:36:39 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-05-09 11:36:39 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-09 11:36:39 - app.services.vector_store - INFO - 集合 knowledge_base 已存在
2025-05-09 11:36:39 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections/knowledge_base "HTTP/1.1 200 OK"
2025-05-09 11:36:39 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-09 11:36:40 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-09 11:36:40 - app.routers.documents - INFO - 接收到文件上传请求: 线上诊断Arthas 15ff8eef777580839c4dcf2d552da527.md, 类型: text/markdown
2025-05-09 11:36:40 - app.routers.documents - INFO - 解析元数据: {"name":"线上诊断Arthas 15ff8eef777580839c4dcf2d552da527"}...
2025-05-09 11:36:40 - app.routers.documents - INFO - 开始处理上传的文件
2025-05-09 11:36:40 - app.utils.file_utils - INFO - 文件已保存到临时路径: /var/folders/gs/kbsr2cy55nz47p4hyrxbtg0r0000gn/T/tmpdzndtg1f.md
2025-05-09 11:36:40 - app.routers.documents - INFO - 文件已保存到临时路径: /var/folders/gs/kbsr2cy55nz47p4hyrxbtg0r0000gn/T/tmpdzndtg1f.md
2025-05-09 11:36:40 - app.services.document_service - INFO - 开始处理文件: 线上诊断Arthas 15ff8eef777580839c4dcf2d552da527.md, 内容类型: text/markdown
2025-05-09 11:36:40 - app.services.document_service - INFO - 文件大小: 13075 字节
2025-05-09 11:36:40 - app.services.document_service - INFO - 文件类型识别为: md
2025-05-09 11:36:40 - app.services.document_service - INFO - 文本文件类型: md，使用普通UTF-8解码
2025-05-09 11:36:40 - app.services.document_service - INFO - 准备创建文档记录
2025-05-09 11:36:40 - app.services.document_service - INFO - 创建文档: 线上诊断Arthas 15ff8eef777580839c4dcf2d552da527.md, 类型: md, 用户ID: 1
2025-05-09 11:36:40 - app.services.document_service - INFO - 文档创建成功: ID=33
2025-05-09 11:36:40 - app.services.task_service - INFO - 创建任务: 处理文档: 线上诊断Arthas 15ff8eef777580839c4dcf2d552da527.md, 类型: DOCUMENT_PROCESSING, 创建者: 1
2025-05-09 11:36:40 - app.services.task_service - INFO - 任务创建成功: da3135aa-0b71-484b-bb43-268da73bd29c
2025-05-09 11:36:40 - app.services.document_service - INFO - 更新文档状态: ID=33, 状态=processing
2025-05-09 11:36:40 - app.services.document_service - INFO - 文档状态已更新: ID=33, 状态=processing
2025-05-09 11:36:40 - app.routers.documents - INFO - 文件处理成功，文档ID: 33, 任务ID: da3135aa-0b71-484b-bb43-268da73bd29c
2025-05-09 11:36:40 - app.services.vector_store - INFO - 初始化向量存储服务
2025-05-09 11:36:40 - app.services.vector_store - INFO - 初始化向量存储服务
2025-05-09 11:36:40 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-09 11:36:40 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-09 11:36:40 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-09 11:36:40 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-09 11:36:40 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-09 11:36:40 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-09 11:36:40 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-09 11:36:40 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-09 11:36:40 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-05-09 11:36:40 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-05-09 11:36:40 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-05-09 11:36:40 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-05-09 11:36:40 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-09 11:36:40 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-09 11:36:40 - app.services.vector_store - INFO - 集合 knowledge_base 已存在
2025-05-09 11:36:40 - app.services.vector_store - INFO - 集合 knowledge_base 已存在
2025-05-09 11:36:40 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections/knowledge_base "HTTP/1.1 200 OK"
2025-05-09 11:36:40 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections/knowledge_base "HTTP/1.1 200 OK"
2025-05-09 11:36:40 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-09 11:36:40 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-09 11:36:40 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-09 11:36:40 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-09 11:38:10 - root - INFO - 日志系统初始化完成
2025-05-09 11:38:11 - app.main - INFO - 数据库表创建完成
2025-05-09 11:38:16 - root - INFO - 日志系统初始化完成
2025-05-09 11:38:16 - app.main - INFO - 数据库表创建完成
2025-05-09 11:50:49 - root - INFO - 日志系统初始化完成
2025-05-09 11:50:50 - app.main - INFO - 数据库表创建完成
2025-05-09 11:51:10 - root - INFO - 日志系统初始化完成
2025-05-09 11:51:10 - app.main - INFO - 数据库表创建完成
2025-05-09 11:53:12 - root - INFO - 日志系统初始化完成
2025-05-09 11:53:12 - app.main - INFO - 数据库表创建完成
2025-05-09 11:53:34 - root - INFO - 日志系统初始化完成
2025-05-09 11:53:34 - app.main - INFO - 数据库表创建完成
2025-05-09 11:53:55 - root - INFO - 日志系统初始化完成
2025-05-09 11:53:55 - app.main - INFO - 数据库表创建完成
2025-05-09 12:54:20 - root - INFO - 日志系统初始化完成
2025-05-09 12:54:20 - app.main - INFO - 数据库表创建完成
2025-05-09 12:55:06 - app.services.vector_store - INFO - 初始化向量存储服务
2025-05-09 12:55:06 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-09 12:55:06 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-09 12:55:06 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-09 12:55:06 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-09 12:55:06 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-05-09 12:55:06 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-05-09 12:55:06 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-09 12:55:06 - app.services.vector_store - INFO - 集合 knowledge_base 已存在
2025-05-09 12:55:06 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections/knowledge_base "HTTP/1.1 200 OK"
2025-05-09 12:55:06 - app.auth.dependencies - WARNING - 令牌解码失败: Signature has expired.
2025-05-09 12:55:13 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-09 12:55:13 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-09 12:55:13 - app.services.vector_store - INFO - 初始化向量存储服务
2025-05-09 12:55:13 - app.services.vector_store - INFO - 初始化向量存储服务
2025-05-09 12:55:13 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-09 12:55:13 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-09 12:55:13 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-09 12:55:13 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-09 12:55:13 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-09 12:55:13 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-09 12:55:13 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-09 12:55:13 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-09 12:55:13 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-05-09 12:55:13 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-05-09 12:55:13 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-05-09 12:55:13 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-05-09 12:55:13 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-09 12:55:13 - app.services.vector_store - INFO - 集合 knowledge_base 已存在
2025-05-09 12:55:13 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-09 12:55:13 - app.services.vector_store - INFO - 集合 knowledge_base 已存在
2025-05-09 12:55:13 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections/knowledge_base "HTTP/1.1 200 OK"
2025-05-09 12:55:13 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections/knowledge_base "HTTP/1.1 200 OK"
2025-05-09 12:55:13 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-09 12:55:13 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-09 12:55:13 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-09 12:55:13 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-09 12:55:13 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-09 12:55:14 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-09 12:55:14 - app.services.vector_store - INFO - 初始化向量存储服务
2025-05-09 12:55:14 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-09 12:55:14 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-09 12:55:14 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-09 12:55:15 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-09 12:55:15 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-05-09 12:55:15 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-05-09 12:55:15 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-09 12:55:15 - app.services.vector_store - INFO - 集合 knowledge_base 已存在
2025-05-09 12:55:15 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections/knowledge_base "HTTP/1.1 200 OK"
2025-05-09 12:55:15 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-09 12:55:15 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-09 12:55:22 - app.services.vector_store - INFO - 初始化向量存储服务
2025-05-09 12:55:22 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-09 12:55:22 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-09 12:55:22 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-09 12:55:22 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-09 12:55:22 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-05-09 12:55:22 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-05-09 12:55:22 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-09 12:55:22 - app.services.vector_store - INFO - 集合 knowledge_base 已存在
2025-05-09 12:55:22 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections/knowledge_base "HTTP/1.1 200 OK"
2025-05-09 12:55:22 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-09 12:55:22 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-09 12:55:22 - app.routers.documents - INFO - 接收到文件上传请求: 线上诊断Arthas 15ff8eef777580839c4dcf2d552da527.md, 类型: text/markdown
2025-05-09 12:55:22 - app.routers.documents - INFO - 解析元数据: {"name":"线上诊断Arthas 15ff8eef777580839c4dcf2d552da527"}...
2025-05-09 12:55:22 - app.routers.documents - INFO - 开始处理上传的文件
2025-05-09 12:55:22 - app.utils.file_utils - INFO - 文件已保存到临时路径: /var/folders/gs/kbsr2cy55nz47p4hyrxbtg0r0000gn/T/tmp8ctxho4q.md
2025-05-09 12:55:22 - app.routers.documents - INFO - 文件已保存到临时路径: /var/folders/gs/kbsr2cy55nz47p4hyrxbtg0r0000gn/T/tmp8ctxho4q.md
2025-05-09 12:55:22 - app.services.document_service - INFO - 开始处理文件: 线上诊断Arthas 15ff8eef777580839c4dcf2d552da527.md, 内容类型: text/markdown
2025-05-09 12:55:22 - app.services.document_service - INFO - 文件大小: 13075 字节
2025-05-09 12:55:22 - app.services.document_service - INFO - 文件类型识别为: md
2025-05-09 12:55:22 - app.services.document_service - INFO - 文本文件类型: md，使用普通UTF-8解码
2025-05-09 12:55:22 - app.services.document_service - INFO - 准备创建文档记录
2025-05-09 12:55:22 - app.services.document_service - INFO - 创建文档: 线上诊断Arthas 15ff8eef777580839c4dcf2d552da527.md, 类型: md, 用户ID: 1
2025-05-09 12:55:22 - app.services.document_service - INFO - 文档创建成功: ID=34
2025-05-09 12:55:22 - app.services.task_service - INFO - 创建任务: 处理文档: 线上诊断Arthas 15ff8eef777580839c4dcf2d552da527.md, 类型: DOCUMENT_PROCESSING, 创建者: 1
2025-05-09 12:55:23 - app.services.task_service - INFO - 任务创建成功: 2c16d633-fa62-4e1a-8f87-35b82d0eb2d9
2025-05-09 12:55:23 - app.services.document_service - INFO - 更新文档状态: ID=34, 状态=processing
2025-05-09 12:55:23 - app.services.document_service - INFO - 文档状态已更新: ID=34, 状态=processing
2025-05-09 12:55:23 - app.routers.documents - INFO - 文件处理成功，文档ID: 34, 任务ID: 2c16d633-fa62-4e1a-8f87-35b82d0eb2d9
2025-05-09 12:55:23 - app.services.vector_store - INFO - 初始化向量存储服务
2025-05-09 12:55:23 - app.services.vector_store - INFO - 初始化向量存储服务
2025-05-09 12:55:23 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-09 12:55:23 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-09 12:55:23 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-09 12:55:23 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-09 12:55:23 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-09 12:55:23 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-09 12:55:23 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-09 12:55:23 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-05-09 12:55:23 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-09 12:55:23 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-05-09 12:55:23 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-05-09 12:55:23 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-05-09 12:55:23 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-09 12:55:23 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-09 12:55:23 - app.services.vector_store - INFO - 集合 knowledge_base 已存在
2025-05-09 12:55:23 - app.services.vector_store - INFO - 集合 knowledge_base 已存在
2025-05-09 12:55:23 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections/knowledge_base "HTTP/1.1 200 OK"
2025-05-09 12:55:23 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections/knowledge_base "HTTP/1.1 200 OK"
2025-05-09 12:55:23 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-09 12:55:23 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-09 12:55:23 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-09 12:55:23 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-09 12:55:23 - app.routers.websockets - WARNING - 未授权的内部API访问尝试，任务ID: 2c16d633-fa62-4e1a-8f87-35b82d0eb2d9
2025-05-09 12:55:23 - app.routers.websockets - WARNING - 未授权的内部API访问尝试，任务ID: 2c16d633-fa62-4e1a-8f87-35b82d0eb2d9
2025-05-09 12:55:23 - app.routers.websockets - WARNING - 未授权的内部API访问尝试，任务ID: 2c16d633-fa62-4e1a-8f87-35b82d0eb2d9
2025-05-09 12:55:24 - app.routers.websockets - WARNING - 未授权的内部API访问尝试，任务ID: 2c16d633-fa62-4e1a-8f87-35b82d0eb2d9
2025-05-09 12:55:24 - app.routers.websockets - WARNING - 未授权的内部API访问尝试，任务ID: 2c16d633-fa62-4e1a-8f87-35b82d0eb2d9
2025-05-09 12:55:24 - app.routers.websockets - WARNING - 未授权的内部API访问尝试，任务ID: 2c16d633-fa62-4e1a-8f87-35b82d0eb2d9
2025-05-09 12:55:24 - app.routers.websockets - WARNING - 未授权的内部API访问尝试，任务ID: 2c16d633-fa62-4e1a-8f87-35b82d0eb2d9
2025-05-09 12:55:25 - app.services.vector_store - INFO - 初始化向量存储服务
2025-05-09 12:55:25 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-09 12:55:25 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-09 12:55:25 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-09 12:55:25 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-09 12:55:25 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-05-09 12:55:25 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-05-09 12:55:25 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-09 12:55:25 - app.services.vector_store - INFO - 集合 knowledge_base 已存在
2025-05-09 12:55:25 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections/knowledge_base "HTTP/1.1 200 OK"
2025-05-09 12:55:25 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-09 12:55:25 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-09 12:55:25 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-09 12:55:25 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-09 12:55:25 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-09 12:55:25 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-09 12:55:25 - app.ws.connection_manager - ERROR - 建立WebSocket连接失败: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-09 12:56:02 - root - INFO - 日志系统初始化完成
2025-05-09 12:56:02 - app.main - INFO - 数据库表创建完成
2025-05-09 12:56:07 - root - INFO - 日志系统初始化完成
2025-05-09 12:56:07 - app.main - INFO - 数据库表创建完成
2025-05-09 12:56:07 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-09 12:56:07 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-09 12:56:07 - app.ws.connection_manager - ERROR - 建立WebSocket连接失败: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-09 13:08:20 - root - INFO - 日志系统初始化完成
2025-05-09 13:08:20 - app.main - INFO - 数据库表创建完成
2025-05-09 13:08:20 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-09 13:08:21 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-09 13:08:21 - app.ws.connection_manager - ERROR - 建立WebSocket连接失败: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-09 13:08:37 - root - INFO - 日志系统初始化完成
2025-05-09 13:08:37 - app.main - INFO - 数据库表创建完成
2025-05-09 13:08:37 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-09 13:08:37 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-09 13:08:37 - app.ws.connection_manager - ERROR - 建立WebSocket连接失败: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-09 13:08:51 - root - INFO - 日志系统初始化完成
2025-05-09 13:08:52 - app.main - INFO - 数据库表创建完成
2025-05-09 13:08:52 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-09 13:08:52 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-09 13:08:52 - app.ws.connection_manager - ERROR - 建立WebSocket连接失败: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-09 13:09:37 - root - INFO - 日志系统初始化完成
2025-05-09 13:09:38 - app.main - INFO - 数据库表创建完成
2025-05-09 13:09:38 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-09 13:09:38 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-09 13:09:38 - app.ws.connection_manager - ERROR - 建立WebSocket连接失败: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-09 13:09:49 - root - INFO - 日志系统初始化完成
2025-05-09 13:09:50 - app.main - INFO - 数据库表创建完成
2025-05-09 13:09:50 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-09 13:09:50 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-09 13:09:50 - app.ws.connection_manager - ERROR - 建立WebSocket连接失败: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-09 13:24:11 - root - INFO - 日志系统初始化完成
2025-05-09 13:24:12 - app.main - INFO - 数据库表创建完成
2025-05-09 13:24:14 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-09 13:24:14 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-09 13:24:14 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-09 13:24:14 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-09 13:24:14 - app.services.vector_store - INFO - 初始化向量存储服务
2025-05-09 13:24:14 - app.services.vector_store - INFO - 初始化向量存储服务
2025-05-09 13:24:14 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-09 13:24:14 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-09 13:24:14 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-09 13:24:14 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-09 13:24:14 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-09 13:24:14 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-09 13:24:14 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-09 13:24:14 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-05-09 13:24:14 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-05-09 13:24:14 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-09 13:24:14 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-05-09 13:24:14 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-05-09 13:24:14 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-09 13:24:14 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-09 13:24:14 - app.services.vector_store - INFO - 集合 knowledge_base 已存在
2025-05-09 13:24:14 - app.services.vector_store - INFO - 集合 knowledge_base 已存在
2025-05-09 13:24:14 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections/knowledge_base "HTTP/1.1 200 OK"
2025-05-09 13:24:14 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections/knowledge_base "HTTP/1.1 200 OK"
2025-05-09 13:24:14 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-09 13:24:14 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-09 13:24:14 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-09 13:24:14 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-09 13:24:14 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-09 13:24:14 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-09 13:25:00 - app.services.vector_store - INFO - 初始化向量存储服务
2025-05-09 13:25:00 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-09 13:25:00 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-09 13:25:00 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-09 13:25:00 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-09 13:25:00 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-05-09 13:25:00 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-05-09 13:25:00 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-09 13:25:00 - app.services.vector_store - INFO - 集合 knowledge_base 已存在
2025-05-09 13:25:00 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections/knowledge_base "HTTP/1.1 200 OK"
2025-05-09 13:25:00 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-09 13:25:00 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-09 13:25:10 - app.services.vector_store - INFO - 初始化向量存储服务
2025-05-09 13:25:10 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-09 13:25:10 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-09 13:25:10 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-09 13:25:10 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-09 13:25:10 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-05-09 13:25:10 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-05-09 13:25:10 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-09 13:25:10 - app.services.vector_store - INFO - 集合 knowledge_base 已存在
2025-05-09 13:25:10 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections/knowledge_base "HTTP/1.1 200 OK"
2025-05-09 13:25:10 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-09 13:25:10 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-09 13:25:10 - app.routers.documents - INFO - 接收到文件上传请求: 线上诊断Arthas 15ff8eef777580839c4dcf2d552da527.md, 类型: text/markdown
2025-05-09 13:25:10 - app.routers.documents - INFO - 解析元数据: {"name":"线上诊断Arthas 15ff8eef777580839c4dcf2d552da527"}...
2025-05-09 13:25:10 - app.routers.documents - INFO - 开始处理上传的文件
2025-05-09 13:25:10 - app.utils.file_utils - INFO - 文件已保存到临时路径: /var/folders/gs/kbsr2cy55nz47p4hyrxbtg0r0000gn/T/tmp7qn767vc.md
2025-05-09 13:25:10 - app.routers.documents - INFO - 文件已保存到临时路径: /var/folders/gs/kbsr2cy55nz47p4hyrxbtg0r0000gn/T/tmp7qn767vc.md
2025-05-09 13:25:10 - app.services.document_service - INFO - 开始处理文件: 线上诊断Arthas 15ff8eef777580839c4dcf2d552da527.md, 内容类型: text/markdown
2025-05-09 13:25:10 - app.services.document_service - INFO - 文件大小: 13075 字节
2025-05-09 13:25:10 - app.services.document_service - INFO - 文件类型识别为: md
2025-05-09 13:25:10 - app.services.document_service - INFO - 文本文件类型: md，使用普通UTF-8解码
2025-05-09 13:25:10 - app.services.document_service - INFO - 准备创建文档记录
2025-05-09 13:25:10 - app.services.document_service - INFO - 创建文档: 线上诊断Arthas 15ff8eef777580839c4dcf2d552da527.md, 类型: md, 用户ID: 1
2025-05-09 13:25:10 - app.services.document_service - INFO - 文档创建成功: ID=35
2025-05-09 13:25:10 - app.services.task_service - INFO - 创建任务: 处理文档: 线上诊断Arthas 15ff8eef777580839c4dcf2d552da527.md, 类型: DOCUMENT_PROCESSING, 创建者: 1
2025-05-09 13:25:10 - app.services.task_service - INFO - 任务创建成功: 3a5db266-63f8-4374-b898-9585bea4bf9e
2025-05-09 13:25:10 - app.services.document_service - INFO - 更新文档状态: ID=35, 状态=processing
2025-05-09 13:25:10 - app.services.document_service - INFO - 文档状态已更新: ID=35, 状态=processing
2025-05-09 13:25:10 - app.routers.documents - INFO - 文件处理成功，文档ID: 35, 任务ID: 3a5db266-63f8-4374-b898-9585bea4bf9e
2025-05-09 13:25:10 - app.services.vector_store - INFO - 初始化向量存储服务
2025-05-09 13:25:10 - app.services.vector_store - INFO - 初始化向量存储服务
2025-05-09 13:25:10 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-09 13:25:10 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-09 13:25:10 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-09 13:25:10 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-09 13:25:11 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-09 13:25:11 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-09 13:25:11 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-09 13:25:11 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-09 13:25:11 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-05-09 13:25:11 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-05-09 13:25:11 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-05-09 13:25:11 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-05-09 13:25:11 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-09 13:25:11 - app.services.vector_store - INFO - 集合 knowledge_base 已存在
2025-05-09 13:25:11 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-09 13:25:11 - app.services.vector_store - INFO - 集合 knowledge_base 已存在
2025-05-09 13:25:11 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections/knowledge_base "HTTP/1.1 200 OK"
2025-05-09 13:25:11 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections/knowledge_base "HTTP/1.1 200 OK"
2025-05-09 13:25:11 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-09 13:25:11 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-09 13:25:11 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-09 13:25:11 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-09 13:25:11 - app.routers.websockets - WARNING - API密钥不匹配，接收到: kfBu***，预期: MDDm***
2025-05-09 13:25:11 - app.routers.websockets - WARNING - API密钥不匹配，接收到: kfBu***，预期: MDDm***
2025-05-09 13:25:11 - app.routers.websockets - WARNING - API密钥不匹配，接收到: kfBu***，预期: MDDm***
2025-05-09 13:25:12 - app.routers.websockets - WARNING - API密钥不匹配，接收到: kfBu***，预期: MDDm***
2025-05-09 13:25:12 - app.routers.websockets - WARNING - API密钥不匹配，接收到: kfBu***，预期: MDDm***
2025-05-09 13:25:12 - app.routers.websockets - WARNING - API密钥不匹配，接收到: kfBu***，预期: MDDm***
2025-05-09 13:25:12 - app.routers.websockets - WARNING - API密钥不匹配，接收到: kfBu***，预期: MDDm***
2025-05-09 13:28:34 - root - INFO - 日志系统初始化完成
2025-05-09 13:28:34 - app.main - INFO - 数据库表创建完成
2025-05-09 13:29:59 - root - INFO - 日志系统初始化完成
2025-05-09 13:30:00 - app.main - INFO - 数据库表创建完成
2025-05-09 13:34:36 - root - INFO - 日志系统初始化完成
2025-05-09 13:34:37 - app.main - INFO - 数据库表创建完成
2025-05-09 13:35:09 - app.services.vector_store - INFO - 初始化向量存储服务
2025-05-09 13:35:09 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-09 13:35:09 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-09 13:35:09 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-09 13:35:09 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-09 13:35:09 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-05-09 13:35:09 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-05-09 13:35:10 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-09 13:35:10 - app.services.vector_store - INFO - 集合 knowledge_base 已存在
2025-05-09 13:35:10 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections/knowledge_base "HTTP/1.1 200 OK"
2025-05-09 13:35:10 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-09 13:35:10 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-09 13:35:10 - app.routers.documents - INFO - 接收到文件上传请求: 线上诊断Arthas 15ff8eef777580839c4dcf2d552da527.md, 类型: text/markdown
2025-05-09 13:35:10 - app.routers.documents - INFO - 解析元数据: {"name":"线上诊断Arthas 15ff8eef777580839c4dcf2d552da527"}...
2025-05-09 13:35:10 - app.routers.documents - INFO - 开始处理上传的文件
2025-05-09 13:35:10 - app.utils.file_utils - INFO - 文件已保存到临时路径: /var/folders/gs/kbsr2cy55nz47p4hyrxbtg0r0000gn/T/tmpq_hw5op1.md
2025-05-09 13:35:10 - app.routers.documents - INFO - 文件已保存到临时路径: /var/folders/gs/kbsr2cy55nz47p4hyrxbtg0r0000gn/T/tmpq_hw5op1.md
2025-05-09 13:35:10 - app.services.document_service - INFO - 开始处理文件: 线上诊断Arthas 15ff8eef777580839c4dcf2d552da527.md, 内容类型: text/markdown
2025-05-09 13:35:10 - app.services.document_service - INFO - 文件大小: 13075 字节
2025-05-09 13:35:10 - app.services.document_service - INFO - 文件类型识别为: md
2025-05-09 13:35:10 - app.services.document_service - INFO - 文本文件类型: md，使用普通UTF-8解码
2025-05-09 13:35:10 - app.services.document_service - INFO - 准备创建文档记录
2025-05-09 13:35:10 - app.services.document_service - INFO - 创建文档: 线上诊断Arthas 15ff8eef777580839c4dcf2d552da527.md, 类型: md, 用户ID: 1
2025-05-09 13:35:10 - app.services.document_service - INFO - 文档创建成功: ID=36
2025-05-09 13:35:10 - app.services.task_service - INFO - 创建任务: 处理文档: 线上诊断Arthas 15ff8eef777580839c4dcf2d552da527.md, 类型: DOCUMENT_PROCESSING, 创建者: 1
2025-05-09 13:35:10 - app.services.task_service - INFO - 任务创建成功: 99caf98d-1ed0-4a78-89f3-7230cf718228
2025-05-09 13:35:10 - app.services.document_service - INFO - 更新文档状态: ID=36, 状态=processing
2025-05-09 13:35:10 - app.services.document_service - INFO - 文档状态已更新: ID=36, 状态=processing
2025-05-09 13:35:10 - app.routers.documents - INFO - 文件处理成功，文档ID: 36, 任务ID: 99caf98d-1ed0-4a78-89f3-7230cf718228
2025-05-09 13:35:10 - app.services.vector_store - INFO - 初始化向量存储服务
2025-05-09 13:35:10 - app.services.vector_store - INFO - 初始化向量存储服务
2025-05-09 13:35:10 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-09 13:35:10 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-09 13:35:10 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-09 13:35:10 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-09 13:35:10 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-09 13:35:10 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-09 13:35:10 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-09 13:35:10 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-09 13:35:10 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-05-09 13:35:10 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-05-09 13:35:10 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-05-09 13:35:10 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-05-09 13:35:10 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-09 13:35:10 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-09 13:35:10 - app.services.vector_store - INFO - 集合 knowledge_base 已存在
2025-05-09 13:35:10 - app.services.vector_store - INFO - 集合 knowledge_base 已存在
2025-05-09 13:35:10 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections/knowledge_base "HTTP/1.1 200 OK"
2025-05-09 13:35:10 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-09 13:35:10 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections/knowledge_base "HTTP/1.1 200 OK"
2025-05-09 13:35:10 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-09 13:35:10 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-09 13:35:10 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-09 13:35:11 - app.routers.websockets - WARNING - 任务 99caf98d-1ed0-4a78-89f3-7230cf718228 没有活跃的WebSocket连接，更新未发送
2025-05-09 13:35:11 - app.routers.websockets - WARNING - 任务 99caf98d-1ed0-4a78-89f3-7230cf718228 没有活跃的WebSocket连接，更新未发送
2025-05-09 13:35:11 - app.routers.websockets - WARNING - 任务 99caf98d-1ed0-4a78-89f3-7230cf718228 没有活跃的WebSocket连接，更新未发送
2025-05-09 13:35:11 - app.routers.websockets - WARNING - 任务 99caf98d-1ed0-4a78-89f3-7230cf718228 没有活跃的WebSocket连接，更新未发送
2025-05-09 13:35:11 - app.routers.websockets - WARNING - 任务 99caf98d-1ed0-4a78-89f3-7230cf718228 没有活跃的WebSocket连接，更新未发送
2025-05-09 13:35:11 - app.routers.websockets - WARNING - 任务 99caf98d-1ed0-4a78-89f3-7230cf718228 没有活跃的WebSocket连接，更新未发送
2025-05-09 13:35:11 - app.routers.websockets - WARNING - 任务 99caf98d-1ed0-4a78-89f3-7230cf718228 没有活跃的WebSocket连接，更新未发送
2025-05-09 13:35:12 - app.routers.websockets - WARNING - 任务 99caf98d-1ed0-4a78-89f3-7230cf718228 没有活跃的WebSocket连接，更新未发送
2025-05-09 13:35:12 - app.routers.websockets - WARNING - 任务 99caf98d-1ed0-4a78-89f3-7230cf718228 没有活跃的WebSocket连接，更新未发送
2025-05-09 13:35:17 - app.services.vector_store - INFO - 初始化向量存储服务
2025-05-09 13:35:17 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-09 13:35:17 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-09 13:35:17 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-09 13:35:17 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-09 13:35:17 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-05-09 13:35:17 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-05-09 13:35:17 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-09 13:35:17 - app.services.vector_store - INFO - 集合 knowledge_base 已存在
2025-05-09 13:35:17 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections/knowledge_base "HTTP/1.1 200 OK"
2025-05-09 13:35:17 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-09 13:35:17 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-09 13:35:17 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-09 13:35:17 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-09 13:35:17 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-09 13:35:17 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-09 13:35:17 - app.ws.connection_manager - ERROR - 建立WebSocket连接失败: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-09 13:44:39 - root - INFO - 日志系统初始化完成
2025-05-09 13:44:39 - app.main - INFO - 数据库表创建完成
2025-05-09 13:44:40 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-09 13:44:40 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-09 13:44:40 - app.ws.connection_manager - ERROR - 建立WebSocket连接失败: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-09 13:45:41 - root - INFO - 日志系统初始化完成
2025-05-09 13:45:41 - app.main - INFO - 数据库表创建完成
2025-05-09 13:45:41 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-09 13:45:41 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-09 13:45:41 - app.ws.connection_manager - ERROR - 建立WebSocket连接失败: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-09 13:47:36 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-09 13:47:36 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-09 13:47:56 - app.services.vector_store - INFO - 初始化向量存储服务
2025-05-09 13:47:56 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-09 13:47:56 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-09 13:47:56 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-09 13:47:56 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-09 13:47:56 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-05-09 13:47:56 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-05-09 13:47:56 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-09 13:47:56 - app.services.vector_store - INFO - 集合 knowledge_base 已存在
2025-05-09 13:47:56 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections/knowledge_base "HTTP/1.1 200 OK"
2025-05-09 13:47:56 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-09 13:47:56 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-09 13:47:56 - app.routers.documents - INFO - 接收到文件上传请求: 线上诊断Arthas 15ff8eef777580839c4dcf2d552da527.md, 类型: text/markdown
2025-05-09 13:47:56 - app.routers.documents - INFO - 解析元数据: {"name":"线上诊断Arthas 15ff8eef777580839c4dcf2d552da527"}...
2025-05-09 13:47:56 - app.routers.documents - INFO - 开始处理上传的文件
2025-05-09 13:47:56 - app.utils.file_utils - INFO - 文件已保存到临时路径: /var/folders/gs/kbsr2cy55nz47p4hyrxbtg0r0000gn/T/tmptcj_vhr6.md
2025-05-09 13:47:56 - app.routers.documents - INFO - 文件已保存到临时路径: /var/folders/gs/kbsr2cy55nz47p4hyrxbtg0r0000gn/T/tmptcj_vhr6.md
2025-05-09 13:47:56 - app.services.document_service - INFO - 开始处理文件: 线上诊断Arthas 15ff8eef777580839c4dcf2d552da527.md, 内容类型: text/markdown
2025-05-09 13:47:56 - app.services.document_service - INFO - 文件大小: 13075 字节
2025-05-09 13:47:56 - app.services.document_service - INFO - 文件类型识别为: md
2025-05-09 13:47:56 - app.services.document_service - INFO - 文本文件类型: md，使用普通UTF-8解码
2025-05-09 13:47:56 - app.services.document_service - INFO - 准备创建文档记录
2025-05-09 13:47:56 - app.services.document_service - INFO - 创建文档: 线上诊断Arthas 15ff8eef777580839c4dcf2d552da527.md, 类型: md, 用户ID: 1
2025-05-09 13:47:56 - app.services.document_service - INFO - 文档创建成功: ID=37
2025-05-09 13:47:56 - app.services.task_service - INFO - 创建任务: 处理文档: 线上诊断Arthas 15ff8eef777580839c4dcf2d552da527.md, 类型: DOCUMENT_PROCESSING, 创建者: 1
2025-05-09 13:47:56 - app.services.task_service - INFO - 任务创建成功: 604ba116-925c-4ac9-8955-67ef86b9fa74
2025-05-09 13:47:56 - app.services.document_service - INFO - 更新文档状态: ID=37, 状态=processing
2025-05-09 13:47:56 - app.services.document_service - INFO - 文档状态已更新: ID=37, 状态=processing
2025-05-09 13:47:57 - app.routers.documents - INFO - 文件处理成功，文档ID: 37, 任务ID: 604ba116-925c-4ac9-8955-67ef86b9fa74
2025-05-09 13:47:57 - app.services.vector_store - INFO - 初始化向量存储服务
2025-05-09 13:47:57 - app.services.vector_store - INFO - 初始化向量存储服务
2025-05-09 13:47:57 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-09 13:47:57 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-09 13:47:57 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-09 13:47:57 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-09 13:47:57 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-09 13:47:57 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-09 13:47:57 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-09 13:47:57 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-09 13:47:57 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-05-09 13:47:57 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-05-09 13:47:57 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-05-09 13:47:57 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-05-09 13:47:57 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-09 13:47:57 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-09 13:47:57 - app.services.vector_store - INFO - 集合 knowledge_base 已存在
2025-05-09 13:47:57 - app.services.vector_store - INFO - 集合 knowledge_base 已存在
2025-05-09 13:47:57 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections/knowledge_base "HTTP/1.1 200 OK"
2025-05-09 13:47:57 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections/knowledge_base "HTTP/1.1 200 OK"
2025-05-09 13:47:57 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-09 13:47:57 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-09 13:47:57 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-09 13:47:57 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-09 13:47:57 - app.routers.websockets - WARNING - 任务 604ba116-925c-4ac9-8955-67ef86b9fa74 没有活跃的WebSocket连接，更新未发送
2025-05-09 13:47:57 - app.routers.websockets - WARNING - 任务 604ba116-925c-4ac9-8955-67ef86b9fa74 没有活跃的WebSocket连接，更新未发送
2025-05-09 13:47:57 - app.routers.websockets - WARNING - 任务 604ba116-925c-4ac9-8955-67ef86b9fa74 没有活跃的WebSocket连接，更新未发送
2025-05-09 13:47:58 - app.routers.websockets - WARNING - 任务 604ba116-925c-4ac9-8955-67ef86b9fa74 没有活跃的WebSocket连接，更新未发送
2025-05-09 13:47:58 - app.routers.websockets - WARNING - 任务 604ba116-925c-4ac9-8955-67ef86b9fa74 没有活跃的WebSocket连接，更新未发送
2025-05-09 13:47:58 - app.routers.websockets - WARNING - 任务 604ba116-925c-4ac9-8955-67ef86b9fa74 没有活跃的WebSocket连接，更新未发送
2025-05-09 13:47:58 - app.routers.websockets - WARNING - 任务 604ba116-925c-4ac9-8955-67ef86b9fa74 没有活跃的WebSocket连接，更新未发送
2025-05-09 13:47:58 - app.routers.websockets - WARNING - 任务 604ba116-925c-4ac9-8955-67ef86b9fa74 没有活跃的WebSocket连接，更新未发送
2025-05-09 13:47:58 - app.routers.websockets - WARNING - 任务 604ba116-925c-4ac9-8955-67ef86b9fa74 没有活跃的WebSocket连接，更新未发送
2025-05-09 13:47:58 - app.routers.websockets - WARNING - 任务 604ba116-925c-4ac9-8955-67ef86b9fa74 没有活跃的WebSocket连接，更新未发送
2025-05-09 13:47:58 - app.routers.websockets - WARNING - 任务 604ba116-925c-4ac9-8955-67ef86b9fa74 没有活跃的WebSocket连接，更新未发送
2025-05-09 13:48:15 - app.services.vector_store - INFO - 初始化向量存储服务
2025-05-09 13:48:15 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-09 13:48:15 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-09 13:48:15 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-09 13:48:15 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-09 13:48:15 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-05-09 13:48:15 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-05-09 13:48:15 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-09 13:48:15 - app.services.vector_store - INFO - 集合 knowledge_base 已存在
2025-05-09 13:48:15 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections/knowledge_base "HTTP/1.1 200 OK"
2025-05-09 13:48:15 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-09 13:48:15 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-09 13:48:15 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-09 13:48:15 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-09 13:48:15 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-09 13:48:15 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-09 13:48:15 - app.ws.connection_manager - ERROR - 建立WebSocket连接失败: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-09 13:49:38 - root - INFO - 日志系统初始化完成
2025-05-09 13:49:39 - app.main - INFO - 数据库表创建完成
2025-05-09 13:49:44 - root - INFO - 日志系统初始化完成
2025-05-09 13:49:44 - app.main - INFO - 数据库表创建完成
2025-05-09 13:49:44 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-09 13:49:44 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-09 13:49:44 - app.ws.connection_manager - ERROR - 建立WebSocket连接失败: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-09 13:49:44 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-09 13:49:44 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-09 13:49:44 - app.ws.connection_manager - ERROR - 建立WebSocket连接失败: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-09 13:49:55 - root - INFO - 日志系统初始化完成
2025-05-09 13:49:55 - app.main - INFO - 数据库表创建完成
2025-05-09 13:49:55 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-09 13:49:56 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-09 13:49:56 - app.ws.connection_manager - ERROR - 建立WebSocket连接失败: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-09 13:49:56 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-09 13:49:56 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-09 13:49:56 - app.ws.connection_manager - ERROR - 建立WebSocket连接失败: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-09 13:50:07 - root - INFO - 日志系统初始化完成
2025-05-09 13:50:08 - app.main - INFO - 数据库表创建完成
2025-05-09 13:50:08 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-09 13:50:08 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-09 13:50:08 - app.ws.connection_manager - ERROR - 建立WebSocket连接失败: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-09 13:50:08 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-09 13:50:08 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-09 13:50:08 - app.ws.connection_manager - ERROR - 建立WebSocket连接失败: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-09 13:51:21 - root - INFO - 日志系统初始化完成
2025-05-09 13:51:21 - app.main - INFO - 数据库表创建完成
2025-05-09 13:51:21 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-09 13:51:21 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-09 13:51:21 - app.ws.connection_manager - ERROR - 建立WebSocket连接失败: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-09 13:51:21 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-09 13:51:21 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-09 13:51:22 - app.ws.connection_manager - ERROR - 建立WebSocket连接失败: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-09 13:52:07 - app.services.vector_store - INFO - 初始化向量存储服务
2025-05-09 13:52:07 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-09 13:52:07 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-09 13:52:07 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-09 13:52:07 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-09 13:52:07 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-05-09 13:52:07 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-05-09 13:52:07 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-09 13:52:07 - app.services.vector_store - INFO - 集合 knowledge_base 已存在
2025-05-09 13:52:07 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections/knowledge_base "HTTP/1.1 200 OK"
2025-05-09 13:52:07 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-09 13:52:07 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-09 13:52:07 - app.routers.documents - INFO - 接收到文件上传请求: 线上诊断Arthas 15ff8eef777580839c4dcf2d552da527.md, 类型: text/markdown
2025-05-09 13:52:07 - app.routers.documents - INFO - 解析元数据: {"name":"线上诊断Arthas 15ff8eef777580839c4dcf2d552da527"}...
2025-05-09 13:52:07 - app.routers.documents - INFO - 开始处理上传的文件
2025-05-09 13:52:07 - app.utils.file_utils - INFO - 文件已保存到临时路径: /var/folders/gs/kbsr2cy55nz47p4hyrxbtg0r0000gn/T/tmp2w9u64hv.md
2025-05-09 13:52:07 - app.routers.documents - INFO - 文件已保存到临时路径: /var/folders/gs/kbsr2cy55nz47p4hyrxbtg0r0000gn/T/tmp2w9u64hv.md
2025-05-09 13:52:07 - app.services.document_service - INFO - 开始处理文件: 线上诊断Arthas 15ff8eef777580839c4dcf2d552da527.md, 内容类型: text/markdown
2025-05-09 13:52:07 - app.services.document_service - INFO - 文件大小: 13075 字节
2025-05-09 13:52:07 - app.services.document_service - INFO - 文件类型识别为: md
2025-05-09 13:52:07 - app.services.document_service - INFO - 文本文件类型: md，使用普通UTF-8解码
2025-05-09 13:52:07 - app.services.document_service - INFO - 准备创建文档记录
2025-05-09 13:52:07 - app.services.document_service - INFO - 创建文档: 线上诊断Arthas 15ff8eef777580839c4dcf2d552da527.md, 类型: md, 用户ID: 1
2025-05-09 13:52:07 - app.services.document_service - INFO - 文档创建成功: ID=38
2025-05-09 13:52:07 - app.services.task_service - INFO - 创建任务: 处理文档: 线上诊断Arthas 15ff8eef777580839c4dcf2d552da527.md, 类型: DOCUMENT_PROCESSING, 创建者: 1
2025-05-09 13:52:07 - app.services.task_service - INFO - 任务创建成功: 7e6c82b4-e0f2-442e-987f-105ef2e3b565
2025-05-09 13:52:07 - app.services.document_service - INFO - 更新文档状态: ID=38, 状态=processing
2025-05-09 13:52:07 - app.services.document_service - INFO - 文档状态已更新: ID=38, 状态=processing
2025-05-09 13:52:07 - app.routers.documents - INFO - 文件处理成功，文档ID: 38, 任务ID: 7e6c82b4-e0f2-442e-987f-105ef2e3b565
2025-05-09 13:52:08 - app.services.vector_store - INFO - 初始化向量存储服务
2025-05-09 13:52:08 - app.services.vector_store - INFO - 初始化向量存储服务
2025-05-09 13:52:08 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-09 13:52:08 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-09 13:52:08 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-09 13:52:08 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-09 13:52:08 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-09 13:52:08 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-09 13:52:08 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-09 13:52:08 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-09 13:52:08 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-05-09 13:52:08 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-05-09 13:52:08 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-05-09 13:52:08 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-05-09 13:52:08 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-09 13:52:08 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-09 13:52:08 - app.services.vector_store - INFO - 集合 knowledge_base 已存在
2025-05-09 13:52:08 - app.services.vector_store - INFO - 集合 knowledge_base 已存在
2025-05-09 13:52:08 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections/knowledge_base "HTTP/1.1 200 OK"
2025-05-09 13:52:08 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections/knowledge_base "HTTP/1.1 200 OK"
2025-05-09 13:52:08 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-09 13:52:08 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-09 13:52:08 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-09 13:52:08 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-09 13:52:08 - app.routers.websockets - WARNING - 任务 7e6c82b4-e0f2-442e-987f-105ef2e3b565 没有活跃的WebSocket连接，更新未发送
2025-05-09 13:52:08 - app.routers.websockets - WARNING - 任务 7e6c82b4-e0f2-442e-987f-105ef2e3b565 没有活跃的WebSocket连接，更新未发送
2025-05-09 13:52:08 - app.routers.websockets - WARNING - 任务 7e6c82b4-e0f2-442e-987f-105ef2e3b565 没有活跃的WebSocket连接，更新未发送
2025-05-09 13:52:09 - app.routers.websockets - WARNING - 任务 7e6c82b4-e0f2-442e-987f-105ef2e3b565 没有活跃的WebSocket连接，更新未发送
2025-05-09 13:52:09 - app.routers.websockets - WARNING - 任务 7e6c82b4-e0f2-442e-987f-105ef2e3b565 没有活跃的WebSocket连接，更新未发送
2025-05-09 13:52:09 - app.routers.websockets - WARNING - 任务 7e6c82b4-e0f2-442e-987f-105ef2e3b565 没有活跃的WebSocket连接，更新未发送
2025-05-09 13:52:09 - app.routers.websockets - WARNING - 任务 7e6c82b4-e0f2-442e-987f-105ef2e3b565 没有活跃的WebSocket连接，更新未发送
2025-05-09 13:52:09 - app.routers.websockets - WARNING - 任务 7e6c82b4-e0f2-442e-987f-105ef2e3b565 没有活跃的WebSocket连接，更新未发送
2025-05-09 13:52:09 - app.routers.websockets - WARNING - 任务 7e6c82b4-e0f2-442e-987f-105ef2e3b565 没有活跃的WebSocket连接，更新未发送
2025-05-09 13:52:09 - app.routers.websockets - WARNING - 任务 7e6c82b4-e0f2-442e-987f-105ef2e3b565 没有活跃的WebSocket连接，更新未发送
2025-05-09 13:52:09 - app.routers.websockets - WARNING - 任务 7e6c82b4-e0f2-442e-987f-105ef2e3b565 没有活跃的WebSocket连接，更新未发送
2025-05-09 13:52:10 - app.routers.websockets - WARNING - 任务 7e6c82b4-e0f2-442e-987f-105ef2e3b565 没有活跃的WebSocket连接，更新未发送
2025-05-09 13:52:10 - app.routers.websockets - WARNING - 任务 7e6c82b4-e0f2-442e-987f-105ef2e3b565 没有活跃的WebSocket连接，更新未发送
2025-05-09 13:52:10 - app.services.vector_store - INFO - 初始化向量存储服务
2025-05-09 13:52:10 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-09 13:52:10 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-09 13:52:10 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-09 13:52:10 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-09 13:52:10 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-05-09 13:52:10 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-05-09 13:52:10 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-09 13:52:10 - app.services.vector_store - INFO - 集合 knowledge_base 已存在
2025-05-09 13:52:10 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections/knowledge_base "HTTP/1.1 200 OK"
2025-05-09 13:52:10 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-09 13:52:10 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-09 13:52:10 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-09 13:52:10 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-09 13:52:10 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-09 13:52:10 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-09 13:52:10 - app.ws.connection_manager - ERROR - 建立WebSocket连接失败: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-09 13:53:42 - root - INFO - 日志系统初始化完成
2025-05-09 13:53:42 - app.main - INFO - 数据库表创建完成
2025-05-09 13:53:47 - root - INFO - 日志系统初始化完成
2025-05-09 13:53:47 - app.main - INFO - 数据库表创建完成
2025-05-09 13:53:47 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-09 13:53:48 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-09 13:53:48 - app.ws.connection_manager - ERROR - 建立WebSocket连接失败: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-09 13:53:48 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-09 13:53:48 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-09 13:53:48 - app.ws.connection_manager - ERROR - 建立WebSocket连接失败: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-09 13:53:48 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-09 13:53:48 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-09 13:53:48 - app.ws.connection_manager - ERROR - 建立WebSocket连接失败: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-09 13:54:29 - root - INFO - 日志系统初始化完成
2025-05-09 13:54:29 - app.main - INFO - 数据库表创建完成
2025-05-09 13:54:30 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-09 13:54:30 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-09 13:54:30 - app.ws.connection_manager - ERROR - 建立WebSocket连接失败: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-09 13:54:30 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-09 13:54:30 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-09 13:54:30 - app.ws.connection_manager - ERROR - 建立WebSocket连接失败: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-09 13:54:30 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-09 13:54:30 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-09 13:54:30 - app.ws.connection_manager - ERROR - 建立WebSocket连接失败: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-09 13:54:49 - root - INFO - 日志系统初始化完成
2025-05-09 13:54:49 - app.main - INFO - 数据库表创建完成
2025-05-09 13:54:49 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-09 13:54:49 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-09 13:54:49 - app.ws.connection_manager - ERROR - 建立WebSocket连接失败: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-09 13:54:49 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-09 13:54:49 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-09 13:54:49 - app.ws.connection_manager - ERROR - 建立WebSocket连接失败: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-09 13:54:49 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-09 13:54:49 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-09 13:54:49 - app.ws.connection_manager - ERROR - 建立WebSocket连接失败: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-09 13:55:08 - root - INFO - 日志系统初始化完成
2025-05-09 13:55:08 - app.main - INFO - 数据库表创建完成
2025-05-09 13:55:08 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-09 13:55:08 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-09 13:55:08 - app.ws.connection_manager - ERROR - 建立WebSocket连接失败: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-09 13:55:08 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-09 13:55:08 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-09 13:55:08 - app.ws.connection_manager - ERROR - 建立WebSocket连接失败: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-09 13:55:08 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-09 13:55:08 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-09 13:55:08 - app.ws.connection_manager - ERROR - 建立WebSocket连接失败: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-09 13:55:29 - root - INFO - 日志系统初始化完成
2025-05-09 13:55:30 - app.main - INFO - 数据库表创建完成
2025-05-09 13:55:30 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-09 13:55:30 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-09 13:55:30 - app.ws.connection_manager - ERROR - 建立WebSocket连接失败: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-09 13:55:30 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-09 13:55:30 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-09 13:55:30 - app.ws.connection_manager - ERROR - 建立WebSocket连接失败: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-09 13:55:30 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-09 13:55:30 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-09 13:55:30 - app.ws.connection_manager - ERROR - 建立WebSocket连接失败: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-09 14:00:10 - app.services.vector_store - INFO - 初始化向量存储服务
2025-05-09 14:00:10 - app.services.vector_store - INFO - 向量存储模式: 真实
2025-05-09 14:00:10 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-09 14:00:10 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-09 14:00:10 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-09 14:00:10 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-09 14:00:10 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-05-09 14:00:10 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-05-09 14:00:10 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-09 14:00:10 - app.services.vector_store - INFO - 集合 knowledge_base 已存在
2025-05-09 14:00:10 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections/knowledge_base "HTTP/1.1 200 OK"
2025-05-09 14:00:10 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-09 14:00:10 - app.services.vector_store - INFO - 成功初始化Qdrant客户端
2025-05-09 14:00:10 - app.services.vector_store - INFO - 使用嵌入模型: text-embedding-v1
2025-05-09 14:00:10 - app.services.vector_store - ERROR - 获取嵌入模型失败: No module named 'dashscope'
2025-05-09 14:00:10 - app.services.vector_store - ERROR - 初始化向量存储失败: QdrantVectorStore.__init__() got an unexpected keyword argument 'embeddings'
2025-05-09 14:00:10 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-09 14:00:10 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-09 14:00:10 - app.routers.documents - INFO - 接收到文件上传请求: 线上诊断Arthas 15ff8eef777580839c4dcf2d552da527.md, 类型: text/markdown
2025-05-09 14:00:10 - app.routers.documents - INFO - 解析元数据: {"name":"线上诊断Arthas 15ff8eef777580839c4dcf2d552da527"}...
2025-05-09 14:00:10 - app.routers.documents - INFO - 开始处理上传的文件
2025-05-09 14:00:10 - app.utils.file_utils - INFO - 文件已保存到临时路径: /var/folders/gs/kbsr2cy55nz47p4hyrxbtg0r0000gn/T/tmpv48rol9p.md
2025-05-09 14:00:10 - app.routers.documents - INFO - 文件已保存到临时路径: /var/folders/gs/kbsr2cy55nz47p4hyrxbtg0r0000gn/T/tmpv48rol9p.md
2025-05-09 14:00:10 - app.services.document_service - INFO - 开始处理文件: 线上诊断Arthas 15ff8eef777580839c4dcf2d552da527.md, 内容类型: text/markdown
2025-05-09 14:00:10 - app.services.document_service - INFO - 文件大小: 13075 字节
2025-05-09 14:00:10 - app.services.document_service - INFO - 文件类型识别为: md
2025-05-09 14:00:10 - app.services.document_service - INFO - 文本文件类型: md，使用普通UTF-8解码
2025-05-09 14:00:10 - app.services.document_service - INFO - 准备创建文档记录
2025-05-09 14:00:10 - app.services.document_service - INFO - 创建文档: 线上诊断Arthas 15ff8eef777580839c4dcf2d552da527.md, 类型: md, 用户ID: 1
2025-05-09 14:00:11 - app.services.document_service - INFO - 文档创建成功: ID=39
2025-05-09 14:00:11 - app.services.task_service - INFO - 创建任务: 处理文档: 线上诊断Arthas 15ff8eef777580839c4dcf2d552da527.md, 类型: DOCUMENT_PROCESSING, 创建者: 1
2025-05-09 14:00:11 - app.services.task_service - INFO - 任务创建成功: 5bd2e127-7137-4754-ab44-8695c15f7dd2
2025-05-09 14:00:11 - app.services.document_service - INFO - 更新文档状态: ID=39, 状态=processing
2025-05-09 14:00:11 - app.services.document_service - INFO - 文档状态已更新: ID=39, 状态=processing
2025-05-09 14:00:11 - app.routers.documents - INFO - 文件处理成功，文档ID: 39, 任务ID: 5bd2e127-7137-4754-ab44-8695c15f7dd2
2025-05-09 14:00:11 - app.services.vector_store - INFO - 初始化向量存储服务
2025-05-09 14:00:11 - app.services.vector_store - INFO - 初始化向量存储服务
2025-05-09 14:00:11 - app.services.vector_store - INFO - 向量存储模式: 真实
2025-05-09 14:00:11 - app.services.vector_store - INFO - 向量存储模式: 真实
2025-05-09 14:00:11 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-09 14:00:11 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-09 14:00:11 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-09 14:00:11 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-09 14:00:11 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-09 14:00:11 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-09 14:00:11 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-09 14:00:11 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-09 14:00:11 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-05-09 14:00:11 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-05-09 14:00:11 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-05-09 14:00:11 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-05-09 14:00:11 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-09 14:00:11 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-09 14:00:11 - app.services.vector_store - INFO - 集合 knowledge_base 已存在
2025-05-09 14:00:11 - app.services.vector_store - INFO - 集合 knowledge_base 已存在
2025-05-09 14:00:11 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections/knowledge_base "HTTP/1.1 200 OK"
2025-05-09 14:00:11 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections/knowledge_base "HTTP/1.1 200 OK"
2025-05-09 14:00:11 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-09 14:00:11 - app.services.vector_store - INFO - 成功初始化Qdrant客户端
2025-05-09 14:00:11 - app.services.vector_store - INFO - 使用嵌入模型: text-embedding-v1
2025-05-09 14:00:11 - app.services.vector_store - ERROR - 获取嵌入模型失败: No module named 'dashscope'
2025-05-09 14:00:11 - app.services.vector_store - ERROR - 初始化向量存储失败: QdrantVectorStore.__init__() got an unexpected keyword argument 'embeddings'
2025-05-09 14:00:11 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-09 14:00:11 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-09 14:00:11 - app.services.vector_store - INFO - 成功初始化Qdrant客户端
2025-05-09 14:00:11 - app.services.vector_store - INFO - 使用嵌入模型: text-embedding-v1
2025-05-09 14:00:11 - app.services.vector_store - ERROR - 获取嵌入模型失败: No module named 'dashscope'
2025-05-09 14:00:11 - app.services.vector_store - ERROR - 初始化向量存储失败: QdrantVectorStore.__init__() got an unexpected keyword argument 'embeddings'
2025-05-09 14:00:12 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-09 14:00:12 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-09 14:00:12 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-09 14:00:12 - app.routers.websockets - WARNING - 任务 5bd2e127-7137-4754-ab44-8695c15f7dd2 没有活跃的WebSocket连接，更新未发送
2025-05-09 14:00:12 - app.routers.websockets - WARNING - 任务 5bd2e127-7137-4754-ab44-8695c15f7dd2 没有活跃的WebSocket连接，更新未发送
2025-05-09 14:00:13 - app.routers.websockets - WARNING - 任务 5bd2e127-7137-4754-ab44-8695c15f7dd2 没有活跃的WebSocket连接，更新未发送
2025-05-09 14:00:13 - app.routers.websockets - WARNING - 任务 5bd2e127-7137-4754-ab44-8695c15f7dd2 没有活跃的WebSocket连接，更新未发送
2025-05-09 14:00:13 - app.routers.websockets - WARNING - 任务 5bd2e127-7137-4754-ab44-8695c15f7dd2 没有活跃的WebSocket连接，更新未发送
2025-05-09 14:00:13 - app.routers.websockets - WARNING - 任务 5bd2e127-7137-4754-ab44-8695c15f7dd2 没有活跃的WebSocket连接，更新未发送
2025-05-09 14:00:13 - app.routers.websockets - WARNING - 任务 5bd2e127-7137-4754-ab44-8695c15f7dd2 没有活跃的WebSocket连接，更新未发送
2025-05-09 14:00:13 - app.routers.websockets - WARNING - 任务 5bd2e127-7137-4754-ab44-8695c15f7dd2 没有活跃的WebSocket连接，更新未发送
2025-05-09 14:00:13 - app.routers.websockets - WARNING - 任务 5bd2e127-7137-4754-ab44-8695c15f7dd2 没有活跃的WebSocket连接，更新未发送
2025-05-09 14:00:13 - app.routers.websockets - WARNING - 任务 5bd2e127-7137-4754-ab44-8695c15f7dd2 没有活跃的WebSocket连接，更新未发送
2025-05-09 14:00:14 - app.routers.websockets - WARNING - 任务 5bd2e127-7137-4754-ab44-8695c15f7dd2 没有活跃的WebSocket连接，更新未发送
2025-05-09 14:00:14 - app.routers.websockets - WARNING - 任务 5bd2e127-7137-4754-ab44-8695c15f7dd2 没有活跃的WebSocket连接，更新未发送
2025-05-09 14:00:14 - app.routers.websockets - WARNING - 任务 5bd2e127-7137-4754-ab44-8695c15f7dd2 没有活跃的WebSocket连接，更新未发送
2025-05-09 14:00:14 - app.routers.websockets - WARNING - 任务 5bd2e127-7137-4754-ab44-8695c15f7dd2 没有活跃的WebSocket连接，更新未发送
2025-05-09 14:00:15 - app.services.vector_store - INFO - 初始化向量存储服务
2025-05-09 14:00:15 - app.services.vector_store - INFO - 向量存储模式: 真实
2025-05-09 14:00:15 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-09 14:00:15 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-09 14:00:15 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-09 14:00:15 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-09 14:00:15 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-05-09 14:00:15 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-05-09 14:00:15 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-09 14:00:15 - app.services.vector_store - INFO - 集合 knowledge_base 已存在
2025-05-09 14:00:15 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections/knowledge_base "HTTP/1.1 200 OK"
2025-05-09 14:00:15 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-09 14:00:15 - app.services.vector_store - INFO - 成功初始化Qdrant客户端
2025-05-09 14:00:15 - app.services.vector_store - INFO - 使用嵌入模型: text-embedding-v1
2025-05-09 14:00:15 - app.services.vector_store - ERROR - 获取嵌入模型失败: No module named 'dashscope'
2025-05-09 14:00:15 - app.services.vector_store - ERROR - 初始化向量存储失败: QdrantVectorStore.__init__() got an unexpected keyword argument 'embeddings'
2025-05-09 14:00:15 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-09 14:00:15 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-09 14:00:15 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-09 14:00:15 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-09 14:00:15 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-09 14:00:15 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-09 14:00:15 - app.ws.connection_manager - ERROR - 建立WebSocket连接失败: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-09 14:04:50 - root - INFO - 日志系统初始化完成
2025-05-09 14:04:51 - app.main - INFO - 数据库表创建完成
2025-05-09 14:04:51 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-09 14:04:51 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-09 14:04:51 - app.ws.connection_manager - ERROR - 建立WebSocket连接失败: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-09 14:04:51 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-09 14:04:51 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-09 14:04:51 - app.ws.connection_manager - ERROR - 建立WebSocket连接失败: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-09 14:04:51 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-09 14:04:51 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-09 14:04:51 - app.ws.connection_manager - ERROR - 建立WebSocket连接失败: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-09 14:04:51 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-09 14:04:51 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-09 14:04:51 - app.ws.connection_manager - ERROR - 建立WebSocket连接失败: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-09 14:05:01 - root - INFO - 日志系统初始化完成
2025-05-09 14:05:01 - app.main - INFO - 数据库表创建完成
2025-05-09 14:05:02 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-09 14:05:02 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-09 14:05:02 - app.ws.connection_manager - ERROR - 建立WebSocket连接失败: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-09 14:05:02 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-09 14:05:02 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-09 14:05:02 - app.ws.connection_manager - ERROR - 建立WebSocket连接失败: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-09 14:05:02 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-09 14:05:02 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-09 14:05:02 - app.ws.connection_manager - ERROR - 建立WebSocket连接失败: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-09 14:05:02 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-09 14:05:02 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-09 14:05:02 - app.ws.connection_manager - ERROR - 建立WebSocket连接失败: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-09 14:06:33 - app.services.vector_store - INFO - 初始化向量存储服务
2025-05-09 14:06:33 - app.services.vector_store - INFO - 向量存储模式: 真实
2025-05-09 14:06:33 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-09 14:06:33 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-09 14:06:33 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-09 14:06:33 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-09 14:06:33 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-05-09 14:06:33 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-05-09 14:06:33 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-09 14:06:33 - app.services.vector_store - INFO - 集合 knowledge_base 已存在
2025-05-09 14:06:33 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections/knowledge_base "HTTP/1.1 200 OK"
2025-05-09 14:06:33 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-09 14:06:33 - app.services.vector_store - INFO - 成功初始化Qdrant客户端
2025-05-09 14:06:33 - app.services.vector_store - ERROR - 获取嵌入模型失败: No module named 'dashscope'
2025-05-09 14:06:33 - app.services.vector_store - ERROR - 初始化向量存储失败: No module named 'dashscope'
2025-05-09 14:06:33 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-09 14:06:33 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-09 14:06:33 - app.routers.documents - INFO - 接收到文件上传请求: 线上诊断Arthas 15ff8eef777580839c4dcf2d552da527.md, 类型: text/markdown
2025-05-09 14:06:33 - app.routers.documents - INFO - 解析元数据: {"name":"线上诊断Arthas 15ff8eef777580839c4dcf2d552da527"}...
2025-05-09 14:06:33 - app.routers.documents - INFO - 开始处理上传的文件
2025-05-09 14:06:33 - app.utils.file_utils - INFO - 文件已保存到临时路径: /var/folders/gs/kbsr2cy55nz47p4hyrxbtg0r0000gn/T/tmpfggld53y.md
2025-05-09 14:06:33 - app.routers.documents - INFO - 文件已保存到临时路径: /var/folders/gs/kbsr2cy55nz47p4hyrxbtg0r0000gn/T/tmpfggld53y.md
2025-05-09 14:06:33 - app.services.document_service - INFO - 开始处理文件: 线上诊断Arthas 15ff8eef777580839c4dcf2d552da527.md, 内容类型: text/markdown
2025-05-09 14:06:33 - app.services.document_service - INFO - 文件大小: 13075 字节
2025-05-09 14:06:33 - app.services.document_service - INFO - 文件类型识别为: md
2025-05-09 14:06:33 - app.services.document_service - INFO - 文本文件类型: md，使用普通UTF-8解码
2025-05-09 14:06:33 - app.services.document_service - INFO - 准备创建文档记录
2025-05-09 14:06:33 - app.services.document_service - INFO - 创建文档: 线上诊断Arthas 15ff8eef777580839c4dcf2d552da527.md, 类型: md, 用户ID: 1
2025-05-09 14:06:34 - app.services.document_service - INFO - 文档创建成功: ID=40
2025-05-09 14:06:34 - app.services.task_service - INFO - 创建任务: 处理文档: 线上诊断Arthas 15ff8eef777580839c4dcf2d552da527.md, 类型: DOCUMENT_PROCESSING, 创建者: 1
2025-05-09 14:06:34 - app.services.task_service - INFO - 任务创建成功: 1b4eb6a2-5097-435c-9750-26a8fb3ca9d1
2025-05-09 14:06:34 - app.services.document_service - INFO - 更新文档状态: ID=40, 状态=processing
2025-05-09 14:06:34 - app.services.document_service - INFO - 文档状态已更新: ID=40, 状态=processing
2025-05-09 14:06:34 - app.routers.documents - INFO - 文件处理成功，文档ID: 40, 任务ID: 1b4eb6a2-5097-435c-9750-26a8fb3ca9d1
2025-05-09 14:06:34 - app.services.vector_store - INFO - 初始化向量存储服务
2025-05-09 14:06:34 - app.services.vector_store - INFO - 初始化向量存储服务
2025-05-09 14:06:34 - app.services.vector_store - INFO - 向量存储模式: 真实
2025-05-09 14:06:34 - app.services.vector_store - INFO - 向量存储模式: 真实
2025-05-09 14:06:34 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-09 14:06:34 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-09 14:06:34 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-09 14:06:34 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-09 14:06:34 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-09 14:06:34 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-09 14:06:34 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-09 14:06:34 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-05-09 14:06:34 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-05-09 14:06:34 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-09 14:06:34 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-05-09 14:06:34 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-05-09 14:06:34 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-09 14:06:34 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-09 14:06:34 - app.services.vector_store - INFO - 集合 knowledge_base 已存在
2025-05-09 14:06:34 - app.services.vector_store - INFO - 集合 knowledge_base 已存在
2025-05-09 14:06:34 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections/knowledge_base "HTTP/1.1 200 OK"
2025-05-09 14:06:34 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections/knowledge_base "HTTP/1.1 200 OK"
2025-05-09 14:06:34 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-09 14:06:34 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-09 14:06:34 - app.services.vector_store - INFO - 成功初始化Qdrant客户端
2025-05-09 14:06:34 - app.services.vector_store - INFO - 成功初始化Qdrant客户端
2025-05-09 14:06:34 - app.services.vector_store - ERROR - 获取嵌入模型失败: No module named 'dashscope'
2025-05-09 14:06:34 - app.services.vector_store - ERROR - 获取嵌入模型失败: No module named 'dashscope'
2025-05-09 14:06:34 - app.services.vector_store - ERROR - 初始化向量存储失败: No module named 'dashscope'
2025-05-09 14:06:34 - app.services.vector_store - ERROR - 初始化向量存储失败: No module named 'dashscope'
2025-05-09 14:06:34 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-09 14:06:34 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-09 14:06:34 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-09 14:06:34 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-09 14:06:34 - app.routers.websockets - WARNING - 任务 1b4eb6a2-5097-435c-9750-26a8fb3ca9d1 没有活跃的WebSocket连接，更新未发送
2025-05-09 14:06:35 - app.routers.websockets - WARNING - 任务 1b4eb6a2-5097-435c-9750-26a8fb3ca9d1 没有活跃的WebSocket连接，更新未发送
2025-05-09 14:06:35 - app.routers.websockets - WARNING - 任务 1b4eb6a2-5097-435c-9750-26a8fb3ca9d1 没有活跃的WebSocket连接，更新未发送
2025-05-09 14:06:35 - app.routers.websockets - WARNING - 任务 1b4eb6a2-5097-435c-9750-26a8fb3ca9d1 没有活跃的WebSocket连接，更新未发送
2025-05-09 14:06:35 - app.routers.websockets - WARNING - 任务 1b4eb6a2-5097-435c-9750-26a8fb3ca9d1 没有活跃的WebSocket连接，更新未发送
2025-05-09 14:06:35 - app.routers.websockets - WARNING - 任务 1b4eb6a2-5097-435c-9750-26a8fb3ca9d1 没有活跃的WebSocket连接，更新未发送
2025-05-09 14:06:35 - app.routers.websockets - WARNING - 任务 1b4eb6a2-5097-435c-9750-26a8fb3ca9d1 没有活跃的WebSocket连接，更新未发送
2025-05-09 14:06:35 - app.routers.websockets - WARNING - 任务 1b4eb6a2-5097-435c-9750-26a8fb3ca9d1 没有活跃的WebSocket连接，更新未发送
2025-05-09 14:06:35 - app.routers.websockets - WARNING - 任务 1b4eb6a2-5097-435c-9750-26a8fb3ca9d1 没有活跃的WebSocket连接，更新未发送
2025-05-09 14:06:36 - app.routers.websockets - WARNING - 任务 1b4eb6a2-5097-435c-9750-26a8fb3ca9d1 没有活跃的WebSocket连接，更新未发送
2025-05-09 14:06:36 - app.routers.websockets - WARNING - 任务 1b4eb6a2-5097-435c-9750-26a8fb3ca9d1 没有活跃的WebSocket连接，更新未发送
2025-05-09 14:06:36 - app.routers.websockets - WARNING - 任务 1b4eb6a2-5097-435c-9750-26a8fb3ca9d1 没有活跃的WebSocket连接，更新未发送
2025-05-09 14:06:36 - app.routers.websockets - WARNING - 任务 1b4eb6a2-5097-435c-9750-26a8fb3ca9d1 没有活跃的WebSocket连接，更新未发送
2025-05-09 14:06:36 - app.routers.websockets - WARNING - 任务 1b4eb6a2-5097-435c-9750-26a8fb3ca9d1 没有活跃的WebSocket连接，更新未发送
2025-05-09 14:06:37 - app.services.vector_store - INFO - 初始化向量存储服务
2025-05-09 14:06:37 - app.services.vector_store - INFO - 向量存储模式: 真实
2025-05-09 14:06:37 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-09 14:06:37 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-09 14:06:37 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-09 14:06:37 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-09 14:06:37 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-05-09 14:06:37 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-05-09 14:06:37 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-09 14:06:37 - app.services.vector_store - INFO - 集合 knowledge_base 已存在
2025-05-09 14:06:37 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections/knowledge_base "HTTP/1.1 200 OK"
2025-05-09 14:06:37 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-09 14:06:37 - app.services.vector_store - INFO - 成功初始化Qdrant客户端
2025-05-09 14:06:37 - app.services.vector_store - ERROR - 获取嵌入模型失败: No module named 'dashscope'
2025-05-09 14:06:37 - app.services.vector_store - ERROR - 初始化向量存储失败: No module named 'dashscope'
2025-05-09 14:06:37 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-09 14:06:37 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-09 14:06:37 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-09 14:06:37 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-09 14:06:37 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-09 14:06:37 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-09 14:06:37 - app.ws.connection_manager - ERROR - 建立WebSocket连接失败: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-09 14:07:15 - root - INFO - 日志系统初始化完成
2025-05-09 14:07:15 - app.main - INFO - 数据库表创建完成
2025-05-09 14:07:15 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-09 14:07:15 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-09 14:07:15 - app.ws.connection_manager - ERROR - 建立WebSocket连接失败: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-09 14:07:15 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-09 14:07:16 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-09 14:07:16 - app.ws.connection_manager - ERROR - 建立WebSocket连接失败: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-09 14:07:16 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-09 14:07:16 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-09 14:07:16 - app.ws.connection_manager - ERROR - 建立WebSocket连接失败: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-09 14:07:16 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-09 14:07:16 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-09 14:07:16 - app.ws.connection_manager - ERROR - 建立WebSocket连接失败: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-09 14:07:16 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-09 14:07:16 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-09 14:07:16 - app.ws.connection_manager - ERROR - 建立WebSocket连接失败: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-09 14:07:35 - root - INFO - 日志系统初始化完成
2025-05-09 14:07:35 - app.main - INFO - 数据库表创建完成
2025-05-09 14:07:36 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-09 14:07:37 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-09 14:07:37 - app.ws.connection_manager - ERROR - 建立WebSocket连接失败: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-09 14:07:37 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-09 14:07:37 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-09 14:07:37 - app.ws.connection_manager - ERROR - 建立WebSocket连接失败: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-09 14:07:37 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-09 14:07:37 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-09 14:07:37 - app.ws.connection_manager - ERROR - 建立WebSocket连接失败: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-09 14:07:37 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-09 14:07:37 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-09 14:07:37 - app.ws.connection_manager - ERROR - 建立WebSocket连接失败: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-09 14:07:37 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-09 14:07:37 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-09 14:07:37 - app.ws.connection_manager - ERROR - 建立WebSocket连接失败: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-09 14:08:05 - app.services.vector_store - INFO - 初始化向量存储服务
2025-05-09 14:08:05 - app.services.vector_store - INFO - 向量存储模式: 真实
2025-05-09 14:08:05 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-09 14:08:05 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-09 14:08:05 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-09 14:08:05 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-09 14:08:05 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-05-09 14:08:05 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-05-09 14:08:05 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-09 14:08:05 - app.services.vector_store - INFO - 集合 knowledge_base 已存在
2025-05-09 14:08:05 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections/knowledge_base "HTTP/1.1 200 OK"
2025-05-09 14:08:05 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-09 14:08:05 - app.services.vector_store - INFO - 成功初始化Qdrant客户端
2025-05-09 14:08:05 - app.services.vector_store - INFO - 成功初始化 DashScope 嵌入模型
2025-05-09 14:08:05 - app.services.vector_store - ERROR - 初始化向量存储失败: QdrantVectorStore.__init__() got an unexpected keyword argument 'embeddings'
2025-05-09 14:08:05 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-09 14:08:05 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-09 14:08:05 - app.routers.documents - INFO - 接收到文件上传请求: 线上诊断Arthas 15ff8eef777580839c4dcf2d552da527.md, 类型: text/markdown
2025-05-09 14:08:05 - app.routers.documents - INFO - 解析元数据: {"name":"线上诊断Arthas 15ff8eef777580839c4dcf2d552da527"}...
2025-05-09 14:08:05 - app.routers.documents - INFO - 开始处理上传的文件
2025-05-09 14:08:05 - app.utils.file_utils - INFO - 文件已保存到临时路径: /var/folders/gs/kbsr2cy55nz47p4hyrxbtg0r0000gn/T/tmptenw0d14.md
2025-05-09 14:08:05 - app.routers.documents - INFO - 文件已保存到临时路径: /var/folders/gs/kbsr2cy55nz47p4hyrxbtg0r0000gn/T/tmptenw0d14.md
2025-05-09 14:08:05 - app.services.document_service - INFO - 开始处理文件: 线上诊断Arthas 15ff8eef777580839c4dcf2d552da527.md, 内容类型: text/markdown
2025-05-09 14:08:05 - app.services.document_service - INFO - 文件大小: 13075 字节
2025-05-09 14:08:05 - app.services.document_service - INFO - 文件类型识别为: md
2025-05-09 14:08:05 - app.services.document_service - INFO - 文本文件类型: md，使用普通UTF-8解码
2025-05-09 14:08:05 - app.services.document_service - INFO - 准备创建文档记录
2025-05-09 14:08:05 - app.services.document_service - INFO - 创建文档: 线上诊断Arthas 15ff8eef777580839c4dcf2d552da527.md, 类型: md, 用户ID: 1
2025-05-09 14:08:06 - app.services.document_service - INFO - 文档创建成功: ID=41
2025-05-09 14:08:06 - app.services.task_service - INFO - 创建任务: 处理文档: 线上诊断Arthas 15ff8eef777580839c4dcf2d552da527.md, 类型: DOCUMENT_PROCESSING, 创建者: 1
2025-05-09 14:08:06 - app.services.task_service - INFO - 任务创建成功: 4c11e0e1-5c5f-4c37-ac5a-b87938a0d934
2025-05-09 14:08:06 - app.services.document_service - INFO - 更新文档状态: ID=41, 状态=processing
2025-05-09 14:08:06 - app.services.document_service - INFO - 文档状态已更新: ID=41, 状态=processing
2025-05-09 14:08:06 - app.routers.documents - INFO - 文件处理成功，文档ID: 41, 任务ID: 4c11e0e1-5c5f-4c37-ac5a-b87938a0d934
2025-05-09 14:08:06 - app.services.vector_store - INFO - 初始化向量存储服务
2025-05-09 14:08:06 - app.services.vector_store - INFO - 初始化向量存储服务
2025-05-09 14:08:06 - app.services.vector_store - INFO - 向量存储模式: 真实
2025-05-09 14:08:06 - app.services.vector_store - INFO - 向量存储模式: 真实
2025-05-09 14:08:06 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-09 14:08:06 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-09 14:08:06 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-09 14:08:06 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-09 14:08:06 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-09 14:08:06 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-09 14:08:06 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-09 14:08:06 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-09 14:08:06 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-05-09 14:08:06 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-05-09 14:08:06 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-05-09 14:08:06 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-05-09 14:08:06 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-09 14:08:06 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-09 14:08:06 - app.services.vector_store - INFO - 集合 knowledge_base 已存在
2025-05-09 14:08:06 - app.services.vector_store - INFO - 集合 knowledge_base 已存在
2025-05-09 14:08:06 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections/knowledge_base "HTTP/1.1 200 OK"
2025-05-09 14:08:06 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections/knowledge_base "HTTP/1.1 200 OK"
2025-05-09 14:08:06 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-09 14:08:06 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-09 14:08:06 - app.services.vector_store - INFO - 成功初始化Qdrant客户端
2025-05-09 14:08:06 - app.services.vector_store - INFO - 成功初始化Qdrant客户端
2025-05-09 14:08:06 - app.services.vector_store - INFO - 成功初始化 DashScope 嵌入模型
2025-05-09 14:08:06 - app.services.vector_store - INFO - 成功初始化 DashScope 嵌入模型
2025-05-09 14:08:06 - app.services.vector_store - ERROR - 初始化向量存储失败: QdrantVectorStore.__init__() got an unexpected keyword argument 'embeddings'
2025-05-09 14:08:06 - app.services.vector_store - ERROR - 初始化向量存储失败: QdrantVectorStore.__init__() got an unexpected keyword argument 'embeddings'
2025-05-09 14:08:06 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-09 14:08:06 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-09 14:08:06 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-09 14:08:06 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-09 14:08:07 - app.routers.websockets - WARNING - 任务 4c11e0e1-5c5f-4c37-ac5a-b87938a0d934 没有活跃的WebSocket连接，更新未发送
2025-05-09 14:08:07 - app.routers.websockets - WARNING - 任务 4c11e0e1-5c5f-4c37-ac5a-b87938a0d934 没有活跃的WebSocket连接，更新未发送
2025-05-09 14:08:07 - app.routers.websockets - WARNING - 任务 4c11e0e1-5c5f-4c37-ac5a-b87938a0d934 没有活跃的WebSocket连接，更新未发送
2025-05-09 14:08:07 - app.routers.websockets - WARNING - 任务 4c11e0e1-5c5f-4c37-ac5a-b87938a0d934 没有活跃的WebSocket连接，更新未发送
2025-05-09 14:08:07 - app.routers.websockets - WARNING - 任务 4c11e0e1-5c5f-4c37-ac5a-b87938a0d934 没有活跃的WebSocket连接，更新未发送
2025-05-09 14:08:07 - app.routers.websockets - WARNING - 任务 4c11e0e1-5c5f-4c37-ac5a-b87938a0d934 没有活跃的WebSocket连接，更新未发送
2025-05-09 14:08:07 - app.routers.websockets - WARNING - 任务 4c11e0e1-5c5f-4c37-ac5a-b87938a0d934 没有活跃的WebSocket连接，更新未发送
2025-05-09 14:08:08 - app.services.vector_store - INFO - 初始化向量存储服务
2025-05-09 14:08:08 - app.services.vector_store - INFO - 向量存储模式: 真实
2025-05-09 14:08:08 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-09 14:08:08 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-09 14:08:08 - app.routers.websockets - WARNING - 任务 4c11e0e1-5c5f-4c37-ac5a-b87938a0d934 没有活跃的WebSocket连接，更新未发送
2025-05-09 14:08:08 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-09 14:08:08 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-09 14:08:08 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-05-09 14:08:08 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-05-09 14:08:08 - app.routers.websockets - WARNING - 任务 4c11e0e1-5c5f-4c37-ac5a-b87938a0d934 没有活跃的WebSocket连接，更新未发送
2025-05-09 14:08:08 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-09 14:08:08 - app.services.vector_store - INFO - 集合 knowledge_base 已存在
2025-05-09 14:08:08 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections/knowledge_base "HTTP/1.1 200 OK"
2025-05-09 14:08:08 - app.routers.websockets - WARNING - 任务 4c11e0e1-5c5f-4c37-ac5a-b87938a0d934 没有活跃的WebSocket连接，更新未发送
2025-05-09 14:08:08 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-09 14:08:08 - app.services.vector_store - INFO - 成功初始化Qdrant客户端
2025-05-09 14:08:08 - app.services.vector_store - INFO - 成功初始化 DashScope 嵌入模型
2025-05-09 14:08:08 - app.services.vector_store - ERROR - 初始化向量存储失败: QdrantVectorStore.__init__() got an unexpected keyword argument 'embeddings'
2025-05-09 14:08:08 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-09 14:08:08 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-09 14:08:08 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-09 14:08:08 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-09 14:08:08 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-09 14:08:08 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-09 14:08:08 - app.ws.connection_manager - ERROR - 建立WebSocket连接失败: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-09 14:08:08 - app.routers.websockets - WARNING - 任务 4c11e0e1-5c5f-4c37-ac5a-b87938a0d934 没有活跃的WebSocket连接，更新未发送
2025-05-09 14:08:09 - app.routers.websockets - WARNING - 任务 4c11e0e1-5c5f-4c37-ac5a-b87938a0d934 没有活跃的WebSocket连接，更新未发送
2025-05-09 14:08:09 - app.routers.websockets - WARNING - 任务 4c11e0e1-5c5f-4c37-ac5a-b87938a0d934 没有活跃的WebSocket连接，更新未发送
2025-05-09 14:08:09 - app.routers.websockets - WARNING - 任务 4c11e0e1-5c5f-4c37-ac5a-b87938a0d934 没有活跃的WebSocket连接，更新未发送
2025-05-09 14:08:54 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-09 14:08:54 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-09 14:08:55 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-09 14:08:55 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-09 14:16:41 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-09 14:16:41 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-09 14:16:41 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-09 14:16:41 - app.services.vector_store - INFO - 初始化向量存储服务
2025-05-09 14:16:41 - app.services.vector_store - INFO - 向量存储模式: 真实
2025-05-09 14:16:41 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-09 14:16:41 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-09 14:16:41 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-09 14:16:41 - app.services.vector_store - INFO - 初始化向量存储服务
2025-05-09 14:16:41 - app.services.vector_store - INFO - 向量存储模式: 真实
2025-05-09 14:16:41 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-09 14:16:41 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-09 14:16:41 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-09 14:16:41 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-09 14:16:41 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-09 14:16:41 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-05-09 14:16:41 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-05-09 14:16:41 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-09 14:16:41 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-05-09 14:16:41 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-05-09 14:16:41 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-09 14:16:41 - app.services.vector_store - INFO - 集合 knowledge_base 已存在
2025-05-09 14:16:41 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-09 14:16:41 - app.services.vector_store - INFO - 集合 knowledge_base 已存在
2025-05-09 14:16:41 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections/knowledge_base "HTTP/1.1 200 OK"
2025-05-09 14:16:41 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections/knowledge_base "HTTP/1.1 200 OK"
2025-05-09 14:16:41 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-09 14:16:41 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-09 14:16:41 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-09 14:16:41 - app.services.vector_store - INFO - 成功初始化Qdrant客户端
2025-05-09 14:16:41 - app.services.vector_store - INFO - 成功初始化 DashScope 嵌入模型
2025-05-09 14:16:41 - app.services.vector_store - INFO - 成功初始化Qdrant客户端
2025-05-09 14:16:41 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-09 14:16:41 - app.services.vector_store - ERROR - 初始化向量存储失败: QdrantVectorStore.__init__() got an unexpected keyword argument 'embeddings'
2025-05-09 14:16:41 - app.services.vector_store - INFO - 成功初始化 DashScope 嵌入模型
2025-05-09 14:16:41 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-09 14:16:41 - app.services.vector_store - ERROR - 初始化向量存储失败: QdrantVectorStore.__init__() got an unexpected keyword argument 'embeddings'
2025-05-09 14:16:41 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-09 14:16:41 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-09 14:16:41 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-09 14:16:44 - app.services.vector_store - INFO - 初始化向量存储服务
2025-05-09 14:16:44 - app.services.vector_store - INFO - 向量存储模式: 真实
2025-05-09 14:16:44 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-09 14:16:44 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-09 14:16:44 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-09 14:16:44 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-09 14:16:44 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-05-09 14:16:44 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-05-09 14:16:44 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-09 14:16:44 - app.services.vector_store - INFO - 集合 knowledge_base 已存在
2025-05-09 14:16:44 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections/knowledge_base "HTTP/1.1 200 OK"
2025-05-09 14:16:44 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-09 14:16:44 - app.services.vector_store - INFO - 成功初始化Qdrant客户端
2025-05-09 14:16:44 - app.services.vector_store - INFO - 成功初始化 DashScope 嵌入模型
2025-05-09 14:16:44 - app.services.vector_store - ERROR - 初始化向量存储失败: QdrantVectorStore.__init__() got an unexpected keyword argument 'embeddings'
2025-05-09 14:16:44 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-09 14:16:44 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-09 14:16:51 - app.services.vector_store - INFO - 初始化向量存储服务
2025-05-09 14:16:51 - app.services.vector_store - INFO - 向量存储模式: 真实
2025-05-09 14:16:51 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-09 14:16:51 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-09 14:16:51 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-09 14:16:51 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-09 14:16:51 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-05-09 14:16:51 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-05-09 14:16:51 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-09 14:16:51 - app.services.vector_store - INFO - 集合 knowledge_base 已存在
2025-05-09 14:16:51 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections/knowledge_base "HTTP/1.1 200 OK"
2025-05-09 14:16:52 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-09 14:16:52 - app.services.vector_store - INFO - 成功初始化Qdrant客户端
2025-05-09 14:16:52 - app.services.vector_store - INFO - 成功初始化 DashScope 嵌入模型
2025-05-09 14:16:52 - app.services.vector_store - ERROR - 初始化向量存储失败: QdrantVectorStore.__init__() got an unexpected keyword argument 'embeddings'
2025-05-09 14:16:52 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-09 14:16:52 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-09 14:16:52 - app.routers.documents - INFO - 接收到文件上传请求: 线上诊断Arthas 15ff8eef777580839c4dcf2d552da527.md, 类型: text/markdown
2025-05-09 14:16:52 - app.routers.documents - INFO - 解析元数据: {"name":"线上诊断Arthas 15ff8eef777580839c4dcf2d552da527"}...
2025-05-09 14:16:52 - app.routers.documents - INFO - 开始处理上传的文件
2025-05-09 14:16:52 - app.utils.file_utils - INFO - 文件已保存到临时路径: /var/folders/gs/kbsr2cy55nz47p4hyrxbtg0r0000gn/T/tmpunqto9c7.md
2025-05-09 14:16:52 - app.routers.documents - INFO - 文件已保存到临时路径: /var/folders/gs/kbsr2cy55nz47p4hyrxbtg0r0000gn/T/tmpunqto9c7.md
2025-05-09 14:16:52 - app.services.document_service - INFO - 开始处理文件: 线上诊断Arthas 15ff8eef777580839c4dcf2d552da527.md, 内容类型: text/markdown
2025-05-09 14:16:52 - app.services.document_service - INFO - 文件大小: 13075 字节
2025-05-09 14:16:52 - app.services.document_service - INFO - 文件类型识别为: md
2025-05-09 14:16:52 - app.services.document_service - INFO - 文本文件类型: md，使用普通UTF-8解码
2025-05-09 14:16:52 - app.services.document_service - INFO - 准备创建文档记录
2025-05-09 14:16:52 - app.services.document_service - INFO - 创建文档: 线上诊断Arthas 15ff8eef777580839c4dcf2d552da527.md, 类型: md, 用户ID: 1
2025-05-09 14:16:52 - app.services.document_service - INFO - 文档创建成功: ID=42
2025-05-09 14:16:52 - app.services.task_service - INFO - 创建任务: 处理文档: 线上诊断Arthas 15ff8eef777580839c4dcf2d552da527.md, 类型: DOCUMENT_PROCESSING, 创建者: 1
2025-05-09 14:16:52 - app.services.task_service - INFO - 任务创建成功: 431e4709-c896-4854-8f0c-ca7355169310
2025-05-09 14:16:52 - app.services.document_service - INFO - 更新文档状态: ID=42, 状态=processing
2025-05-09 14:16:52 - app.services.document_service - INFO - 文档状态已更新: ID=42, 状态=processing
2025-05-09 14:16:52 - app.routers.documents - INFO - 文件处理成功，文档ID: 42, 任务ID: 431e4709-c896-4854-8f0c-ca7355169310
2025-05-09 14:16:52 - app.services.vector_store - INFO - 初始化向量存储服务
2025-05-09 14:16:52 - app.services.vector_store - INFO - 初始化向量存储服务
2025-05-09 14:16:52 - app.services.vector_store - INFO - 向量存储模式: 真实
2025-05-09 14:16:52 - app.services.vector_store - INFO - 向量存储模式: 真实
2025-05-09 14:16:52 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-09 14:16:52 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-09 14:16:52 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-09 14:16:52 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-09 14:16:52 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-09 14:16:52 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-09 14:16:52 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-09 14:16:52 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-09 14:16:52 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-05-09 14:16:52 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-05-09 14:16:52 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-05-09 14:16:52 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-05-09 14:16:52 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-09 14:16:52 - app.services.vector_store - INFO - 集合 knowledge_base 已存在
2025-05-09 14:16:52 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-09 14:16:52 - app.services.vector_store - INFO - 集合 knowledge_base 已存在
2025-05-09 14:16:52 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections/knowledge_base "HTTP/1.1 200 OK"
2025-05-09 14:16:52 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections/knowledge_base "HTTP/1.1 200 OK"
2025-05-09 14:16:52 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-09 14:16:52 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-09 14:16:52 - app.services.vector_store - INFO - 成功初始化Qdrant客户端
2025-05-09 14:16:52 - app.services.vector_store - INFO - 成功初始化Qdrant客户端
2025-05-09 14:16:52 - app.services.vector_store - INFO - 成功初始化 DashScope 嵌入模型
2025-05-09 14:16:52 - app.services.vector_store - INFO - 成功初始化 DashScope 嵌入模型
2025-05-09 14:16:52 - app.services.vector_store - ERROR - 初始化向量存储失败: QdrantVectorStore.__init__() got an unexpected keyword argument 'embeddings'
2025-05-09 14:16:52 - app.services.vector_store - ERROR - 初始化向量存储失败: QdrantVectorStore.__init__() got an unexpected keyword argument 'embeddings'
2025-05-09 14:16:52 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-09 14:16:52 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-09 14:16:52 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-09 14:16:52 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-09 14:16:53 - app.routers.websockets - WARNING - 任务 431e4709-c896-4854-8f0c-ca7355169310 没有活跃的WebSocket连接，更新未发送
2025-05-09 14:16:53 - app.routers.websockets - WARNING - 任务 431e4709-c896-4854-8f0c-ca7355169310 没有活跃的WebSocket连接，更新未发送
2025-05-09 14:16:53 - app.routers.websockets - WARNING - 任务 431e4709-c896-4854-8f0c-ca7355169310 没有活跃的WebSocket连接，更新未发送
2025-05-09 14:16:53 - app.routers.websockets - WARNING - 任务 431e4709-c896-4854-8f0c-ca7355169310 没有活跃的WebSocket连接，更新未发送
2025-05-09 14:16:53 - app.routers.websockets - WARNING - 任务 431e4709-c896-4854-8f0c-ca7355169310 没有活跃的WebSocket连接，更新未发送
2025-05-09 14:16:53 - app.routers.websockets - WARNING - 任务 431e4709-c896-4854-8f0c-ca7355169310 没有活跃的WebSocket连接，更新未发送
2025-05-09 14:16:53 - app.routers.websockets - WARNING - 任务 431e4709-c896-4854-8f0c-ca7355169310 没有活跃的WebSocket连接，更新未发送
2025-05-09 14:16:53 - app.services.vector_store - INFO - 初始化向量存储服务
2025-05-09 14:16:53 - app.services.vector_store - INFO - 向量存储模式: 真实
2025-05-09 14:16:53 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-09 14:16:53 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-09 14:16:54 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-09 14:16:54 - app.routers.websockets - WARNING - 任务 431e4709-c896-4854-8f0c-ca7355169310 没有活跃的WebSocket连接，更新未发送
2025-05-09 14:16:54 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-09 14:16:54 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-05-09 14:16:54 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-05-09 14:16:54 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-09 14:16:54 - app.services.vector_store - INFO - 集合 knowledge_base 已存在
2025-05-09 14:16:54 - app.routers.websockets - WARNING - 任务 431e4709-c896-4854-8f0c-ca7355169310 没有活跃的WebSocket连接，更新未发送
2025-05-09 14:16:54 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections/knowledge_base "HTTP/1.1 200 OK"
2025-05-09 14:16:54 - app.routers.websockets - WARNING - 任务 431e4709-c896-4854-8f0c-ca7355169310 没有活跃的WebSocket连接，更新未发送
2025-05-09 14:16:54 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-09 14:16:54 - app.services.vector_store - INFO - 成功初始化Qdrant客户端
2025-05-09 14:16:54 - app.services.vector_store - INFO - 成功初始化 DashScope 嵌入模型
2025-05-09 14:16:54 - app.services.vector_store - ERROR - 初始化向量存储失败: QdrantVectorStore.__init__() got an unexpected keyword argument 'embeddings'
2025-05-09 14:16:54 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-09 14:16:54 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-09 14:16:54 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-09 14:16:54 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-09 14:16:54 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-09 14:16:54 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-09 14:16:54 - app.ws.connection_manager - ERROR - 建立WebSocket连接失败: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-09 14:16:54 - app.routers.websockets - WARNING - 任务 431e4709-c896-4854-8f0c-ca7355169310 没有活跃的WebSocket连接，更新未发送
2025-05-09 14:16:54 - app.routers.websockets - WARNING - 任务 431e4709-c896-4854-8f0c-ca7355169310 没有活跃的WebSocket连接，更新未发送
2025-05-09 14:16:55 - app.routers.websockets - WARNING - 任务 431e4709-c896-4854-8f0c-ca7355169310 没有活跃的WebSocket连接，更新未发送
2025-05-09 14:16:55 - app.routers.websockets - WARNING - 任务 431e4709-c896-4854-8f0c-ca7355169310 没有活跃的WebSocket连接，更新未发送
2025-05-09 14:22:23 - app.services.vector_store - INFO - 初始化向量存储服务
2025-05-09 14:22:23 - app.services.vector_store - INFO - 向量存储模式: 真实
2025-05-09 14:22:23 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-09 14:22:23 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-09 14:22:23 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-09 14:22:23 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-09 14:22:23 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-05-09 14:22:23 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-05-09 14:22:23 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-09 14:22:23 - app.services.vector_store - INFO - 集合 knowledge_base 已存在
2025-05-09 14:22:23 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections/knowledge_base "HTTP/1.1 200 OK"
2025-05-09 14:22:24 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-09 14:22:24 - app.services.vector_store - INFO - 成功初始化Qdrant客户端
2025-05-09 14:22:24 - app.services.vector_store - INFO - 成功初始化 DashScope 嵌入模型
2025-05-09 14:22:24 - app.services.vector_store - ERROR - 初始化向量存储失败: QdrantVectorStore.__init__() got an unexpected keyword argument 'embeddings'
2025-05-09 14:22:24 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-09 14:22:24 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-09 14:22:24 - app.routers.documents - INFO - 接收到文件上传请求: 线上诊断Arthas 15ff8eef777580839c4dcf2d552da527.md, 类型: text/markdown
2025-05-09 14:22:24 - app.routers.documents - INFO - 解析元数据: {"name":"线上诊断Arthas 15ff8eef777580839c4dcf2d552da527"}...
2025-05-09 14:22:24 - app.routers.documents - INFO - 开始处理上传的文件
2025-05-09 14:22:24 - app.utils.file_utils - INFO - 文件已保存到临时路径: /var/folders/gs/kbsr2cy55nz47p4hyrxbtg0r0000gn/T/tmph4vde4ci.md
2025-05-09 14:22:24 - app.routers.documents - INFO - 文件已保存到临时路径: /var/folders/gs/kbsr2cy55nz47p4hyrxbtg0r0000gn/T/tmph4vde4ci.md
2025-05-09 14:22:24 - app.services.document_service - INFO - 开始处理文件: 线上诊断Arthas 15ff8eef777580839c4dcf2d552da527.md, 内容类型: text/markdown
2025-05-09 14:22:24 - app.services.document_service - INFO - 文件大小: 13075 字节
2025-05-09 14:22:24 - app.services.document_service - INFO - 文件类型识别为: md
2025-05-09 14:22:24 - app.services.document_service - INFO - 文本文件类型: md，使用普通UTF-8解码
2025-05-09 14:22:24 - app.services.document_service - INFO - 准备创建文档记录
2025-05-09 14:22:24 - app.services.document_service - INFO - 创建文档: 线上诊断Arthas 15ff8eef777580839c4dcf2d552da527.md, 类型: md, 用户ID: 1
2025-05-09 14:22:24 - app.services.document_service - INFO - 文档创建成功: ID=43
2025-05-09 14:22:24 - app.services.task_service - INFO - 创建任务: 处理文档: 线上诊断Arthas 15ff8eef777580839c4dcf2d552da527.md, 类型: DOCUMENT_PROCESSING, 创建者: 1
2025-05-09 14:22:24 - app.services.task_service - INFO - 任务创建成功: 2d69ea22-b626-4374-a762-3f8d2b30f9eb
2025-05-09 14:22:24 - app.services.document_service - INFO - 更新文档状态: ID=43, 状态=processing
2025-05-09 14:22:24 - app.services.document_service - INFO - 文档状态已更新: ID=43, 状态=processing
2025-05-09 14:22:24 - app.routers.documents - INFO - 文件处理成功，文档ID: 43, 任务ID: 2d69ea22-b626-4374-a762-3f8d2b30f9eb
2025-05-09 14:22:24 - app.services.vector_store - INFO - 初始化向量存储服务
2025-05-09 14:22:24 - app.services.vector_store - INFO - 初始化向量存储服务
2025-05-09 14:22:24 - app.services.vector_store - INFO - 向量存储模式: 真实
2025-05-09 14:22:24 - app.services.vector_store - INFO - 向量存储模式: 真实
2025-05-09 14:22:24 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-09 14:22:24 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-09 14:22:24 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-09 14:22:24 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-09 14:22:24 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-09 14:22:24 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-09 14:22:24 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-09 14:22:24 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-09 14:22:24 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-05-09 14:22:24 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-05-09 14:22:24 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-05-09 14:22:24 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-05-09 14:22:24 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-09 14:22:24 - app.services.vector_store - INFO - 集合 knowledge_base 已存在
2025-05-09 14:22:24 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-09 14:22:24 - app.services.vector_store - INFO - 集合 knowledge_base 已存在
2025-05-09 14:22:24 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections/knowledge_base "HTTP/1.1 200 OK"
2025-05-09 14:22:24 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections/knowledge_base "HTTP/1.1 200 OK"
2025-05-09 14:22:24 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-09 14:22:24 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-09 14:22:24 - app.services.vector_store - INFO - 成功初始化Qdrant客户端
2025-05-09 14:22:24 - app.services.vector_store - INFO - 成功初始化Qdrant客户端
2025-05-09 14:22:24 - app.services.vector_store - INFO - 成功初始化 DashScope 嵌入模型
2025-05-09 14:22:24 - app.services.vector_store - INFO - 成功初始化 DashScope 嵌入模型
2025-05-09 14:22:24 - app.services.vector_store - ERROR - 初始化向量存储失败: QdrantVectorStore.__init__() got an unexpected keyword argument 'embeddings'
2025-05-09 14:22:24 - app.services.vector_store - ERROR - 初始化向量存储失败: QdrantVectorStore.__init__() got an unexpected keyword argument 'embeddings'
2025-05-09 14:22:24 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-09 14:22:24 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-09 14:22:24 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-09 14:22:24 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-09 14:22:25 - app.routers.websockets - WARNING - 任务 2d69ea22-b626-4374-a762-3f8d2b30f9eb 没有活跃的WebSocket连接，更新未发送
2025-05-09 14:22:25 - app.routers.websockets - WARNING - 任务 2d69ea22-b626-4374-a762-3f8d2b30f9eb 没有活跃的WebSocket连接，更新未发送
2025-05-09 14:22:25 - app.routers.websockets - WARNING - 任务 2d69ea22-b626-4374-a762-3f8d2b30f9eb 没有活跃的WebSocket连接，更新未发送
2025-05-09 14:22:25 - app.routers.websockets - WARNING - 任务 2d69ea22-b626-4374-a762-3f8d2b30f9eb 没有活跃的WebSocket连接，更新未发送
2025-05-09 14:22:25 - app.routers.websockets - WARNING - 任务 2d69ea22-b626-4374-a762-3f8d2b30f9eb 没有活跃的WebSocket连接，更新未发送
2025-05-09 14:22:25 - app.routers.websockets - WARNING - 任务 2d69ea22-b626-4374-a762-3f8d2b30f9eb 没有活跃的WebSocket连接，更新未发送
2025-05-09 14:22:25 - app.routers.websockets - WARNING - 任务 2d69ea22-b626-4374-a762-3f8d2b30f9eb 没有活跃的WebSocket连接，更新未发送
2025-05-09 14:22:26 - app.routers.websockets - WARNING - 任务 2d69ea22-b626-4374-a762-3f8d2b30f9eb 没有活跃的WebSocket连接，更新未发送
2025-05-09 14:22:26 - app.routers.websockets - WARNING - 任务 2d69ea22-b626-4374-a762-3f8d2b30f9eb 没有活跃的WebSocket连接，更新未发送
2025-05-09 14:22:26 - app.routers.websockets - WARNING - 任务 2d69ea22-b626-4374-a762-3f8d2b30f9eb 没有活跃的WebSocket连接，更新未发送
2025-05-09 14:22:26 - app.routers.websockets - WARNING - 任务 2d69ea22-b626-4374-a762-3f8d2b30f9eb 没有活跃的WebSocket连接，更新未发送
2025-05-09 14:22:26 - app.routers.websockets - WARNING - 任务 2d69ea22-b626-4374-a762-3f8d2b30f9eb 没有活跃的WebSocket连接，更新未发送
2025-05-09 14:22:27 - app.routers.websockets - WARNING - 任务 2d69ea22-b626-4374-a762-3f8d2b30f9eb 没有活跃的WebSocket连接，更新未发送
2025-05-09 14:22:27 - app.routers.websockets - WARNING - 任务 2d69ea22-b626-4374-a762-3f8d2b30f9eb 没有活跃的WebSocket连接，更新未发送
2025-05-09 14:27:19 - root - INFO - 日志系统初始化完成
2025-05-09 14:27:19 - app.main - INFO - 数据库表创建完成
2025-05-09 14:27:19 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-09 14:27:19 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-09 14:27:19 - app.ws.connection_manager - ERROR - 建立WebSocket连接失败: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-09 14:28:20 - root - INFO - 日志系统初始化完成
2025-05-09 14:28:21 - app.main - INFO - 数据库表创建完成
2025-05-09 14:28:26 - root - INFO - 日志系统初始化完成
2025-05-09 14:28:27 - app.main - INFO - 数据库表创建完成
2025-05-09 14:28:27 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-09 14:28:27 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-09 14:28:27 - app.ws.connection_manager - ERROR - 建立WebSocket连接失败: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-09 14:28:41 - app.services.vector_store - INFO - 初始化向量存储服务
2025-05-09 14:28:41 - app.services.vector_store - INFO - 向量存储模式: 真实
2025-05-09 14:28:41 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-09 14:28:41 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-09 14:28:41 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-09 14:28:41 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-09 14:28:41 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-05-09 14:28:41 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-05-09 14:28:42 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-09 14:28:42 - app.services.vector_store - INFO - 集合 knowledge_base 已存在
2025-05-09 14:28:42 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections/knowledge_base "HTTP/1.1 200 OK"
2025-05-09 14:28:42 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-09 14:28:42 - app.services.vector_store - INFO - 成功初始化Qdrant客户端
2025-05-09 14:28:42 - app.services.vector_store - INFO - 成功初始化 DashScope 嵌入模型
2025-05-09 14:28:42 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections/knowledge_base "HTTP/1.1 200 OK"
2025-05-09 14:28:42 - app.services.vector_store - ERROR - 初始化向量存储失败: 'request'
2025-05-09 14:28:42 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-09 14:28:42 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-09 14:28:42 - app.routers.documents - INFO - 接收到文件上传请求: 线上诊断Arthas 15ff8eef777580839c4dcf2d552da527.md, 类型: text/markdown
2025-05-09 14:28:42 - app.routers.documents - INFO - 解析元数据: {"name":"线上诊断Arthas 15ff8eef777580839c4dcf2d552da527"}...
2025-05-09 14:28:42 - app.routers.documents - INFO - 开始处理上传的文件
2025-05-09 14:28:42 - app.utils.file_utils - INFO - 文件已保存到临时路径: /var/folders/gs/kbsr2cy55nz47p4hyrxbtg0r0000gn/T/tmpb5c1tc3g.md
2025-05-09 14:28:42 - app.routers.documents - INFO - 文件已保存到临时路径: /var/folders/gs/kbsr2cy55nz47p4hyrxbtg0r0000gn/T/tmpb5c1tc3g.md
2025-05-09 14:28:42 - app.services.document_service - INFO - 开始处理文件: 线上诊断Arthas 15ff8eef777580839c4dcf2d552da527.md, 内容类型: text/markdown
2025-05-09 14:28:42 - app.services.document_service - INFO - 文件大小: 13075 字节
2025-05-09 14:28:42 - app.services.document_service - INFO - 文件类型识别为: md
2025-05-09 14:28:42 - app.services.document_service - INFO - 文本文件类型: md，使用普通UTF-8解码
2025-05-09 14:28:42 - app.services.document_service - INFO - 准备创建文档记录
2025-05-09 14:28:42 - app.services.document_service - INFO - 创建文档: 线上诊断Arthas 15ff8eef777580839c4dcf2d552da527.md, 类型: md, 用户ID: 1
2025-05-09 14:28:42 - app.services.document_service - INFO - 文档创建成功: ID=44
2025-05-09 14:28:42 - app.services.task_service - INFO - 创建任务: 处理文档: 线上诊断Arthas 15ff8eef777580839c4dcf2d552da527.md, 类型: DOCUMENT_PROCESSING, 创建者: 1
2025-05-09 14:28:42 - app.services.task_service - INFO - 任务创建成功: ce822048-9d8a-44b9-87e6-50fa111b0b4b
2025-05-09 14:28:42 - app.services.document_service - INFO - 更新文档状态: ID=44, 状态=processing
2025-05-09 14:28:42 - app.services.document_service - INFO - 文档状态已更新: ID=44, 状态=processing
2025-05-09 14:28:42 - app.routers.documents - INFO - 文件处理成功，文档ID: 44, 任务ID: ce822048-9d8a-44b9-87e6-50fa111b0b4b
2025-05-09 14:28:42 - app.services.vector_store - INFO - 初始化向量存储服务
2025-05-09 14:28:42 - app.services.vector_store - INFO - 初始化向量存储服务
2025-05-09 14:28:42 - app.services.vector_store - INFO - 向量存储模式: 真实
2025-05-09 14:28:42 - app.services.vector_store - INFO - 向量存储模式: 真实
2025-05-09 14:28:42 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-09 14:28:42 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-09 14:28:42 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-09 14:28:42 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-09 14:28:42 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-09 14:28:42 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-09 14:28:42 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-09 14:28:42 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-09 14:28:42 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-05-09 14:28:42 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-05-09 14:28:42 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-05-09 14:28:42 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-05-09 14:28:42 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-09 14:28:42 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-09 14:28:42 - app.services.vector_store - INFO - 集合 knowledge_base 已存在
2025-05-09 14:28:42 - app.services.vector_store - INFO - 集合 knowledge_base 已存在
2025-05-09 14:28:43 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections/knowledge_base "HTTP/1.1 200 OK"
2025-05-09 14:28:43 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections/knowledge_base "HTTP/1.1 200 OK"
2025-05-09 14:28:43 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-09 14:28:43 - app.services.vector_store - INFO - 成功初始化Qdrant客户端
2025-05-09 14:28:43 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-09 14:28:43 - app.services.vector_store - INFO - 成功初始化 DashScope 嵌入模型
2025-05-09 14:28:43 - app.services.vector_store - INFO - 成功初始化Qdrant客户端
2025-05-09 14:28:43 - app.services.vector_store - INFO - 成功初始化 DashScope 嵌入模型
2025-05-09 14:28:43 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections/knowledge_base "HTTP/1.1 200 OK"
2025-05-09 14:28:43 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections/knowledge_base "HTTP/1.1 200 OK"
2025-05-09 14:28:43 - app.services.vector_store - ERROR - 初始化向量存储失败: 'request'
2025-05-09 14:28:43 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-09 14:28:43 - app.services.vector_store - ERROR - 初始化向量存储失败: 'request'
2025-05-09 14:28:43 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-09 14:28:43 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-09 14:28:43 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-09 14:28:43 - app.routers.websockets - WARNING - 任务 ce822048-9d8a-44b9-87e6-50fa111b0b4b 没有活跃的WebSocket连接，更新未发送
2025-05-09 14:28:44 - app.routers.websockets - WARNING - 任务 ce822048-9d8a-44b9-87e6-50fa111b0b4b 没有活跃的WebSocket连接，更新未发送
2025-05-09 14:28:44 - app.routers.websockets - WARNING - 任务 ce822048-9d8a-44b9-87e6-50fa111b0b4b 没有活跃的WebSocket连接，更新未发送
2025-05-09 14:28:44 - app.routers.websockets - WARNING - 任务 ce822048-9d8a-44b9-87e6-50fa111b0b4b 没有活跃的WebSocket连接，更新未发送
2025-05-09 14:28:44 - app.routers.websockets - WARNING - 任务 ce822048-9d8a-44b9-87e6-50fa111b0b4b 没有活跃的WebSocket连接，更新未发送
2025-05-09 14:28:44 - app.routers.websockets - WARNING - 任务 ce822048-9d8a-44b9-87e6-50fa111b0b4b 没有活跃的WebSocket连接，更新未发送
2025-05-09 14:28:44 - app.routers.websockets - WARNING - 任务 ce822048-9d8a-44b9-87e6-50fa111b0b4b 没有活跃的WebSocket连接，更新未发送
2025-05-09 14:28:44 - app.routers.websockets - WARNING - 任务 ce822048-9d8a-44b9-87e6-50fa111b0b4b 没有活跃的WebSocket连接，更新未发送
2025-05-09 14:28:44 - app.routers.websockets - WARNING - 任务 ce822048-9d8a-44b9-87e6-50fa111b0b4b 没有活跃的WebSocket连接，更新未发送
2025-05-09 14:28:45 - app.routers.websockets - WARNING - 任务 ce822048-9d8a-44b9-87e6-50fa111b0b4b 没有活跃的WebSocket连接，更新未发送
2025-05-09 14:28:45 - app.routers.websockets - WARNING - 任务 ce822048-9d8a-44b9-87e6-50fa111b0b4b 没有活跃的WebSocket连接，更新未发送
2025-05-09 14:28:45 - app.routers.websockets - WARNING - 任务 ce822048-9d8a-44b9-87e6-50fa111b0b4b 没有活跃的WebSocket连接，更新未发送
2025-05-09 14:28:45 - app.routers.websockets - WARNING - 任务 ce822048-9d8a-44b9-87e6-50fa111b0b4b 没有活跃的WebSocket连接，更新未发送
2025-05-09 14:28:45 - app.routers.websockets - WARNING - 任务 ce822048-9d8a-44b9-87e6-50fa111b0b4b 没有活跃的WebSocket连接，更新未发送
2025-05-09 14:33:38 - root - INFO - 日志系统初始化完成
2025-05-09 14:33:38 - app.main - INFO - 数据库表创建完成
2025-05-09 14:33:44 - root - INFO - 日志系统初始化完成
2025-05-09 14:33:44 - app.main - INFO - 数据库表创建完成
2025-05-09 14:33:44 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-09 14:33:44 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-09 14:33:44 - app.ws.connection_manager - ERROR - 建立WebSocket连接失败: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-09 14:33:55 - root - INFO - 日志系统初始化完成
2025-05-09 14:33:56 - app.main - INFO - 数据库表创建完成
2025-05-09 14:34:02 - root - INFO - 日志系统初始化完成
2025-05-09 14:34:02 - app.main - INFO - 数据库表创建完成
2025-05-09 14:34:02 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-09 14:34:02 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-09 14:34:02 - app.ws.connection_manager - ERROR - 建立WebSocket连接失败: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-09 14:34:26 - root - INFO - 日志系统初始化完成
2025-05-09 14:34:26 - app.main - INFO - 数据库表创建完成
2025-05-09 14:34:32 - root - INFO - 日志系统初始化完成
2025-05-09 14:34:33 - app.main - INFO - 数据库表创建完成
2025-05-09 14:34:33 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-09 14:34:33 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-09 14:34:33 - app.ws.connection_manager - ERROR - 建立WebSocket连接失败: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-09 14:34:40 - root - INFO - 日志系统初始化完成
2025-05-09 14:34:41 - app.main - INFO - 数据库表创建完成
2025-05-09 14:34:41 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-09 14:34:41 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-09 14:34:41 - app.ws.connection_manager - ERROR - 建立WebSocket连接失败: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-09 14:35:02 - root - INFO - 日志系统初始化完成
2025-05-09 14:35:03 - app.main - INFO - 数据库表创建完成
2025-05-09 14:35:09 - root - INFO - 日志系统初始化完成
2025-05-09 14:35:09 - app.main - INFO - 数据库表创建完成
2025-05-09 14:35:09 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-09 14:35:09 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-09 14:35:09 - app.ws.connection_manager - ERROR - 建立WebSocket连接失败: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-09 14:35:34 - root - INFO - 日志系统初始化完成
2025-05-09 14:35:34 - app.main - INFO - 数据库表创建完成
2025-05-09 14:35:34 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-09 14:35:34 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-09 14:35:34 - app.ws.connection_manager - ERROR - 建立WebSocket连接失败: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-09 14:35:59 - root - INFO - 日志系统初始化完成
2025-05-09 14:36:00 - app.main - INFO - 数据库表创建完成
2025-05-09 14:36:00 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-09 14:36:00 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-09 14:36:00 - app.ws.connection_manager - ERROR - 建立WebSocket连接失败: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-09 14:36:19 - root - INFO - 日志系统初始化完成
2025-05-09 14:36:20 - app.main - INFO - 数据库表创建完成
2025-05-09 14:36:21 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-09 14:36:21 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-09 14:36:21 - app.ws.connection_manager - ERROR - 建立WebSocket连接失败: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-09 14:36:49 - app.services.vector_store - INFO - 初始化向量存储服务
2025-05-09 14:36:49 - app.services.vector_store - INFO - 向量存储模式: 真实
2025-05-09 14:36:49 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-09 14:36:49 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-09 14:36:49 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-09 14:36:49 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-09 14:36:49 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-05-09 14:36:49 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-05-09 14:36:49 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-09 14:36:49 - app.services.vector_store - INFO - 集合 knowledge_base 已存在
2025-05-09 14:36:49 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections/knowledge_base "HTTP/1.1 200 OK"
2025-05-09 14:36:49 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-09 14:36:49 - app.services.vector_store - INFO - 成功初始化Qdrant客户端
2025-05-09 14:36:49 - app.services.vector_store - INFO - 开始获取嵌入模型...
2025-05-09 14:36:49 - app.services.vector_store - INFO - 嵌入模型测试成功，向量维度: 1536
2025-05-09 14:36:49 - app.services.vector_store - INFO - 成功初始化 DashScope 嵌入模型
2025-05-09 14:36:49 - app.services.vector_store - INFO - 成功获取嵌入模型: client=<class 'dashscope.embeddings.text_embedding.TextEmbedding'> model='text-embedding-v1' dashscope_api_key='sk-17a9b27fcbc144e8be788209f045f7c8' max_retries=5
2025-05-09 14:36:49 - app.services.vector_store - INFO - 开始初始化QdrantVectorStore，参数: client=<qdrant_client.qdrant_client.QdrantClient object at 0x124475660>, collection_name=knowledge_base
2025-05-09 14:36:49 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections/knowledge_base "HTTP/1.1 200 OK"
2025-05-09 14:36:50 - app.services.vector_store - INFO - 成功初始化向量存储: knowledge_base
2025-05-09 14:36:50 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-09 14:36:50 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-09 14:36:50 - app.routers.documents - INFO - 接收到文件上传请求: 线上诊断Arthas 15ff8eef777580839c4dcf2d552da527.md, 类型: text/markdown
2025-05-09 14:36:50 - app.routers.documents - INFO - 解析元数据: {"name":"线上诊断Arthas 15ff8eef777580839c4dcf2d552da527"}...
2025-05-09 14:36:50 - app.routers.documents - INFO - 开始处理上传的文件
2025-05-09 14:36:50 - app.utils.file_utils - INFO - 文件已保存到临时路径: /var/folders/gs/kbsr2cy55nz47p4hyrxbtg0r0000gn/T/tmpq726v3o8.md
2025-05-09 14:36:50 - app.routers.documents - INFO - 文件已保存到临时路径: /var/folders/gs/kbsr2cy55nz47p4hyrxbtg0r0000gn/T/tmpq726v3o8.md
2025-05-09 14:36:50 - app.services.document_service - INFO - 开始处理文件: 线上诊断Arthas 15ff8eef777580839c4dcf2d552da527.md, 内容类型: text/markdown
2025-05-09 14:36:50 - app.services.document_service - INFO - 文件大小: 13075 字节
2025-05-09 14:36:50 - app.services.document_service - INFO - 文件类型识别为: md
2025-05-09 14:36:50 - app.services.document_service - INFO - 文本文件类型: md，使用普通UTF-8解码
2025-05-09 14:36:50 - app.services.document_service - INFO - 准备创建文档记录
2025-05-09 14:36:50 - app.services.document_service - INFO - 创建文档: 线上诊断Arthas 15ff8eef777580839c4dcf2d552da527.md, 类型: md, 用户ID: 1
2025-05-09 14:36:50 - app.services.document_service - INFO - 文档创建成功: ID=45
2025-05-09 14:36:50 - app.services.task_service - INFO - 创建任务: 处理文档: 线上诊断Arthas 15ff8eef777580839c4dcf2d552da527.md, 类型: DOCUMENT_PROCESSING, 创建者: 1
2025-05-09 14:36:50 - app.services.task_service - INFO - 任务创建成功: f2cf5472-d5ee-44e5-bdd1-934e231f26ae
2025-05-09 14:36:50 - app.services.document_service - INFO - 更新文档状态: ID=45, 状态=processing
2025-05-09 14:36:50 - app.services.document_service - INFO - 文档状态已更新: ID=45, 状态=processing
2025-05-09 14:36:50 - app.routers.documents - INFO - 文件处理成功，文档ID: 45, 任务ID: f2cf5472-d5ee-44e5-bdd1-934e231f26ae
2025-05-09 14:36:50 - app.services.vector_store - INFO - 初始化向量存储服务
2025-05-09 14:36:50 - app.services.vector_store - INFO - 初始化向量存储服务
2025-05-09 14:36:50 - app.services.vector_store - INFO - 向量存储模式: 真实
2025-05-09 14:36:50 - app.services.vector_store - INFO - 向量存储模式: 真实
2025-05-09 14:36:50 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-09 14:36:50 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-09 14:36:50 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-09 14:36:50 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-09 14:36:50 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-09 14:36:50 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-09 14:36:50 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-09 14:36:50 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-09 14:36:50 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-05-09 14:36:50 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-05-09 14:36:50 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-05-09 14:36:50 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-05-09 14:36:50 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-09 14:36:50 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-09 14:36:50 - app.services.vector_store - INFO - 集合 knowledge_base 已存在
2025-05-09 14:36:50 - app.services.vector_store - INFO - 集合 knowledge_base 已存在
2025-05-09 14:36:50 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections/knowledge_base "HTTP/1.1 200 OK"
2025-05-09 14:36:50 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections/knowledge_base "HTTP/1.1 200 OK"
2025-05-09 14:36:51 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-09 14:36:51 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-09 14:36:51 - app.services.vector_store - INFO - 成功初始化Qdrant客户端
2025-05-09 14:36:51 - app.services.vector_store - INFO - 成功初始化Qdrant客户端
2025-05-09 14:36:51 - app.services.vector_store - INFO - 开始获取嵌入模型...
2025-05-09 14:36:51 - app.services.vector_store - INFO - 开始获取嵌入模型...
2025-05-09 14:36:51 - app.services.vector_store - INFO - 嵌入模型测试成功，向量维度: 1536
2025-05-09 14:36:51 - app.services.vector_store - INFO - 成功初始化 DashScope 嵌入模型
2025-05-09 14:36:51 - app.services.vector_store - INFO - 成功获取嵌入模型: client=<class 'dashscope.embeddings.text_embedding.TextEmbedding'> model='text-embedding-v1' dashscope_api_key='sk-17a9b27fcbc144e8be788209f045f7c8' max_retries=5
2025-05-09 14:36:51 - app.services.vector_store - INFO - 开始初始化QdrantVectorStore，参数: client=<qdrant_client.qdrant_client.QdrantClient object at 0x124474670>, collection_name=knowledge_base
2025-05-09 14:36:51 - app.services.vector_store - INFO - 嵌入模型测试成功，向量维度: 1536
2025-05-09 14:36:51 - app.services.vector_store - INFO - 成功初始化 DashScope 嵌入模型
2025-05-09 14:36:51 - app.services.vector_store - INFO - 成功获取嵌入模型: client=<class 'dashscope.embeddings.text_embedding.TextEmbedding'> model='text-embedding-v1' dashscope_api_key='sk-17a9b27fcbc144e8be788209f045f7c8' max_retries=5
2025-05-09 14:36:51 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections/knowledge_base "HTTP/1.1 200 OK"
2025-05-09 14:36:51 - app.services.vector_store - INFO - 开始初始化QdrantVectorStore，参数: client=<qdrant_client.qdrant_client.QdrantClient object at 0x124662320>, collection_name=knowledge_base
2025-05-09 14:36:51 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections/knowledge_base "HTTP/1.1 200 OK"
2025-05-09 14:36:51 - app.services.vector_store - INFO - 成功初始化向量存储: knowledge_base
2025-05-09 14:36:51 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-09 14:36:51 - app.services.vector_store - INFO - 成功初始化向量存储: knowledge_base
2025-05-09 14:36:51 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-09 14:36:51 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-09 14:36:51 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-09 14:36:52 - app.routers.websockets - WARNING - 任务 f2cf5472-d5ee-44e5-bdd1-934e231f26ae 没有活跃的WebSocket连接，更新未发送
2025-05-09 14:36:52 - app.routers.websockets - WARNING - 任务 f2cf5472-d5ee-44e5-bdd1-934e231f26ae 没有活跃的WebSocket连接，更新未发送
2025-05-09 14:36:52 - app.routers.websockets - WARNING - 任务 f2cf5472-d5ee-44e5-bdd1-934e231f26ae 没有活跃的WebSocket连接，更新未发送
2025-05-09 14:36:52 - app.routers.websockets - WARNING - 任务 f2cf5472-d5ee-44e5-bdd1-934e231f26ae 没有活跃的WebSocket连接，更新未发送
2025-05-09 14:36:52 - app.routers.websockets - WARNING - 任务 f2cf5472-d5ee-44e5-bdd1-934e231f26ae 没有活跃的WebSocket连接，更新未发送
2025-05-09 14:36:52 - app.routers.websockets - WARNING - 任务 f2cf5472-d5ee-44e5-bdd1-934e231f26ae 没有活跃的WebSocket连接，更新未发送
2025-05-09 14:36:52 - app.routers.websockets - WARNING - 任务 f2cf5472-d5ee-44e5-bdd1-934e231f26ae 没有活跃的WebSocket连接，更新未发送
2025-05-09 14:36:53 - app.routers.websockets - WARNING - 任务 f2cf5472-d5ee-44e5-bdd1-934e231f26ae 没有活跃的WebSocket连接，更新未发送
2025-05-09 14:36:53 - app.routers.websockets - WARNING - 任务 f2cf5472-d5ee-44e5-bdd1-934e231f26ae 没有活跃的WebSocket连接，更新未发送
2025-05-09 14:36:53 - app.routers.websockets - WARNING - 任务 f2cf5472-d5ee-44e5-bdd1-934e231f26ae 没有活跃的WebSocket连接，更新未发送
2025-05-09 14:36:54 - app.routers.websockets - WARNING - 任务 f2cf5472-d5ee-44e5-bdd1-934e231f26ae 没有活跃的WebSocket连接，更新未发送
2025-05-09 14:36:54 - app.routers.websockets - WARNING - 任务 f2cf5472-d5ee-44e5-bdd1-934e231f26ae 没有活跃的WebSocket连接，更新未发送
2025-05-09 14:36:54 - app.routers.websockets - WARNING - 任务 f2cf5472-d5ee-44e5-bdd1-934e231f26ae 没有活跃的WebSocket连接，更新未发送
2025-05-09 14:36:59 - app.services.vector_store - INFO - 初始化向量存储服务
2025-05-09 14:36:59 - app.services.vector_store - INFO - 向量存储模式: 真实
2025-05-09 14:36:59 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-09 14:36:59 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-09 14:36:59 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-09 14:36:59 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-09 14:36:59 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-05-09 14:36:59 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-05-09 14:36:59 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-09 14:36:59 - app.services.vector_store - INFO - 集合 knowledge_base 已存在
2025-05-09 14:36:59 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections/knowledge_base "HTTP/1.1 200 OK"
2025-05-09 14:36:59 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-09 14:36:59 - app.services.vector_store - INFO - 成功初始化Qdrant客户端
2025-05-09 14:36:59 - app.services.vector_store - INFO - 开始获取嵌入模型...
2025-05-09 14:37:00 - app.services.vector_store - INFO - 嵌入模型测试成功，向量维度: 1536
2025-05-09 14:37:00 - app.services.vector_store - INFO - 成功初始化 DashScope 嵌入模型
2025-05-09 14:37:00 - app.services.vector_store - INFO - 成功获取嵌入模型: client=<class 'dashscope.embeddings.text_embedding.TextEmbedding'> model='text-embedding-v1' dashscope_api_key='sk-17a9b27fcbc144e8be788209f045f7c8' max_retries=5
2025-05-09 14:37:00 - app.services.vector_store - INFO - 开始初始化QdrantVectorStore，参数: client=<qdrant_client.qdrant_client.QdrantClient object at 0x1247013c0>, collection_name=knowledge_base
2025-05-09 14:37:00 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections/knowledge_base "HTTP/1.1 200 OK"
2025-05-09 14:37:00 - app.services.vector_store - INFO - 成功初始化向量存储: knowledge_base
2025-05-09 14:37:00 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-09 14:37:00 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-09 14:37:00 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-09 14:37:00 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-09 14:37:00 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-09 14:37:00 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-09 14:37:00 - app.ws.connection_manager - ERROR - 建立WebSocket连接失败: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-09 14:58:25 - root - INFO - 日志系统初始化完成
2025-05-09 14:58:26 - app.main - INFO - 数据库表创建完成
2025-05-09 14:58:26 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-09 14:58:26 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-09 14:58:26 - app.ws.connection_manager - ERROR - 建立WebSocket连接失败: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-09 14:58:26 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-09 14:58:26 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-09 14:58:26 - app.ws.connection_manager - ERROR - 建立WebSocket连接失败: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-09 14:58:48 - root - INFO - 日志系统初始化完成
2025-05-09 14:58:48 - app.main - INFO - 数据库表创建完成
2025-05-09 14:58:48 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-09 14:58:48 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-09 14:58:48 - app.ws.connection_manager - ERROR - 建立WebSocket连接失败: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-09 14:58:48 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-09 14:58:48 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-09 14:58:48 - app.ws.connection_manager - ERROR - 建立WebSocket连接失败: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-09 14:58:59 - root - INFO - 日志系统初始化完成
2025-05-09 14:58:59 - app.main - INFO - 数据库表创建完成
2025-05-09 14:58:59 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-09 14:58:59 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-09 14:58:59 - app.ws.connection_manager - ERROR - 建立WebSocket连接失败: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-09 14:58:59 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-09 14:58:59 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-09 14:58:59 - app.ws.connection_manager - ERROR - 建立WebSocket连接失败: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-09 15:00:46 - root - INFO - 日志系统初始化完成
2025-05-09 15:00:46 - app.main - INFO - 数据库表创建完成
2025-05-09 15:00:46 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-09 15:00:46 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-09 15:00:46 - app.ws.connection_manager - ERROR - 建立WebSocket连接失败: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-09 15:00:46 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-09 15:00:47 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-09 15:00:47 - app.ws.connection_manager - ERROR - 建立WebSocket连接失败: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-09 15:01:05 - app.services.vector_store - INFO - 初始化向量存储服务
2025-05-09 15:01:05 - app.services.vector_store - INFO - 向量存储模式: 真实
2025-05-09 15:01:05 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-09 15:01:05 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-09 15:01:05 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-09 15:01:05 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-09 15:01:05 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-05-09 15:01:05 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-05-09 15:01:05 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-09 15:01:05 - app.services.vector_store - INFO - 集合 knowledge_base 已存在
2025-05-09 15:01:05 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections/knowledge_base "HTTP/1.1 200 OK"
2025-05-09 15:01:05 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-09 15:01:05 - app.services.vector_store - INFO - 成功初始化Qdrant客户端
2025-05-09 15:01:05 - app.services.vector_store - INFO - 开始获取嵌入模型...
2025-05-09 15:01:05 - app.services.vector_store - INFO - 嵌入模型测试成功，向量维度: 1536
2025-05-09 15:01:05 - app.services.vector_store - INFO - 成功初始化 DashScope 嵌入模型
2025-05-09 15:01:05 - app.services.vector_store - INFO - 成功获取嵌入模型: client=<class 'dashscope.embeddings.text_embedding.TextEmbedding'> model='text-embedding-v1' dashscope_api_key='sk-17a9b27fcbc144e8be788209f045f7c8' max_retries=5
2025-05-09 15:01:05 - app.services.vector_store - INFO - 开始初始化QdrantVectorStore，参数: client=<qdrant_client.qdrant_client.QdrantClient object at 0x12d846c80>, collection_name=knowledge_base
2025-05-09 15:01:05 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections/knowledge_base "HTTP/1.1 200 OK"
2025-05-09 15:01:06 - app.services.vector_store - INFO - 成功初始化向量存储: knowledge_base
2025-05-09 15:01:06 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-09 15:01:06 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-09 15:01:06 - app.routers.documents - INFO - 接收到文件上传请求: 线上诊断Arthas 15ff8eef777580839c4dcf2d552da527.md, 类型: text/markdown
2025-05-09 15:01:06 - app.routers.documents - INFO - 解析元数据: {"name":"线上诊断Arthas 15ff8eef777580839c4dcf2d552da527"}...
2025-05-09 15:01:06 - app.routers.documents - INFO - 开始处理上传的文件
2025-05-09 15:01:06 - app.utils.file_utils - INFO - 文件已保存到临时路径: /var/folders/gs/kbsr2cy55nz47p4hyrxbtg0r0000gn/T/tmpnicj7elm.md
2025-05-09 15:01:06 - app.routers.documents - INFO - 文件已保存到临时路径: /var/folders/gs/kbsr2cy55nz47p4hyrxbtg0r0000gn/T/tmpnicj7elm.md
2025-05-09 15:01:06 - app.services.document_service - INFO - 开始处理文件: 线上诊断Arthas 15ff8eef777580839c4dcf2d552da527.md, 内容类型: text/markdown
2025-05-09 15:01:06 - app.services.document_service - INFO - 文件大小: 13075 字节
2025-05-09 15:01:06 - app.services.document_service - INFO - 文件类型识别为: md
2025-05-09 15:01:06 - app.services.document_service - INFO - 文本文件类型: md，使用普通UTF-8解码
2025-05-09 15:01:06 - app.services.document_service - INFO - 准备创建文档记录
2025-05-09 15:01:06 - app.services.document_service - INFO - 创建文档: 线上诊断Arthas 15ff8eef777580839c4dcf2d552da527.md, 类型: md, 用户ID: 1
2025-05-09 15:01:06 - app.services.document_service - INFO - 文档创建成功: ID=46
2025-05-09 15:01:06 - app.services.task_service - INFO - 创建任务: 处理文档: 线上诊断Arthas 15ff8eef777580839c4dcf2d552da527.md, 类型: DOCUMENT_PROCESSING, 创建者: 1
2025-05-09 15:01:06 - app.services.task_service - INFO - 任务创建成功: 5cf6e100-7d54-4678-a9bc-df04bd2a2510
2025-05-09 15:01:06 - app.services.document_service - INFO - 更新文档状态: ID=46, 状态=processing
2025-05-09 15:01:06 - app.services.document_service - INFO - 文档状态已更新: ID=46, 状态=processing
2025-05-09 15:01:06 - app.routers.documents - INFO - 文件处理成功，文档ID: 46, 任务ID: 5cf6e100-7d54-4678-a9bc-df04bd2a2510
2025-05-09 15:01:06 - app.services.vector_store - INFO - 初始化向量存储服务
2025-05-09 15:01:06 - app.services.vector_store - INFO - 初始化向量存储服务
2025-05-09 15:01:06 - app.services.vector_store - INFO - 向量存储模式: 真实
2025-05-09 15:01:06 - app.services.vector_store - INFO - 向量存储模式: 真实
2025-05-09 15:01:06 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-09 15:01:06 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-09 15:01:06 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-09 15:01:06 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-09 15:01:06 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-09 15:01:06 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-09 15:01:06 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-09 15:01:06 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-05-09 15:01:06 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-09 15:01:06 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-05-09 15:01:06 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-05-09 15:01:06 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-05-09 15:01:06 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-09 15:01:06 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-09 15:01:06 - app.services.vector_store - INFO - 集合 knowledge_base 已存在
2025-05-09 15:01:06 - app.services.vector_store - INFO - 集合 knowledge_base 已存在
2025-05-09 15:01:06 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections/knowledge_base "HTTP/1.1 200 OK"
2025-05-09 15:01:06 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections/knowledge_base "HTTP/1.1 200 OK"
2025-05-09 15:01:06 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-09 15:01:06 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-09 15:01:06 - app.services.vector_store - INFO - 成功初始化Qdrant客户端
2025-05-09 15:01:06 - app.services.vector_store - INFO - 成功初始化Qdrant客户端
2025-05-09 15:01:06 - app.services.vector_store - INFO - 开始获取嵌入模型...
2025-05-09 15:01:06 - app.services.vector_store - INFO - 开始获取嵌入模型...
2025-05-09 15:01:07 - app.services.vector_store - INFO - 嵌入模型测试成功，向量维度: 1536
2025-05-09 15:01:07 - app.services.vector_store - INFO - 成功初始化 DashScope 嵌入模型
2025-05-09 15:01:07 - app.services.vector_store - INFO - 成功获取嵌入模型: client=<class 'dashscope.embeddings.text_embedding.TextEmbedding'> model='text-embedding-v1' dashscope_api_key='sk-17a9b27fcbc144e8be788209f045f7c8' max_retries=5
2025-05-09 15:01:07 - app.services.vector_store - INFO - 开始初始化QdrantVectorStore，参数: client=<qdrant_client.qdrant_client.QdrantClient object at 0x12d847e50>, collection_name=knowledge_base
2025-05-09 15:01:07 - app.services.vector_store - INFO - 嵌入模型测试成功，向量维度: 1536
2025-05-09 15:01:07 - app.services.vector_store - INFO - 成功初始化 DashScope 嵌入模型
2025-05-09 15:01:07 - app.services.vector_store - INFO - 成功获取嵌入模型: client=<class 'dashscope.embeddings.text_embedding.TextEmbedding'> model='text-embedding-v1' dashscope_api_key='sk-17a9b27fcbc144e8be788209f045f7c8' max_retries=5
2025-05-09 15:01:07 - app.services.vector_store - INFO - 开始初始化QdrantVectorStore，参数: client=<qdrant_client.qdrant_client.QdrantClient object at 0x12d9e2d10>, collection_name=knowledge_base
2025-05-09 15:01:07 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections/knowledge_base "HTTP/1.1 200 OK"
2025-05-09 15:01:07 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections/knowledge_base "HTTP/1.1 200 OK"
2025-05-09 15:01:07 - app.services.vector_store - INFO - 成功初始化向量存储: knowledge_base
2025-05-09 15:01:07 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-09 15:01:07 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-09 15:01:07 - app.services.vector_store - INFO - 成功初始化向量存储: knowledge_base
2025-05-09 15:01:07 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-09 15:01:07 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-09 15:01:08 - app.routers.websockets - WARNING - 任务 5cf6e100-7d54-4678-a9bc-df04bd2a2510 没有活跃的WebSocket连接，更新未发送
2025-05-09 15:01:08 - app.routers.websockets - WARNING - 任务 5cf6e100-7d54-4678-a9bc-df04bd2a2510 没有活跃的WebSocket连接，更新未发送
2025-05-09 15:01:08 - app.routers.websockets - WARNING - 任务 5cf6e100-7d54-4678-a9bc-df04bd2a2510 没有活跃的WebSocket连接，更新未发送
2025-05-09 15:01:08 - app.routers.websockets - WARNING - 任务 5cf6e100-7d54-4678-a9bc-df04bd2a2510 没有活跃的WebSocket连接，更新未发送
2025-05-09 15:01:08 - app.routers.websockets - WARNING - 任务 5cf6e100-7d54-4678-a9bc-df04bd2a2510 没有活跃的WebSocket连接，更新未发送
2025-05-09 15:01:08 - app.services.vector_store - INFO - 初始化向量存储服务
2025-05-09 15:01:08 - app.services.vector_store - INFO - 向量存储模式: 真实
2025-05-09 15:01:08 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-09 15:01:08 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-09 15:01:08 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-09 15:01:08 - app.routers.websockets - WARNING - 任务 5cf6e100-7d54-4678-a9bc-df04bd2a2510 没有活跃的WebSocket连接，更新未发送
2025-05-09 15:01:08 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-09 15:01:08 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-05-09 15:01:08 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-05-09 15:01:08 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-09 15:01:08 - app.services.vector_store - INFO - 集合 knowledge_base 已存在
2025-05-09 15:01:08 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections/knowledge_base "HTTP/1.1 200 OK"
2025-05-09 15:01:08 - app.routers.websockets - WARNING - 任务 5cf6e100-7d54-4678-a9bc-df04bd2a2510 没有活跃的WebSocket连接，更新未发送
2025-05-09 15:01:08 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-09 15:01:08 - app.services.vector_store - INFO - 成功初始化Qdrant客户端
2025-05-09 15:01:08 - app.routers.websockets - WARNING - 任务 5cf6e100-7d54-4678-a9bc-df04bd2a2510 没有活跃的WebSocket连接，更新未发送
2025-05-09 15:01:08 - app.services.vector_store - INFO - 开始获取嵌入模型...
2025-05-09 15:01:09 - app.routers.websockets - WARNING - 任务 5cf6e100-7d54-4678-a9bc-df04bd2a2510 没有活跃的WebSocket连接，更新未发送
2025-05-09 15:01:09 - app.routers.websockets - WARNING - 任务 5cf6e100-7d54-4678-a9bc-df04bd2a2510 没有活跃的WebSocket连接，更新未发送
2025-05-09 15:01:09 - app.services.vector_store - INFO - 嵌入模型测试成功，向量维度: 1536
2025-05-09 15:01:09 - app.services.vector_store - INFO - 成功初始化 DashScope 嵌入模型
2025-05-09 15:01:09 - app.services.vector_store - INFO - 成功获取嵌入模型: client=<class 'dashscope.embeddings.text_embedding.TextEmbedding'> model='text-embedding-v1' dashscope_api_key='sk-17a9b27fcbc144e8be788209f045f7c8' max_retries=5
2025-05-09 15:01:09 - app.services.vector_store - INFO - 开始初始化QdrantVectorStore，参数: client=<qdrant_client.qdrant_client.QdrantClient object at 0x1256a6d40>, collection_name=knowledge_base
2025-05-09 15:01:09 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections/knowledge_base "HTTP/1.1 200 OK"
2025-05-09 15:01:09 - app.services.vector_store - INFO - 成功初始化向量存储: knowledge_base
2025-05-09 15:01:09 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-09 15:01:09 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-09 15:01:09 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-09 15:01:09 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-09 15:01:09 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-09 15:01:09 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-09 15:01:09 - app.ws.connection_manager - ERROR - 建立WebSocket连接失败: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-09 15:01:09 - app.routers.websockets - WARNING - 任务 5cf6e100-7d54-4678-a9bc-df04bd2a2510 没有活跃的WebSocket连接，更新未发送
2025-05-09 15:01:09 - app.routers.websockets - WARNING - 任务 5cf6e100-7d54-4678-a9bc-df04bd2a2510 没有活跃的WebSocket连接，更新未发送
2025-05-09 15:01:10 - app.routers.websockets - WARNING - 任务 5cf6e100-7d54-4678-a9bc-df04bd2a2510 没有活跃的WebSocket连接，更新未发送
2025-05-09 15:01:10 - app.routers.websockets - WARNING - 任务 5cf6e100-7d54-4678-a9bc-df04bd2a2510 没有活跃的WebSocket连接，更新未发送
2025-05-09 15:01:20 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-09 15:01:20 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-09 15:01:21 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-09 15:01:21 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-09 15:01:21 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-09 15:01:21 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-09 15:01:50 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-09 15:01:51 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-09 15:01:51 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-09 15:01:51 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-09 15:01:51 - app.services.vector_store - INFO - 初始化向量存储服务
2025-05-09 15:01:51 - app.services.vector_store - INFO - 向量存储模式: 真实
2025-05-09 15:01:51 - app.services.vector_store - INFO - 初始化向量存储服务
2025-05-09 15:01:51 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-09 15:01:51 - app.services.vector_store - INFO - 向量存储模式: 真实
2025-05-09 15:01:51 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-09 15:01:51 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-09 15:01:51 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-09 15:01:51 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-09 15:01:51 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-09 15:01:51 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-09 15:01:51 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-05-09 15:01:51 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-05-09 15:01:51 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-09 15:01:51 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-05-09 15:01:51 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-05-09 15:01:51 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-09 15:01:51 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-09 15:01:51 - app.services.vector_store - INFO - 集合 knowledge_base 已存在
2025-05-09 15:01:51 - app.services.vector_store - INFO - 集合 knowledge_base 已存在
2025-05-09 15:01:51 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections/knowledge_base "HTTP/1.1 200 OK"
2025-05-09 15:01:51 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections/knowledge_base "HTTP/1.1 200 OK"
2025-05-09 15:01:51 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-09 15:01:51 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-09 15:01:51 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-09 15:01:51 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-09 15:01:51 - app.services.vector_store - INFO - 成功初始化Qdrant客户端
2025-05-09 15:01:51 - app.services.vector_store - INFO - 成功初始化Qdrant客户端
2025-05-09 15:01:51 - app.services.vector_store - INFO - 开始获取嵌入模型...
2025-05-09 15:01:51 - app.services.vector_store - INFO - 开始获取嵌入模型...
2025-05-09 15:01:51 - app.services.vector_store - INFO - 嵌入模型测试成功，向量维度: 1536
2025-05-09 15:01:51 - app.services.vector_store - INFO - 嵌入模型测试成功，向量维度: 1536
2025-05-09 15:01:51 - app.services.vector_store - INFO - 成功初始化 DashScope 嵌入模型
2025-05-09 15:01:51 - app.services.vector_store - INFO - 成功初始化 DashScope 嵌入模型
2025-05-09 15:01:51 - app.services.vector_store - INFO - 成功获取嵌入模型: client=<class 'dashscope.embeddings.text_embedding.TextEmbedding'> model='text-embedding-v1' dashscope_api_key='sk-17a9b27fcbc144e8be788209f045f7c8' max_retries=5
2025-05-09 15:01:51 - app.services.vector_store - INFO - 成功获取嵌入模型: client=<class 'dashscope.embeddings.text_embedding.TextEmbedding'> model='text-embedding-v1' dashscope_api_key='sk-17a9b27fcbc144e8be788209f045f7c8' max_retries=5
2025-05-09 15:01:51 - app.services.vector_store - INFO - 开始初始化QdrantVectorStore，参数: client=<qdrant_client.qdrant_client.QdrantClient object at 0x1256a6bc0>, collection_name=knowledge_base
2025-05-09 15:01:51 - app.services.vector_store - INFO - 开始初始化QdrantVectorStore，参数: client=<qdrant_client.qdrant_client.QdrantClient object at 0x12d8dcd30>, collection_name=knowledge_base
2025-05-09 15:01:51 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections/knowledge_base "HTTP/1.1 200 OK"
2025-05-09 15:01:51 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections/knowledge_base "HTTP/1.1 200 OK"
2025-05-09 15:01:52 - app.services.vector_store - INFO - 成功初始化向量存储: knowledge_base
2025-05-09 15:01:52 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-09 15:01:52 - app.services.vector_store - INFO - 成功初始化向量存储: knowledge_base
2025-05-09 15:01:52 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-09 15:01:52 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-09 15:01:52 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-09 15:01:52 - app.services.vector_store - INFO - 初始化向量存储服务
2025-05-09 15:01:52 - app.services.vector_store - INFO - 向量存储模式: 真实
2025-05-09 15:01:52 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-09 15:01:52 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-09 15:01:52 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-09 15:01:52 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-09 15:01:52 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-05-09 15:01:52 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-05-09 15:01:52 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-09 15:01:52 - app.services.vector_store - INFO - 集合 knowledge_base 已存在
2025-05-09 15:01:52 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections/knowledge_base "HTTP/1.1 200 OK"
2025-05-09 15:01:52 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-09 15:01:52 - app.services.vector_store - INFO - 成功初始化Qdrant客户端
2025-05-09 15:01:52 - app.services.vector_store - INFO - 开始获取嵌入模型...
2025-05-09 15:01:53 - app.services.vector_store - INFO - 嵌入模型测试成功，向量维度: 1536
2025-05-09 15:01:53 - app.services.vector_store - INFO - 成功初始化 DashScope 嵌入模型
2025-05-09 15:01:53 - app.services.vector_store - INFO - 成功获取嵌入模型: client=<class 'dashscope.embeddings.text_embedding.TextEmbedding'> model='text-embedding-v1' dashscope_api_key='sk-17a9b27fcbc144e8be788209f045f7c8' max_retries=5
2025-05-09 15:01:53 - app.services.vector_store - INFO - 开始初始化QdrantVectorStore，参数: client=<qdrant_client.qdrant_client.QdrantClient object at 0x12dcb1630>, collection_name=knowledge_base
2025-05-09 15:01:53 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections/knowledge_base "HTTP/1.1 200 OK"
2025-05-09 15:01:53 - app.services.vector_store - INFO - 成功初始化向量存储: knowledge_base
2025-05-09 15:01:53 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-09 15:01:53 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-09 15:01:53 - app.services.vector_store - INFO - 初始化向量存储服务
2025-05-09 15:01:53 - app.services.vector_store - INFO - 向量存储模式: 真实
2025-05-09 15:01:53 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-09 15:01:53 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-09 15:01:53 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-09 15:01:53 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-09 15:01:53 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-05-09 15:01:53 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-05-09 15:01:53 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-09 15:01:53 - app.services.vector_store - INFO - 集合 knowledge_base 已存在
2025-05-09 15:01:53 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections/knowledge_base "HTTP/1.1 200 OK"
2025-05-09 15:01:53 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-09 15:01:53 - app.services.vector_store - INFO - 成功初始化Qdrant客户端
2025-05-09 15:01:53 - app.services.vector_store - INFO - 开始获取嵌入模型...
2025-05-09 15:01:54 - app.services.vector_store - INFO - 嵌入模型测试成功，向量维度: 1536
2025-05-09 15:01:54 - app.services.vector_store - INFO - 成功初始化 DashScope 嵌入模型
2025-05-09 15:01:54 - app.services.vector_store - INFO - 成功获取嵌入模型: client=<class 'dashscope.embeddings.text_embedding.TextEmbedding'> model='text-embedding-v1' dashscope_api_key='sk-17a9b27fcbc144e8be788209f045f7c8' max_retries=5
2025-05-09 15:01:54 - app.services.vector_store - INFO - 开始初始化QdrantVectorStore，参数: client=<qdrant_client.qdrant_client.QdrantClient object at 0x1256a6d40>, collection_name=knowledge_base
2025-05-09 15:01:54 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections/knowledge_base "HTTP/1.1 200 OK"
2025-05-09 15:01:54 - app.services.vector_store - INFO - 成功初始化向量存储: knowledge_base
2025-05-09 15:01:54 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-09 15:01:54 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-09 15:01:54 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-09 15:01:54 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-09 15:01:54 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-09 15:01:54 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-09 15:01:54 - app.ws.connection_manager - ERROR - 建立WebSocket连接失败: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-09 15:02:36 - root - INFO - 日志系统初始化完成
2025-05-09 15:02:37 - app.main - INFO - 数据库表创建完成
2025-05-09 15:02:37 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-09 15:02:37 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-09 15:02:37 - app.ws.connection_manager - ERROR - 建立WebSocket连接失败: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-09 15:03:29 - root - INFO - 日志系统初始化完成
2025-05-09 15:03:29 - app.main - INFO - 数据库表创建完成
2025-05-09 15:03:29 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-09 15:03:29 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-09 15:03:29 - app.ws.connection_manager - ERROR - 建立WebSocket连接失败: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-09 15:03:38 - root - INFO - 日志系统初始化完成
2025-05-09 15:03:38 - app.main - INFO - 数据库表创建完成
2025-05-09 15:03:39 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-09 15:03:39 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-09 15:03:39 - app.ws.connection_manager - ERROR - 建立WebSocket连接失败: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-09 15:03:47 - root - INFO - 日志系统初始化完成
2025-05-09 15:03:48 - app.main - INFO - 数据库表创建完成
2025-05-09 15:03:48 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-09 15:03:48 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-09 15:03:48 - app.ws.connection_manager - ERROR - 建立WebSocket连接失败: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-09 15:04:35 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-09 15:04:35 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-09 15:04:36 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-09 15:04:36 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-09 15:04:36 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-09 15:04:36 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-09 15:04:36 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-09 15:04:36 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-09 15:04:37 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-09 15:04:37 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-09 15:04:37 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-09 15:04:37 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-09 15:04:54 - app.services.vector_store - INFO - 初始化向量存储服务
2025-05-09 15:04:54 - app.services.vector_store - INFO - 向量存储模式: 真实
2025-05-09 15:04:54 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-09 15:04:54 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-09 15:04:54 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-09 15:04:54 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-09 15:04:54 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-05-09 15:04:54 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-05-09 15:04:54 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-09 15:04:54 - app.services.vector_store - INFO - 集合 knowledge_base 已存在
2025-05-09 15:04:54 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections/knowledge_base "HTTP/1.1 200 OK"
2025-05-09 15:04:54 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-09 15:04:54 - app.services.vector_store - INFO - 成功初始化Qdrant客户端
2025-05-09 15:04:54 - app.services.vector_store - INFO - 开始获取嵌入模型...
2025-05-09 15:04:55 - app.services.vector_store - INFO - 嵌入模型测试成功，向量维度: 1536
2025-05-09 15:04:55 - app.services.vector_store - INFO - 成功初始化 DashScope 嵌入模型
2025-05-09 15:04:55 - app.services.vector_store - INFO - 成功获取嵌入模型: client=<class 'dashscope.embeddings.text_embedding.TextEmbedding'> model='text-embedding-v1' dashscope_api_key='sk-17a9b27fcbc144e8be788209f045f7c8' max_retries=5
2025-05-09 15:04:55 - app.services.vector_store - INFO - 开始初始化QdrantVectorStore，参数: client=<qdrant_client.qdrant_client.QdrantClient object at 0x12a4e62c0>, collection_name=knowledge_base
2025-05-09 15:04:55 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections/knowledge_base "HTTP/1.1 200 OK"
2025-05-09 15:04:55 - app.services.vector_store - INFO - 成功初始化向量存储: knowledge_base
2025-05-09 15:04:55 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-09 15:04:55 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-09 15:04:55 - app.routers.documents - INFO - 接收到文件上传请求: 线上诊断Arthas 15ff8eef777580839c4dcf2d552da527.md, 类型: text/markdown
2025-05-09 15:04:55 - app.routers.documents - INFO - 解析元数据: {"name":"线上诊断Arthas 15ff8eef777580839c4dcf2d552da527"}...
2025-05-09 15:04:55 - app.routers.documents - INFO - 开始处理上传的文件
2025-05-09 15:04:55 - app.utils.file_utils - INFO - 文件已保存到临时路径: /var/folders/gs/kbsr2cy55nz47p4hyrxbtg0r0000gn/T/tmpeot7tecl.md
2025-05-09 15:04:55 - app.routers.documents - INFO - 文件已保存到临时路径: /var/folders/gs/kbsr2cy55nz47p4hyrxbtg0r0000gn/T/tmpeot7tecl.md
2025-05-09 15:04:55 - app.services.document_service - INFO - 开始处理文件: 线上诊断Arthas 15ff8eef777580839c4dcf2d552da527.md, 内容类型: text/markdown
2025-05-09 15:04:55 - app.services.document_service - INFO - 文件大小: 13075 字节
2025-05-09 15:04:55 - app.services.document_service - INFO - 文件类型识别为: md
2025-05-09 15:04:55 - app.services.document_service - INFO - 文本文件类型: md，使用普通UTF-8解码
2025-05-09 15:04:55 - app.services.document_service - INFO - 准备创建文档记录
2025-05-09 15:04:55 - app.services.document_service - INFO - 创建文档: 线上诊断Arthas 15ff8eef777580839c4dcf2d552da527.md, 类型: md, 用户ID: 1
2025-05-09 15:04:55 - app.services.document_service - INFO - 文档创建成功: ID=47
2025-05-09 15:04:55 - app.services.task_service - INFO - 创建任务: 处理文档: 线上诊断Arthas 15ff8eef777580839c4dcf2d552da527.md, 类型: DOCUMENT_PROCESSING, 创建者: 1
2025-05-09 15:04:55 - app.services.task_service - INFO - 任务创建成功: 2badc529-6ead-4cf6-b086-118ba9be27a5
2025-05-09 15:04:55 - app.services.document_service - INFO - 更新文档状态: ID=47, 状态=processing
2025-05-09 15:04:55 - app.services.document_service - INFO - 文档状态已更新: ID=47, 状态=processing
2025-05-09 15:04:56 - app.routers.documents - INFO - 文件处理成功，文档ID: 47, 任务ID: 2badc529-6ead-4cf6-b086-118ba9be27a5
2025-05-09 15:04:56 - app.services.vector_store - INFO - 初始化向量存储服务
2025-05-09 15:04:56 - app.services.vector_store - INFO - 初始化向量存储服务
2025-05-09 15:04:56 - app.services.vector_store - INFO - 向量存储模式: 真实
2025-05-09 15:04:56 - app.services.vector_store - INFO - 向量存储模式: 真实
2025-05-09 15:04:56 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-09 15:04:56 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-09 15:04:56 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-09 15:04:56 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-09 15:04:56 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-09 15:04:56 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-09 15:04:56 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-09 15:04:56 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-05-09 15:04:56 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-05-09 15:04:56 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-09 15:04:56 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-05-09 15:04:56 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-05-09 15:04:56 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-09 15:04:56 - app.services.vector_store - INFO - 集合 knowledge_base 已存在
2025-05-09 15:04:56 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-09 15:04:56 - app.services.vector_store - INFO - 集合 knowledge_base 已存在
2025-05-09 15:04:56 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections/knowledge_base "HTTP/1.1 200 OK"
2025-05-09 15:04:56 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections/knowledge_base "HTTP/1.1 200 OK"
2025-05-09 15:04:56 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-09 15:04:56 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-09 15:04:56 - app.services.vector_store - INFO - 成功初始化Qdrant客户端
2025-05-09 15:04:56 - app.services.vector_store - INFO - 成功初始化Qdrant客户端
2025-05-09 15:04:56 - app.services.vector_store - INFO - 开始获取嵌入模型...
2025-05-09 15:04:56 - app.services.vector_store - INFO - 开始获取嵌入模型...
2025-05-09 15:04:56 - app.services.vector_store - INFO - 嵌入模型测试成功，向量维度: 1536
2025-05-09 15:04:56 - app.services.vector_store - INFO - 嵌入模型测试成功，向量维度: 1536
2025-05-09 15:04:56 - app.services.vector_store - INFO - 成功初始化 DashScope 嵌入模型
2025-05-09 15:04:56 - app.services.vector_store - INFO - 成功初始化 DashScope 嵌入模型
2025-05-09 15:04:56 - app.services.vector_store - INFO - 成功获取嵌入模型: client=<class 'dashscope.embeddings.text_embedding.TextEmbedding'> model='text-embedding-v1' dashscope_api_key='sk-17a9b27fcbc144e8be788209f045f7c8' max_retries=5
2025-05-09 15:04:56 - app.services.vector_store - INFO - 成功获取嵌入模型: client=<class 'dashscope.embeddings.text_embedding.TextEmbedding'> model='text-embedding-v1' dashscope_api_key='sk-17a9b27fcbc144e8be788209f045f7c8' max_retries=5
2025-05-09 15:04:56 - app.services.vector_store - INFO - 开始初始化QdrantVectorStore，参数: client=<qdrant_client.qdrant_client.QdrantClient object at 0x12a4e5570>, collection_name=knowledge_base
2025-05-09 15:04:56 - app.services.vector_store - INFO - 开始初始化QdrantVectorStore，参数: client=<qdrant_client.qdrant_client.QdrantClient object at 0x12a6ce410>, collection_name=knowledge_base
2025-05-09 15:04:56 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections/knowledge_base "HTTP/1.1 200 OK"
2025-05-09 15:04:56 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections/knowledge_base "HTTP/1.1 200 OK"
2025-05-09 15:04:57 - app.services.vector_store - INFO - 成功初始化向量存储: knowledge_base
2025-05-09 15:04:57 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-09 15:04:57 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-09 15:04:57 - app.services.vector_store - INFO - 成功初始化向量存储: knowledge_base
2025-05-09 15:04:57 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-09 15:04:57 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-09 15:04:57 - app.routers.websockets - WARNING - 任务 2badc529-6ead-4cf6-b086-118ba9be27a5 没有活跃的WebSocket连接，更新未发送
2025-05-09 15:04:57 - app.routers.websockets - WARNING - 任务 2badc529-6ead-4cf6-b086-118ba9be27a5 没有活跃的WebSocket连接，更新未发送
2025-05-09 15:04:57 - app.routers.websockets - WARNING - 任务 2badc529-6ead-4cf6-b086-118ba9be27a5 没有活跃的WebSocket连接，更新未发送
2025-05-09 15:04:58 - app.routers.websockets - WARNING - 任务 2badc529-6ead-4cf6-b086-118ba9be27a5 没有活跃的WebSocket连接，更新未发送
2025-05-09 15:04:58 - app.routers.websockets - WARNING - 任务 2badc529-6ead-4cf6-b086-118ba9be27a5 没有活跃的WebSocket连接，更新未发送
2025-05-09 15:04:58 - app.services.vector_store - INFO - 初始化向量存储服务
2025-05-09 15:04:58 - app.services.vector_store - INFO - 向量存储模式: 真实
2025-05-09 15:04:58 - app.services.vector_store - INFO - 尝试连接到Qdrant: URL=http://wangigor.ddns.net:30063
2025-05-09 15:04:58 - app.services.vector_store - WARNING - 未配置Qdrant API Key
2025-05-09 15:04:58 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-09 15:04:58 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-09 15:04:58 - app.services.vector_store - INFO - 成功连接到Qdrant服务器
2025-05-09 15:04:58 - app.services.vector_store - INFO - 检查或创建集合: knowledge_base
2025-05-09 15:04:58 - app.routers.websockets - WARNING - 任务 2badc529-6ead-4cf6-b086-118ba9be27a5 没有活跃的WebSocket连接，更新未发送
2025-05-09 15:04:58 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections "HTTP/1.1 200 OK"
2025-05-09 15:04:58 - app.services.vector_store - INFO - 集合 knowledge_base 已存在
2025-05-09 15:04:58 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections/knowledge_base "HTTP/1.1 200 OK"
2025-05-09 15:04:58 - app.routers.websockets - WARNING - 任务 2badc529-6ead-4cf6-b086-118ba9be27a5 没有活跃的WebSocket连接，更新未发送
2025-05-09 15:04:58 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063 "HTTP/1.1 200 OK"
2025-05-09 15:04:58 - app.services.vector_store - INFO - 成功初始化Qdrant客户端
2025-05-09 15:04:58 - app.services.vector_store - INFO - 开始获取嵌入模型...
2025-05-09 15:04:58 - app.routers.websockets - WARNING - 任务 2badc529-6ead-4cf6-b086-118ba9be27a5 没有活跃的WebSocket连接，更新未发送
2025-05-09 15:04:58 - app.routers.websockets - WARNING - 任务 2badc529-6ead-4cf6-b086-118ba9be27a5 没有活跃的WebSocket连接，更新未发送
2025-05-09 15:04:58 - app.routers.websockets - WARNING - 任务 2badc529-6ead-4cf6-b086-118ba9be27a5 没有活跃的WebSocket连接，更新未发送
2025-05-09 15:04:58 - app.services.vector_store - INFO - 嵌入模型测试成功，向量维度: 1536
2025-05-09 15:04:58 - app.services.vector_store - INFO - 成功初始化 DashScope 嵌入模型
2025-05-09 15:04:58 - app.services.vector_store - INFO - 成功获取嵌入模型: client=<class 'dashscope.embeddings.text_embedding.TextEmbedding'> model='text-embedding-v1' dashscope_api_key='sk-17a9b27fcbc144e8be788209f045f7c8' max_retries=5
2025-05-09 15:04:58 - app.services.vector_store - INFO - 开始初始化QdrantVectorStore，参数: client=<qdrant_client.qdrant_client.QdrantClient object at 0x12a45f9d0>, collection_name=knowledge_base
2025-05-09 15:04:58 - httpx - INFO - HTTP Request: GET http://wangigor.ddns.net:30063/collections/knowledge_base "HTTP/1.1 200 OK"
2025-05-09 15:04:59 - app.services.vector_store - INFO - 成功初始化向量存储: knowledge_base
2025-05-09 15:04:59 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-09 15:04:59 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-09 15:04:59 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-09 15:04:59 - app.auth.dependencies - INFO - WebSocket用户认证成功: wangigor (ID: 1)
2025-05-09 15:04:59 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-09 15:04:59 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-05-09 15:04:59 - app.ws.connection_manager - ERROR - 建立WebSocket连接失败: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-09 15:04:59 - app.routers.websockets - WARNING - 任务 2badc529-6ead-4cf6-b086-118ba9be27a5 没有活跃的WebSocket连接，更新未发送
2025-05-09 15:04:59 - app.routers.websockets - WARNING - 任务 2badc529-6ead-4cf6-b086-118ba9be27a5 没有活跃的WebSocket连接，更新未发送
2025-05-09 15:05:00 - app.routers.websockets - WARNING - 任务 2badc529-6ead-4cf6-b086-118ba9be27a5 没有活跃的WebSocket连接，更新未发送
2025-05-09 15:05:00 - app.routers.websockets - WARNING - 任务 2badc529-6ead-4cf6-b086-118ba9be27a5 没有活跃的WebSocket连接，更新未发送
2025-05-09 15:05:04 - app.auth.dependencies - INFO - 使用用户名 'wangigor' 查询用户
2025-05-09 15:05:04 - app.auth.dependencies - INFO - 用户认证成功: wangigor (ID: 1)
2025-07-03 11:13:58 - root - INFO - 日志系统初始化完成
2025-07-03 11:14:00 - app.main - INFO - 数据库表创建完成
2025-07-03 11:14:01 - app.services.llm_client_service - INFO - 重新初始化所有LLM实例
2025-07-03 11:14:01 - app.services.llm_client_service - INFO - 清空LLM实例缓存
2025-07-03 11:14:01 - app.services.llm_client_service - INFO - 创建新的对话LLM实例: streaming=True
2025-07-03 11:14:01 - app.services.llm_client_service - INFO - 创建新的处理LLM实例: streaming=False
2025-07-03 11:14:01 - app.services.llm_client_service - INFO - LLM实例重新初始化完成
2025-07-03 11:14:01 - app.main - INFO - LLM 实例重新初始化完成
2025-07-03 11:14:06 - root - INFO - 日志系统初始化完成
2025-07-03 11:14:06 - app.main - INFO - 数据库表创建完成
2025-07-03 11:14:06 - app.services.llm_client_service - INFO - 重新初始化所有LLM实例
2025-07-03 11:14:06 - app.services.llm_client_service - INFO - 清空LLM实例缓存
2025-07-03 11:14:06 - app.services.llm_client_service - INFO - 创建新的对话LLM实例: streaming=True
2025-07-03 11:14:06 - app.services.llm_client_service - INFO - 创建新的处理LLM实例: streaming=False
2025-07-03 11:14:06 - app.services.llm_client_service - INFO - LLM实例重新初始化完成
2025-07-03 11:14:06 - app.main - INFO - LLM 实例重新初始化完成
2025-07-03 11:14:12 - root - INFO - 日志系统初始化完成
2025-07-03 11:14:12 - app.main - INFO - 数据库表创建完成
2025-07-03 11:14:12 - app.services.llm_client_service - INFO - 重新初始化所有LLM实例
2025-07-03 11:14:12 - app.services.llm_client_service - INFO - 清空LLM实例缓存
2025-07-03 11:14:12 - app.services.llm_client_service - INFO - 创建新的对话LLM实例: streaming=True
2025-07-03 11:14:12 - app.services.llm_client_service - INFO - 创建新的处理LLM实例: streaming=False
2025-07-03 11:14:12 - app.services.llm_client_service - INFO - LLM实例重新初始化完成
2025-07-03 11:14:12 - app.main - INFO - LLM 实例重新初始化完成
2025-07-03 11:14:17 - root - INFO - 日志系统初始化完成
2025-07-03 11:14:18 - app.main - INFO - 数据库表创建完成
2025-07-03 11:14:18 - app.services.llm_client_service - INFO - 重新初始化所有LLM实例
2025-07-03 11:14:18 - app.services.llm_client_service - INFO - 清空LLM实例缓存
2025-07-03 11:14:18 - app.services.llm_client_service - INFO - 创建新的对话LLM实例: streaming=True
2025-07-03 11:14:18 - app.services.llm_client_service - INFO - 创建新的处理LLM实例: streaming=False
2025-07-03 11:14:18 - app.services.llm_client_service - INFO - LLM实例重新初始化完成
2025-07-03 11:14:18 - app.main - INFO - LLM 实例重新初始化完成
2025-07-03 11:14:23 - root - INFO - 日志系统初始化完成
2025-07-03 11:14:23 - app.main - INFO - 数据库表创建完成
2025-07-03 11:14:24 - app.services.llm_client_service - INFO - 重新初始化所有LLM实例
2025-07-03 11:14:24 - app.services.llm_client_service - INFO - 清空LLM实例缓存
2025-07-03 11:14:24 - app.services.llm_client_service - INFO - 创建新的对话LLM实例: streaming=True
2025-07-03 11:14:24 - app.services.llm_client_service - INFO - 创建新的处理LLM实例: streaming=False
2025-07-03 11:14:24 - app.services.llm_client_service - INFO - LLM实例重新初始化完成
2025-07-03 11:14:24 - app.main - INFO - LLM 实例重新初始化完成
2025-07-03 11:14:29 - root - INFO - 日志系统初始化完成
2025-07-03 11:14:30 - app.main - INFO - 数据库表创建完成
2025-07-03 11:14:30 - app.services.llm_client_service - INFO - 重新初始化所有LLM实例
2025-07-03 11:14:30 - app.services.llm_client_service - INFO - 清空LLM实例缓存
2025-07-03 11:14:30 - app.services.llm_client_service - INFO - 创建新的对话LLM实例: streaming=True
2025-07-03 11:14:30 - app.services.llm_client_service - INFO - 创建新的处理LLM实例: streaming=False
2025-07-03 11:14:30 - app.services.llm_client_service - INFO - LLM实例重新初始化完成
2025-07-03 11:14:30 - app.main - INFO - LLM 实例重新初始化完成
2025-07-03 11:14:35 - root - INFO - 日志系统初始化完成
2025-07-03 11:14:35 - app.main - INFO - 数据库表创建完成
2025-07-03 11:14:35 - app.services.llm_client_service - INFO - 重新初始化所有LLM实例
2025-07-03 11:14:35 - app.services.llm_client_service - INFO - 清空LLM实例缓存
2025-07-03 11:14:35 - app.services.llm_client_service - INFO - 创建新的对话LLM实例: streaming=True
2025-07-03 11:14:35 - app.services.llm_client_service - INFO - 创建新的处理LLM实例: streaming=False
2025-07-03 11:14:35 - app.services.llm_client_service - INFO - LLM实例重新初始化完成
2025-07-03 11:14:35 - app.main - INFO - LLM 实例重新初始化完成
2025-07-03 11:14:42 - root - INFO - 日志系统初始化完成
2025-07-03 11:14:43 - app.main - INFO - 数据库表创建完成
2025-07-03 11:14:43 - app.services.llm_client_service - INFO - 重新初始化所有LLM实例
2025-07-03 11:14:43 - app.services.llm_client_service - INFO - 清空LLM实例缓存
2025-07-03 11:14:43 - app.services.llm_client_service - INFO - 创建新的对话LLM实例: streaming=True
2025-07-03 11:14:43 - app.services.llm_client_service - INFO - 创建新的处理LLM实例: streaming=False
2025-07-03 11:14:43 - app.services.llm_client_service - INFO - LLM实例重新初始化完成
2025-07-03 11:14:43 - app.main - INFO - LLM 实例重新初始化完成
2025-07-03 11:14:48 - root - INFO - 日志系统初始化完成
2025-07-03 11:14:48 - app.main - INFO - 数据库表创建完成
2025-07-03 11:14:48 - app.services.llm_client_service - INFO - 重新初始化所有LLM实例
2025-07-03 11:14:48 - app.services.llm_client_service - INFO - 清空LLM实例缓存
2025-07-03 11:14:48 - app.services.llm_client_service - INFO - 创建新的对话LLM实例: streaming=True
2025-07-03 11:14:48 - app.services.llm_client_service - INFO - 创建新的处理LLM实例: streaming=False
2025-07-03 11:14:48 - app.services.llm_client_service - INFO - LLM实例重新初始化完成
2025-07-03 11:14:48 - app.main - INFO - LLM 实例重新初始化完成
2025-07-03 11:15:20 - root - INFO - 日志系统初始化完成
2025-07-03 11:15:20 - app.main - INFO - 数据库表创建完成
